"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4543],{4543:function(t,e,n){n.r(e),n.d(e,{Data:function(){return i},Format:function(){return r},NtExecutable:function(){return F},NtExecutableResource:function(){return $},Resource:function(){return o},generateExecutableWithSign:function(){return We},version:function(){return it}});var r={};n.r(r),n.d(r,{ArrayFormatBase:function(){return c},FormatBase:function(){return a},ImageDataDirectoryArray:function(){return p},ImageDirectoryEntry:function(){return h},ImageDosHeader:function(){return I},ImageFileHeader:function(){return _},ImageNtHeaders:function(){return x},ImageOptionalHeader:function(){return j},ImageOptionalHeader64:function(){return L},ImageSectionHeaderArray:function(){return B},findImageSectionBlockByDirectoryEntry:function(){return rt},getImageDosHeader:function(){return tt},getImageNtHeadersByDosHeader:function(){return et},getImageSectionHeadersByNtHeaders:function(){return nt}});var i={};n.r(i),n.d(i,{IconFile:function(){return yt},IconItem:function(){return dt},RawIconItem:function(){return vt}});var o={};n.r(o),n.d(o,{IconGroupEntry:function(){return mt},StringTable:function(){return Ot},VersionFileDriverSubtype:function(){return Dt},VersionFileFlags:function(){return St},VersionFileFontSubtype:function(){return It},VersionFileOS:function(){return _t},VersionFileType:function(){return Pt},VersionInfo:function(){return Ht}});var a=function(){function t(t){this.view=t}return t.prototype.copyTo=function(t,e){new Uint8Array(t,e,this.view.byteLength).set(new Uint8Array(this.view.buffer,this.view.byteOffset,this.view.byteLength))},Object.defineProperty(t.prototype,"byteLength",{get:function(){return this.view.byteLength},enumerable:!1,configurable:!0}),t}(),s=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),u=function(t){function e(e){return t.call(this,e)||this}return s(e,t),e.prototype.forEach=function(t){var e=this.length,n=[];n.length=e;for(var r=0;r<e;++r)n[r]=this.get(r);for(r=0;r<e;++r)t(n[r],r,this)},e.prototype._iterator=function(){return new(function(){function t(t){this.base=t,this.i=0}return t.prototype.next=function(){return this.i===this.base.length?{value:void 0,done:!0}:{value:this.base.get(this.i++),done:!1}},t}())(this)},e}(a);"undefined"!=typeof Symbol&&(u.prototype[Symbol.iterator]=u.prototype._iterator);var f,c=u,l=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),p=function(t){function e(e){var n=t.call(this,e)||this;return n.length=16,n}return l(e,t),e.from=function(t,n){return void 0===n&&(n=0),new e(new DataView(t,n,128))},e.prototype.get=function(t){return{virtualAddress:this.view.getUint32(8*t,!0),size:this.view.getUint32(4+8*t,!0)}},e.prototype.set=function(t,e){this.view.setUint32(8*t,e.virtualAddress,!0),this.view.setUint32(4+8*t,e.size,!0)},e.prototype.findIndexByVirtualAddress=function(t){for(var e=0;e<16;++e){var n=this.view.getUint32(8*e,!0),r=this.view.getUint32(4+8*e,!0);if(t>=n&&t<n+r)return e}return null},e.size=128,e.itemSize=8,e}(c);!function(t){t[t.Export=0]="Export",t[t.Import=1]="Import",t[t.Resource=2]="Resource",t[t.Exception=3]="Exception",t[t.Certificate=4]="Certificate",t[t.Security=4]="Security",t[t.BaseRelocation=5]="BaseRelocation",t[t.Debug=6]="Debug",t[t.Architecture=7]="Architecture",t[t.GlobalPointer=8]="GlobalPointer",t[t.Tls=9]="Tls",t[t.TLS=9]="TLS",t[t.LoadConfig=10]="LoadConfig",t[t.BoundImport=11]="BoundImport",t[t.Iat=12]="Iat",t[t.IAT=12]="IAT",t[t.DelayImport=13]="DelayImport",t[t.ComDescriptor=14]="ComDescriptor",t[t.COMDescriptor=14]="COMDescriptor"}(f||(f={}));var h=f,g=n(8764).Buffer;function d(t){var e={};return Object.keys(t).forEach((function(n){e[n]=t[n]})),e}function v(t,e,n){if("buffer"in t){var r=t.byteOffset,i=t.byteLength;return void 0!==e&&(r+=e,i-=e),void 0!==n&&(i=n),new DataView(t.buffer,r,i)}return new DataView(t,e,n)}function y(t,e){for(var n=I.from(t),r=new DataView(t),i=n.newHeaderAddress+88,o=0,a=4294967296,s=function(t){(o+=t)>=a&&(o=o%a+(o/a|0))},u=r.byteLength,f=u%4,c=u-f,l=0;l<c;l+=4)l!==i&&s(r.getUint32(l,!0));if(0!==f){var p=0;for(l=0;l<f;l++)p|=r.getUint8(c+l)<<8*(3-l);s(p)}return o=(65535&o)+(o>>>16),o=(65535&(o+=o>>>16))+u,e&&r.setUint32(i,o,!0),o}function w(t,e){return Math.floor((t+e-1)/e)*e}function b(t,e,n,r,i){var o="buffer"in t?new Uint8Array(t.buffer,t.byteOffset+(e||0),i):new Uint8Array(t,e,i),a="buffer"in n?new Uint8Array(n.buffer,n.byteOffset+(r||0),i):new Uint8Array(n,r,i);o.set(a)}function m(t,e,n){var r=new ArrayBuffer(n);return b(r,0,t,e,n),r}function U(t){if("buffer"in t){var e=new ArrayBuffer(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),e}return e=new ArrayBuffer(t.byteLength),new Uint8Array(e).set(new Uint8Array(t)),e}function O(t,e,n){for(var r=0,i=0;i<n&&0!==t.getUint8(e+i);++i)++r;if(void 0!==g)return g.from(t.buffer,t.byteOffset+e,r).toString("utf8");if("undefined"!=typeof decodeURIComponent){var o="";for(i=0;i<r;++i)o+=(a=t.getUint8(e+i))<16?"%0"+a.toString(16):"%"+a.toString(16);return decodeURIComponent(o)}for(o="",i=0;i<r;++i){var a=t.getUint8(e+i);o+=String.fromCharCode(a)}return o}function A(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);if(void 0!==g)return("buffer"in t?g.from(t.buffer,t.byteOffset,t.byteLength):g.from(t)).toString("utf8");var e;if(e="buffer"in t?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t),"undefined"!=typeof decodeURIComponent){for(var n="",r=0;r<e.length;++r)n+=(i=e[r])<16?"%0"+i.toString(16):"%"+i.toString(16);return decodeURIComponent(n)}for(n="",r=0;r<e.length;++r){var i=e[r];n+=String.fromCharCode(i)}return n}function S(t){if("undefined"!=typeof TextEncoder)return U((new TextEncoder).encode(t));if(void 0!==g)return U(g.from(t,"utf8"));if("undefined"!=typeof encodeURIComponent){for(var e=encodeURIComponent(t),n=0,r=0;r<e.length;++n)37===(s=e.charCodeAt(r))?r+=3:++r;for(var i=new ArrayBuffer(n),o=new Uint8Array(i),a=(r=0,0);r<e.length;++a){var s;if(37===(s=e.charCodeAt(r))){var u=parseInt(e.substring(r+1,r+3),16);o[a]=u,r+=3}else o[a]=s,++r}return i}return i=new ArrayBuffer(t.length),new Uint8Array(i).set([].map.call(t,(function(t){return t.charCodeAt(0)}))),i}var D=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),I=function(t){function e(e){return t.call(this,e)||this}return D(e,t),e.from=function(t,n){return void 0===n&&(n=0),new e(v(t,n,64))},e.prototype.isValid=function(){return this.magic===e.DEFAULT_MAGIC},Object.defineProperty(e.prototype,"magic",{get:function(){return this.view.getUint16(0,!0)},set:function(t){this.view.setUint16(0,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastPageSize",{get:function(){return this.view.getUint16(2,!0)},set:function(t){this.view.setUint16(2,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pages",{get:function(){return this.view.getUint16(4,!0)},set:function(t){this.view.setUint16(4,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"relocations",{get:function(){return this.view.getUint16(6,!0)},set:function(t){this.view.setUint16(6,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"headerSizeInParagraph",{get:function(){return this.view.getUint16(8,!0)},set:function(t){this.view.setUint16(8,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minAllocParagraphs",{get:function(){return this.view.getUint16(10,!0)},set:function(t){this.view.setUint16(10,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxAllocParagraphs",{get:function(){return this.view.getUint16(12,!0)},set:function(t){this.view.setUint16(12,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"initialSS",{get:function(){return this.view.getUint16(14,!0)},set:function(t){this.view.setUint16(14,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"initialSP",{get:function(){return this.view.getUint16(16,!0)},set:function(t){this.view.setUint16(16,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"checkSum",{get:function(){return this.view.getUint16(18,!0)},set:function(t){this.view.setUint16(18,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"initialIP",{get:function(){return this.view.getUint16(20,!0)},set:function(t){this.view.setUint16(20,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"initialCS",{get:function(){return this.view.getUint16(22,!0)},set:function(t){this.view.setUint16(22,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"relocationTableAddress",{get:function(){return this.view.getUint16(24,!0)},set:function(t){this.view.setUint16(24,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"overlayNum",{get:function(){return this.view.getUint16(26,!0)},set:function(t){this.view.setUint16(26,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oemId",{get:function(){return this.view.getUint16(36,!0)},set:function(t){this.view.setUint16(36,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oemInfo",{get:function(){return this.view.getUint16(38,!0)},set:function(t){this.view.setUint16(38,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newHeaderAddress",{get:function(){return this.view.getUint32(60,!0)},set:function(t){this.view.setUint32(60,t,!0)},enumerable:!1,configurable:!0}),e.size=64,e.DEFAULT_MAGIC=23117,e}(a),E=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_=function(t){function e(e){return t.call(this,e)||this}return E(e,t),e.from=function(t,n){return void 0===n&&(n=0),new e(new DataView(t,n,20))},Object.defineProperty(e.prototype,"machine",{get:function(){return this.view.getUint16(0,!0)},set:function(t){this.view.setUint16(0,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numberOfSections",{get:function(){return this.view.getUint16(2,!0)},set:function(t){this.view.setUint16(2,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timeDateStamp",{get:function(){return this.view.getUint32(4,!0)},set:function(t){this.view.setUint32(4,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pointerToSymbolTable",{get:function(){return this.view.getUint32(8,!0)},set:function(t){this.view.setUint32(8,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numberOfSymbols",{get:function(){return this.view.getUint32(12,!0)},set:function(t){this.view.setUint32(12,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeOfOptionalHeader",{get:function(){return this.view.getUint16(16,!0)},set:function(t){this.view.setUint16(16,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"characteristics",{get:function(){return this.view.getUint16(18,!0)},set:function(t){this.view.setUint16(18,t,!0)},enumerable:!1,configurable:!0}),e.size=20,e}(a),P=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),j=function(t){function e(e){return t.call(this,e)||this}return P(e,t),e.from=function(t,n){return void 0===n&&(n=0),new e(new DataView(t,n,96))},Object.defineProperty(e.prototype,"magic",{get:function(){return this.view.getUint16(0,!0)},set:function(t){this.view.setUint16(0,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"majorLinkerVersion",{get:function(){return this.view.getUint8(2)},set:function(t){this.view.setUint8(2,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minorLinkerVersion",{get:function(){return this.view.getUint8(3)},set:function(t){this.view.setUint8(3,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeOfCode",{get:function(){return this.view.getUint32(4,!0)},set:function(t){this.view.setUint32(4,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeOfInitializedData",{get:function(){return this.view.getUint32(8,!0)},set:function(t){this.view.setUint32(8,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeOfUninitializedData",{get:function(){return this.view.getUint32(12,!0)},set:function(t){this.view.setUint32(12,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"addressOfEntryPoint",{get:function(){return this.view.getUint32(16,!0)},set:function(t){this.view.setUint32(16,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baseOfCode",{get:function(){return this.view.getUint32(20,!0)},set:function(t){this.view.setUint32(20,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baseOfData",{get:function(){return this.view.getUint32(24,!0)},set:function(t){this.view.setUint32(24,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"imageBase",{get:function(){return this.view.getUint32(28,!0)},set:function(t){this.view.setUint32(28,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sectionAlignment",{get:function(){return this.view.getUint32(32,!0)},set:function(t){this.view.setUint32(32,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fileAlignment",{get:function(){return this.view.getUint32(36,!0)},set:function(t){this.view.setUint32(36,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"majorOperatingSystemVersion",{get:function(){return this.view.getUint16(40,!0)},set:function(t){this.view.setUint16(40,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minorOperatingSystemVersion",{get:function(){return this.view.getUint16(42,!0)},set:function(t){this.view.setUint16(42,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"majorImageVersion",{get:function(){return this.view.getUint16(44,!0)},set:function(t){this.view.setUint16(44,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minorImageVersion",{get:function(){return this.view.getUint16(46,!0)},set:function(t){this.view.setUint16(46,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"majorSubsystemVersion",{get:function(){return this.view.getUint16(48,!0)},set:function(t){this.view.setUint16(48,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minorSubsystemVersion",{get:function(){return this.view.getUint16(50,!0)},set:function(t){this.view.setUint16(50,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"win32VersionValue",{get:function(){return this.view.getUint32(52,!0)},set:function(t){this.view.setUint32(52,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeOfImage",{get:function(){return this.view.getUint32(56,!0)},set:function(t){this.view.setUint32(56,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeOfHeaders",{get:function(){return this.view.getUint32(60,!0)},set:function(t){this.view.setUint32(60,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"checkSum",{get:function(){return this.view.getUint32(64,!0)},set:function(t){this.view.setUint32(64,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"subsystem",{get:function(){return this.view.getUint16(68,!0)},set:function(t){this.view.setUint16(68,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dllCharacteristics",{get:function(){return this.view.getUint16(70,!0)},set:function(t){this.view.setUint16(70,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeOfStackReserve",{get:function(){return this.view.getUint32(72,!0)},set:function(t){this.view.setUint32(72,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeOfStackCommit",{get:function(){return this.view.getUint32(76,!0)},set:function(t){this.view.setUint32(76,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeOfHeapReserve",{get:function(){return this.view.getUint32(80,!0)},set:function(t){this.view.setUint32(80,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeOfHeapCommit",{get:function(){return this.view.getUint32(84,!0)},set:function(t){this.view.setUint32(84,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loaderFlags",{get:function(){return this.view.getUint32(88,!0)},set:function(t){this.view.setUint32(88,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numberOfRvaAndSizes",{get:function(){return this.view.getUint32(92,!0)},set:function(t){this.view.setUint32(92,t,!0)},enumerable:!1,configurable:!0}),e.size=96,e.DEFAULT_MAGIC=267,e}(a),R=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function z(t,e){return 4294967296*t.getUint32(e+4,!0)+t.getUint32(e,!0)}function V(t,e,n){t.setUint32(e,4294967295&n,!0),t.setUint32(e+4,Math.floor(n/4294967296),!0)}function C(t,e){if("undefined"==typeof BigInt)throw new Error("BigInt not supported");return BigInt(4294967296)*BigInt(t.getUint32(e+4,!0))+BigInt(t.getUint32(e,!0))}function T(t,e,n){if("undefined"==typeof BigInt)throw new Error("BigInt not supported");t.setUint32(e,Number(n&BigInt(4294967295)),!0),t.setUint32(e+4,Math.floor(Number(n/BigInt(4294967296)&BigInt(4294967295))),!0)}var L=function(t){function e(e){return t.call(this,e)||this}return R(e,t),e.from=function(t,n){return void 0===n&&(n=0),new e(new DataView(t,n,112))},Object.defineProperty(e.prototype,"magic",{get:function(){return this.view.getUint16(0,!0)},set:function(t){this.view.setUint16(0,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"majorLinkerVersion",{get:function(){return this.view.getUint8(2)},set:function(t){this.view.setUint8(2,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minorLinkerVersion",{get:function(){return this.view.getUint8(3)},set:function(t){this.view.setUint8(3,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeOfCode",{get:function(){return this.view.getUint32(4,!0)},set:function(t){this.view.setUint32(4,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeOfInitializedData",{get:function(){return this.view.getUint32(8,!0)},set:function(t){this.view.setUint32(8,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeOfUninitializedData",{get:function(){return this.view.getUint32(12,!0)},set:function(t){this.view.setUint32(12,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"addressOfEntryPoint",{get:function(){return this.view.getUint32(16,!0)},set:function(t){this.view.setUint32(16,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baseOfCode",{get:function(){return this.view.getUint32(20,!0)},set:function(t){this.view.setUint32(20,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"imageBase",{get:function(){return z(this.view,24)},set:function(t){V(this.view,24,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"imageBaseBigInt",{get:function(){return C(this.view,24)},set:function(t){T(this.view,24,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sectionAlignment",{get:function(){return this.view.getUint32(32,!0)},set:function(t){this.view.setUint32(32,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fileAlignment",{get:function(){return this.view.getUint32(36,!0)},set:function(t){this.view.setUint32(36,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"majorOperatingSystemVersion",{get:function(){return this.view.getUint16(40,!0)},set:function(t){this.view.setUint16(40,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minorOperatingSystemVersion",{get:function(){return this.view.getUint16(42,!0)},set:function(t){this.view.setUint16(42,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"majorImageVersion",{get:function(){return this.view.getUint16(44,!0)},set:function(t){this.view.setUint16(44,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minorImageVersion",{get:function(){return this.view.getUint16(46,!0)},set:function(t){this.view.setUint16(46,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"majorSubsystemVersion",{get:function(){return this.view.getUint16(48,!0)},set:function(t){this.view.setUint16(48,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minorSubsystemVersion",{get:function(){return this.view.getUint16(50,!0)},set:function(t){this.view.setUint16(50,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"win32VersionValue",{get:function(){return this.view.getUint32(52,!0)},set:function(t){this.view.setUint32(52,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeOfImage",{get:function(){return this.view.getUint32(56,!0)},set:function(t){this.view.setUint32(56,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeOfHeaders",{get:function(){return this.view.getUint32(60,!0)},set:function(t){this.view.setUint32(60,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"checkSum",{get:function(){return this.view.getUint32(64,!0)},set:function(t){this.view.setUint32(64,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"subsystem",{get:function(){return this.view.getUint16(68,!0)},set:function(t){this.view.setUint16(68,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dllCharacteristics",{get:function(){return this.view.getUint16(70,!0)},set:function(t){this.view.setUint16(70,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeOfStackReserve",{get:function(){return z(this.view,72)},set:function(t){V(this.view,72,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeOfStackReserveBigInt",{get:function(){return C(this.view,72)},set:function(t){T(this.view,72,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeOfStackCommit",{get:function(){return z(this.view,80)},set:function(t){V(this.view,80,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeOfStackCommitBigInt",{get:function(){return C(this.view,80)},set:function(t){T(this.view,80,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeOfHeapReserve",{get:function(){return z(this.view,88)},set:function(t){V(this.view,88,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeOfHeapReserveBigInt",{get:function(){return C(this.view,88)},set:function(t){T(this.view,88,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeOfHeapCommit",{get:function(){return z(this.view,96)},set:function(t){V(this.view,96,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeOfHeapCommitBigInt",{get:function(){return C(this.view,96)},set:function(t){T(this.view,96,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loaderFlags",{get:function(){return this.view.getUint32(104,!0)},set:function(t){this.view.setUint32(104,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numberOfRvaAndSizes",{get:function(){return this.view.getUint32(108,!0)},set:function(t){this.view.setUint32(108,t,!0)},enumerable:!1,configurable:!0}),e.size=112,e.DEFAULT_MAGIC=523,e}(a),H=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),x=function(t){function e(e){return t.call(this,e)||this}return H(e,t),e.from=function(t,n){void 0===n&&(n=0);var r=v(t,n+_.size,6).getUint16(4,!0),i=4+_.size+p.size;return r===L.DEFAULT_MAGIC?i+=L.size:i+=j.size,new e(v(t,n,i))},e.prototype.isValid=function(){return this.signature===e.DEFAULT_SIGNATURE},e.prototype.is32bit=function(){return this.view.getUint16(_.size+4,!0)===j.DEFAULT_MAGIC},Object.defineProperty(e.prototype,"signature",{get:function(){return this.view.getUint32(0,!0)},set:function(t){this.view.setUint32(0,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fileHeader",{get:function(){return _.from(this.view.buffer,this.view.byteOffset+4)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"optionalHeader",{get:function(){var t=_.size+4;return this.view.getUint16(t,!0)===L.DEFAULT_MAGIC?L.from(this.view.buffer,this.view.byteOffset+t):j.from(this.view.buffer,this.view.byteOffset+t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"optionalHeaderDataDirectory",{get:function(){return p.from(this.view.buffer,this.view.byteOffset+this.getDataDirectoryOffset())},enumerable:!1,configurable:!0}),e.prototype.getDataDirectoryOffset=function(){var t=_.size+4;return this.view.getUint16(t,!0)===L.DEFAULT_MAGIC?t+=L.size:t+=j.size,t},e.prototype.getSectionHeaderOffset=function(){return this.getDataDirectoryOffset()+p.size},e.DEFAULT_SIGNATURE=17744,e}(a),k=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),B=function(t){function e(e,n){var r=t.call(this,e)||this;return r.length=n,r}return k(e,t),e.from=function(t,n,r){return void 0===r&&(r=0),new e(new DataView(t,r,40*n),n)},e.prototype.get=function(t){return{name:O(this.view,40*t,8),virtualSize:this.view.getUint32(8+40*t,!0),virtualAddress:this.view.getUint32(12+40*t,!0),sizeOfRawData:this.view.getUint32(16+40*t,!0),pointerToRawData:this.view.getUint32(20+40*t,!0),pointerToRelocations:this.view.getUint32(24+40*t,!0),pointerToLineNumbers:this.view.getUint32(28+40*t,!0),numberOfRelocations:this.view.getUint16(32+40*t,!0),numberOfLineNumbers:this.view.getUint16(34+40*t,!0),characteristics:this.view.getUint32(36+40*t,!0)}},e.prototype.set=function(t,e){!function(t,e,n,r){if(void 0!==g){var i=new Uint8Array(t.buffer,t.byteOffset+e,8);i.set(new Uint8Array(8)),i.set(g.from(r,"utf8").subarray(0,8))}else if("undefined"!=typeof encodeURIComponent)for(var o=encodeURIComponent(r),a=0,s=0;a<8;++a)if(s>=o.length)t.setUint8(a+e,0);else if(37===(f=o.charCodeAt(s))){var u=parseInt(o.substr(s+1,2),16);"number"!=typeof u||isNaN(u)?t.setUint8(a+e,0):t.setUint8(a+e,u),s+=3}else t.setUint8(a+e,f);else for(a=0,s=0;a<8;++a)if(s>=r.length)t.setUint8(a+e,0);else{var f=r.charCodeAt(s);t.setUint8(a+e,255&f)}}(this.view,40*t,0,e.name),this.view.setUint32(8+40*t,e.virtualSize,!0),this.view.setUint32(12+40*t,e.virtualAddress,!0),this.view.setUint32(16+40*t,e.sizeOfRawData,!0),this.view.setUint32(20+40*t,e.pointerToRawData,!0),this.view.setUint32(24+40*t,e.pointerToRelocations,!0),this.view.setUint32(28+40*t,e.pointerToLineNumbers,!0),this.view.setUint16(32+40*t,e.numberOfRelocations,!0),this.view.setUint16(34+40*t,e.numberOfLineNumbers,!0),this.view.setUint32(36+40*t,e.characteristics,!0)},e.itemSize=40,e}(c),M=new Uint8Array([14,31,186,14,0,180,9,205,33,184,1,76,205,33,68,79,83,32,109,111,100,101,32,110,111,116,32,115,117,112,112,111,114,116,101,100,46,13,13,10,36,0,0,0,0,0,0,0]),N=w(I.size+M.length,128);var F=function(){function t(t,e,n){this._headers=t,this._sections=e,this._ex=n;var r=I.from(t),i=x.from(t,r.newHeaderAddress);this._dh=r,this._nh=i,this._dda=i.optionalHeaderDataDirectory,e.sort((function(t,e){var n=t.info.pointerToRawData,r=t.info.pointerToRawData;if(n!==r)return n-r;var i=t.info.virtualAddress,o=e.info.virtualAddress;return i===o?t.info.virtualSize-e.info.virtualSize:i-o}))}return t.createEmpty=function(t,e){return void 0===t&&(t=!1),void 0===e&&(e=!0),this.from(function(t,e){var n=w(N+function(t){return 4+_.size+(t?j.size:L.size)+p.size}(t),512),r=new ArrayBuffer(n);return function(t){var e=I.from(t);e.magic=I.DEFAULT_MAGIC,e.lastPageSize=N%512,e.pages=Math.ceil(N/512),e.relocations=0,e.headerSizeInParagraph=Math.ceil(I.size/16),e.minAllocParagraphs=0,e.maxAllocParagraphs=65535,e.initialSS=0,e.initialSP=128,e.relocationTableAddress=I.size,e.newHeaderAddress=N,b(t,I.size,M,0,M.length)}(r),function(t,e,n,r,i){var o,a;"buffer"in t?(o=t.buffer,a=t.byteOffset+e):(o=t,a=e),new DataView(o,a).setUint32(0,x.DEFAULT_SIGNATURE,!0);var s=_.from(o,a+4);s.machine=r?332:34404,s.numberOfSections=0,s.timeDateStamp=0,s.pointerToSymbolTable=0,s.numberOfSymbols=0,s.sizeOfOptionalHeader=(r?j.size:L.size)+p.size,s.characteristics=i?8450:258;var u=(r?j:L).from(o,a+4+_.size);u.magic=r?j.DEFAULT_MAGIC:L.DEFAULT_MAGIC,u.sizeOfCode=0,u.sizeOfInitializedData=0,u.sizeOfUninitializedData=0,u.addressOfEntryPoint=0,u.baseOfCode=4096,u.imageBase=r?16777216:6442450944,u.sectionAlignment=4096,u.fileAlignment=512,u.majorOperatingSystemVersion=6,u.minorOperatingSystemVersion=0,u.majorSubsystemVersion=6,u.minorSubsystemVersion=0,u.sizeOfHeaders=w(n,u.fileAlignment),u.subsystem=2,u.dllCharacteristics=64+(r?0:32)+256,u.sizeOfStackReserve=1048576,u.sizeOfStackCommit=4096,u.sizeOfHeapReserve=1048576,u.sizeOfHeapCommit=4096,u.numberOfRvaAndSizes=p.size/p.itemSize}(r,N,n,t,e),r}(t,e))},t.from=function(e,n){var r=I.from(e),i=x.from(e,r.newHeaderAddress);if(!r.isValid()||!i.isValid())throw new TypeError("Invalid binary format");if(i.fileHeader.numberOfSymbols>0)throw new Error("Binary with symbols is not supported now");var o=i.optionalHeader.fileAlignment,a=i.optionalHeaderDataDirectory.get(h.Certificate);if(a.size>0&&!(null==n?void 0:n.ignoreCert))throw new Error("Parsing signed executable binary is not allowed by default.");var s=r.newHeaderAddress+i.getSectionHeaderOffset(),u=i.fileHeader.numberOfSections,f=[],c=m(e,s,u*B.itemSize),l=B.from(c,u,0),p=w(s+u*B.itemSize,o);l.forEach((function(t){if(t.pointerToRawData&&t.sizeOfRawData){var n=m(e,t.pointerToRawData,t.sizeOfRawData);f.push({info:t,data:n});var r=w(t.pointerToRawData+t.sizeOfRawData,o);r>p&&(p=r)}else t.pointerToRawData=0,t.sizeOfRawData=0,f.push({info:t,data:null})}));var g=m(e,0,s),d=null,v=e.byteLength;return a.size>0&&(v=a.virtualAddress),p<v&&(d=m(e,p,v-p)),new t(g,f,d)},t.prototype.is32bit=function(){return this._nh.is32bit()},t.prototype.getTotalHeaderSize=function(){return this._headers.byteLength},Object.defineProperty(t.prototype,"dosHeader",{get:function(){return this._dh},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newHeader",{get:function(){return this._nh},enumerable:!1,configurable:!0}),t.prototype.getRawHeader=function(){return this._headers},t.prototype.getImageBase=function(){return this._nh.optionalHeader.imageBase},t.prototype.getFileAlignment=function(){return this._nh.optionalHeader.fileAlignment},t.prototype.getSectionAlignment=function(){return this._nh.optionalHeader.sectionAlignment},t.prototype.getAllSections=function(){return this._sections},t.prototype.getSectionByEntry=function(t){var e=this._dda.get(t),n=this._sections.filter((function(t){var n=t.info.virtualAddress+t.info.virtualSize;return e.virtualAddress>=t.info.virtualAddress&&e.virtualAddress<n})).shift();return void 0!==n?n:null},t.prototype.setSectionByEntry=function(t,e){var n=e?{data:e.data,info:e.info}:null,r=this._dda.get(t),i=r.size>0;if(n){var o=n.data?n.data.byteLength:0,a=this._nh.optionalHeader.fileAlignment,s=this._nh.optionalHeader.sectionAlignment,u=n.data?w(o,a):0,f=n.data?w(n.info.virtualSize,s):0;if(n.info.sizeOfRawData<u?n.info.sizeOfRawData=u:u=n.info.sizeOfRawData,i)this.replaceSectionImpl(r.virtualAddress,n.info,n.data);else{var c=0,l=w(this._headers.byteLength,a);this._sections.forEach((function(t){t.info.pointerToRawData&&l<=t.info.pointerToRawData&&(l=t.info.pointerToRawData+t.info.sizeOfRawData),c<=t.info.virtualAddress&&(c=t.info.virtualAddress+t.info.virtualSize)})),u||(l=0),c||(c=this.newHeader.optionalHeader.baseOfCode),c=w(c,s),n.info.pointerToRawData=l,n.info.virtualAddress=c,this._dda.set(t,{size:o,virtualAddress:c}),this._sections.push(n),this._nh.fileHeader.numberOfSections=this._sections.length,this._nh.optionalHeader.sizeOfImage=w(c+f,this._nh.optionalHeader.sectionAlignment)}}else if(i){this._dda.set(t,{size:0,virtualAddress:0});for(var p=this._sections.length,h=0;h<p;++h){var g=this._sections[h],d=g.info.virtualAddress,v=d+g.info.virtualSize;if(r.virtualAddress>=d&&r.virtualAddress<v){this._sections.splice(h,1),this._nh.fileHeader.numberOfSections=this._sections.length;break}}}},t.prototype.getExtraData=function(){return this._ex},t.prototype.setExtraData=function(t){this._ex=null===t?null:U(t)},t.prototype.generate=function(t){var e=this._dh,n=this._nh,r=e.newHeaderAddress+n.getSectionHeaderOffset(),i=r;i+=this._sections.length*B.itemSize;var o=n.optionalHeader.fileAlignment;i=w(i,o),this._sections.forEach((function(t){if(t.info.pointerToRawData){var e=t.info.pointerToRawData+t.info.sizeOfRawData;i<e&&(i=w(i=e,o))}}));var a=i;null!==this._ex&&(i+=this._ex.byteLength),"number"==typeof t&&(i+=t);var s=new ArrayBuffer(i),u=new Uint8Array(s);u.set(new Uint8Array(this._headers,0,r)),p.from(s,e.newHeaderAddress+n.getDataDirectoryOffset()).set(h.Certificate,{size:0,virtualAddress:0});var f=B.from(s,this._sections.length,r);return this._sections.forEach((function(t,e){t.data||(t.info.pointerToRawData=0,t.info.sizeOfRawData=0),f.set(e,t.info),t.data&&t.info.pointerToRawData&&u.set(new Uint8Array(t.data),t.info.pointerToRawData)})),null!==this._ex&&u.set(new Uint8Array(this._ex),a),0!==n.optionalHeader.checkSum&&y(s,!0),s},t.prototype.rearrangeSections=function(t,e,n,r){if(e||r){for(var i=this._nh,o=i.optionalHeader.sectionAlignment,a=this._dda,s=this._sections.length,u=0,f=0;f<s;++f){var c=this._sections[f],l=c.info.virtualAddress;if(r&&l>=n){var p=a.findIndexByVirtualAddress(l);l+=r,null!==p&&a.set(p,{virtualAddress:l,size:c.info.virtualSize}),c.info.virtualAddress=l}var h=c.info.pointerToRawData;e&&h>=t&&(c.info.pointerToRawData=h+e),u=w(c.info.virtualAddress+c.info.virtualSize,o)}i.optionalHeader.sizeOfImage=u}},t.prototype.replaceSectionImpl=function(t,e,n){for(var r=this._sections.length,i=0;i<r;++i){var o=this._sections[i];if(o.info.virtualAddress===t){var a=this._nh.optionalHeader.sectionAlignment,s=o.info.pointerToRawData,u=s+o.info.sizeOfRawData,f=t+w(o.info.virtualSize,a);o.info=d(e),o.info.virtualAddress=t,o.info.pointerToRawData=s,o.data=n;var c=s+e.sizeOfRawData,l=t+w(e.virtualSize,a);this.rearrangeSections(u,c-u,f,l-f);var p=this._dda,h=p.findIndexByVirtualAddress(t);null!==h&&p.set(h,{virtualAddress:t,size:e.virtualSize});break}}},t}();function G(t,e){var n=t.getUint16(e,!0),r="";e+=2;for(var i=0;i<n;++i)r+=String.fromCharCode(t.getUint16(e,!0)),e+=2;return r}function W(t,e,n,r,i){var o=r,a={name:n,languageTable:r,characteristics:t.getUint32(o,!0),dateTime:t.getUint32(o+4,!0),majorVersion:t.getUint16(o+8,!0),minorVersion:t.getUint16(o+10,!0)},s=t.getUint16(o+12,!0),u=t.getUint16(o+14,!0);o+=16;for(var f=0;f<s;++f){var c=2147483647&t.getUint32(o,!0);0==(2147483648&(l=t.getUint32(o+4,!0)))?(i(e,a,{lang:G(t,c),dataOffset:l}),o+=8):o+=8}for(f=0;f<u;++f){var l,p=2147483647&t.getUint32(o,!0);0==(2147483648&(l=t.getUint32(o+4,!0)))?(i(e,a,{lang:p,dataOffset:l}),o+=8):o+=8}}function K(t,e,n,r){var i=n,o={type:e,nameTable:n,characteristics:t.getUint32(i,!0),dateTime:t.getUint32(i+4,!0),majorVersion:t.getUint16(i+8,!0),minorVersion:t.getUint16(i+10,!0)},a=t.getUint16(i+12,!0),s=t.getUint16(i+14,!0);i+=16;for(var u=0;u<a;++u){var f=2147483647&t.getUint32(i,!0);2147483648&(c=t.getUint32(i+4,!0))?(c&=2147483647,W(t,o,G(t,f),c,r),i+=8):i+=8}for(u=0;u<s;++u){var c,l=2147483647&t.getUint32(i,!0);2147483648&(c=t.getUint32(i+4,!0))?(W(t,o,l,c&=2147483647,r),i+=8):i+=8}}function q(t,e,n){var r={},i={};n.forEach((function(t){"string"==typeof t.lang?(r[t.lang]=t,e.push(t.lang)):i[t.lang]=t}));var o=Object.keys(r);o.sort().forEach((function(e){t.s.push(r[e])}));var a=Object.keys(i);return a.map((function(t){return Number(t)})).sort((function(t,e){return t-e})).forEach((function(e){t.n.push(i[e])})),16+8*(o.length+a.length)}function X(t,e,n){var r={},i={};return n.forEach((function(t){var n,o;if("string"==typeof t.id){var a=null!==(n=r[t.id])&&void 0!==n?n:r[t.id]=[];e.push(t.id),a.push(t)}else(a=null!==(o=i[t.id])&&void 0!==o?o:i[t.id]=[]).push(t)})),16+Object.keys(r).sort().map((function(n){var i={id:n,s:[],n:[]};return t.s.push(i),q(i,e,r[n])})).reduce((function(t,e){return t+8+e}),0)+Object.keys(i).map((function(t){return Number(t)})).sort((function(t,e){return t-e})).map((function(n){var r={id:n,s:[],n:[]};return t.n.push(r),q(r,e,i[n])})).reduce((function(t,e){return t+8+e}),0)}function J(t){var e=t.length;return e>65535?65535:e}function Q(t,e){for(var n=e.length,r=0;r<n;++r){var i=e[r];if(i.text===t)return i.offset}throw new Error("Unexpected")}function Y(t,e,n,r){return t.setUint32(e,0,!0),t.setUint32(e+4,0,!0),t.setUint32(e+8,0,!0),t.setUint16(e+12,r.s.length,!0),t.setUint16(e+14,r.n.length,!0),e+=16,r.s.forEach((function(r){var i=Q(r.lang,n);t.setUint32(e,i,!0),t.setUint32(e+4,r.offset,!0),e+=8})),r.n.forEach((function(n){t.setUint32(e,n.lang,!0),t.setUint32(e+4,n.offset,!0),e+=8})),e}function Z(t,e,n,r,i){return t.setUint32(e,0,!0),t.setUint32(e+4,0,!0),t.setUint32(e+8,0,!0),t.setUint16(e+12,i.s.length,!0),t.setUint16(e+14,i.n.length,!0),e+=16,i.s.forEach((function(e){e.offset=n,n=Y(t,n,r,e)})),i.n.forEach((function(e){e.offset=n,n=Y(t,n,r,e)})),i.s.forEach((function(n){var i=Q(n.id,r);t.setUint32(e,i+2147483648,!0),t.setUint32(e+4,n.offset+2147483648,!0),e+=8})),i.n.forEach((function(n){t.setUint32(e,n.id,!0),t.setUint32(e+4,n.offset+2147483648,!0),e+=8})),n}var $=function(){function t(){this.dateTime=0,this.majorVersion=0,this.minorVersion=0,this.entries=[],this.sectionDataHeader=null,this.originalSize=0}return t.prototype.parse=function(t,e){if(t.data){var n=new DataView(t.data);this.dateTime=n.getUint32(4,!0),this.majorVersion=n.getUint16(8,!0),this.minorVersion=n.getUint16(10,!0);for(var r=n.getUint16(12,!0),i=n.getUint16(14,!0),o=16,a=[],s=function(r,i,o){var s=n.getUint32(o.dataOffset,!0)-t.info.virtualAddress,u=n.getUint32(o.dataOffset+4,!0),f=n.getUint32(o.dataOffset+8,!0);if(s>=0){var c=new Uint8Array(u);c.set(new Uint8Array(t.data,s,u)),a.push({type:r.type,id:i.name,lang:o.lang,codepage:f,bin:c.buffer})}else{if(!e)throw new Error("Cannot parse resource directory entry; RVA seems to be invalid.");a.push({type:r.type,id:i.name,lang:o.lang,codepage:f,bin:new ArrayBuffer(0),rva:o.dataOffset})}},u=0;u<r;++u){var f=2147483647&n.getUint32(o,!0);if(2147483648&(l=n.getUint32(o+4,!0))){l&=2147483647;var c=G(n,f);K(n,c,l,s),o+=8}else o+=8}for(u=0;u<i;++u){var l,p=2147483647&n.getUint32(o,!0);2147483648&(l=n.getUint32(o+4,!0))?(K(n,p,l&=2147483647,s),o+=8):o+=8}this.entries=a,this.originalSize=t.data.byteLength}},t.from=function(e,n){void 0===n&&(n=!1);var r=[].concat(e.getAllSections()).sort((function(t,e){return t.info.virtualAddress-e.info.virtualAddress})),i=e.getSectionByEntry(h.Resource);if(i)for(var o=e.getSectionByEntry(h.BaseRelocation),a=0;a<r.length;++a)if(r[a].info.name===i.info.name){for(var s=a+1;s<r.length;++s)if(!o||r[s].info.name!==o.info.name)throw new Error("After Resource section, sections except for relocation are not supported");break}var u=new t;return u.sectionDataHeader=i?d(i.info):null,i&&u.parse(i,n),u},t.prototype.replaceResourceEntry=function(t){for(var e=this.entries.length,n=0;n<e;++n){var r=this.entries[n];if(r.type===t.type&&r.id===t.id&&r.lang===t.lang)return void(this.entries[n]=t)}this.entries.push(t)},t.prototype.getResourceEntriesAsString=function(t,e){return this.entries.filter((function(n){return n.type===t&&n.id===e})).map((function(t){return[t.lang,A(t.bin)]}))},t.prototype.replaceResourceEntryFromString=function(t,e,n,r){var i={type:t,id:e,lang:n,codepage:1200,bin:S(r)};this.replaceResourceEntry(i)},t.prototype.removeResourceEntry=function(t,e,n){this.entries=this.entries.filter((function(r){return!(r.type===t&&r.id===e&&(void 0===n||r.lang===n))}))},t.prototype.generateResourceData=function(t,e,n,r){void 0===n&&(n=!1),void 0===r&&(r=!1);var i={s:[],n:[]},o=[],a=function(t,e,n){var r={},i={};return n.forEach((function(t){var n,o;if("string"==typeof t.type){var a=null!==(n=r[t.type])&&void 0!==n?n:r[t.type]=[];e.push(t.type),a.push(t)}else(a=null!==(o=i[t.type])&&void 0!==o?o:i[t.type]=[]).push(t)})),16+Object.keys(r).sort().map((function(n){var i={type:n,s:[],n:[]};return t.s.push(i),X(i,e,r[n])})).reduce((function(t,e){return t+8+e}),0)+Object.keys(i).map((function(t){return Number(t)})).sort((function(t,e){return t-e})).map((function(n){var r={type:n,s:[],n:[]};return t.n.push(r),X(r,e,i[n])})).reduce((function(t,e){return t+8+e}),0)}(i,o,this.entries),s=a,u=a=w(a+=(o=o.reduce((function(t,e){return t.indexOf(e)>=0?t:t.concat(e)}),[])).reduce((function(t,e){return t+2+2*J(e)}),0),8),f=a=this.entries.reduce((function(t,e){return e.offset=t,t+16}),u);a=this.entries.reduce((function(t,e){return w(t,8)+e.bin.byteLength}),f);var c=w(a,e),l=w(this.originalSize,e);if(n&&c>l)throw new Error("New resource data is larger than original");r||c<l&&(c=l);var p=new ArrayBuffer(c),h=new DataView(p),g=u,d=t+f;this.entries.forEach((function(t){var e=t.bin.byteLength;void 0!==t.rva?h.setUint32(g,t.rva,!0):(d=w(d,8),h.setUint32(g,d,!0),d+=e),h.setUint32(g+4,e,!0),h.setUint32(g+8,t.codepage,!0),h.setUint32(g+12,0,!0),g+=16})),g=f,this.entries.forEach((function(t){var e=t.bin.byteLength;b(p,g,t.bin,0,e),g+=w(e,8)}));var v=[];if(g=s,o.forEach((function(t){v.push({offset:g,text:t}),g=function(t,e,n){var r=J(n);t.setUint16(e,r,!0),e+=2;for(var i=0;i<r;++i)t.setUint16(e,n.charCodeAt(i),!0),e+=2;return e}(h,g,t)})),function(t,e,n,r){t.setUint32(e,0,!0),t.setUint32(e+4,0,!0),t.setUint32(e+8,0,!0),t.setUint16(e+12,r.s.length,!0),t.setUint16(e+14,r.n.length,!0);var i=(e+=16)+8*(r.s.length+r.n.length);r.s.forEach((function(t){t.offset=i,i+=16+8*(t.s.length+t.n.length)})),r.n.forEach((function(t){t.offset=i,i+=16+8*(t.s.length+t.n.length)})),r.s.forEach((function(r){var o=Q(r.type,n);t.setUint32(e,o+2147483648,!0),t.setUint32(e+4,r.offset+2147483648,!0),e+=8,i=Z(t,r.offset,i,n,r)})),r.n.forEach((function(r){t.setUint32(e,r.type,!0),t.setUint32(e+4,r.offset+2147483648,!0),e+=8,i=Z(t,r.offset,i,n,r)}))}(h,0,v,i),c>a)for(var y=a,m=0;y<c;++y,++m)8===m&&(m=0),h.setUint8(y,"PADDINGX".charCodeAt(m));return{bin:p,rawSize:a,dataOffset:f,descEntryOffset:u,descEntryCount:this.entries.length}},t.prototype.outputResource=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var r,i=t.getFileAlignment();r=this.sectionDataHeader?{data:null,info:d(this.sectionDataHeader)}:{data:null,info:{name:".rsrc",virtualSize:0,virtualAddress:0,sizeOfRawData:0,pointerToRawData:0,pointerToRelocations:0,pointerToLineNumbers:0,numberOfRelocations:0,numberOfLineNumbers:0,characteristics:1073741888}};var o=this.generateResourceData(0,i,e,n);r.data=o.bin,r.info.sizeOfRawData=o.bin.byteLength,r.info.virtualSize=o.rawSize,t.setSectionByEntry(h.Resource,r);for(var a=t.getSectionByEntry(h.Resource),s=new DataView(a.data),u=o.descEntryOffset,f=a.info.virtualAddress+o.dataOffset,c=0;c<o.descEntryCount;++c){var l=s.getUint32(u+4,!0);f=w(f,8),s.setUint32(u,f,!0),f+=l,u+=16}},t}();function tt(t){return I.from(t)}function et(t,e){return x.from(t,e.newHeaderAddress)}function nt(t,e,n){return B.from(t,n.fileHeader.numberOfSections,e.newHeaderAddress+n.byteLength)}function rt(t,e,n,r){for(var i=B.from(t,n.fileHeader.numberOfSections,e.newHeaderAddress+n.byteLength),o=i.length,a=n.optionalHeaderDataDirectory.get(r).virtualAddress,s=0;s<o;++s){var u=i.get(s),f=u.virtualAddress+u.virtualSize;if(a>=u.virtualAddress&&a<f){var c=u.pointerToRawData;return c?t.slice(c,c+u.sizeOfRawData):null}if(a<u.virtualAddress)return null}return null}var it="1.7.0";function ot(t){var e={};return Object.keys(t).forEach((function(n){e[n]=t[n]})),e}function at(t,e,n){if("buffer"in t){var r=t.byteOffset,i=t.byteLength;return void 0!==e&&(r+=e,i-=e),void 0!==n&&(i=n),new DataView(t.buffer,r,i)}return new DataView(t,e,n)}function st(t,e){return Math.floor((t+e-1)/e)*e}function ut(t,e,n,r,i){var o="buffer"in t?new Uint8Array(t.buffer,t.byteOffset+(e||0),i):new Uint8Array(t,e,i),a="buffer"in n?new Uint8Array(n.buffer,n.byteOffset+(r||0),i):new Uint8Array(n,r,i);o.set(a)}function ft(t,e,n){var r=new ArrayBuffer(n);return ut(r,0,t,e,n),r}function ct(t,e,n){return e+4<=n?t.getInt32(e,!0):0}function lt(t,e,n){return e<n?t.getUint8(e):0}function pt(t,e,n){return e+2<=n?t.getUint16(e,!0):0}function ht(t,e,n){return e+4<=n?t.getUint32(e,!0):0}function gt(t,e){return st(Math.abs(t),32)/8*Math.abs(e)}n(8764).Buffer;var dt=function(){function t(t,e,n,r,i){var o=at(n,r,i),a=o.byteLength,s=o.getUint32(0,!0);s>a&&(s=a);var u=ht(o,20,s),f={width:ct(o,4,s),height:ct(o,8,s),planes:pt(o,12,s),bitCount:pt(o,14,s),compression:ht(o,16,s),sizeImage:u,xPelsPerMeter:ct(o,24,s),yPelsPerMeter:ct(o,28,s),colorUsed:ht(o,32,s),colorImportant:ht(o,36,s),colors:[]},c=40,l=f.colorUsed;if(!l)switch(f.bitCount){case 1:l=2;break;case 4:l=16;break;case 8:l=256}for(var p=0;p<l;++p)f.colors.push({b:lt(o,c,a),g:lt(o,c+1,a),r:lt(o,c+2,a)}),c+=4;this.width=t,this.height=e,this.bitmapInfo=f;var h=st(f.bitCount*Math.abs(f.width),32)/8,g=Math.abs(f.height)/2,d=u||h*g;this._pixels=ft(o,c,d),c+=d;var v=gt(f.width,g);this.masks=v+c<=a?ft(o,c,v):new ArrayBuffer(v)}return Object.defineProperty(t.prototype,"pixels",{get:function(){return this._pixels},set:function(t){this._pixels=t,0!==this.bitmapInfo.sizeImage&&(this.bitmapInfo.sizeImage=t.byteLength)},enumerable:!1,configurable:!0}),t.from=function(e,n,r,i,o){var a,s,u;return"object"==typeof r?(a=e,s=n,u=r):(a=null,s=null,u=e,i=n,o=r),new t(a,s,u,i,o)},t.prototype.isIcon=function(){return!0},t.prototype.isRaw=function(){return!1},t.prototype.generate=function(){var t=this.bitmapInfo,e=Math.abs(t.width),n=st(t.bitCount*e,32)/8,r=Math.abs(t.height)/2,i=n*r,o=gt(t.width,r),a=t.colors.length,s=new ArrayBuffer(40+4*a+i+o),u=new DataView(s);u.setUint32(0,40,!0),u.setInt32(4,t.width,!0),u.setInt32(8,t.height,!0),u.setUint16(12,t.planes,!0),u.setUint16(14,t.bitCount,!0),u.setUint32(16,t.compression,!0),u.setUint32(20,t.sizeImage,!0),u.setInt32(24,t.xPelsPerMeter,!0),u.setInt32(28,t.yPelsPerMeter,!0),u.setUint32(32,t.colorUsed,!0),u.setUint32(36,t.colorImportant>a?a:t.colorImportant,!0);var f=40;return t.colors.forEach((function(t){u.setUint8(f,t.b),u.setUint8(f+1,t.g),u.setUint8(f+2,t.r),f+=4})),ut(s,f,this.pixels,0,i),ut(s,f+i,this.masks,0,o),s},t}(),vt=function(){function t(t,e,n,r,i,o){this.width=e,this.height=n,this.bitCount=r,"number"!=typeof i?(i=0,o=t.byteLength):"number"!=typeof o&&(o=t.byteLength-i),this.bin=ft(t,i,o)}return t.from=function(e,n,r,i,o,a){return new t(e,n,r,i,o,a)},t.prototype.isIcon=function(){return!1},t.prototype.isRaw=function(){return!0},t}(),yt=function(){function t(t){if(t){var e=at(t),n=e.byteLength,r=[];if(1===e.getUint16(2,!0))for(var i=e.getUint16(4,!0),o=6,a=0;a<i;++a){var s,u=ht(e,o+8,n),f=ht(e,o+12,n),c=lt(e,o,n),l=lt(e,o+1,n),p=lt(e,o+6,n);s=40===e.getUint32(f,!0)?dt.from(c,l,t,f,u):vt.from(t,c||256,l||256,p,f,u),r.push({width:c,height:l,colors:lt(e,o+2,n),planes:pt(e,o+4,n),bitCount:p,data:s}),o+=16}this.icons=r}else this.icons=[]}return t.from=function(e){return new t(e)},t.prototype.generate=function(){return function(t){var e=t.length;e>65535&&(e=65535);var n=t.map((function(t){return t.data.isIcon()?{item:t,bin:t.data.generate(),offset:0}:{item:t,bin:t.data.bin,offset:0}})),r=n.reduce((function(t,e){return e.offset=t,t+e.bin.byteLength}),6+16*e),i=new ArrayBuffer(r),o=new DataView(i);o.setUint16(0,0,!0),o.setUint16(2,1,!0),o.setUint16(4,e,!0);var a=6;return n.forEach((function(t){var e,n,r,s,u,f=t.item;if(f.data.isIcon()){var c=f.data.bitmapInfo;e=void 0!==f.width?f.width:Math.abs(c.width),n=void 0!==f.height?f.height:Math.abs(c.height/2),r=void 0!==f.colors?f.colors:c.colorUsed||c.colors.length,s=void 0!==f.planes?f.planes:c.planes,u=void 0!==f.bitCount?f.bitCount:c.bitCount}else e=void 0!==f.width?f.width:Math.abs(f.data.width),n=void 0!==f.height?f.height:Math.abs(f.data.height),r=void 0!==f.colors?f.colors:0,s=void 0!==f.planes?f.planes:1,u=void 0!==f.bitCount?f.bitCount:f.data.bitCount;var l=t.bin.byteLength;o.setUint8(a,e>=256?0:e),o.setUint8(a+1,n>=256?0:n),o.setUint8(a+2,r>=256?0:r),o.setUint8(a+3,0),o.setUint16(a+4,s,!0),o.setUint16(a+6,u,!0),o.setUint32(a+8,l,!0),o.setUint32(a+12,t.offset,!0),a+=16,ut(i,t.offset,t.bin,0,l)})),i}(this.icons)},t}();function wt(t){var e=t.length;e>65535&&(e=65535);var n=6+14*t.length,r=new ArrayBuffer(n),i=new DataView(r);i.setUint16(0,0,!0),i.setUint16(2,1,!0),i.setUint16(4,e,!0);var o=6;return t.forEach((function(t){i.setUint8(o,t.width>=256?0:t.width),i.setUint8(o+1,t.height>=256?0:t.height),i.setUint8(o+2,t.colors>=256?0:t.colors),i.setUint8(o+3,0),i.setUint16(o+4,t.planes,!0),i.setUint16(o+6,t.bitCount,!0),i.setUint32(o+8,t.dataSize,!0),i.setUint16(o+12,t.iconID,!0),o+=14})),r}var bt,mt=function(){function t(t){var e=new DataView(t.bin),n=e.byteLength,r=[];if(1===e.getUint16(2,!0))for(var i=e.getUint16(4,!0),o=6,a=0;a<i;++a)r.push({width:lt(e,o,n),height:lt(e,o+1,n),colors:lt(e,o+2,n),planes:pt(e,o+4,n),bitCount:pt(e,o+6,n),dataSize:ht(e,o+8,n),iconID:pt(e,o+12,n)}),o+=14;this.id=t.id,this.lang=t.lang,this.icons=r}return t.fromEntries=function(e){return e.filter((function(t){return 14===t.type})).map((function(e){return new t(e)}))},t.prototype.generateEntry=function(){var t=wt(this.icons);return{type:14,id:this.id,lang:this.lang,codepage:0,bin:t}},t.prototype.getIconItemsFromEntries=function(t){var e=this;return t.map((function(t){if(3!==t.type||t.lang!==e.lang)return null;var n=e.icons.filter((function(e){return t.id===e.iconID})).shift();return n?{entry:t,icon:n}:null})).filter((function(t){return!!t})).map((function(t){var e=t.entry.bin;if(40===new DataView(e).getUint32(0,!0))return dt.from(e);var n=t.icon;return vt.from(e,n.width,n.height,n.bitCount)}))},t.replaceIconsForResource=function(e,n,r,i){var o,a=e.filter((function(t){return 14===t.type&&t.id===n&&t.lang===r})).shift(),s=i.map((function(t){if(t.isIcon()){var e=t.width,n=t.height;return null===e&&(e=t.bitmapInfo.width),null===n&&(n=t.bitmapInfo.height,null!==t.masks&&(n=Math.floor(n/2))),{base:t,bm:{width:e,height:n,planes:t.bitmapInfo.planes,bitCount:t.bitmapInfo.bitCount},bin:t.generate(),id:0}}return{base:t,bm:{width:t.width,height:t.height,planes:1,bitCount:t.bitCount},bin:t.bin,id:0}}));if(a)for(var u=e.length-1;u>=0;--u){var f=e[u];3===f.type&&(l(f,e,a)||e.splice(u,1))}else a={type:14,id:n,lang:r,codepage:0,bin:null},e.push(a);s.forEach((function(t){(null==o?void 0:o.last)?++o.id:o=function(t,e,n){for(var r=t.filter((function(t){return 3===t.type&&t.lang===e&&"number"==typeof t.id})).map((function(t){return t.id})).sort((function(t,e){return t-e})),i=1,o=0;o<r.length;++o){var a=r[o];if(i<a)return{id:i,last:!1};i===a&&++i}return{id:i,last:!0}}(e,r),e.push({type:3,id:o.id,lang:r,codepage:0,bin:t.bin}),t.id=o.id}));var c=wt(s.map((function(t){var e=Math.abs(t.bm.width);e>=256&&(e=0);var n=Math.abs(t.bm.height);n>=256&&(n=0);var r=0;if(t.base.isIcon()){var i=t.base.bitmapInfo;if(!(r=i.colorUsed||i.colors.length))switch(i.bitCount){case 1:r=2;break;case 4:r=16}r>=256&&(r=0)}return{width:e,height:n,colors:r,planes:t.bm.planes,bitCount:t.bm.bitCount,dataSize:t.bin.byteLength,iconID:t.id}})));function l(e,n,r){return n.some((function(n){return 14===n.type&&(n.id!==r.id||n.lang!==r.lang)&&new t(n).icons.some((function(t){return t.iconID===e.id}))}))}a.bin=c},t}(),Ut=function(){function t(){this.length=16,this._a=[],this._a.length=16;for(var t=0;t<16;++t)this._a[t]=""}return t.fromEntry=function(e,n,r){for(var i=new DataView(e,n,r),o=new t,a=0,s=0;s<16;++s){var u=i.getUint16(a,!0);a+=2;for(var f="",c=0;c<u;++c)f+=String.fromCharCode(i.getUint16(a,!0)),a+=2;o._a[s]=f}return o},t.prototype.get=function(t){return this._a[t]||null},t.prototype.getAll=function(){return this._a.map((function(t){return t||null}))},t.prototype.set=function(t,e){this._a[t]=(""+(null!=e?e:"")).substr(0,4097)},t.prototype.calcByteLength=function(){for(var t=0,e=0;e<16;++e)t+=2,t+=2*this._a[e].length;return 16*Math.floor((t+15)/16)},t.prototype.generate=function(t,e){for(var n=new DataView(t,e),r=0,i=0;i<16;++i){var o=this._a[i],a=o.length>4097?4097:o.length;n.setUint16(r,a,!0),r+=2;for(var s=0;s<a;++s)n.setUint16(r,o.charCodeAt(s),!0),r+=2}return 16*Math.floor((r+15)/16)},t}(),Ot=function(){function t(){this.lang=0,this.items=[]}return t.fromEntries=function(e,n){var r=new t;return n.forEach((function(t){6!==t.type||t.lang!==e||"number"!=typeof t.id||t.id<=0||(r.items[t.id-1]=Ut.fromEntry(t.bin,0,t.bin.byteLength))})),r.lang=e,r},t.prototype.getAllStrings=function(){return this.items.map((function(t,e){return t.getAll().map((function(t,n){return null!==t&&""!==t?{id:(e<<4)+n,text:t}:null})).filter((function(t){return!!t}))})).reduce((function(t,e){return t.concat(e)}),[])},t.prototype.getById=function(t){var e;if(t<0)return null;var n=t>>4,r=15&t,i=this.items[n];return null!==(e=null==i?void 0:i.get(r))&&void 0!==e?e:null},t.prototype.setById=function(t,e){if(!(t<0)){var n=t>>4,r=15&t,i=this.items[n];i||(this.items[n]=i=new Ut),i.set(r,e)}},t.prototype.generateEntries=function(){var t=this;return this.items.map((function(e,n){var r=e.calcByteLength(),i=new ArrayBuffer(r);return e.generate(i,0),{type:6,id:n+1,lang:t.lang,codepage:1200,bin:i}})).filter((function(t){return!!t}))},t.prototype.replaceStringEntriesForExecutable=function(t){for(var e=this.generateEntries(),n=t.entries,r=0;r<n.length;++r)if(6===(a=n[r]).type&&a.lang===this.lang){for(var i=n.length-1;i>=r;--i){var o=n[i];6===o.type&&o.lang===this.lang&&n.splice(i,1)}return void n.splice.bind(n,r,0).apply(void 0,e)}for(r=0;r<n.length;++r)if(6===(a=n[r]).type&&a.lang<this.lang)return void n.splice.bind(n,r+1,0).apply(void 0,e);for(r=n.length-1;r>=0;--r){var a;if(6===(a=n[r]).type)return void n.splice.bind(n,r+1,0).apply(void 0,e)}n.push.apply(n,e)},t}();!function(t){t[t.Debug=1]="Debug",t[t.Prerelease=2]="Prerelease",t[t.Patched=4]="Patched",t[t.PrivateBuild=8]="PrivateBuild",t[t.InfoInferred=16]="InfoInferred",t[t.SpecialBuild=32]="SpecialBuild"}(bt||(bt={}));var At,St=bt;!function(t){t[t.Unknown=0]="Unknown",t[t._Windows16=1]="_Windows16",t[t._PM16=2]="_PM16",t[t._PM32=3]="_PM32",t[t._Windows32=4]="_Windows32",t[t.DOS=65536]="DOS",t[t.OS2_16=131072]="OS2_16",t[t.OS2_32=196608]="OS2_32",t[t.NT=262144]="NT",t[t.DOS_Windows16=65537]="DOS_Windows16",t[t.DOS_Windows32=65540]="DOS_Windows32",t[t.NT_Windows32=262148]="NT_Windows32",t[t.OS2_16_PM16=131074]="OS2_16_PM16",t[t.OS2_32_PM32=196611]="OS2_32_PM32"}(At||(At={}));var Dt,It,Et,_t=At;!function(t){t[t.Unknown=0]="Unknown",t[t.Printer=1]="Printer",t[t.Keyboard=2]="Keyboard",t[t.Language=3]="Language",t[t.Display=4]="Display",t[t.Mouse=5]="Mouse",t[t.Network=6]="Network",t[t.System=7]="System",t[t.Installable=8]="Installable",t[t.Sound=9]="Sound",t[t.Comm=10]="Comm",t[t.VersionedPrinter=12]="VersionedPrinter"}(Dt||(Dt={})),function(t){t[t.Unknown=0]="Unknown",t[t.Raster=1]="Raster",t[t.Vector=2]="Vector",t[t.TrueType=3]="TrueType"}(It||(It={})),function(t){t[t.Unknown=0]="Unknown",t[t.App=1]="App",t[t.DLL=2]="DLL",t[t.Driver=3]="Driver",t[t.Font=4]="Font",t[t.VxD=5]="VxD",t[t.StaticLibrary=7]="StaticLibrary"}(Et||(Et={}));var Pt=Et;function jt(t,e,n){for(var r="";e+2<=n;){var i=t.getUint16(e,!0);if(!i)break;r+=String.fromCharCode(i),e+=2}return r}function Rt(t,e,n){for(var r=0;r<n.length;++r)t.setUint16(e,n.charCodeAt(r),!0),e+=2;return t.setUint16(e,0,!0),e+2}function zt(t,e,n){var r=t.getUint16(e+2,!0);e+=36,e+=st(r,4);for(var i=[],o=function(){var r=function(t,e,n){var r=t.getUint16(e,!0),i=t.getUint16(e+2,!0);e+r<n&&(n=e+r);var o=jt(t,e+6,n);e+=st(6+2*(o.length+1),4);var a=parseInt(o,16);if(isNaN(a))throw new Error("Invalid StringTable data format");e+=st(i,4);for(var s={lang:Math.floor(a/65536),codepage:65535&a,values:{}};e<n;){var u=t.getUint16(e,!0),f=t.getUint16(e+2,!0);if(1===t.getUint16(e+4,!0)){var c=e+u;c>n&&(c=n);var l=jt(t,e+6,c),p=(e=st(e+6+2*(l.length+1),4))+2*f;p>c&&(p=c);var h=jt(t,e,p);e=st(p,4),s.values[l]=h}else e+=u}return[n,s]}(t,e,n),o=r[1],a=i.filter((function(t){return t.lang===o.lang&&t.codepage===o.codepage}));if(0===a.length)i.push(o);else for(var s in o.values)a[0].values[s]=o.values[s];e=st(r[0],4)};e<n;)o();return i}function Vt(t,e,n){var r=t.getUint16(e+2,!0);e+=32,e+=st(r,4);for(var i=[];e<n;){var o=t.getUint16(e,!0),a=t.getUint16(e+2,!0);if(0===t.getUint16(e+4,!0)){var s=e+o;s>n&&(s=n);var u=jt(t,e+6,s);if(e=st(e+6+2*(u.length+1),4),"Translation"===u&&a%4==0){for(var f=function(n){if(e+4>s)return"break";var r=t.getUint16(e,!0),o=t.getUint16(e+2,!0);e+=4,0===i.filter((function(t){return t.lang===r&&t.codepage===o})).length&&i.push({lang:r,codepage:o})},c=0;c<a&&"break"!==f();c+=4);e=st(s,4)}else e=st(s,4)}else e+=st(o,4)}return i}function Ct(t){var e=92,n=function(t){var e=36,n=t.map((function(t){return function(t){var e=24,n=Object.keys(t.values);e=n.reduce((function(e,n){var r=t.values[n],i=st(6+2*(n.length+1),4),o=st(e+i+2*(r.length+1),4);return o>65532?e:o}),e);var r=new ArrayBuffer(e),i=new DataView(r);i.setUint16(0,e,!0),i.setUint16(2,0,!0),i.setUint16(4,1,!0);var o=(65536*(65535&t.lang)+(65535&t.codepage)).toString(16).toLowerCase();if(o.length<8){var a=8-o.length;o="00000000".substr(0,a)+o}var s=st(Rt(i,6,o),4);return n.forEach((function(e){var n=t.values[e],r=st(6+2*(e.length+1),4),o=st(r+2*(n.length+1),4);s+o<=65532&&(i.setUint16(s,o,!0),i.setUint16(s+2,n.length+1,!0),i.setUint16(s+4,1,!0),s=st(Rt(i,s+6,e),4),s=st(Rt(i,s,n),4))})),r}(t)}));e+=n.reduce((function(t,e){return t+e.byteLength}),0);var r=new ArrayBuffer(e),i=new DataView(r);i.setUint16(0,e,!0),i.setUint16(2,0,!0),i.setUint16(4,1,!0);var o=st(Rt(i,6,"StringFileInfo"),4);return n.forEach((function(t){var e=t.byteLength;ut(r,o,t,0,e),o+=e})),r}(t.strings),r=n.byteLength;e+=r;var i=function(t){var e=32,n=4*t.length;e+=32+n;var r=new ArrayBuffer(e),i=new DataView(r);i.setUint16(0,e,!0),i.setUint16(2,0,!0),i.setUint16(4,1,!0);var o=st(Rt(i,6,"VarFileInfo"),4);return i.setUint16(o,32+n,!0),i.setUint16(o+2,n,!0),i.setUint16(o+4,0,!0),o=st(Rt(i,o+6,"Translation"),4),t.forEach((function(t){i.setUint16(o,t.lang,!0),i.setUint16(o+2,t.codepage,!0),o+=4})),r}(t.translations),o=i.byteLength;e+=o,e=t.unknowns.reduce((function(t,e){return t+st(e.entireBin.byteLength,4)}),e);var a=new ArrayBuffer(e),s=new DataView(a);s.setUint16(0,e,!0),s.setUint16(2,52,!0),s.setUint16(4,0,!0);var u=st(Rt(s,6,"VS_VERSION_INFO"),4);return s.setUint32(u,4277077181,!0),s.setUint32(u+4,65536,!0),s.setUint32(u+8,t.fixedInfo.fileVersionMS,!0),s.setUint32(u+12,t.fixedInfo.fileVersionLS,!0),s.setUint32(u+16,t.fixedInfo.productVersionMS,!0),s.setUint32(u+20,t.fixedInfo.productVersionLS,!0),s.setUint32(u+24,t.fixedInfo.fileFlagsMask,!0),s.setUint32(u+28,t.fixedInfo.fileFlags,!0),s.setUint32(u+32,t.fixedInfo.fileOS,!0),s.setUint32(u+36,t.fixedInfo.fileType,!0),s.setUint32(u+40,t.fixedInfo.fileSubtype,!0),s.setUint32(u+44,t.fixedInfo.fileDateMS,!0),s.setUint32(u+48,t.fixedInfo.fileDateLS,!0),ut(a,u+=52,n,0,r),ut(a,u+=r,i,0,o),u+=o,t.unknowns.forEach((function(t){var e=t.entireBin.byteLength;ut(a,u,t.entireBin,0,e),u+=st(e,4)})),a}function Tt(t,e,n){return isNaN(t)||t<e?e:t>=n?n:Math.floor(t)}function Lt(t,e,n,r,i){var o,a,s,u,f,c;return"string"!=typeof t||void 0!==e&&"number"!=typeof e||void 0!==n?(a=Tt(Number(t),0,65535),s=Tt(Number(e),0,65535),u=Tt(void 0===n?0:Number(n),0,65535),f=Tt(void 0===r?0:Number(r),0,65535),c=i):(a=(o=t.split(".").map((function(t){return Tt(Number(t),0,65535)})).concat(0,0,0))[0],s=o[1],u=o[2],f=o[3],c=e),[a,s,u,f,c]}var Ht=function(){function t(t){if(t){var e=new DataView(t.bin);this.data=function(t,e){var n=t.getUint16(0,!0),r=t.getUint16(2,!0);if(0!==t.getUint16(4,!0))throw new Error("Invalid version data format");if(n<r+40)throw new Error("Invalid version data format");if("VS_VERSION_INFO"!==jt(t,6,n))throw new Error("Invalid version data format");var i={lang:e.lang,fixedInfo:{fileVersionMS:0,fileVersionLS:0,productVersionMS:0,productVersionLS:0,fileFlagsMask:0,fileFlags:0,fileOS:0,fileType:0,fileSubtype:0,fileDateMS:0,fileDateLS:0},strings:[],translations:[],unknowns:[]},o=38;if(r){var a=ht(t,40,r+=40),s=ht(t,44,r);4277077181===a&&s<=65536&&(i.fixedInfo={fileVersionMS:ht(t,48,r),fileVersionLS:ht(t,52,r),productVersionMS:ht(t,56,r),productVersionLS:ht(t,60,r),fileFlagsMask:ht(t,64,r),fileFlags:ht(t,68,r),fileOS:ht(t,72,r),fileType:ht(t,76,r),fileSubtype:ht(t,80,r),fileDateMS:ht(t,84,r),fileDateLS:ht(t,88,r)}),o=r}for(o=st(o,4);o<n;){var u=t.getUint16(o,!0),f=o+u;f>n&&(f=n);var c=jt(t,o+6,f);switch(c){case"StringFileInfo":i.strings=i.strings.concat(zt(t,o,f));break;case"VarFileInfo":i.translations=i.translations.concat(Vt(t,o,f));break;default:i.unknowns.push({name:c,entireBin:ft(t,o,u)})}o+=st(u,4)}return i}(e,t)}else this.data={lang:0,fixedInfo:{fileVersionMS:0,fileVersionLS:0,productVersionMS:0,productVersionLS:0,fileFlagsMask:0,fileFlags:0,fileOS:0,fileType:0,fileSubtype:0,fileDateMS:0,fileDateLS:0},strings:[],translations:[],unknowns:[]}}return t.createEmpty=function(){return new t},t.create=function(e,n,r){var i;"object"==typeof e?(i=e.lang,n=e.fixedInfo,r=e.strings):i=e;var o=new t;for(var a in o.data.lang=i,n)a in n&&(o.data.fixedInfo[a]=n[a]);return o.data.strings=r.map((function(t){return{lang:t.lang,codepage:t.codepage,values:ot(t.values)}})),o.data.translations=r.map((function(t){return{lang:t.lang,codepage:t.codepage}})),o},t.fromEntries=function(e){return e.filter((function(t){return 16===t.type})).map((function(e){return new t(e)}))},Object.defineProperty(t.prototype,"lang",{get:function(){return this.data.lang},set:function(t){this.data.lang=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fixedInfo",{get:function(){return this.data.fixedInfo},enumerable:!1,configurable:!0}),t.prototype.getAvailableLanguages=function(){return this.data.translations.slice(0)},t.prototype.replaceAvailableLanguages=function(t){this.data.translations=t.slice(0)},t.prototype.getStringValues=function(t){var e=this.data.strings.filter((function(e){return e.lang===t.lang&&e.codepage===t.codepage})).map((function(t){return t.values}));return e.length>0?e[0]:{}},t.prototype.getAllLanguagesForStringValues=function(){return this.data.strings.map((function(t){return{codepage:t.codepage,lang:t.lang}}))},t.prototype.setStringValues=function(t,e,n){void 0===n&&(n=!0);var r,i=this.data.strings.filter((function(e){return e.lang===t.lang&&e.codepage===t.codepage}));for(var o in 0===i.length?(r={lang:t.lang,codepage:t.codepage,values:{}},this.data.strings.push(r)):r=i[0],e)r.values[o]=e[o];n&&0===this.data.translations.filter((function(e){return e.lang===t.lang&&e.codepage===t.codepage})).length&&this.data.translations.push({lang:t.lang,codepage:t.codepage})},t.prototype.setStringValue=function(t,e,n,r){var i;void 0===r&&(r=!0),this.setStringValues(t,((i={})[e]=n,i),r)},t.prototype.removeAllStringValues=function(t,e){void 0===e&&(e=!0);for(var n=this.data.strings,r=n.length,i=0;i<r;++i){var o=n[i];if(o.lang===t.lang&&o.codepage===t.codepage){if(n.splice(i,1),e)for(var a=this.data.translations,s=0;s<a.length;s++){var u=a[s];if(u.lang===t.lang&&u.codepage===t.codepage){a.splice(s,1);break}}break}}},t.prototype.removeStringValue=function(t,e,n){void 0===n&&(n=!0);for(var r=this.data.strings,i=r.length,o=0;o<i;++o){var a=r[o];if(a.lang===t.lang&&a.codepage===t.codepage){try{delete a.values[e]}catch(t){}if(n&&0===Object.keys(a.values).length){r.splice(o,1);for(var s=this.data.translations,u=0;u<s.length;u++){var f=s[u];if(f.lang===t.lang&&f.codepage===t.codepage){s.splice(u,1);break}}}break}}},t.prototype.generateResource=function(){var t=Ct(this.data);return{type:16,id:1,lang:this.lang,codepage:1200,bin:t}},t.prototype.outputToResourceEntries=function(t){for(var e=this.generateResource(),n=t.length,r=0;r<n;++r){var i=t[r];if(16===i.type&&i.id===e.id&&i.lang===e.lang)return void(t[r]=e)}t.push(e)},t.prototype.getDefaultVersionLang=function(t){var e=Number(this.lang);if(""!==this.lang&&!isNaN(e))return e;var n=this.data.strings.filter((function(e){return t in e.values})).map((function(t){return t.lang}));return 1===n.length?n[0]:1033},t.prototype.setFileVersion=function(t,e,n,r,i){this.setFileVersionImpl.apply(this,Lt(t,e,n,r,i))},t.prototype.setFileVersionImpl=function(t,e,n,r,i){i=void 0!==i?i:this.getDefaultVersionLang("FileVersion"),this.fixedInfo.fileVersionMS=t<<16|e,this.fixedInfo.fileVersionLS=n<<16|r,this.setStringValue({lang:i,codepage:1200},"FileVersion",t+"."+e+"."+n+"."+r,!0)},t.prototype.setProductVersion=function(t,e,n,r,i){this.setProductVersionImpl.apply(this,Lt(t,e,n,r,i))},t.prototype.setProductVersionImpl=function(t,e,n,r,i){i=void 0!==i?i:this.getDefaultVersionLang("ProductVersion"),this.fixedInfo.productVersionMS=t<<16|e,this.fixedInfo.productVersionLS=n<<16|r,this.setStringValue({lang:i,codepage:1200},"ProductVersion",t+"."+e+"."+n+"."+r,!0)},t}(),xt=function(){function t(t){this.data=t}return t.prototype.toDER=function(){return[].slice.call(this.data)},t}();function kt(t){if(t<128)return[t];for(var e=[];e.push(255&t),!(t<256);)t>>=8;return e.push(128+e.length),e.reverse()}function Bt(t){return t instanceof Array||(t=[].slice.call(t)),[4].concat(kt(t.length)).concat(t)}function Mt(t,e){return[160+t].concat(kt(e.length)).concat(e)}function Nt(t){return[48].concat(kt(t.length)).concat(t)}function Ft(t){var e=t.reduce((function(t,e){return t.concat(e instanceof Array?e:e.toDER())}),[]);return[49].concat(kt(e.length)).concat(e)}var Gt=function(){function t(t){this.value="string"==typeof t?t.split(/\./g).map((function(t){return Number(t)})):t}return t.prototype.toDER=function(){var t=this.value,e=[];e.push(40*t[0]+t[1]);for(var n=2;n<t.length;++n)for(var r=t[n],i=!0,o=e.length;;){var a=127&r;if(i||(a+=128),e.splice(o,0,a),r<128)break;i=!1,r=Math.floor(r/128)}return[6].concat(kt(e.length)).concat(e)},t}(),Wt=new Gt([1,3,14,3,2,26]),Kt=new Gt([2,16,840,1,101,3,4,2,1]),qt=new Gt([2,16,840,1,101,3,4,2,2]),Xt=new Gt([2,16,840,1,101,3,4,2,3]),Jt=new Gt([2,16,840,1,101,3,4,2,4]),Qt=new Gt([2,16,840,1,101,3,4,2,5]),Yt=new Gt([2,16,840,1,101,3,4,2,6]),Zt=new Gt([2,16,840,1,101,3,4,2,7]),$t=new Gt([2,16,840,1,101,3,4,2,8]),te=new Gt([2,16,840,1,101,3,4,2,9]),ee=new Gt([2,16,840,1,101,3,4,2,10]),ne=new Gt([2,16,840,1,101,3,4,2,11]),re=new Gt([2,16,840,1,101,3,4,2,12]),ie=new Gt([1,2,840,113549,1,1,1]),oe=new Gt([1,2,840,10040,4,1]),ae=new Gt([1,2,840,113549,1,7,2]),se=new Gt([1,2,840,113549,1,9,3]),ue=new Gt([1,2,840,113549,1,9,4]),fe=new Gt([1,3,6,1,4,1,311,2,1,11]),ce=new Gt([1,3,6,1,4,1,311,2,1,12]),le=new Gt([1,3,6,1,4,1,311,2,1,21]),pe=new Gt([1,3,6,1,4,1,311,3,3,1]);function he(t){return"buffer"in t?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}function ge(t,e){var n=0;if(t[e]<128)n=t[e],++e;else{if(128===t[e])throw new Error("Not supported certificate data (variable length)");var r=127&t[e];for(++e;r--;){if(e>=t.length)throw new Error("Invalid certificate data (invalid sequence length)");n<<=8,n|=t[e],++e}}return[n,e]}function de(t,e){var n=ge(t,e+1),r=n[0];return n[1]+r}function ve(t,e){var n,r,i,o,a,s;if(t.length<e+2)return null;if(48!==t[e])return null;if(s=(n=ge(t,e+1))[0],e=n[1],s>t.length-e)throw new Error("Invalid certificate data (insufficient data length)");if(6!==t[e])return null;for(var u=ae.toDER(),f=0;f<u.length;++f)if(t[e+f]!==u[f])return null;if(160!==t[e+=u.length])throw new Error("Invalid certificate data (no content in contentInfo)");if(s=(r=ge(t,e+1))[0],(e=r[1])+s>t.length)throw new Error("Invalid certificate data (invalid length for content)");if(48!==t[e])throw new Error("Invalid certificate data (unexpected signedData)");if(s=(i=ge(t,e+1))[0],(e=i[1])+s>t.length)throw new Error("Invalid certificate data (invalid length for signedData)");if(2!==t[e]||1!==t[e+1]||1!==t[e+2])throw new Error("Invalid certificate data (unexpected signedData.version)");if(49!==t[e+=3])throw new Error("Invalid certificate data (no signedData.digestAlgorithms)");if(s=(o=ge(t,e+1))[0],(e=o[1])+s>t.length)throw new Error("Invalid certificate data (invalid length for signedData.digestAlgorithms)");if(48!==t[e+=s])throw new Error("Invalid certificate data (no signedData.contentInfo)");if(s=(a=ge(t,e+1))[0],(e=a[1])+s>t.length)throw new Error("Invalid certificate data (invalid length for signedData.contentInfo)");if(160!==t[e+=s])throw new Error("Invalid certificate data (no signedData.certificates)");var c=ge(t,e+1),l=c[0],p=c[1];if(p+l>t.length)throw new Error("Invalid certificate data (invalid length for signedData.certificates)");return t.subarray(e,p+l)}function ye(t){var e,n;if(Array.isArray(t)){if(0===t.length)throw new Error("No data is specified.");return ye(t[0])}var r=he(t);if(r.length<2)throw new Error("Invalid certificate data");if(48!==r[0])throw new Error("Not supported certificate data (non-`Certificate`-format data)");var i,o,a,s=ve(r,0);if(s){var u=ge(s,1),f=u[0],c=u[1];if(c+f>s.length)throw new Error("Invalid certificate data (invalid length for signedData.certificates)");if(48!==s[c])throw new Error("Invalid certificate data (no signedData.certificates[0])");var l=ge(s,c+1),p=l[0],h=l[1];if(h+p>s.length)throw new Error("Invalid certificate data (invalid length for signedData.certificates[0])");return ye(s.subarray(c,h+p))}if(i=(e=ge(r,1))[0],o=e[1],i>r.length-o)throw new Error("Invalid certificate data (insufficient data length)");if(48!==r[o])throw new Error("Invalid certificate data (missing tbsCertificate)");if(a=(n=ge(r,o+1))[0],o=n[1],a>r.length-o)throw new Error("Invalid certificate data (invalid tbsCertificate length)");var g=o+a;if(160===r[o]&&(o=de(r,o))>=g)throw new Error("Invalid certificate data (insufficient tbsCertificate data: after version)");if(2!==r[o])throw new Error("Invalid certificate data (invalid serialNumber)");var d=de(r,o);if(o>=g)throw new Error("Invalid certificate data (insufficient tbsCertificate data: after serialNumber)");var v=[].slice.call(r,o,d);if(48!==r[o=d])throw new Error("Invalid certificate data (invalid algorithmIdentifier)");if((o=de(r,o))>=g)throw new Error("Invalid certificate data (insufficient tbsCertificate data: after serialNumber)");if(48!==r[o])throw new Error("Invalid certificate data (invalid issuer)");var y=de(r,o);if(y>g)throw new Error("Invalid certificate data (insufficient tbsCertificate data: issuer)");return[[].slice.call(r,o,y),v]}function we(t){if(Array.isArray(t))return t.map(we).reduce((function(t,e){return t.concat(e)}),[]);var e=he(t),n=ve(e,0);if(n){var r=ge(n,1),i=r[0],o=r[1];if(o+i>n.length)throw new Error("Invalid certificate data (invalid length for signedData.certificates)");for(var a=o+i,s=[],u=o;u<a;){if(48!==n[u])throw new Error("Invalid certificate data (no signedData.certificates[*])");var f=ge(n,u+1),c=f[0],l=f[1];if(l+c>n.length)throw new Error("Invalid certificate data (invalid length for signedData.certificates[*])");s.push(new xt(n.subarray(u,l+c))),u=l+c}return s}return[new xt(e)]}var be=function(){function t(t){this.algorithm=t}return t.prototype.toDER=function(){return Nt(this.algorithm.toDER().concat([5,0]))},t}(),me=function(){function t(t,e){this.contentType=t,this.content=e}return t.prototype.toDER=function(){return Nt(this.contentType.toDER().concat(Mt(0,this.content.toDER())))},t}(),Ue=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Oe=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ue(e,t),e}(me),Ae=Oe,Se=function(){function t(t,e){this.digestAlgorithm=t,this.digest=e}return t.prototype.toDER=function(){var t,e=this.digest;return t="buffer"in e?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e),Nt(this.digestAlgorithm.toDER().concat(Bt(t)))},t}(),De=function(){function t(t,e){this.issuer=t,this.serialNumber=e}return t.prototype.toDER=function(){return Nt(this.issuer.toDER().concat(this.serialNumber.toDER()))},t}(),Ie=function(){function t(t,e,n,r,i,o){this.version=t,this.digestAlgorithms=e,this.contentInfo=n,this.signerInfos=r,this.certificates=i,this.crls=o}return t.prototype.toDER=function(){var t=[2,1,255&this.version].concat(Ft(this.digestAlgorithms)).concat(this.contentInfo.toDER());if(this.certificates&&this.certificates.length>0){var e=Ft(this.certificates);e[0]=160,t=t.concat(e)}return this.crls&&(t=t.concat(Mt(1,Ft(this.crls)))),Nt(t=t.concat(Ft(this.signerInfos)))},t}(),Ee=Ie,_e=function(){function t(t,e,n,r,i,o,a){this.version=t,this.issuerAndSerialNumber=e,this.digestAlgorithm=n,this.digestEncryptionAlgorithm=r,this.encryptedDigest=i,this.authenticatedAttributes=o,this.unauthenticatedAttributes=a}return t.prototype.toDER=function(){var t=[2,1,255&this.version].concat(this.issuerAndSerialNumber.toDER()).concat(this.digestAlgorithm.toDER());if(this.authenticatedAttributes&&this.authenticatedAttributes.length>0){var e=Ft(this.authenticatedAttributes);e[0]=160,t=t.concat(e)}if(t=t.concat(this.digestEncryptionAlgorithm.toDER()).concat(Bt(this.encryptedDigest)),this.unauthenticatedAttributes&&this.unauthenticatedAttributes.length>0){var n=Ft(this.unauthenticatedAttributes);n[0]=161,t=t.concat(n)}return Nt(t)},t}(),Pe=_e,je=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Re=new Gt([1,3,6,1,4,1,311,2,1,4]),ze=function(){function t(t,e){this.type=t,this.value=e}return t.prototype.toDER=function(){return Nt(this.type.toDER().concat(this.value.toDER()))},t}(),Ve=function(){function t(t,e){this.data=t,this.messageDigest=e}return t.prototype.toDER=function(){return Nt(this.toDERWithoutHeader())},t.prototype.toDERWithoutHeader=function(){return this.data.toDER().concat(this.messageDigest.toDER())},t}(),Ce=function(t){function e(e){return t.call(this,Re,e)||this}return je(e,t),e}(me),Te=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Le=new Gt([1,3,6,1,4,1,311,2,1,15]),He=function(){function t(t,e){this.flags=t,this.file=e}return t.prototype.toDER=function(){return Nt([3,1,255&this.flags].concat(Mt(0,this.file.toDER())))},t}(),xe=function(t){function e(e){return t.call(this,Le,e)||this}return Te(e,t),e}(ze),ke=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Be=function(){function t(t,e){this.tag=t,this.value=e}return t.prototype.toDER=function(){var t=this.value.toDER();return 2===this.tag?Mt(this.tag,t):(t[0]=128+this.tag,t)},t}(),Me=(function(t){ke((function(e){return t.call(this,0,new xt(function(t){var e=[].map.call(t,(function(t){return t.charCodeAt(0)})).filter((function(t){return t<128}));return[22].concat(kt(e.length)).concat(e)}(e)))||this}),t)}(Be),function(t){function e(e){var n=function(t){var e=[].map.call(t,(function(t){return t.charCodeAt(0)})),n=new Uint8Array(2*e.length),r=new DataView(n.buffer);return e.forEach((function(t,e){r.setUint16(2*e,t,!1)})),[30].concat(kt(n.length)).concat([].slice.call(n))}(e);return n[0]=128,t.call(this,2,new xt(n))||this}return ke(e,t),e}(Be)),Ne=function(){function t(t,e){this.attrType=t,this.attrValues=e}return t.prototype.toDER=function(){return Nt(this.attrType.toDER().concat(Ft(this.attrValues)))},t}(),Fe=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};function Ge(t){var e=!1;return{next:function(){return e?{done:!0,value:void 0}:(e=!0,{done:!1,value:t})}}}function We(t,e,n){var r;if(function(t){if(!t.encryptData&&!t.signData)throw new Error("Signer object must implement either `encryptData` or `signData`.")}(e),"number"==typeof n){if(n<=0)throw new Error("Invalid alignment value");r=n}else r=t.getFileAlignment();var i,o=function(t){if("string"!=typeof t)return new be(new Gt(t));switch(t){case"sha1":case"SHA1":return new be(Wt);case"sha256":case"SHA256":return new be(Kt);case"sha384":case"SHA384":return new be(qt);case"sha512":case"SHA512":return new be(Xt);case"sha224":case"SHA224":return new be(Jt);case"sha512-224":case"SHA512-224":return new be(Qt);case"sha512-256":case"SHA512-256":return new be(Yt);case"sha3-224":case"SHA3-224":return new be(Zt);case"sha3-256":case"SHA3-256":return new be($t);case"sha3-384":case"SHA3-384":return new be(te);case"sha3-512":case"SHA3-512":return new be(ee);case"shake128":case"SHAKE128":return new be(ne);case"shake256":case"SHAKE256":return new be(re);default:throw new Error("Invalid or unsupported digest algorithm")}}(e.getDigestAlgorithm()),a=e.getEncryptionAlgorithm();if("string"!=typeof a)i=new be(new Gt(a));else switch(a){case"rsa":case"RSA":i=new be(ie);break;case"dsa":case"DSA":i=new be(oe);break;default:throw new Error("Invalid or unsupported digest encryption algorithm")}var s=e.getCertificateData?e.getCertificateData():e.getPublicKeyData(),u=ye(s),f=u[0],c=u[1];return function(t,e,n){return e.digestData(function(){var e,r,i,o,a,s,u,f,c,l,g,d,v,y,w,b;return Fe(this,(function(m){switch(m.label){case 0:return e=t.dosHeader.newHeaderAddress+88,r=t.dosHeader.newHeaderAddress+t.newHeader.getDataDirectoryOffset()+p.itemSize*h.Certificate,i=t.getRawHeader(),o=t.getAllSections(),a=o.length,s=i.byteLength,u=st(s+a*B.itemSize,t.getFileAlignment()),f=new ArrayBuffer(u-s),c=B.from(f,a),o.forEach((function(t,e){c.set(e,t.info)})),[4,ft(i,0,e)];case 1:return m.sent(),[4,ft(i,e+4,r-(e+4))];case 2:return m.sent(),l=r+p.itemSize,[4,ft(t.getRawHeader(),l,t.getTotalHeaderSize()-l)];case 3:return m.sent(),[4,f];case 4:m.sent(),g=0,d=o,m.label=5;case 5:return g<d.length?(v=d[g]).data?[4,v.data]:[3,7]:[3,8];case 6:m.sent(),m.label=7;case 7:return g++,[3,5];case 8:return null===(y=t.getExtraData())?[3,11]:[4,y];case 9:return m.sent(),w=st(y.byteLength,n),0==(b=w-y.byteLength)?[3,11]:[4,new Uint8Array(b).buffer];case 10:m.sent(),m.label=11;case 11:return[2]}}))}())}(t,e,r).then((function(t){var n=new Ve(new xe(new He(0,new Me(""))),new Se(o,t));return e.digestData(Ge(new Uint8Array(n.toDERWithoutHeader()).buffer)).then((function(t){var r=[new Ne(ce,[new xt([48,0])]),new Ne(se,[Re]),new Ne(fe,[new xt(Nt(le.toDER()))]),new Ne(ue,[new xt(Bt(he(t)))])],i=new Uint8Array(Ft(r)).buffer;return function(t,e,n){return t.signData?t.signData(n):t.digestData(n).then((function(n){var r=new Uint8Array(new Se(e,n).toDER()).buffer;return t.encryptData(Ge(r))}))}(e,o,Ge(i)).then((function(t){return[n,r,t]}))}))})).then((function(t){var n=t[0],r=t[1],a=t[2],s=new Pe(1,new De(new xt(f),new xt(c)),o,i,he(a),r);return e.timestampData?e.digestData(Ge(function(t){if("buffer"in t){var e=new ArrayBuffer(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),e}return e=new ArrayBuffer(t.byteLength),new Uint8Array(e).set(new Uint8Array(t)),e}(a))).then((function(t){var r,i=(r=t,new Uint8Array(Nt([2,1,1].concat(Nt(o.toDER().concat(Bt(he(r))))).concat([1,1,255]))).buffer);return e.timestampData(i).then((function(t){var e=function(t){var e,n,r,i,o,a,s,u,f=he(t);if(f.length<2||48!==f[0])throw new Error("Invalid or unexpected timestamp response");if(s=(e=ge(f,1))[0],u=e[1],s>f.length-u)throw new Error("Invalid or unexpected timestamp response (insufficient buffer)");var c=u+s;if(48!==f[u])throw new Error("Invalid or unexpected timestamp response (no PKIStatusInfo)");if(s=(n=ge(f,u+1))[0],(u=n[1])>=c)throw new Error("Invalid or unexpected timestamp response (invalid length for PKIStatusInfo)");var l=u+s;if(2!==f[u]||1!==f[u+1])throw new Error("Invalid or unexpected timestamp response (invalid PKIStatusInfo.status)");switch(f[u+2]){case 0:case 1:break;case 2:case 3:case 4:case 5:var p="Timestamp response has error status "+f[u+2];if(u+3<l&&48===f[u+3]&&(s=(r=ge(f,u+4))[0],(u=r[1])+s<=l&&12===f[u]&&(s=(i=ge(f,u+1))[0],(u=i[1])+s<=l))){var h=[].slice.call(f,u,u+s).map((function(t){if(t>=32&&t<=126)return String.fromCharCode(t);var e=t.toString(16);return 1===e.length&&(e="0"+e),"%"+e})).join("");p+=", text = "+decodeURIComponent(h)}throw new Error(p);default:throw new Error("Unexpected PKIStatusInfo.status: "+f[u+2])}if(l+1>=c||48!==f[l])throw new Error("Invalid or unexpected timestamp response (no TimeStampToken)");if(s=(o=ge(f,l+1))[0],(u=o[1])+s>c)throw new Error("Invalid or unexpected timestamp response (insufficient data for TimeStampToken)");var g=ae.toDER();if(6!==f[u])throw new Error("Invalid or unexpected timestamp response (no contentType in TimeStampToken)");for(var d=0;d<g.length;++d)if(f[u+d]!==g[d])throw new Error("Invalid or unexpected timestamp response (unexpected TimeStampToken.contentType octet)");if(160!==f[u+=g.length])throw new Error("Invalid or unexpected timestamp response (no content in TimeStampToken)");if(s=(a=ge(f,u+1))[0],(u=a[1])+s>c)throw new Error("Invalid or unexpected timestamp response (invalid length for TimeStampToken.content)");return ft(f,u,s)}(t);return s.unauthenticatedAttributes=[new Ne(pe,[new me(ae,new xt(he(e)))])],[n,s]}))})):[n,s]})).then((function(t){var e=t[0],n=t[1],r=new Ae(ae,new Ee(1,[o],new Ce(e),[n],we(s))),i=new Uint8Array(r.toDER()),a=new ArrayBuffer(8+i.length),u=new DataView(a);return u.setUint32(0,i.length+8,!0),u.setUint16(4,512,!0),u.setUint16(6,2,!0),ut(a,8,i,0,i.byteLength),a})).then((function(e){var n=st(e.byteLength,r),i=n,o=t.getExtraData();null!==o&&(i+=st(o.byteLength,r)-o.byteLength);var a=t.generate(i),s=a.byteLength-n;return p.from(a,t.dosHeader.newHeaderAddress+t.newHeader.getDataDirectoryOffset()).set(h.Certificate,{size:n,virtualAddress:s}),y(a,!0),ut(a,s,e,0,e.byteLength),a}))}}}]);