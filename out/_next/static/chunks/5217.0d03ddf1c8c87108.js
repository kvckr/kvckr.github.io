"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5217],{8513:function(e,t,n){var i=n(5893),o=n(4393),s=n(2675),r=n(5152),a=n.n(r),c=n(7294);const l=a()((()=>n.e(6709).then(n.bind(n,6709))),{loadableGenerated:{webpack:()=>[6709]}});t.Z=e=>{let{id:t,useHook:n,StyledComponent:r,children:a}=e;const{processes:{[t]:{url:d=""}={}}}=(0,s.z)(),u=(0,c.useRef)(null),[h,p]=(0,c.useState)(!0),f=(0,c.useMemo)((()=>({contain:"strict",visibility:h?"hidden":"visible"})),[h]);return n(t,d,u,p,h),(0,i.jsxs)(i.Fragment,{children:[h&&(0,i.jsx)(l,{}),(0,i.jsx)(r,{ref:u,style:f,...(0,o.Z)({id:t}),children:a})]})}},5217:function(e,t,n){n.r(t),n.d(t,{default:function(){return F}});var i=n(5893),o=n(8513),s=n(4141).ZP.div.withConfig({componentId:"sc-d19956e2-0"})`
  align-items: center;
  background-color: #000;
  display: flex;
  height: 100%;
  width: 100%;

  canvas {
    image-rendering: pixelated;
    image-rendering: crisp-edges;
    position: absolute;
    top: 0 !important;
    touch-action: none;
    -webkit-touch-callout: none;
    user-select: none;
    width: 100%;
  }

  div,
  video {
    display: none;
  }

  .emulator-mouse-overlay {
    display: block;
    inset: 0;
    position: absolute;
  }
`;const r={emulatorFunction:"dosWorker"},a=["__core-js_shared__","compiled","core","emulatorsUi","exports","WDOSBOX","worker"],c={".jsdos/dosbox.conf":"/Program Files/js-dos/dosbox.conf",".jsdos/jsdos.json":"/Program Files/js-dos/jsdos.json"},l=new Set(["Alt","ContextMenu","F1","F3","F5","F6","F7","F10","F11","F12"]);var d=n(4899),u=n(5620),h=n(2675),p=n(1864),f=n(7294),w=n(8680),m=n(9595),g=n(8017),b=n(8764).Buffer,x=(e,t,i,o)=>{const{appendFileToTitle:s}=(0,d.Z)(e),{exists:r,mkdirRecursive:l,readFile:x,updateFolder:y,writeFile:v}=(0,u.o)(),{linkElement:k,processes:{[e]:T}}=(0,h.z)(),{closing:F}=T||{},[E,z]=(0,f.useState)({}),C=(0,f.useCallback)((async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=`${(0,p.basename)(e)}.zip.save`;await r(w.Tl)||(await l(w.Tl),y((0,p.dirname)(w.Tl)));const s=(0,p.join)(w.Tl,i);if(void 0!==E[e]&&await v(s,b.from(await E[e].persist()),!0)){if(t){const e=(0,p.join)(w.Xo,w.Tl),n=(0,p.join)(w.Xo,`${s}${w.Qy}`);await r(e)||(await l(e),y((0,p.dirname)(w.Tl))),await v(n,t,!0)}n&&o?.stop(),y(w.Tl,i)}}),[E,o,r,l,y,v]),j=(0,f.useCallback)((async()=>{const[l]=Object.keys(E);l&&C(l);const d=t?await x(t):b.from(""),u=(0,p.extname)(t).toLowerCase(),{zipAsync:h}=await n.e(54).then(n.bind(n,54)),f=".exe"===u?b.from(await h({[(0,p.basename)(t)]:d})):d,y=(0,m.YS)(".jsdos"===u?f:await(async(e,t)=>{const{addFileToZip:i,isFileInZip:o}=await n.e(54).then(n.bind(n,54));return Object.entries(c).reduce((async(e,n)=>{let[s,r]=n;const a=await e;return a.length>0&&await o(a,s)?a:i(a,r,s,t)}),Promise.resolve(e))})(f,x)),v=(0,p.join)(w.Tl,`${(0,p.basename)(t)}.zip.save`),T=await r(v)?(0,m.YS)(await x(v)):void 0,F=await(o?.run(y,T));if(F){const n=i.current?.querySelector("canvas");n instanceof HTMLCanvasElement&&(k(e,"peekElement",n),z({[t]:F}),s((0,p.basename)(t)),(0,m.EK)(y),T&&(0,m.EK)(T),(0,g.od)(a))}}),[s,C,i,E,o,r,e,k,x,t]);return(0,f.useEffect)((()=>(T&&!F&&o&&!(t in E)&&(z({[t]:void 0}),j()),()=>{if(t&&F){const e=e=>{window.setTimeout((()=>C(t,e,F)),w.jx.WINDOW)};(async()=>{const e=await(E[t]?.screenshot());return e?(0,m.fv)(e):void 0})().then(e).catch(e)}})),[C,F,E,o,j,T,t]),E[t]},y=n(5835),v=n(6819);const k=e=>{l.has(e.key)&&e.preventDefault()};var T=(e,t,n,i,o)=>{const{updateWindowSize:s}=(0,y.Z)(e),[a,c]=(0,f.useState)(),l=(0,f.useRef)(!1),{foregroundId:d}=(0,v.k)(),u=x(e,t,n,a),{closeWithTransition:p,processes:{[e]:{libs:g=[]}={}}={}}=(0,h.z)();(0,f.useEffect)((()=>{a||l.current||(l.current=!0,(0,m.mb)(g).then((()=>{if(window.emulators&&(window.emulators.pathPrefix="/Program Files/js-dos/",n.current)){const e=n.current.closest("section");e?.addEventListener("keydown",k,{capture:!0}),e?.addEventListener("keyup",k,{capture:!0}),e?.addEventListener("focus",(()=>n.current?.focus(w.eS)),{passive:!0}),c(window.Dos(n.current,r))}})))}),[n,a,g]),(0,f.useEffect)((()=>{if(u&&o){s(u.height(),u.width());const t=u.events();t.onMessage(((t,n)=>{if(n.startsWith("[LOG_EXEC]")){const[,t]=n.split("[LOG_EXEC]"),[i]=t.replace("Parsing command line: ","").split(" ");"EXIT"===i.toUpperCase()&&p(e)}})),t.onFrameSize((()=>{const e=n.current?.querySelector("canvas"),[t,i]=[(0,m.Vy)(e?.style.width),(0,m.Vy)(e?.style.height)],{height:o=0,width:r=0}=e?.getBoundingClientRect()||{};i&&t&&(i!==o||t!==r)&&s(i,t)})),t.onExit((()=>window.SimpleKeyboardInstances?.emulatorKeyboard?.destroy())),i(!1)}}),[p,n,u,a?.layers,e,o,i,s]),(0,f.useLayoutEffect)((()=>{e!==d||o||n.current?.focus(w.eS)}),[n,o,d,e])},F=e=>{let{id:t}=e;return(0,i.jsx)(o.Z,{StyledComponent:s,id:t,useHook:T})}},4393:function(e,t,n){var i=n(6166),o=n(80),s=n(6050),r=n(5620),a=n(2675),c=n(6819),l=n(1864),d=n(7294),u=n(8680),h=n(9595);t.Z=e=>{let{callback:t,directory:n=u.Ll,id:p,onDragLeave:f,onDragOver:w,updatePositions:m}=e;const{url:g}=(0,a.z)(),{iconPositions:b,sortOrders:x,setIconPositions:y}=(0,c.k)(),{mkdirRecursive:v,updateFolder:k,writeFile:T}=(0,r.o)(),F=(0,d.useCallback)((async(e,t,n)=>{if(p)if(t){const i=(0,l.join)(u.Ll,e);await v(u.Ll),await T(i,t,!0)&&(n===s.v.UPDATE_URL&&g(p,i),k(u.Ll,e))}else n===s.v.UPDATE_URL&&g(p,e)}),[p,v,k,g,T]),{openTransferDialog:E}=(0,i.Z)();return{onDragLeave:f,onDragOver:e=>{w?.(e),(0,h.nK)(e)},onDrop:e=>{if(m&&e.target instanceof HTMLElement){const{files:t,text:i}=(0,o.p4)(e);if(0===t.length&&""===i)return;const s={x:e.clientX,y:e.clientY};let r=[];if(i){try{r=JSON.parse(i)}catch{}const[e]=r;if(!e)return;if(e.startsWith(n)&&(0,l.basename)(e)===(0,l.relative)(n,e))return;r=r.map((e=>(0,l.basename)(e)))}else r=t instanceof FileList?[...t].map((e=>e.name)):[...t].map((e=>e.getAsFile()?.name||"")).filter(Boolean);r=r.map((e=>{if(!b[`${n}/${e}`])return e;let t=0,i="";do{t+=1,i=`${n}/${(0,l.basename)(e,(0,l.extname)(e))} (${t})${(0,l.extname)(e)}`}while(b[i]);return(0,l.basename)(i)})),(0,h.vi)(n,e.target,b,x,s,r,y)}(0,o.WG)(e,t||F,n,E,Boolean(p))}}}},8465:function(e,t,n){n.d(t,{BS:function(){return r},FC:function(){return o},F_:function(){return i},wV:function(){return s}});const i={bottom:!1,bottomLeft:!1,bottomRight:!1,left:!1,right:!1,top:!1,topLeft:!1,topRight:!1},o={bottom:!0,bottomLeft:!0,bottomRight:!0,left:!0,right:!0,top:!0,topLeft:!0,topRight:!0},s=30,r=166,a={cancel:".cancel",dragHandleClassName:"handle",enableUserSelectHack:!1,minHeight:`${s}px`,minWidth:`${r}px`,resizeHandleStyles:{bottom:{bottom:"-3px",cursor:"ns-resize",height:"6px"},bottomLeft:{bottom:"-3px",cursor:"nesw-resize",height:"12px",left:"-3px",width:"12px"},bottomRight:{bottom:"-3px",cursor:"nwse-resize",height:"12px",right:"-3px",width:"12px"},left:{cursor:"ew-resize",left:"-3px",width:"6px"},right:{cursor:"ew-resize",right:"-3px",width:"6px"},top:{cursor:"ns-resize",height:"6px",top:"-3px"},topLeft:{cursor:"nwse-resize",height:"12px",left:"-3px",top:"-3px",width:"12px"},topRight:{cursor:"nesw-resize",height:"12px",right:"-3px",top:"-3px",width:"12px"}}};t.ZP=a},8459:function(e,t,n){n.d(t,{Rf:function(){return a},b$:function(){return d},hu:function(){return r},ix:function(){return l},mZ:function(){return c}});var i=n(8465),o=n(8680),s=n(9595);const r=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const[r]=e.split(o.CC),a=`${r}${o.CC}`,c=n.find((e=>e.startsWith(a)))||"",{componentWindow:l}=t?.[c]||{},{x:d=0,y:u=0,width:h=0,height:p=0}=l?.getBoundingClientRect()||{};return d+i+h>(0,s.E9)()||u+i+p>(0,s.sI)()||!d&&!u?void 0:{x:d+i,y:u+i}},a=e=>{let{height:t,width:n}=e;const[i,r]=[(0,s.sI)(),(0,s.E9)()];return{x:Math.floor(r/2-(0,s.Vy)(n)/2),y:Math.floor((i-o.bK)/2-(0,s.Vy)(t)/2)}},c={BOTTOM:15,LEFT:150,RIGHT:50,TOP:15},l=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{position:i,size:o}=e||{},{x:r=0,y:a=0}=i||{},{height:l=0,width:d=0}=o||{};return n?r+c.RIGHT>t.x||r+(0,s.Vy)(d)-c.LEFT<0||a+c.BOTTOM>t.y||a+c.TOP<0:r<0||a<0||r+(0,s.Vy)(d)>t.x||a+(0,s.Vy)(l)>t.y},d=(e,t)=>{const n=Number(e.height),r=Number(e.width),[a,c]=[(0,s.sI)(),(0,s.E9)()],l=a-o.bK,d=Math.max(i.wV,Math.min(n,l)),u=Math.max(i.BS,Math.min(r,c));if(!t)return{height:d,width:u};const h=n===d,p=r===u;return h||p?h?p?{height:d,width:u}:{height:Math.round(d/(r/u)),width:u}:{height:d,width:Math.round(u/(n/d))}:n>r?{height:d,width:Math.round(u/(l/d))}:{height:Math.round(d/(c/u)),width:u}}},4899:function(e,t,n){var i=n(2675),o=n(3989),s=n(7294),r=n(8680);t.Z=e=>{const{title:t}=(0,i.z)(),[n]=e.split(r.CC),{title:a}=o.Z[n]||{};return{appendFileToTitle:(0,s.useCallback)(((n,i)=>{const o=n?` - ${n}${i?` ${r.xy}`:""}`:"";t(e,`${a}${o}`)}),[e,a,t]),prependFileToTitle:(0,s.useCallback)(((n,i)=>{const o=n?`${i?`${r.xy} `:""}${n} - `:"";t(e,`${o}${a}`)}),[e,a,t])}}},5835:function(e,t,n){var i=n(8459),o=n(2675),s=n(6819),r=n(7294),a=n(4141);t.Z=e=>{const{setWindowStates:t}=(0,s.k)(),{processes:{[e]:{lockAspectRatio:n=!1,maximized:c=!1}={}}={}}=(0,o.z)(),{sizes:{titleBar:l}}=(0,a.Fg)();return{updateWindowSize:(0,r.useCallback)(((o,s)=>t((t=>({...t,[e]:{...t?.[e],maximized:c,size:(0,i.b$)({height:o+l.height,width:s},n)}})))),[e,n,c,t,l.height])}}},8017:function(e,t,n){n.d(t,{H3:function(){return r},od:function(){return i},wz:function(){return s}});const i=e=>e.forEach((e=>{if(e in window)try{delete window[e]}finally{Object.assign(window,{[e]:void 0})}})),o=(e,t)=>{window.lockedGlobals={...window.lockedGlobals,[e]:t}},s=e=>o(e,!0),r=e=>{Object.getOwnPropertyDescriptor(window,e)||(e=>{let t;Object.defineProperty(window,e,{get:()=>window.lockedGlobals?.[e]?void 0:t,set(n){window.lockedGlobals?.[e]||(t=n)}})})(e),o(e,!1)}}}]);