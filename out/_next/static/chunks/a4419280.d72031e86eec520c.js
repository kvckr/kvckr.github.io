"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4370],{4124:function(t,e,i){function n(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function r(t,e){return t(e={exports:{}},e.exports),e.exports}i.r(e),i.d(e,{fetchCommandFromWAPM:function(){return _s}});var o=r((function(t){window,t.exports=function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i||4&i&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var r in t)e.d(n,r,function(e){return t[e]}.bind(null,r));return n},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=33)}([function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),t=i(14),e.IBufferService=t.createDecorator("BufferService"),e.ICoreMouseService=t.createDecorator("CoreMouseService"),e.ICoreService=t.createDecorator("CoreService"),e.IDirtyRowService=t.createDecorator("DirtyRowService"),e.IInstantiationService=t.createDecorator("InstantiationService"),e.ILogService=t.createDecorator("LogService"),e.IOptionsService=t.createDecorator("OptionsService")},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),t=function(){function t(){this._listeners=[],this._disposed=!1}return Object.defineProperty(t.prototype,"event",{get:function(){var t=this;return this._event||(this._event=function(e){return t._listeners.push(e),{dispose:function(){if(!t._disposed)for(var i=0;i<t._listeners.length;i++)if(t._listeners[i]===e)return void t._listeners.splice(i,1)}}}),this._event},enumerable:!0,configurable:!0}),t.prototype.fire=function(t){for(var e=[],i=0;i<this._listeners.length;i++)e.push(this._listeners[i]);for(i=0;i<e.length;i++)e[i].call(void 0,t)},t.prototype.dispose=function(){this._listeners&&(this._listeners.length=0),this._disposed=!0},t}(),e.EventEmitter=t},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),t=function(){function t(){this._disposables=[],this._isDisposed=!1}return t.prototype.dispose=function(){this._isDisposed=!0,this._disposables.forEach((function(t){return t.dispose()})),this._disposables.length=0},t.prototype.register=function(t){this._disposables.push(t)},t.prototype.unregister=function(t){-1!==(t=this._disposables.indexOf(t))&&this._disposables.splice(t,1)},t}(),e.Disposable=t},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_COLOR=256,e.DEFAULT_ATTR=256|e.DEFAULT_COLOR<<9,e.CHAR_DATA_ATTR_INDEX=0,e.CHAR_DATA_CHAR_INDEX=1,e.CHAR_DATA_WIDTH_INDEX=2,e.CHAR_DATA_CODE_INDEX=3,e.NULL_CELL_CHAR="",e.NULL_CELL_WIDTH=1,e.NULL_CELL_CODE=0,e.WHITESPACE_CELL_CHAR=" ",e.WHITESPACE_CELL_WIDTH=1,e.WHITESPACE_CELL_CODE=32},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),t=i(14),e.ICharSizeService=t.createDecorator("CharSizeService"),e.ICoreBrowserService=t.createDecorator("CoreBrowserService"),e.IMouseService=t.createDecorator("MouseService"),e.IRenderService=t.createDecorator("RenderService"),e.ISelectionService=t.createDecorator("SelectionService"),e.ISoundService=t.createDecorator("SoundService")},function(t,e,i){var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(8),s=i(3);t=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=0,e.fg=0,e.bg=0,e.combinedData="",e}return r(e,t),e.fromCharData=function(t){var i=new e;return i.setFromCharData(t),i},e.prototype.isCombined=function(){return 2097152&this.content},e.prototype.getWidth=function(){return this.content>>22},e.prototype.getChars=function(){return 2097152&this.content?this.combinedData:2097151&this.content?o.stringFromCodePoint(2097151&this.content):""},e.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content},e.prototype.setFromCharData=function(t){this.fg=t[s.CHAR_DATA_ATTR_INDEX],this.bg=0;var e=!1;if(2<t[s.CHAR_DATA_CHAR_INDEX].length)e=!0;else if(2===t[s.CHAR_DATA_CHAR_INDEX].length){var i=t[s.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=i&&56319>=i){var n=t[s.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=n&&57343>=n?this.content=1024*(i-55296)+n-56320+65536|t[s.CHAR_DATA_WIDTH_INDEX]<<22:e=!0}else e=!0}else this.content=t[s.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|t[s.CHAR_DATA_WIDTH_INDEX]<<22;e&&(this.combinedData=t[s.CHAR_DATA_CHAR_INDEX],this.content=2097152|t[s.CHAR_DATA_WIDTH_INDEX]<<22)},e.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},e}(i(6).AttributeData),e.CellData=t},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),t=function(){function t(){this.bg=this.fg=0}return t.toColorRGB=function(t){return[t>>>16&255,t>>>8&255,255&t]},t.fromColorRGB=function(t){return(255&t[0])<<16|(255&t[1])<<8|255&t[2]},t.prototype.clone=function(){var e=new t;return e.fg=this.fg,e.bg=this.bg,e},t.prototype.isInverse=function(){return 67108864&this.fg},t.prototype.isBold=function(){return 134217728&this.fg},t.prototype.isUnderline=function(){return 268435456&this.fg},t.prototype.isBlink=function(){return 536870912&this.fg},t.prototype.isInvisible=function(){return 1073741824&this.fg},t.prototype.isItalic=function(){return 67108864&this.bg},t.prototype.isDim=function(){return 134217728&this.bg},t.prototype.getFgColorMode=function(){return 50331648&this.fg},t.prototype.getBgColorMode=function(){return 50331648&this.bg},t.prototype.isFgRGB=function(){return 50331648==(50331648&this.fg)},t.prototype.isBgRGB=function(){return 50331648==(50331648&this.bg)},t.prototype.isFgPalette=function(){return 16777216==(50331648&this.fg)||33554432==(50331648&this.fg)},t.prototype.isBgPalette=function(){return 16777216==(50331648&this.bg)||33554432==(50331648&this.bg)},t.prototype.isFgDefault=function(){return 0==(50331648&this.fg)},t.prototype.isBgDefault=function(){return 0==(50331648&this.bg)},t.prototype.getFgColor=function(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}},t.prototype.getBgColor=function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}},t}(),e.AttributeData=t},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.addDisposableDomListener=function(t,e,i,n){return t.addEventListener(e,i,n),{dispose:function(){i&&t.removeEventListener(e,i,n)}}}},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.stringFromCodePoint=function(t){return 65535<t?(t-=65536,String.fromCharCode(55296+(t>>10))+String.fromCharCode(t%1024+56320)):String.fromCharCode(t)},e.utf32ToString=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=t.length);for(var n="";e<i;++e){var r=t[e];65535<r?(r-=65536,n+=String.fromCharCode(55296+(r>>10))+String.fromCharCode(r%1024+56320)):n+=String.fromCharCode(r)}return n},t=function(){function t(){this._interim=0}return t.prototype.clear=function(){this._interim=0},t.prototype.decode=function(t,e){var i=t.length;if(!i)return 0;var n=0,r=0;for(this._interim&&(56320<=(s=t.charCodeAt(r++))&&57343>=s?e[n++]=1024*(this._interim-55296)+s-56320+65536:(e[n++]=this._interim,e[n++]=s),this._interim=0);r<i;++r){var o=t.charCodeAt(r);if(55296<=o&&56319>=o){if(++r>=i)return this._interim=o,n;var s;56320<=(s=t.charCodeAt(r))&&57343>=s?e[n++]=1024*(o-55296)+s-56320+65536:(e[n++]=o,e[n++]=s)}else e[n++]=o}return n},t}(),e.StringToUtf32=t,t=function(){function t(){this.interim=new Uint8Array(3)}return t.prototype.clear=function(){this.interim.fill(0)},t.prototype.decode=function(t,e){var i=t.length;if(!i)return 0;var n,r,o,s,l=0,c=0,a=0;if(this.interim[0]){var h=!1,u=this.interim[0];u&=192==(224&u)?31:224==(240&u)?15:7;for(var d,m=0;(d=63&this.interim[++m])&&4>m;)u<<=6,u|=d;for(var p=192==(224&this.interim[0])?2:224==(240&this.interim[0])?3:4,f=p-m;a<f;){if(a>=i)return 0;if(128!=(192&(d=t[a++]))){a--,h=!0;break}this.interim[m++]=d,u<<=6,u|=63&d}h||(2===p?128>u?a--:e[l++]=u:3===p?2048>u||55296<=u&&57343>=u||(e[l++]=u):65536>u||1114111<u||(e[l++]=u)),this.interim.fill(0)}for(h=i-4;a<i;){for(;!(!(a<h)||128&(n=t[a])||128&(r=t[a+1])||128&(o=t[a+2])||128&(s=t[a+3]));)e[l++]=n,e[l++]=r,e[l++]=o,e[l++]=s,a+=4;if(128>(n=t[a++]))e[l++]=n;else if(192==(224&n)){if(a>=i)return this.interim[0]=n,l;128!=(192&(r=t[a++]))||128>(c=(31&n)<<6|63&r)?a--:e[l++]=c}else if(224==(240&n)){if(a>=i)return this.interim[0]=n,l;if(128!=(192&(r=t[a++])))a--;else{if(a>=i)return this.interim[0]=n,this.interim[1]=r,l;128!=(192&(o=t[a++]))?a--:2048>(c=(15&n)<<12|(63&r)<<6|63&o)||55296<=c&&57343>=c||(e[l++]=c)}}else if(240==(248&n)){if(a>=i)return this.interim[0]=n,l;if(128!=(192&(r=t[a++])))a--;else{if(a>=i)return this.interim[0]=n,this.interim[1]=r,l;if(128!=(192&(o=t[a++])))a--;else{if(a>=i)return this.interim[0]=n,this.interim[1]=r,this.interim[2]=o,l;128!=(192&(s=t[a++]))?a--:65536>(c=(7&n)<<18|(63&r)<<12|(63&o)<<6|63&s)||1114111<c||(e[l++]=c)}}}}return l},t}(),e.Utf8ToUtf32=t},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.INVERTED_DEFAULT_COLOR=257,e.DIM_OPACITY=.5,e.CHAR_ATLAS_CELL_SPACING=1},function(t,e){function i(t){return 2>(t=t.toString(16)).length?"0"+t:t}function n(t,e,n,r){return void 0!==r?"#"+i(t)+i(e)+i(n)+i(r):"#"+i(t)+i(e)+i(n)}function r(t,e,i,n){return void 0===n&&(n=255),(t<<24|e<<16|i<<8|n)>>>0}function o(t){return[t>>24&255,t>>16&255,t>>8&255,255&t]}function s(t){return l(t>>16&255,t>>8&255,255&t)}function l(t,e,i){return e/=255,i/=255,.2126*(.03928>=(t/=255)?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(.03928>=e?e/12.92:Math.pow((e+.055)/1.055,2.4))+.0722*(.03928>=i?i/12.92:Math.pow((i+.055)/1.055,2.4))}function c(t,e){return t<e?(e+.05)/(t+.05):(t+.05)/(e+.05)}function a(t,e,i){return{css:n(t,e,i),rgba:r(t,e,i)}}function h(t,e,i){var n=s(t>>8),r=s(e>>8);if(c(n,r)<i)return r<n?u(t,e,i):d(t,e,i)}function u(t,e,i){var n=t>>24&255,r=t>>16&255;t=t>>8&255;for(var o=e>>24&255,s=e>>16&255,a=c(l(o,e=e>>8&255,s),l(n,r,t));a<i&&(0<o||0<s||0<e);)o-=Math.max(0,Math.ceil(.1*o)),s-=Math.max(0,Math.ceil(.1*s)),a=c(l(o,e-=Math.max(0,Math.ceil(.1*e)),s),l(n,r,t));return(o<<24|s<<16|e<<8|255)>>>0}function d(t,e,i){var n=t>>24&255,r=t>>16&255;t=t>>8&255;for(var o=e>>24&255,s=e>>16&255,a=c(l(o,e=e>>8&255,s),l(n,r,t));a<i&&(255>o||255>s||255>e);)o=Math.min(255,o+Math.ceil(.1*(255-o))),s=Math.min(255,s+Math.ceil(.1*(255-s))),a=c(l(o,e=Math.min(255,e+Math.ceil(.1*(255-e))),s),l(n,r,t));return(o<<24|s<<16|e<<8|255)>>>0}Object.defineProperty(e,"__esModule",{value:!0}),e.blend=function(t,e){var i=(255&e.rgba)/255;if(1===i)return{css:e.css,rgba:e.rgba};var o=t.rgba>>24&255,s=t.rgba>>16&255;return t=t.rgba>>8&255,{css:n(o+=Math.round(((e.rgba>>24&255)-o)*i),s+=Math.round(((e.rgba>>16&255)-s)*i),e=t+Math.round(((e.rgba>>8&255)-t)*i)),rgba:r(o,s,e)}},e.fromCss=function(t){return{css:t,rgba:(parseInt(t.slice(1),16)<<8|255)>>>0}},e.toPaddedHex=i,e.toCss=n,e.toRgba=r,e.fromRgba=o,e.opaque=function(t){var e=o(t=(255|t.rgba)>>>0);return{css:n(e[0],e[1],e[2]),rgba:t}},e.rgbRelativeLuminance=s,e.rgbRelativeLuminance2=l,e.contrastRatio=c,e.rgbaToColor=a,e.ensureContrastRatioRgba=h,e.ensureContrastRatio=function(t,e,i){if(t=h(t.rgba,e.rgba,i))return a(t>>24&255,t>>16&255,t>>8&255)},e.reduceLuminance=u,e.increaseLuminance=d},function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=(t="undefined"==typeof navigator)?"node":navigator.userAgent;t=t?"node":navigator.platform,e.isFirefox=!!~i.indexOf("Firefox"),e.isSafari=/^((?!chrome|android).)*safari/i.test(i),i=0<=["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(t),e.isMac=i,e.isIpad="iPad"===t,e.isIphone="iPhone"===t,i=0<=["Windows","Win16","Win32","WinCE"].indexOf(t),e.isWindows=i,e.isLinux=0<=t.indexOf("Linux")},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.NUL="\0",t.SOH="",t.STX="",t.ETX="",t.EOT="",t.ENQ="",t.ACK="",t.BEL="",t.BS="\b",t.HT="\t",t.LF="\n",t.VT="\v",t.FF="\f",t.CR="\r",t.SO="",t.SI="",t.DLE="",t.DC1="",t.DC2="",t.DC3="",t.DC4="",t.NAK="",t.SYN="",t.ETB="",t.CAN="",t.EM="",t.SUB="",t.ESC="",t.FS="",t.GS="",t.RS="",t.US="",t.SP=" ",t.DEL=""}(e.C0||(e.C0={})),function(t){t.PAD="",t.HOP="",t.BPH="",t.NBH="",t.IND="",t.NEL="",t.SSA="",t.ESA="",t.HTS="",t.HTJ="",t.VTS="",t.PLD="",t.PLU="",t.RI="",t.SS2="",t.SS3="",t.DCS="",t.PU1="",t.PU2="",t.STS="",t.CCH="",t.MW="",t.SPA="",t.EPA="",t.SOS="",t.SGCI="",t.SCI="",t.CSI="",t.ST="",t.OSC="",t.PM="",t.APC=""}(e.C1||(e.C1={}))},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(3),r=i(9),o=i(24),s=i(6),l=i(27),c=i(10);t=function(){function t(t,e,i,n,r,o,s,l){this._container=t,this._alpha=n,this._colors=r,this._rendererId=o,this._bufferService=s,this._optionsService=l,this._scaledCharTop=this._scaledCharLeft=this._scaledCellHeight=this._scaledCellWidth=this._scaledCharHeight=this._scaledCharWidth=0,this._currentGlyphIdentifier={chars:"",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1},this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-"+e+"-layer"),this._canvas.style.zIndex=i.toString(),this._initCanvas(),this._container.appendChild(this._canvas)}return t.prototype.dispose=function(){var t;this._container.removeChild(this._canvas),null===(t=this._charAtlas)||void 0===t||t.dispose()},t.prototype._initCanvas=function(){this._ctx=l.throwIfFalsy(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()},t.prototype.onOptionsChanged=function(){},t.prototype.onBlur=function(){},t.prototype.onFocus=function(){},t.prototype.onCursorMove=function(){},t.prototype.onGridChanged=function(){},t.prototype.onSelectionChanged=function(){},t.prototype.setColors=function(t){this._refreshCharAtlas(t)},t.prototype._setTransparency=function(t){if(t!==this._alpha){var e=this._canvas;this._alpha=t,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,e),this._refreshCharAtlas(this._colors),this.onGridChanged(0,this._bufferService.rows-1)}},t.prototype._refreshCharAtlas=function(t){0>=this._scaledCharWidth&&0>=this._scaledCharHeight||(this._charAtlas=o.acquireCharAtlas(this._optionsService.options,this._rendererId,t,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())},t.prototype.resize=function(t){this._scaledCellWidth=t.scaledCellWidth,this._scaledCellHeight=t.scaledCellHeight,this._scaledCharWidth=t.scaledCharWidth,this._scaledCharHeight=t.scaledCharHeight,this._scaledCharLeft=t.scaledCharLeft,this._scaledCharTop=t.scaledCharTop,this._canvas.width=t.scaledCanvasWidth,this._canvas.height=t.scaledCanvasHeight,this._canvas.style.width=t.canvasWidth+"px",this._canvas.style.height=t.canvasHeight+"px",this._alpha||this._clearAll(),this._refreshCharAtlas(this._colors)},t.prototype._fillCells=function(t,e,i,n){this._ctx.fillRect(t*this._scaledCellWidth,e*this._scaledCellHeight,i*this._scaledCellWidth,n*this._scaledCellHeight)},t.prototype._fillBottomLineAtCells=function(t,e,i){void 0===i&&(i=1),this._ctx.fillRect(t*this._scaledCellWidth,(e+1)*this._scaledCellHeight-window.devicePixelRatio-1,i*this._scaledCellWidth,window.devicePixelRatio)},t.prototype._fillLeftLineAtCell=function(t,e){this._ctx.fillRect(t*this._scaledCellWidth,e*this._scaledCellHeight,window.devicePixelRatio,this._scaledCellHeight)},t.prototype._strokeRectAtCell=function(t,e,i,n){this._ctx.lineWidth=window.devicePixelRatio,this._ctx.strokeRect(t*this._scaledCellWidth+window.devicePixelRatio/2,e*this._scaledCellHeight+window.devicePixelRatio/2,i*this._scaledCellWidth-window.devicePixelRatio,n*this._scaledCellHeight-window.devicePixelRatio)},t.prototype._clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))},t.prototype._clearCells=function(t,e,i,n){this._alpha?this._ctx.clearRect(t*this._scaledCellWidth,e*this._scaledCellHeight,i*this._scaledCellWidth,n*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(t*this._scaledCellWidth,e*this._scaledCellHeight,i*this._scaledCellWidth,n*this._scaledCellHeight))},t.prototype._fillCharTrueColor=function(t,e,i){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline="middle",this._clipRow(i),this._ctx.fillText(t.getChars(),e*this._scaledCellWidth+this._scaledCharLeft,i*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight/2)},t.prototype._drawChars=function(t,e,i){var o,s,l=this._getContrastColor(t);l||t.isFgRGB()||t.isBgRGB()?this._drawUncachedChars(t,e,i,l):(t.isInverse()?(o=t.isBgDefault()?r.INVERTED_DEFAULT_COLOR:t.getBgColor(),s=t.isFgDefault()?r.INVERTED_DEFAULT_COLOR:t.getFgColor()):(s=t.isBgDefault()?n.DEFAULT_COLOR:t.getBgColor(),o=t.isFgDefault()?n.DEFAULT_COLOR:t.getFgColor()),o+=this._optionsService.options.drawBoldTextInBrightColors&&t.isBold()&&8>o?8:0,this._currentGlyphIdentifier.chars=t.getChars()||n.WHITESPACE_CELL_CHAR,this._currentGlyphIdentifier.code=t.getCode()||n.WHITESPACE_CELL_CODE,this._currentGlyphIdentifier.bg=s,this._currentGlyphIdentifier.fg=o,this._currentGlyphIdentifier.bold=!!t.isBold(),this._currentGlyphIdentifier.dim=!!t.isDim(),this._currentGlyphIdentifier.italic=!!t.isItalic(),this._charAtlas&&this._charAtlas.draw(this._ctx,this._currentGlyphIdentifier,e*this._scaledCellWidth+this._scaledCharLeft,i*this._scaledCellHeight+this._scaledCharTop)||this._drawUncachedChars(t,e,i))},t.prototype._drawUncachedChars=function(t,e,i,n){this._ctx.save(),this._ctx.font=this._getFont(!!t.isBold(),!!t.isItalic()),this._ctx.textBaseline="middle",t.isInverse()?n?this._ctx.fillStyle=n.css:t.isBgDefault()?this._ctx.fillStyle=c.opaque(this._colors.background).css:t.isBgRGB()?this._ctx.fillStyle="rgb("+s.AttributeData.toColorRGB(t.getBgColor()).join(",")+")":(n=t.getBgColor(),this._optionsService.options.drawBoldTextInBrightColors&&t.isBold()&&8>n&&(n+=8),this._ctx.fillStyle=this._colors.ansi[n].css):n?this._ctx.fillStyle=n.css:t.isFgDefault()?this._ctx.fillStyle=this._colors.foreground.css:t.isFgRGB()?this._ctx.fillStyle="rgb("+s.AttributeData.toColorRGB(t.getFgColor()).join(",")+")":(n=t.getFgColor(),this._optionsService.options.drawBoldTextInBrightColors&&t.isBold()&&8>n&&(n+=8),this._ctx.fillStyle=this._colors.ansi[n].css),this._clipRow(i),t.isDim()&&(this._ctx.globalAlpha=r.DIM_OPACITY),this._ctx.fillText(t.getChars(),e*this._scaledCellWidth+this._scaledCharLeft,i*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight/2),this._ctx.restore()},t.prototype._clipRow=function(t){this._ctx.beginPath(),this._ctx.rect(0,t*this._scaledCellHeight,this._bufferService.cols*this._scaledCellWidth,this._scaledCellHeight),this._ctx.clip()},t.prototype._getFont=function(t,e){return(e?"italic":"")+" "+(t?this._optionsService.options.fontWeightBold:this._optionsService.options.fontWeight)+" "+this._optionsService.options.fontSize*window.devicePixelRatio+"px "+this._optionsService.options.fontFamily},t.prototype._getContrastColor=function(t){if(1!==this._optionsService.options.minimumContrastRatio){var e=this._colors.contrastCache.getColor(t.bg,t.fg);if(void 0!==e)return e||void 0;e=t.getFgColor();var i=t.getFgColorMode(),n=t.getBgColor(),r=t.getBgColorMode(),o=!!t.isInverse(),s=!!t.isInverse();if(o){var l=e;e=n,n=l,l=i,i=r,r=l}if(n=this._resolveBackgroundRgba(r,n,o),e=this._resolveForegroundRgba(i,e,o,s),e=c.ensureContrastRatioRgba(n,e,this._optionsService.options.minimumContrastRatio))return e={css:c.toCss(e>>24&255,e>>16&255,e>>8&255),rgba:e},this._colors.contrastCache.setColor(t.bg,t.fg,e),e;this._colors.contrastCache.setColor(t.bg,t.fg,null)}},t.prototype._resolveBackgroundRgba=function(t,e,i){switch(t){case 16777216:case 33554432:return this._colors.ansi[e].rgba;case 50331648:return e<<8;default:return i?this._colors.foreground.rgba:this._colors.background.rgba}},t.prototype._resolveForegroundRgba=function(t,e,i,n){switch(t){case 16777216:case 33554432:return this._optionsService.options.drawBoldTextInBrightColors&&n&&8>e&&(e+=8),this._colors.ansi[e].rgba;case 50331648:return e<<8;default:return i?this._colors.background.rgba:this._colors.foreground.rgba}},t}(),e.BaseRenderLayer=t},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.serviceRegistry=new Map,e.getServiceDependencies=function(t){return t.di$dependencies||[]},e.createDecorator=function(t){function i(t,e,n){if(3!==arguments.length)throw Error("@IServiceName-decorator can only be used to decorate a parameter");var r=i;t.di$target===t?t.di$dependencies.push({id:r,index:n}):(t.di$dependencies=[{id:r,index:n}],t.di$target=t)}return e.serviceRegistry.has(t)?e.serviceRegistry.get(t):(i.toString=function(){return t},e.serviceRegistry.set(t,i),i)}},function(t,e){function i(t,e,i,n){if(void 0===i&&(i=0),void 0===n&&(n=t.length),i>=t.length)return t;for(i=(t.length+i)%t.length,n=n>=t.length?t.length:(t.length+n)%t.length;i<n;++i)t[i]=e;return t}Object.defineProperty(e,"__esModule",{value:!0}),e.fill=function(t,e,n,r){return t.fill?t.fill(e,n,r):i(t,e,n,r)},e.fillFallback=i,e.concat=function(t,e){var i=new t.constructor(t.length+e.length);return i.set(t),i.set(e,t.length),i}},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(8),r=i(3),o=i(5);t=i(6),e.DEFAULT_ATTR_DATA=Object.freeze(new t.AttributeData),t=function(){function t(t,e,i){for(void 0===i&&(i=!1),this.isWrapped=i,this._combined={},this._data=new Uint32Array(3*t),e=e||o.CellData.fromCharData([0,r.NULL_CELL_CHAR,r.NULL_CELL_WIDTH,r.NULL_CELL_CODE]),i=0;i<t;++i)this.setCell(i,e);this.length=t}return t.prototype.get=function(t){var e=this._data[3*t],i=2097151&e;return[this._data[3*t+1],2097152&e?this._combined[t]:i?n.stringFromCodePoint(i):"",e>>22,2097152&e?this._combined[t].charCodeAt(this._combined[t].length-1):i]},t.prototype.set=function(t,e){this._data[3*t+1]=e[r.CHAR_DATA_ATTR_INDEX],1<e[r.CHAR_DATA_CHAR_INDEX].length?(this._combined[t]=e[1],this._data[3*t]=2097152|t|e[r.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*t]=e[r.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|e[r.CHAR_DATA_WIDTH_INDEX]<<22},t.prototype.getWidth=function(t){return this._data[3*t]>>22},t.prototype.hasWidth=function(t){return 12582912&this._data[3*t]},t.prototype.getFg=function(t){return this._data[3*t+1]},t.prototype.getBg=function(t){return this._data[3*t+2]},t.prototype.hasContent=function(t){return 4194303&this._data[3*t]},t.prototype.getCodePoint=function(t){var e=this._data[3*t];return 2097152&e?this._combined[t].charCodeAt(this._combined[t].length-1):2097151&e},t.prototype.isCombined=function(t){return 2097152&this._data[3*t]},t.prototype.getString=function(t){var e=this._data[3*t];return 2097152&e?this._combined[t]:2097151&e?n.stringFromCodePoint(2097151&e):""},t.prototype.loadCell=function(t,e){var i=3*t;return e.content=this._data[i+0],e.fg=this._data[i+1],e.bg=this._data[i+2],2097152&e.content&&(e.combinedData=this._combined[t]),e},t.prototype.setCell=function(t,e){2097152&e.content&&(this._combined[t]=e.combinedData),this._data[3*t]=e.content,this._data[3*t+1]=e.fg,this._data[3*t+2]=e.bg},t.prototype.setCellFromCodePoint=function(t,e,i,n,r){this._data[3*t]=e|i<<22,this._data[3*t+1]=n,this._data[3*t+2]=r},t.prototype.addCodepointToCell=function(t,e){var i=this._data[3*t];2097152&i?this._combined[t]+=n.stringFromCodePoint(e):(2097151&i?(this._combined[t]=n.stringFromCodePoint(2097151&i)+n.stringFromCodePoint(e),i&=-2097152,i|=2097152):i=4194304|e,this._data[3*t]=i)},t.prototype.insertCells=function(t,e,i){if(t%=this.length,e<this.length-t){for(var n=new o.CellData,r=this.length-t-e-1;0<=r;--r)this.setCell(t+e+r,this.loadCell(t+r,n));for(r=0;r<e;++r)this.setCell(t+r,i)}else for(r=t;r<this.length;++r)this.setCell(r,i)},t.prototype.deleteCells=function(t,e,i){if(t%=this.length,e<this.length-t){for(var n=new o.CellData,r=0;r<this.length-t-e;++r)this.setCell(t+r,this.loadCell(t+e+r,n));r=this.length-e}else r=t;for(;r<this.length;++r)this.setCell(r,i)},t.prototype.replaceCells=function(t,e,i){for(;t<e&&t<this.length;)this.setCell(t++,i)},t.prototype.resize=function(t,e){if(t!==this.length){if(t>this.length){var i=new Uint32Array(3*t);for(this.length&&(3*t<this._data.length?i.set(this._data.subarray(0,3*t)):i.set(this._data)),this._data=i,i=this.length;i<t;++i)this.setCell(i,e)}else if(t)for((i=new Uint32Array(3*t)).set(this._data.subarray(0,3*t)),this._data=i,e=Object.keys(this._combined),i=0;i<e.length;i++){var n=parseInt(e[i],10);n>=t&&delete this._combined[n]}else this._data=new Uint32Array(0),this._combined={};this.length=t}},t.prototype.fill=function(t){this._combined={};for(var e=0;e<this.length;++e)this.setCell(e,t)},t.prototype.copyFrom=function(t){for(var e in this.length!==t.length?this._data=new Uint32Array(t._data):this._data.set(t._data),this.length=t.length,this._combined={},t._combined)this._combined[e]=t._combined[e];this.isWrapped=t.isWrapped},t.prototype.clone=function(){var e,i=new t(0);for(e in i._data=new Uint32Array(this._data),i.length=this.length,this._combined)i._combined[e]=this._combined[e];return i.isWrapped=this.isWrapped,i},t.prototype.getTrimmedLength=function(){for(var t=this.length-1;0<=t;--t)if(4194303&this._data[3*t])return t+(this._data[3*t]>>22);return 0},t.prototype.copyCellsFrom=function(t,e,i,n,r){var o=t._data;if(r)for(var s=n-1;0<=s;s--)for(r=0;3>r;r++)this._data[3*(i+s)+r]=o[3*(e+s)+r];else for(s=0;s<n;s++)for(r=0;3>r;r++)this._data[3*(i+s)+r]=o[3*(e+s)+r];for(n=Object.keys(t._combined),r=0;r<n.length;r++)(o=parseInt(n[r],10))>=e&&(this._combined[o-e+i]=t._combined[o])},t.prototype.translateToString=function(t,e,i){for(void 0===t&&(t=!1),void 0===e&&(e=0),void 0===i&&(i=this.length),t&&(i=Math.min(i,this.getTrimmedLength())),t="";e<i;){var o=this._data[3*e],s=2097151&o;t+=2097152&o?this._combined[e]:s?n.stringFromCodePoint(s):r.WHITESPACE_CELL_CHAR,e+=o>>22||1}return t},t}(),e.BufferLine=t},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.promptLabel="Terminal input",e.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.CHARSETS={},e.DEFAULT_CHARSET=e.CHARSETS.B,e.CHARSETS[0]={"`":"◆",a:"▒",b:"\t",c:"\f",d:"\r",e:"\n",f:"°",g:"±",h:"␤",i:"\v",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},e.CHARSETS.A={"#":"£"},e.CHARSETS.B=null,e.CHARSETS[4]={"#":"£","@":"¾","[":"ij","\\":"½","]":"|","{":"¨","|":"f","}":"¼","~":"´"},e.CHARSETS.C=e.CHARSETS[5]={"[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},e.CHARSETS.R={"#":"£","@":"à","[":"°","\\":"ç","]":"§","{":"é","|":"ù","}":"è","~":"¨"},e.CHARSETS.Q={"@":"à","[":"â","\\":"ç","]":"ê","^":"î","`":"ô","{":"é","|":"ù","}":"è","~":"û"},e.CHARSETS.K={"@":"§","[":"Ä","\\":"Ö","]":"Ü","{":"ä","|":"ö","}":"ü","~":"ß"},e.CHARSETS.Y={"#":"£","@":"§","[":"°","\\":"ç","]":"é","`":"ù","{":"à","|":"ò","}":"è","~":"ì"},e.CHARSETS.E=e.CHARSETS[6]={"@":"Ä","[":"Æ","\\":"Ø","]":"Å","^":"Ü","`":"ä","{":"æ","|":"ø","}":"å","~":"ü"},e.CHARSETS.Z={"#":"£","@":"§","[":"¡","\\":"Ñ","]":"¿","{":"°","|":"ñ","}":"ç"},e.CHARSETS.H=e.CHARSETS[7]={"@":"É","[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},e.CHARSETS["="]={"#":"ù","@":"à","[":"é","\\":"ç","]":"ê","^":"î",_:"è","`":"ô","{":"ä","|":"ö","}":"ü","~":"û"}},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(15);e.wcwidth=function(t){var e=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],i=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],r=0|t.control,o=new Uint8Array(65536);for(n.fill(o,1),o[0]=t.nul,n.fill(o,t.control,1,32),n.fill(o,t.control,127,160),n.fill(o,2,4352,4448),o[9001]=2,o[9002]=2,n.fill(o,2,11904,42192),o[12351]=1,n.fill(o,2,44032,55204),n.fill(o,2,63744,64256),n.fill(o,2,65040,65050),n.fill(o,2,65072,65136),n.fill(o,2,65280,65377),n.fill(o,2,65504,65511),t=0;t<e.length;++t)n.fill(o,0,e[t][0],e[t][1]+1);return function(t){if(32>t)t=0|r;else if(127>t)t=1;else if(65536>t)t=o[t];else{t:{var e,n=t,s=0,l=i.length-1;if(!(n<i[0][0]||n>i[l][1]))for(;l>=s;)if(n>i[e=s+l>>1][1])s=e+1;else{if(!(n<i[e][0])){n=!0;break t}l=e-1}n=!1}t=n?0:131072<=t&&196605>=t||196608<=t&&262141>=t?2:1}return t}}({nul:0,control:0}),e.getStringCellWidth=function(t){for(var i=0,n=t.length,r=0;r<n;++r){var o=t.charCodeAt(r);if(55296<=o&&56319>=o){if(++r>=n)return i+e.wcwidth(o);var s=t.charCodeAt(r);56320<=s&&57343>=s?o=1024*(o-55296)+s-56320+65536:i+=e.wcwidth(s)}i+=e.wcwidth(o)}return i}},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),t=function(){function t(t,e){if(void 0===t&&(t=32),void 0===e&&(e=32),this.maxLength=t,this.maxSubParamsLength=e,256<e)throw Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(t),this.length=0,this._subParams=new Int32Array(e),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(t),this._digitIsSub=this._rejectSubDigits=this._rejectDigits=!1}return t.fromArray=function(e){var i=new t;if(!e.length)return i;for(var n=e[0]instanceof Array?1:0;n<e.length;++n){var r=e[n];if(r instanceof Array)for(var o=0;o<r.length;++o)i.addSubParam(r[o]);else i.addParam(r)}return i},t.prototype.clone=function(){var e=new t(this.maxLength,this.maxSubParamsLength);return e.params.set(this.params),e.length=this.length,e._subParams.set(this._subParams),e._subParamsLength=this._subParamsLength,e._subParamsIdx.set(this._subParamsIdx),e._rejectDigits=this._rejectDigits,e._rejectSubDigits=this._rejectSubDigits,e._digitIsSub=this._digitIsSub,e},t.prototype.toArray=function(){for(var t=[],e=0;e<this.length;++e){t.push(this.params[e]);var i=this._subParamsIdx[e]>>8,n=255&this._subParamsIdx[e];0<n-i&&t.push(Array.prototype.slice.call(this._subParams,i,n))}return t},t.prototype.reset=function(){this._subParamsLength=this.length=0,this._digitIsSub=this._rejectSubDigits=this._rejectDigits=!1},t.prototype.addParam=function(t){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(-1>t)throw Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=2147483647<t?2147483647:t}},t.prototype.addSubParam=function(t){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(-1>t)throw Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=2147483647<t?2147483647:t,this._subParamsIdx[this.length-1]++}},t.prototype.hasSubParams=function(t){return 0<(255&this._subParamsIdx[t])-(this._subParamsIdx[t]>>8)},t.prototype.getSubParams=function(t){var e=this._subParamsIdx[t]>>8;return 0<(t=255&this._subParamsIdx[t])-e?this._subParams.subarray(e,t):null},t.prototype.getSubParamsAll=function(){for(var t={},e=0;e<this.length;++e){var i=this._subParamsIdx[e]>>8,n=255&this._subParamsIdx[e];0<n-i&&(t[e]=this._subParams.slice(i,n))}return t},t.prototype.addDigit=function(t){var e;if(!(this._rejectDigits||!(e=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)){var i=this._digitIsSub?this._subParams:this.params,n=i[e-1];i[e-1]=~n?Math.min(10*n+t,2147483647):t}},t}(),e.Params=t},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(22),r=i(8);t=function(){function t(){this._state=0,this._id=-1,this._handlers=Object.create(null),this._handlerFb=function(){}}return t.prototype.addHandler=function(t,e){void 0===this._handlers[t]&&(this._handlers[t]=[]);var i=this._handlers[t];return i.push(e),{dispose:function(){var t=i.indexOf(e);-1!==t&&i.splice(t,1)}}},t.prototype.setHandler=function(t,e){this._handlers[t]=[e]},t.prototype.clearHandler=function(t){this._handlers[t]&&delete this._handlers[t]},t.prototype.setHandlerFallback=function(t){this._handlerFb=t},t.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){}},t.prototype.reset=function(){2===this._state&&this.end(!1),this._id=-1,this._state=0},t.prototype._start=function(){var t=this._handlers[this._id];if(t)for(var e=t.length-1;0<=e;e--)t[e].start();else this._handlerFb(this._id,"START")},t.prototype._put=function(t,e,i){var n=this._handlers[this._id];if(n)for(var o=n.length-1;0<=o;o--)n[o].put(t,e,i);else this._handlerFb(this._id,"PUT",r.utf32ToString(t,e,i))},t.prototype._end=function(t){var e=this._handlers[this._id];if(e){for(var i=e.length-1;0<=i&&!1===e[i].end(t);i--);for(i--;0<=i;i--)e[i].end(!1)}else this._handlerFb(this._id,"END",t)},t.prototype.start=function(){this.reset(),this._id=-1,this._state=1},t.prototype.put=function(t,e,i){if(3!==this._state){if(1===this._state)for(;e<i;){var n=t[e++];if(59===n){this._state=2,this._start();break}if(48>n||57<n)return void(this._state=3);-1===this._id&&(this._id=0),this._id=10*this._id+n-48}2===this._state&&0<i-e&&this._put(t,e,i)}},t.prototype.end=function(t){0!==this._state&&(3!==this._state&&(1===this._state&&this._start(),this._end(t)),this._id=-1,this._state=0)},t}(),e.OscParser=t,t=function(){function t(t){this._handler=t,this._data="",this._hitLimit=!1}return t.prototype.start=function(){this._data="",this._hitLimit=!1},t.prototype.put=function(t,e,i){this._hitLimit||(this._data+=r.utf32ToString(t,e,i),this._data.length>n.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},t.prototype.end=function(t){var e;return this._hitLimit?e=!1:t&&(e=this._handler(this._data)),this._data="",this._hitLimit=!1,e},t}(),e.OscHandler=t},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.PAYLOAD_LIMIT=1e7},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(8),r=i(20),o=i(22),s=[];t=function(){function t(){this._handlers=Object.create(null),this._active=s,this._ident=0,this._handlerFb=function(){}}return t.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){}},t.prototype.addHandler=function(t,e){void 0===this._handlers[t]&&(this._handlers[t]=[]);var i=this._handlers[t];return i.push(e),{dispose:function(){var t=i.indexOf(e);-1!==t&&i.splice(t,1)}}},t.prototype.setHandler=function(t,e){this._handlers[t]=[e]},t.prototype.clearHandler=function(t){this._handlers[t]&&delete this._handlers[t]},t.prototype.setHandlerFallback=function(t){this._handlerFb=t},t.prototype.reset=function(){this._active.length&&this.unhook(!1),this._active=s,this._ident=0},t.prototype.hook=function(t,e){if(this.reset(),this._ident=t,this._active=this._handlers[t]||s,this._active.length)for(t=this._active.length-1;0<=t;t--)this._active[t].hook(e);else this._handlerFb(this._ident,"HOOK",e)},t.prototype.put=function(t,e,i){if(this._active.length)for(var r=this._active.length-1;0<=r;r--)this._active[r].put(t,e,i);else this._handlerFb(this._ident,"PUT",n.utf32ToString(t,e,i))},t.prototype.unhook=function(t){if(this._active.length){for(var e=this._active.length-1;0<=e&&!1===this._active[e].unhook(t);e--);for(e--;0<=e;e--)this._active[e].unhook(!1)}else this._handlerFb(this._ident,"UNHOOK",t);this._active=s,this._ident=0},t}(),e.DcsParser=t,t=function(){function t(t){this._handler=t,this._data="",this._hitLimit=!1}return t.prototype.hook=function(t){this._params=t.clone(),this._data="",this._hitLimit=!1},t.prototype.put=function(t,e,i){this._hitLimit||(this._data+=n.utf32ToString(t,e,i),this._data.length>o.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},t.prototype.unhook=function(t){var e;return this._hitLimit?e=!1:t&&(e=this._handler(this._data,this._params?this._params:new r.Params)),this._params=void 0,this._data="",this._hitLimit=!1,e},t}(),e.DcsHandler=t},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(25),r=i(43),o=[];e.acquireCharAtlas=function(t,e,i,s,l){for(t=n.generateConfig(s,l,t,i),i=0;i<o.length;i++)if(0<=(s=(l=o[i]).ownedBy.indexOf(e))){if(n.configEquals(l.config,t))return l.atlas;1===l.ownedBy.length?(l.atlas.dispose(),o.splice(i,1)):l.ownedBy.splice(s,1);break}for(i=0;i<o.length;i++)if(l=o[i],n.configEquals(l.config,t))return l.ownedBy.push(e),l.atlas;return e={atlas:new r.DynamicCharAtlas(document,t),config:t,ownedBy:[e]},o.push(e),e.atlas},e.removeTerminalFromCache=function(t){for(var e=0;e<o.length;e++){var i=o[e].ownedBy.indexOf(t);if(-1!==i){1===o[e].ownedBy.length?(o[e].atlas.dispose(),o.splice(e,1)):o[e].ownedBy.splice(i,1);break}}}},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(3);e.generateConfig=function(t,e,i,n){return n={foreground:n.foreground,background:n.background,cursor:void 0,cursorAccent:void 0,selection:void 0,ansi:n.ansi.slice(0,16)},{devicePixelRatio:window.devicePixelRatio,scaledCharWidth:t,scaledCharHeight:e,fontFamily:i.fontFamily,fontSize:i.fontSize,fontWeight:i.fontWeight,fontWeightBold:i.fontWeightBold,allowTransparency:i.allowTransparency,colors:n}},e.configEquals=function(t,e){for(var i=0;i<t.colors.ansi.length;i++)if(t.colors.ansi[i].rgba!==e.colors.ansi[i].rgba)return!1;return t.devicePixelRatio===e.devicePixelRatio&&t.fontFamily===e.fontFamily&&t.fontSize===e.fontSize&&t.fontWeight===e.fontWeight&&t.fontWeightBold===e.fontWeightBold&&t.allowTransparency===e.allowTransparency&&t.scaledCharWidth===e.scaledCharWidth&&t.scaledCharHeight===e.scaledCharHeight&&t.colors.foreground===e.colors.foreground&&t.colors.background===e.colors.background},e.is256Color=function(t){return t<n.DEFAULT_COLOR}},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(10),r=i(45),o=n.fromCss("#ffffff"),s=n.fromCss("#000000"),l=n.fromCss("#ffffff"),c=n.fromCss("#000000"),a={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};e.DEFAULT_ANSI_COLORS=function(){for(var t=[n.fromCss("#2e3436"),n.fromCss("#cc0000"),n.fromCss("#4e9a06"),n.fromCss("#c4a000"),n.fromCss("#3465a4"),n.fromCss("#75507b"),n.fromCss("#06989a"),n.fromCss("#d3d7cf"),n.fromCss("#555753"),n.fromCss("#ef2929"),n.fromCss("#8ae234"),n.fromCss("#fce94f"),n.fromCss("#729fcf"),n.fromCss("#ad7fa8"),n.fromCss("#34e2e2"),n.fromCss("#eeeeec")],e=[0,95,135,175,215,255],i=0;216>i;i++){var r=e[i/36%6|0],o=e[i/6%6|0],s=e[i%6];t.push({css:n.toCss(r,o,s),rgba:n.toRgba(r,o,s)})}for(i=0;24>i;i++)e=8+10*i,t.push({css:n.toCss(e,e,e),rgba:n.toRgba(e,e,e)});return t}(),t=function(){function t(t,i){if(this.allowTransparency=i,(t=t.createElement("canvas")).width=1,t.height=1,!(t=t.getContext("2d")))throw Error("Could not get rendering context");this._ctx=t,this._ctx.globalCompositeOperation="copy",this._litmusColor=this._ctx.createLinearGradient(0,0,1,1),this._contrastCache=new r.ColorContrastCache,this.colors={foreground:o,background:s,cursor:l,cursorAccent:c,selection:a,selectionOpaque:n.blend(s,a),ansi:e.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache}}return t.prototype.onOptionsChange=function(t){"minimumContrastRatio"===t&&this._contrastCache.clear()},t.prototype.setTheme=function(t){void 0===t&&(t={}),this.colors.foreground=this._parseColor(t.foreground,o),this.colors.background=this._parseColor(t.background,s),this.colors.cursor=this._parseColor(t.cursor,l,!0),this.colors.cursorAccent=this._parseColor(t.cursorAccent,c,!0),this.colors.selection=this._parseColor(t.selection,a,!0),this.colors.selectionOpaque=n.blend(this.colors.background,this.colors.selection),this.colors.ansi[0]=this._parseColor(t.black,e.DEFAULT_ANSI_COLORS[0]),this.colors.ansi[1]=this._parseColor(t.red,e.DEFAULT_ANSI_COLORS[1]),this.colors.ansi[2]=this._parseColor(t.green,e.DEFAULT_ANSI_COLORS[2]),this.colors.ansi[3]=this._parseColor(t.yellow,e.DEFAULT_ANSI_COLORS[3]),this.colors.ansi[4]=this._parseColor(t.blue,e.DEFAULT_ANSI_COLORS[4]),this.colors.ansi[5]=this._parseColor(t.magenta,e.DEFAULT_ANSI_COLORS[5]),this.colors.ansi[6]=this._parseColor(t.cyan,e.DEFAULT_ANSI_COLORS[6]),this.colors.ansi[7]=this._parseColor(t.white,e.DEFAULT_ANSI_COLORS[7]),this.colors.ansi[8]=this._parseColor(t.brightBlack,e.DEFAULT_ANSI_COLORS[8]),this.colors.ansi[9]=this._parseColor(t.brightRed,e.DEFAULT_ANSI_COLORS[9]),this.colors.ansi[10]=this._parseColor(t.brightGreen,e.DEFAULT_ANSI_COLORS[10]),this.colors.ansi[11]=this._parseColor(t.brightYellow,e.DEFAULT_ANSI_COLORS[11]),this.colors.ansi[12]=this._parseColor(t.brightBlue,e.DEFAULT_ANSI_COLORS[12]),this.colors.ansi[13]=this._parseColor(t.brightMagenta,e.DEFAULT_ANSI_COLORS[13]),this.colors.ansi[14]=this._parseColor(t.brightCyan,e.DEFAULT_ANSI_COLORS[14]),this.colors.ansi[15]=this._parseColor(t.brightWhite,e.DEFAULT_ANSI_COLORS[15]),this._contrastCache.clear()},t.prototype._parseColor=function(t,e,i){if(void 0===i&&(i=this.allowTransparency),void 0===t)return e;if(this._ctx.fillStyle=this._litmusColor,this._ctx.fillStyle=t,"string"!=typeof this._ctx.fillStyle)return console.warn("Color: "+t+" is invalid using fallback "+e.css),e;this._ctx.fillRect(0,0,1,1);var r=this._ctx.getImageData(0,0,1,1).data;if(255!==r[3]){if(!i)return console.warn("Color: "+t+" is using transparency, but allowTransparency is false. Using fallback "+e.css+"."),e;if(5===t.length){r=parseInt(t.substr(1),16),t=16*(r>>12&15),e=16*(r>>8&15),i=16*(r>>4&15),r=16*(15&r);var o=n.toRgba(t,e,i,r)}else t=(o=parseInt(t.substr(1),16))>>24&255,e=o>>16&255,i=o>>8&255,r=255&o;return{rgba:o,css:n.toCss(t,e,i,r)}}return{css:t,rgba:n.toRgba(r[0],r[1],r[2],r[3])}},t}(),e.ColorManager=t},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.throwIfFalsy=function(t){if(!t)throw Error("value must not be falsy");return t}},function(t,e,i){var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),t=i(6);var o=i(3),s=i(5);i=function(t){function e(e,i,n){var r=t.call(this)||this;return r.content=0,r.fg=e.fg,r.bg=e.bg,r.combinedData=i,r._width=n,r}return r(e,t),e.prototype.isCombined=function(){return 2097152},e.prototype.getWidth=function(){return this._width},e.prototype.getChars=function(){return this.combinedData},e.prototype.getCode=function(){return 2097151},e.prototype.setFromCharData=function(){throw Error("not implemented")},e.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},e}(t.AttributeData),e.JoinedCellData=i,i=function(){function t(t){this._bufferService=t,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new s.CellData}return t.prototype.registerCharacterJoiner=function(t){return t={id:this._nextCharacterJoinerId++,handler:t},this._characterJoiners.push(t),t.id},t.prototype.deregisterCharacterJoiner=function(t){for(var e=0;e<this._characterJoiners.length;e++)if(this._characterJoiners[e].id===t)return this._characterJoiners.splice(e,1),!0;return!1},t.prototype.getJoinedCharacters=function(t){if(0===this._characterJoiners.length)return[];if(!(t=this._bufferService.buffer.lines.get(t))||0===t.length)return[];for(var e=[],i=t.translateToString(!0),n=0,r=0,s=0,l=t.getFg(0),c=t.getBg(0),a=0;a<t.getTrimmedLength();a++)if(t.loadCell(a,this._workCell),0!==this._workCell.getWidth()){if(this._workCell.fg!==l||this._workCell.bg!==c){if(1<a-n)for(n=this._getJoinedRanges(i,s,r,t,n),s=0;s<n.length;s++)e.push(n[s]);n=a,s=r,l=this._workCell.fg,c=this._workCell.bg}r+=this._workCell.getChars().length||o.WHITESPACE_CELL_CHAR.length}if(1<this._bufferService.cols-n)for(n=this._getJoinedRanges(i,s,r,t,n),s=0;s<n.length;s++)e.push(n[s]);return e},t.prototype._getJoinedRanges=function(e,i,n,r,o){for(e=e.substring(i,n),i=this._characterJoiners[0].handler(e),n=1;n<this._characterJoiners.length;n++)for(var s=this._characterJoiners[n].handler(e),l=0;l<s.length;l++)t._mergeRanges(i,s[l]);return this._stringRangesToCellRanges(i,r,o),i},t.prototype._stringRangesToCellRanges=function(t,e,i){var n=0,r=!1,s=0,l=t[n];if(l){for(;i<this._bufferService.cols;i++){var c=e.getWidth(i),a=e.getString(i).length||o.WHITESPACE_CELL_CHAR.length;if(0!==c){if(!r&&l[0]<=s&&(l[0]=i,r=!0),l[1]<=s){if(l[1]=i,!(l=t[++n]))break;l[0]<=s?(l[0]=i,r=!0):r=!1}s+=a}}l&&(l[1]=this._bufferService.cols)}},t._mergeRanges=function(t,e){for(var i=!1,n=0;n<t.length;n++){var r=t[n];if(i){if(e[1]<=r[0])return t[n-1][1]=e[1],t;if(e[1]<=r[1])return t[n-1][1]=Math.max(e[1],r[1]),t.splice(n,1),t;t.splice(n,1),n--}else{if(e[1]<=r[0])return t.splice(n,0,e),t;if(e[1]<=r[1])return r[0]=Math.min(e[0],r[0]),t;e[0]<r[1]&&(r[0]=Math.min(e[0],r[0]),i=!0)}}return i?t[t.length-1][1]=e[1]:t.push(e),t},t}(),e.CharacterJoinerRegistry=i},function(t,e){function i(t,e){return e=e.getBoundingClientRect(),[t.clientX-e.left,t.clientY-e.top]}Object.defineProperty(e,"__esModule",{value:!0}),e.getCoordsRelativeToElement=i,e.getCoords=function(t,e,n,r,o,s,l,c){if(o&&(t=i(t,e)))return t[0]=Math.ceil((t[0]+(c?s/2:0))/s),t[1]=Math.ceil(t[1]/l),t[0]=Math.min(Math.max(t[0],1),n+(c?1:0)),t[1]=Math.min(Math.max(t[1],1),r),t},e.getRawByteCoords=function(t){if(t)return{x:t[0]+32,y:t[1]+32}}},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),t=function(){function t(t){this._renderCallback=t}return t.prototype.dispose=function(){this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},t.prototype.refresh=function(t,e,i){var n=this;this._rowCount=i,t=void 0!==t?t:0,e=void 0!==e?e:this._rowCount-1,this._rowStart=void 0!==this._rowStart?Math.min(this._rowStart,t):t,this._rowEnd=void 0!==this._rowEnd?Math.max(this._rowEnd,e):e,this._animationFrame||(this._animationFrame=window.requestAnimationFrame((function(){return n._innerRefresh()})))},t.prototype._innerRefresh=function(){void 0!==this._rowStart&&void 0!==this._rowEnd&&void 0!==this._rowCount&&(this._rowStart=Math.max(this._rowStart,0),this._rowEnd=Math.min(this._rowEnd,this._rowCount-1),this._renderCallback(this._rowStart,this._rowEnd),this._rowStart=void 0,this._rowEnd=void 0,this._animationFrame=void 0)},t}(),e.RenderDebouncer=t},function(t,e,i){var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),t=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._currentDevicePixelRatio=window.devicePixelRatio,e}return r(e,t),e.prototype.setListener=function(t){var e=this;this._listener&&this.clearListener(),this._listener=t,this._outerListener=function(){e._listener&&(e._listener(window.devicePixelRatio,e._currentDevicePixelRatio),e._updateDpr())},this._updateDpr()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.clearListener()},e.prototype._updateDpr=function(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._currentDevicePixelRatio=window.devicePixelRatio,this._resolutionMediaMatchList=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)"),this._resolutionMediaMatchList.addListener(this._outerListener))},e.prototype.clearListener=function(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)},e}(i(2).Disposable),e.ScreenDprMonitor=t},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.clone=function t(e,i){if(void 0===i&&(i=5),"object"!=typeof e)return e;var n,r=Array.isArray(e)?[]:{};for(n in e)r[n]=1>=i?e[n]:e[n]?t(e[n],i-1):e[n];return r}},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(34),r=i(17),o=i(78);t=function(){function t(t){this._core=new n.Terminal(t),this._addonManager=new o.AddonManager}return Object.defineProperty(t.prototype,"onCursorMove",{get:function(){return this._core.onCursorMove},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onLineFeed",{get:function(){return this._core.onLineFeed},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onSelectionChange",{get:function(){return this._core.onSelectionChange},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onData",{get:function(){return this._core.onData},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onBinary",{get:function(){return this._core.onBinary},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onTitleChange",{get:function(){return this._core.onTitleChange},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onScroll",{get:function(){return this._core.onScroll},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onKey",{get:function(){return this._core.onKey},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onRender",{get:function(){return this._core.onRender},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onResize",{get:function(){return this._core.onResize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this._core.element},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parser",{get:function(){return this._parser||(this._parser=new a(this._core)),this._parser},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textarea",{get:function(){return this._core.textarea},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rows",{get:function(){return this._core.rows},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cols",{get:function(){return this._core.cols},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"buffer",{get:function(){return new s(this._core.buffer)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"markers",{get:function(){return this._core.markers},enumerable:!0,configurable:!0}),t.prototype.blur=function(){this._core.blur()},t.prototype.focus=function(){this._core.focus()},t.prototype.resize=function(t,e){this._verifyIntegers(t,e),this._core.resize(t,e)},t.prototype.open=function(t){this._core.open(t)},t.prototype.attachCustomKeyEventHandler=function(t){this._core.attachCustomKeyEventHandler(t)},t.prototype.registerLinkMatcher=function(t,e,i){return this._core.registerLinkMatcher(t,e,i)},t.prototype.deregisterLinkMatcher=function(t){this._core.deregisterLinkMatcher(t)},t.prototype.registerCharacterJoiner=function(t){return this._core.registerCharacterJoiner(t)},t.prototype.deregisterCharacterJoiner=function(t){this._core.deregisterCharacterJoiner(t)},t.prototype.addMarker=function(t){return this._verifyIntegers(t),this._core.addMarker(t)},t.prototype.hasSelection=function(){return this._core.hasSelection()},t.prototype.select=function(t,e,i){this._verifyIntegers(t,e,i),this._core.select(t,e,i)},t.prototype.getSelection=function(){return this._core.getSelection()},t.prototype.getSelectionPosition=function(){return this._core.getSelectionPosition()},t.prototype.clearSelection=function(){this._core.clearSelection()},t.prototype.selectAll=function(){this._core.selectAll()},t.prototype.selectLines=function(t,e){this._verifyIntegers(t,e),this._core.selectLines(t,e)},t.prototype.dispose=function(){this._addonManager.dispose(),this._core.dispose()},t.prototype.scrollLines=function(t){this._verifyIntegers(t),this._core.scrollLines(t)},t.prototype.scrollPages=function(t){this._verifyIntegers(t),this._core.scrollPages(t)},t.prototype.scrollToTop=function(){this._core.scrollToTop()},t.prototype.scrollToBottom=function(){this._core.scrollToBottom()},t.prototype.scrollToLine=function(t){this._verifyIntegers(t),this._core.scrollToLine(t)},t.prototype.clear=function(){this._core.clear()},t.prototype.write=function(t,e){this._core.write(t,e)},t.prototype.writeUtf8=function(t,e){this._core.write(t,e)},t.prototype.writeln=function(t,e){this._core.write(t),this._core.write("\r\n",e)},t.prototype.paste=function(t){this._core.paste(t)},t.prototype.getOption=function(t){return this._core.optionsService.getOption(t)},t.prototype.setOption=function(t,e){this._core.optionsService.setOption(t,e)},t.prototype.refresh=function(t,e){this._verifyIntegers(t,e),this._core.refresh(t,e)},t.prototype.reset=function(){this._core.reset()},t.prototype.loadAddon=function(t){return this._addonManager.loadAddon(this,t)},Object.defineProperty(t,"strings",{get:function(){return r},enumerable:!0,configurable:!0}),t.prototype._verifyIntegers=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t.forEach((function(t){if(t===1/0||isNaN(t)||0!=t%1)throw Error("This API only accepts integers")}))},t}(),e.Terminal=t;var s=function(){function t(t){this._buffer=t}return Object.defineProperty(t.prototype,"cursorY",{get:function(){return this._buffer.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursorX",{get:function(){return this._buffer.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"viewportY",{get:function(){return this._buffer.ydisp},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"baseY",{get:function(){return this._buffer.ybase},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._buffer.lines.length},enumerable:!0,configurable:!0}),t.prototype.getLine=function(t){if(t=this._buffer.lines.get(t))return new l(t)},t}(),l=function(){function t(t){this._line=t}return Object.defineProperty(t.prototype,"isWrapped",{get:function(){return this._line.isWrapped},enumerable:!0,configurable:!0}),t.prototype.getCell=function(t){if(!(0>t||t>=this._line.length))return new c(this._line,t)},t.prototype.translateToString=function(t,e,i){return this._line.translateToString(t,e,i)},t}(),c=function(){function t(t,e){this._line=t,this._x=e}return Object.defineProperty(t.prototype,"char",{get:function(){return this._line.getString(this._x)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._line.getWidth(this._x)},enumerable:!0,configurable:!0}),t}(),a=function(){function t(t){this._core=t}return t.prototype.addCsiHandler=function(t,e){return this._core.addCsiHandler(t,(function(t){return e(t.toArray())}))},t.prototype.addDcsHandler=function(t,e){return this._core.addDcsHandler(t,(function(t,i){return e(t,i.toArray())}))},t.prototype.addEscHandler=function(t,e){return this._core.addEscHandler(t,e)},t.prototype.addOscHandler=function(t,e){return this._core.addOscHandler(t,e)},t}()},function(t,e,i){var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(35),s=i(36),l=i(37),c=i(12),a=i(38),h=i(40),u=i(50),d=i(51),m=i(11),p=i(7),f=i(17),b=i(54),y=i(55),Z=i(56),G=i(57),Y=i(59),g=i(1),W=i(16),S=i(60),I=i(26),v=i(61),R=i(0),X=i(62),V=i(4),C=i(63),T=i(64);t=i(2);var _=i(70),L=i(71),K=i(72),w=i(73),E=i(74),k=i(75),x=i(76),J=i(77),P="undefined"!=typeof window?window.document:null;i=function(t){function e(e){void 0===e&&(e={});var i=t.call(this)||this;return i.browser=m,i.mouseEvents=0,i._keyDownHandled=!1,i._blankLine=null,i._onCursorMove=new g.EventEmitter,i._onData=new g.EventEmitter,i._onBinary=new g.EventEmitter,i._onKey=new g.EventEmitter,i._onLineFeed=new g.EventEmitter,i._onRender=new g.EventEmitter,i._onResize=new g.EventEmitter,i._onScroll=new g.EventEmitter,i._onSelectionChange=new g.EventEmitter,i._onTitleChange=new g.EventEmitter,i._onFocus=new g.EventEmitter,i._onBlur=new g.EventEmitter,i.onA11yCharEmitter=new g.EventEmitter,i.onA11yTabEmitter=new g.EventEmitter,i._instantiationService=new E.InstantiationService,i.optionsService=new X.OptionsService(e),i._instantiationService.setService(R.IOptionsService,i.optionsService),i._bufferService=i._instantiationService.createInstance(T.BufferService),i._instantiationService.setService(R.IBufferService,i._bufferService),i._logService=i._instantiationService.createInstance(K.LogService),i._instantiationService.setService(R.ILogService,i._logService),i._coreService=i._instantiationService.createInstance(L.CoreService,(function(){return i.scrollToBottom()})),i._instantiationService.setService(R.ICoreService,i._coreService),i._coreService.onData((function(t){return i._onData.fire(t)})),i._coreService.onBinary((function(t){return i._onBinary.fire(t)})),i._coreMouseService=i._instantiationService.createInstance(k.CoreMouseService),i._instantiationService.setService(R.ICoreMouseService,i._coreMouseService),i._dirtyRowService=i._instantiationService.createInstance(w.DirtyRowService),i._instantiationService.setService(R.IDirtyRowService,i._dirtyRowService),i._setupOptionsListeners(),i._setup(),i._writeBuffer=new x.WriteBuffer((function(t){return i._inputHandler.parse(t)})),i}return r(e,t),Object.defineProperty(e.prototype,"options",{get:function(){return this.optionsService.options},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cols",{get:function(){return this._bufferService.cols},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rows",{get:function(){return this._bufferService.rows},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onData",{get:function(){return this._onData.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onKey",{get:function(){return this._onKey.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onFocus",{get:function(){return this._onFocus.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onBlur",{get:function(){return this._onBlur.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onA11yChar",{get:function(){return this.onA11yCharEmitter.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onA11yTab",{get:function(){return this.onA11yTabEmitter.event},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var e,i,n,r;this._isDisposed||(t.prototype.dispose.call(this),null===(e=this._windowsMode)||void 0===e||e.dispose(),this._windowsMode=void 0,null===(i=this._renderService)||void 0===i||i.dispose(),this._customKeyEventHandler=null,this.write=function(){},null===(r=null===(n=this.element)||void 0===n?void 0:n.parentNode)||void 0===r||r.removeChild(this.element))},e.prototype._setup=function(){var t=this;this._parent=P?P.body:null,this._customKeyEventHandler=null,this.insertMode=this.originMode=this.applicationKeypad=!1,this.wraparoundMode=!0,this.bracketedPasteMode=!1,this.gcharset=this.charset=null,this.glevel=0,this.charsets=[null],this.curAttrData=W.DEFAULT_ATTR_DATA.clone(),this._eraseAttrData=W.DEFAULT_ATTR_DATA.clone(),this.params=[],this.currentParam=0,this._userScrolling=!1,this._inputHandler=new a.InputHandler(this,this._bufferService,this._coreService,this._dirtyRowService,this._logService,this.optionsService,this._coreMouseService),this._inputHandler.onCursorMove((function(){return t._onCursorMove.fire()})),this._inputHandler.onLineFeed((function(){return t._onLineFeed.fire()})),this.register(this._inputHandler),this.linkifier=this.linkifier||new u.Linkifier(this._bufferService,this._logService),this.options.windowsMode&&this._enableWindowsMode()},e.prototype._enableWindowsMode=function(){this._windowsMode||(this._windowsMode=this.onLineFeed(S.handleWindowsModeLineFeed.bind(null,this._bufferService)))},Object.defineProperty(e.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buffers",{get:function(){return this._bufferService.buffers},enumerable:!0,configurable:!0}),e.prototype.eraseAttrData=function(){return this._eraseAttrData.bg&=-67108864,this._eraseAttrData.bg|=67108863&this.curAttrData.bg,this._eraseAttrData},e.prototype.focus=function(){this.textarea&&this.textarea.focus({preventScroll:!0})},e.prototype._setupOptionsListeners=function(){var t=this;this.optionsService.onOptionChange((function(e){var i,n,r,o,s;switch(e){case"fontFamily":case"fontSize":null===(i=t._renderService)||void 0===i||i.clear(),null===(n=t._charSizeService)||void 0===n||n.measure();break;case"drawBoldTextInBrightColors":case"letterSpacing":case"lineHeight":case"fontWeight":case"fontWeightBold":case"minimumContrastRatio":t._renderService&&(t._renderService.clear(),t._renderService.onResize(t.cols,t.rows),t.refresh(0,t.rows-1));break;case"rendererType":t._renderService&&(t._renderService.setRenderer(t._createRenderer()),t._renderService.onResize(t.cols,t.rows));break;case"scrollback":t.buffers.resize(t.cols,t.rows),null===(r=t.viewport)||void 0===r||r.syncScrollArea();break;case"screenReaderMode":t.optionsService.options.screenReaderMode?!t._accessibilityManager&&t._renderService&&(t._accessibilityManager=new Z.AccessibilityManager(t,t._renderService)):(null===(o=t._accessibilityManager)||void 0===o||o.dispose(),t._accessibilityManager=null);break;case"tabStopWidth":t.buffers.setupTabStops();break;case"theme":t._setTheme(t.optionsService.options.theme);break;case"windowsMode":t.optionsService.options.windowsMode?t._enableWindowsMode():(null===(s=t._windowsMode)||void 0===s||s.dispose(),t._windowsMode=void 0)}}))},e.prototype._onTextAreaFocus=function(t){this.sendFocus&&this._coreService.triggerDataEvent(c.C0.ESC+"[I"),this.updateCursorStyle(t),this.element.classList.add("focus"),this.showCursor(),this._onFocus.fire()},e.prototype.blur=function(){return this.textarea.blur()},e.prototype._onTextAreaBlur=function(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.sendFocus&&this._coreService.triggerDataEvent(c.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()},e.prototype._initGlobal=function(){function t(t){return l.handlePasteEvent(t,e.textarea,e.bracketedPasteMode,e._coreService)}var e=this;this._bindKeys(),this.register(p.addDisposableDomListener(this.element,"copy",(function(t){e.hasSelection()&&l.copyHandler(t,e._selectionService)}))),this.register(p.addDisposableDomListener(this.textarea,"paste",t)),this.register(p.addDisposableDomListener(this.element,"paste",t)),m.isFirefox?this.register(p.addDisposableDomListener(this.element,"mousedown",(function(t){2===t.button&&l.rightClickHandler(t,e.textarea,e.screenElement,e._selectionService,e.options.rightClickSelectsWord)}))):this.register(p.addDisposableDomListener(this.element,"contextmenu",(function(t){l.rightClickHandler(t,e.textarea,e.screenElement,e._selectionService,e.options.rightClickSelectsWord)}))),m.isLinux&&this.register(p.addDisposableDomListener(this.element,"auxclick",(function(t){1===t.button&&l.moveTextAreaUnderMouseCursor(t,e.textarea,e.screenElement)})))},e.prototype._bindKeys=function(){var t=this;this.register(p.addDisposableDomListener(this.textarea,"keyup",(function(e){return t._keyUp(e)}),!0)),this.register(p.addDisposableDomListener(this.textarea,"keydown",(function(e){return t._keyDown(e)}),!0)),this.register(p.addDisposableDomListener(this.textarea,"keypress",(function(e){return t._keyPress(e)}),!0)),this.register(p.addDisposableDomListener(this.textarea,"compositionstart",(function(){return t._compositionHelper.compositionstart()}))),this.register(p.addDisposableDomListener(this.textarea,"compositionupdate",(function(e){return t._compositionHelper.compositionupdate(e)}))),this.register(p.addDisposableDomListener(this.textarea,"compositionend",(function(){return t._compositionHelper.compositionend()}))),this.register(this.onRender((function(){return t._compositionHelper.updateCompositionElements()}))),this.register(this.onRender((function(e){return t._queueLinkification(e.start,e.end)})))},e.prototype.open=function(t){var e=this;if(this._parent=t||this._parent,!this._parent)throw Error("Terminal requires a parent element.");P.body.contains(t)||this._logService.warn("Terminal.open was called on an element that was not attached to the DOM"),this._document=this._parent.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),this._parent.appendChild(this.element),t=P.createDocumentFragment(),this._viewportElement=P.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),t.appendChild(this._viewportElement),this._viewportScrollArea=P.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=P.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=P.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),t.appendChild(this.screenElement),this.textarea=P.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",f.promptLabel),this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this.register(p.addDisposableDomListener(this.textarea,"focus",(function(t){return e._onTextAreaFocus(t)}))),this.register(p.addDisposableDomListener(this.textarea,"blur",(function(){return e._onTextAreaBlur()}))),this._helperContainer.appendChild(this.textarea);var i=this._instantiationService.createInstance(J.CoreBrowserService,this.textarea);this._instantiationService.setService(V.ICoreBrowserService,i),this._charSizeService=this._instantiationService.createInstance(C.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(V.ICharSizeService,this._charSizeService),this._compositionView=P.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(o.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(t),this._theme=this.options.theme||this._theme,this.options.theme=void 0,this._colorManager=new I.ColorManager(P,this.options.allowTransparency),this.optionsService.onOptionChange((function(t){return e._colorManager.onOptionsChange(t)})),this._colorManager.setTheme(this._theme),t=this._createRenderer(),this._renderService=this._instantiationService.createInstance(v.RenderService,t,this.rows,this.screenElement),this._instantiationService.setService(V.IRenderService,this._renderService),this._renderService.onRender((function(t){return e._onRender.fire(t)})),this.onResize((function(t){return e._renderService.resize(t.cols,t.rows)})),this._soundService=this._instantiationService.createInstance(b.SoundService),this._instantiationService.setService(V.ISoundService,this._soundService),this._mouseService=this._instantiationService.createInstance(_.MouseService),this._instantiationService.setService(V.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(s.Viewport,(function(t,i){return e.scrollLines(t,i)}),this._viewportElement,this._viewportScrollArea),this.viewport.onThemeChange(this._colorManager.colors),this.register(this.viewport),this.register(this.onCursorMove((function(){return e._renderService.onCursorMove()}))),this.register(this.onResize((function(){return e._renderService.onResize(e.cols,e.rows)}))),this.register(this.onBlur((function(){return e._renderService.onBlur()}))),this.register(this.onFocus((function(){return e._renderService.onFocus()}))),this.register(this._renderService.onDimensionsChange((function(){return e.viewport.syncScrollArea()}))),this._selectionService=this._instantiationService.createInstance(d.SelectionService,(function(t,i){return e.scrollLines(t,i)}),this.element,this.screenElement),this._instantiationService.setService(V.ISelectionService,this._selectionService),this.register(this._selectionService.onSelectionChange((function(){return e._onSelectionChange.fire()}))),this.register(this._selectionService.onRedrawRequest((function(t){return e._renderService.onSelectionChanged(t.start,t.end,t.columnSelectMode)}))),this.register(this._selectionService.onLinuxMouseSelection((function(t){e.textarea.value=t,e.textarea.focus(),e.textarea.select()}))),this.register(this.onScroll((function(){e.viewport.syncScrollArea(),e._selectionService.refresh()}))),this.register(p.addDisposableDomListener(this._viewportElement,"scroll",(function(){return e._selectionService.refresh()}))),this._mouseZoneManager=this._instantiationService.createInstance(y.MouseZoneManager,this.element,this.screenElement),this.register(this._mouseZoneManager),this.register(this.onScroll((function(){return e._mouseZoneManager.clearAll()}))),this.linkifier.attachToDom(this.element,this._mouseZoneManager),this.register(p.addDisposableDomListener(this.element,"mousedown",(function(t){return e._selectionService.onMouseDown(t)}))),this.mouseEvents?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new Z.AccessibilityManager(this,this._renderService)),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()},e.prototype._createRenderer=function(){switch(this.options.rendererType){case"canvas":return this._instantiationService.createInstance(h.Renderer,this._colorManager.colors,this.screenElement,this.linkifier);case"dom":return this._instantiationService.createInstance(G.DomRenderer,this._colorManager.colors,this.element,this.screenElement,this._viewportElement,this.linkifier);default:throw Error('Unrecognized rendererType "'+this.options.rendererType+'"')}},e.prototype._setTheme=function(t){var e,i,n;this._theme=t,null===(e=this._colorManager)||void 0===e||e.setTheme(t),null===(i=this._renderService)||void 0===i||i.setColors(this._colorManager.colors),null===(n=this.viewport)||void 0===n||n.onThemeChange(this._colorManager.colors)},e.prototype.bindMouse=function(){function t(t){t.buttons||r(t)}function e(t){t.buttons&&r(t)}function i(t){return r(t),t.preventDefault(),o.cancel(t)}function n(t){return r(t),t.buttons||(o._document.removeEventListener("mouseup",a),u&&o._document.removeEventListener("mousemove",u)),o.cancel(t)}function r(t){var e,i;if(!(e=s._mouseService.getRawByteCoords(t,s.screenElement,s.cols,s.rows)))return!1;switch(t.overrideType||t.type){case"mousemove":var n=32;void 0===t.buttons?(i=3,void 0!==t.button&&(i=3>t.button?t.button:3)):i=1&t.buttons?0:4&t.buttons?1:2&t.buttons?2:3;break;case"mouseup":n=0,i=3>t.button?t.button:3;break;case"mousedown":n=1,i=3>t.button?t.button:3;break;case"wheel":0!==t.deltaY&&(n=0>t.deltaY?0:1),i=4;break;default:return!1}return!(void 0===n||void 0===i||4<i)&&s._coreMouseService.triggerMouseEvent({col:e.x-33,row:e.y-33,button:i,action:n,ctrl:t.ctrlKey,alt:t.altKey,shift:t.shiftKey})}var o=this,s=this,l=this.element,a=null,h=null,u=null,d=null;this._coreMouseService.onProtocolChange((function(r){(o.mouseEvents=r)?("debug"===o.optionsService.options.logLevel&&o._logService.debug("Binding to mouse events:",o._coreMouseService.explainEvents(r)),o.element.classList.add("enable-mouse-events"),o._selectionService.disable()):(o._logService.debug("Unbinding from mouse events."),o.element.classList.remove("enable-mouse-events"),o._selectionService.enable()),8&r?d||(l.addEventListener("mousemove",t),d=t):(l.removeEventListener("mousemove",d),d=null),16&r?h||(l.addEventListener("wheel",i),h=i):(l.removeEventListener("wheel",h),h=null),2&r?a||(a=n):(o._document.removeEventListener("mouseup",a),a=null),4&r?u||(u=e):(o._document.removeEventListener("mousemove",u),u=null)})),this._coreMouseService.activeProtocol=this._coreMouseService.activeProtocol,this.register(p.addDisposableDomListener(l,"mousedown",(function(t){if(t.preventDefault(),o.focus(),o.mouseEvents&&!o._selectionService.shouldForceSelection(t))return r(t),a&&o._document.addEventListener("mouseup",a),u&&o._document.addEventListener("mousemove",u),o.cancel(t)}))),this.register(p.addDisposableDomListener(l,"wheel",(function(t){if(!h&&!o.buffer.hasScrollback){var e=o.viewport.getLinesScrolled(t);if(0!==e){t=c.C0.ESC+(o._coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(0>t.deltaY?"A":"B");for(var i="",n=0;n<Math.abs(e);n++)i+=t;o._coreService.triggerDataEvent(i,!0)}}}))),this.register(p.addDisposableDomListener(l,"wheel",(function(t){if(!h)return o.viewport.onWheel(t)?void 0:o.cancel(t)}))),this.register(p.addDisposableDomListener(l,"touchstart",(function(t){if(!o.mouseEvents)return o.viewport.onTouchStart(t),o.cancel(t)}))),this.register(p.addDisposableDomListener(l,"touchmove",(function(t){if(!o.mouseEvents)return o.viewport.onTouchMove(t)?void 0:o.cancel(t)})))},e.prototype.refresh=function(t,e){var i;null===(i=this._renderService)||void 0===i||i.refreshRows(t,e)},e.prototype._queueLinkification=function(t,e){var i;null===(i=this.linkifier)||void 0===i||i.linkifyRows(t,e)},e.prototype.updateCursorStyle=function(t){this._selectionService&&this._selectionService.shouldColumnSelect(t)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")},e.prototype.showCursor=function(){this._coreService.isCursorInitialized||(this._coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))},e.prototype.scroll=function(t){void 0===t&&(t=!1);var e=this._blankLine,i=this.eraseAttrData();e&&e.length===this.cols&&e.getFg(0)===i.fg&&e.getBg(0)===i.bg||(e=this.buffer.getBlankLine(i,t),this._blankLine=e),e.isWrapped=t,i=this.buffer.ybase+this.buffer.scrollTop,t=this.buffer.ybase+this.buffer.scrollBottom,0===this.buffer.scrollTop?(i=this.buffer.lines.isFull,t===this.buffer.lines.length-1?i?this.buffer.lines.recycle().copyFrom(e):this.buffer.lines.push(e.clone()):this.buffer.lines.splice(t+1,0,e.clone()),i?this._userScrolling&&(this.buffer.ydisp=Math.max(this.buffer.ydisp-1,0)):(this.buffer.ybase++,this._userScrolling||this.buffer.ydisp++)):(this.buffer.lines.shiftElements(i+1,t-i+1-1,-1),this.buffer.lines.set(t,e.clone())),this._userScrolling||(this.buffer.ydisp=this.buffer.ybase),this._dirtyRowService.markRangeDirty(this.buffer.scrollTop,this.buffer.scrollBottom),this._onScroll.fire(this.buffer.ydisp)},e.prototype.scrollLines=function(t,e){if(0>t){if(0===this.buffer.ydisp)return;this._userScrolling=!0}else t+this.buffer.ydisp>=this.buffer.ybase&&(this._userScrolling=!1);var i=this.buffer.ydisp;this.buffer.ydisp=Math.max(Math.min(this.buffer.ydisp+t,this.buffer.ybase),0),i!==this.buffer.ydisp&&(e||this._onScroll.fire(this.buffer.ydisp),this.refresh(0,this.rows-1))},e.prototype.scrollPages=function(t){this.scrollLines(t*(this.rows-1))},e.prototype.scrollToTop=function(){this.scrollLines(-this.buffer.ydisp)},e.prototype.scrollToBottom=function(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)},e.prototype.scrollToLine=function(t){0!=(t-=this.buffer.ydisp)&&this.scrollLines(t)},e.prototype.paste=function(t){l.paste(t,this.textarea,this.bracketedPasteMode,this._coreService)},e.prototype.attachCustomKeyEventHandler=function(t){this._customKeyEventHandler=t},e.prototype.addEscHandler=function(t,e){return this._inputHandler.addEscHandler(t,e)},e.prototype.addDcsHandler=function(t,e){return this._inputHandler.addDcsHandler(t,e)},e.prototype.addCsiHandler=function(t,e){return this._inputHandler.addCsiHandler(t,e)},e.prototype.addOscHandler=function(t,e){return this._inputHandler.addOscHandler(t,e)},e.prototype.registerLinkMatcher=function(t,e,i){return t=this.linkifier.registerLinkMatcher(t,e,i),this.refresh(0,this.rows-1),t},e.prototype.deregisterLinkMatcher=function(t){this.linkifier.deregisterLinkMatcher(t)&&this.refresh(0,this.rows-1)},e.prototype.registerCharacterJoiner=function(t){return t=this._renderService.registerCharacterJoiner(t),this.refresh(0,this.rows-1),t},e.prototype.deregisterCharacterJoiner=function(t){this._renderService.deregisterCharacterJoiner(t)&&this.refresh(0,this.rows-1)},Object.defineProperty(e.prototype,"markers",{get:function(){return this.buffer.markers},enumerable:!0,configurable:!0}),e.prototype.addMarker=function(t){if(this.buffer===this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+t)},e.prototype.hasSelection=function(){return!!this._selectionService&&this._selectionService.hasSelection},e.prototype.select=function(t,e,i){this._selectionService.setSelection(t,e,i)},e.prototype.getSelection=function(){return this._selectionService?this._selectionService.selectionText:""},e.prototype.getSelectionPosition=function(){if(this._selectionService.hasSelection)return{startColumn:this._selectionService.selectionStart[0],startRow:this._selectionService.selectionStart[1],endColumn:this._selectionService.selectionEnd[0],endRow:this._selectionService.selectionEnd[1]}},e.prototype.clearSelection=function(){var t;null===(t=this._selectionService)||void 0===t||t.clearSelection()},e.prototype.selectAll=function(){var t;null===(t=this._selectionService)||void 0===t||t.selectAll()},e.prototype.selectLines=function(t,e){var i;null===(i=this._selectionService)||void 0===i||i.selectLines(t,e)},e.prototype._keyDown=function(t){if(this._keyDownHandled=!1,this._customKeyEventHandler&&!1===this._customKeyEventHandler(t))return!1;if(!this._compositionHelper.keydown(t))return this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;var e=Y.evaluateKeyboardEvent(t,this._coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(t),3===e.type||2===e.type){var i=this.rows-1;return this.scrollLines(2===e.type?-i:i),this.cancel(t,!0)}return 1===e.type&&this.selectAll(),!!this._isThirdLevelShift(this.browser,t)||(e.cancel&&this.cancel(t,!0),!e.key||(e.key!==c.C0.ETX&&e.key!==c.C0.CR||(this.textarea.value=""),this._onKey.fire({key:e.key,domEvent:t}),this.showCursor(),this._coreService.triggerDataEvent(e.key,!0),this.optionsService.options.screenReaderMode?void(this._keyDownHandled=!0):this.cancel(t,!0)))},e.prototype._isThirdLevelShift=function(t,e){return t=t.isMac&&!this.options.macOptionIsMeta&&e.altKey&&!e.ctrlKey&&!e.metaKey||t.isWindows&&e.altKey&&e.ctrlKey&&!e.metaKey,"keypress"===e.type?t:t&&(!e.keyCode||47<e.keyCode)},e.prototype.setgLevel=function(t){this.glevel=t,this.charset=this.charsets[t]},e.prototype.setgCharset=function(t,e){this.charsets[t]=e,this.glevel===t&&(this.charset=e)},e.prototype._keyUp=function(t){this._customKeyEventHandler&&!1===this._customKeyEventHandler(t)||(16===t.keyCode||17===t.keyCode||18===t.keyCode||this.focus(),this.updateCursorStyle(t))},e.prototype._keyPress=function(t){if(this._keyDownHandled||this._customKeyEventHandler&&!1===this._customKeyEventHandler(t))return!1;if(this.cancel(t),t.charCode)var e=t.charCode;else if(null===t.which||void 0===t.which)e=t.keyCode;else{if(0===t.which||0===t.charCode)return!1;e=t.which}return!(!e||(t.altKey||t.ctrlKey||t.metaKey)&&!this._isThirdLevelShift(this.browser,t)||(e=String.fromCharCode(e),this._onKey.fire({key:e,domEvent:t}),this.showCursor(),this._coreService.triggerDataEvent(e,!0),0))},e.prototype.bell=function(){var t=this;this._soundBell()&&this._soundService.playBellSound(),this._visualBell()&&(this.element.classList.add("visual-bell-active"),clearTimeout(this._visualBellTimer),this._visualBellTimer=window.setTimeout((function(){t.element.classList.remove("visual-bell-active")}),200))},e.prototype.resize=function(t,e){var i;isNaN(t)||isNaN(e)||(t!==this.cols||e!==this.rows?(t<T.MINIMUM_COLS&&(t=T.MINIMUM_COLS),e<T.MINIMUM_ROWS&&(e=T.MINIMUM_ROWS),this.buffers.resize(t,e),this._bufferService.resize(t,e),this.buffers.setupTabStops(this.cols),null===(i=this._charSizeService)||void 0===i||i.measure(),this.viewport.syncScrollArea(!0),this.refresh(0,this.rows-1),this._onResize.fire({cols:t,rows:e})):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure())},e.prototype.clear=function(){if(0!==this.buffer.ybase||0!==this.buffer.y){this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(var t=1;t<this.rows;t++)this.buffer.lines.push(this.buffer.getBlankLine(W.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire(this.buffer.ydisp)}},e.prototype.is=function(t){return 0===(this.options.termName+"").indexOf(t)},e.prototype.handleTitle=function(t){this._onTitleChange.fire(t)},e.prototype.reset=function(){var t,e;this.options.rows=this.rows,this.options.cols=this.cols;var i=this._customKeyEventHandler,n=this._inputHandler,r=this._userScrolling;this._setup(),this._bufferService.reset(),this._coreService.reset(),this._coreMouseService.reset(),null===(t=this._selectionService)||void 0===t||t.reset(),this._customKeyEventHandler=i,this._inputHandler=n,this._userScrolling=r,this.refresh(0,this.rows-1),null===(e=this.viewport)||void 0===e||e.syncScrollArea()},e.prototype.cancel=function(t,e){if(this.options.cancelEvents||e)return t.preventDefault(),t.stopPropagation(),!1},e.prototype._visualBell=function(){return!1},e.prototype._soundBell=function(){return"sound"===this.options.bellStyle},e.prototype.write=function(t,e){this._writeBuffer.write(t,e)},e.prototype.writeSync=function(t){this._writeBuffer.writeSync(t)},e}(t.Disposable),e.Terminal=i},function(t,e,i){var n=this&&this.__decorate||function(t,e,i,n){var r,o=arguments.length,s=3>o?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var l=t.length-1;0<=l;l--)(r=t[l])&&(s=(3>o?r(s):3<o?r(e,i,s):r(e,i))||s);return 3<o&&s&&Object.defineProperty(e,i,s),s},r=this&&this.__param||function(t,e){return function(i,n){e(i,n,t)}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(4),s=i(0);t=function(){function t(t,e,i,n,r,o){this._textarea=t,this._compositionView=e,this._bufferService=i,this._optionsService=n,this._charSizeService=r,this._coreService=o,this._isSendingComposition=this._isComposing=!1,this._compositionPosition={start:0,end:0}}return t.prototype.compositionstart=function(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._compositionView.classList.add("active")},t.prototype.compositionupdate=function(t){var e=this;this._compositionView.textContent=t.data,this.updateCompositionElements(),setTimeout((function(){e._compositionPosition.end=e._textarea.value.length}),0)},t.prototype.compositionend=function(){this._finalizeComposition(!0)},t.prototype.keydown=function(t){if(this._isComposing||this._isSendingComposition){if(229===t.keyCode||16===t.keyCode||17===t.keyCode||18===t.keyCode)return!1;this._finalizeComposition(!1)}return 229!==t.keyCode||(this._handleAnyTextareaChanges(),!1)},t.prototype._finalizeComposition=function(t){var e=this;if(this._compositionView.classList.remove("active"),this._isComposing=!1,this._clearTextareaPosition(),t){var i=this._compositionPosition.start,n=this._compositionPosition.end;this._isSendingComposition=!0,setTimeout((function(){if(e._isSendingComposition){e._isSendingComposition=!1;var t=e._isComposing?e._textarea.value.substring(i,n):e._textarea.value.substring(i);e._coreService.triggerDataEvent(t,!0)}}),0)}else this._isSendingComposition=!1,t=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end),this._coreService.triggerDataEvent(t,!0)},t.prototype._handleAnyTextareaChanges=function(){var t=this,e=this._textarea.value;setTimeout((function(){if(!t._isComposing){var i=t._textarea.value.replace(e,"");0<i.length&&t._coreService.triggerDataEvent(i,!0)}}),0)},t.prototype.updateCompositionElements=function(t){var e=this;if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){var i=Math.ceil(this._charSizeService.height*this._optionsService.options.lineHeight),n=this._bufferService.buffer.y*i,r=this._bufferService.buffer.x*this._charSizeService.width;this._compositionView.style.left=r+"px",this._compositionView.style.top=n+"px",this._compositionView.style.height=i+"px",this._compositionView.style.lineHeight=i+"px",this._compositionView.style.fontFamily=this._optionsService.options.fontFamily,this._compositionView.style.fontSize=this._optionsService.options.fontSize+"px",i=this._compositionView.getBoundingClientRect(),this._textarea.style.left=r+"px",this._textarea.style.top=n+"px",this._textarea.style.width=i.width+"px",this._textarea.style.height=i.height+"px",this._textarea.style.lineHeight=i.height+"px"}t||setTimeout((function(){return e.updateCompositionElements(!0)}),0)}},t.prototype._clearTextareaPosition=function(){this._textarea.style.left="",this._textarea.style.top=""},n([r(2,s.IBufferService),r(3,s.IOptionsService),r(4,o.ICharSizeService),r(5,s.ICoreService)],t)}(),e.CompositionHelper=t},function(t,e,i){var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),o=this&&this.__decorate||function(t,e,i,n){var r,o=arguments.length,s=3>o?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var l=t.length-1;0<=l;l--)(r=t[l])&&(s=(3>o?r(s):3<o?r(e,i,s):r(e,i))||s);return 3<o&&s&&Object.defineProperty(e,i,s),s},s=this&&this.__param||function(t,e){return function(i,n){e(i,n,t)}};Object.defineProperty(e,"__esModule",{value:!0}),t=i(2);var l=i(7),c=i(4),a=i(0);i=function(t){function e(e,i,n,r,o,s,c){var a=t.call(this)||this;return a._scrollLines=e,a._viewportElement=i,a._scrollArea=n,a._bufferService=r,a._optionsService=o,a._charSizeService=s,a._renderService=c,a.scrollBarWidth=0,a._currentRowHeight=0,a._lastRecordedBufferLength=0,a._lastRecordedViewportHeight=0,a._lastRecordedBufferHeight=0,a._lastTouchY=0,a._lastScrollTop=0,a._wheelPartialScroll=0,a._refreshAnimationFrame=null,a._ignoreNextScrollEvent=!1,a.scrollBarWidth=a._viewportElement.offsetWidth-a._scrollArea.offsetWidth||15,a.register(l.addDisposableDomListener(a._viewportElement,"scroll",a._onScroll.bind(a))),setTimeout((function(){return a.syncScrollArea()}),0),a}return r(e,t),e.prototype.onThemeChange=function(t){this._viewportElement.style.backgroundColor=t.background.css},e.prototype._refresh=function(t){var e=this;if(t)return this._innerRefresh(),void(null!==this._refreshAnimationFrame&&cancelAnimationFrame(this._refreshAnimationFrame));null===this._refreshAnimationFrame&&(this._refreshAnimationFrame=requestAnimationFrame((function(){return e._innerRefresh()})))},e.prototype._innerRefresh=function(){if(0<this._charSizeService.height){this._currentRowHeight=this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;var t=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.canvasHeight);this._lastRecordedBufferHeight!==t&&(this._lastRecordedBufferHeight=t,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}t=this._bufferService.buffer.ydisp*this._currentRowHeight,this._viewportElement.scrollTop!==t&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=t),this._refreshAnimationFrame=null},e.prototype.syncScrollArea=function(t){if(void 0===t&&(t=!1),this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(t);this._lastRecordedViewportHeight===this._renderService.dimensions.canvasHeight&&this._lastScrollTop===this._bufferService.buffer.ydisp*this._currentRowHeight&&this._lastScrollTop===this._viewportElement.scrollTop&&this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio===this._currentRowHeight||this._refresh(t)},e.prototype._onScroll=function(){this._lastScrollTop=this._viewportElement.scrollTop,this._viewportElement.offsetParent&&(this._ignoreNextScrollEvent?this._ignoreNextScrollEvent=!1:this._scrollLines(Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp,!0))},e.prototype._bubbleScroll=function(t,e){var i=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(0>e&&0!==this._viewportElement.scrollTop||0<e&&i<this._lastRecordedBufferHeight)||(t.cancelable&&t.preventDefault(),!1)},e.prototype.onWheel=function(t){var e=this._getPixelsScrolled(t);return 0!==e&&(this._viewportElement.scrollTop+=e,this._bubbleScroll(t,e))},e.prototype._getPixelsScrolled=function(t){if(0===t.deltaY)return 0;var e=this._applyScrollModifier(t.deltaY,t);return t.deltaMode===WheelEvent.DOM_DELTA_LINE?e*=this._currentRowHeight:t.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(e*=this._currentRowHeight*this._bufferService.rows),e},e.prototype.getLinesScrolled=function(t){if(0===t.deltaY)return 0;var e=this._applyScrollModifier(t.deltaY,t);return t.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(e/=this._currentRowHeight+0,this._wheelPartialScroll+=e,e=Math.floor(Math.abs(this._wheelPartialScroll))*(0<this._wheelPartialScroll?1:-1),this._wheelPartialScroll%=1):t.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(e*=this._bufferService.rows),e},e.prototype._applyScrollModifier=function(t,e){var i=this._optionsService.options.fastScrollModifier;return"alt"===i&&e.altKey||"ctrl"===i&&e.ctrlKey||"shift"===i&&e.shiftKey?t*this._optionsService.options.fastScrollSensitivity*this._optionsService.options.scrollSensitivity:t*this._optionsService.options.scrollSensitivity},e.prototype.onTouchStart=function(t){this._lastTouchY=t.touches[0].pageY},e.prototype.onTouchMove=function(t){var e=this._lastTouchY-t.touches[0].pageY;return this._lastTouchY=t.touches[0].pageY,0!==e&&(this._viewportElement.scrollTop+=e,this._bubbleScroll(t,e))},o([s(3,a.IBufferService),s(4,a.IOptionsService),s(5,c.ICharSizeService),s(6,c.IRenderService)],e)}(t.Disposable),e.Viewport=i},function(t,e){function i(t){return t.replace(/\r?\n/g,"\r")}function n(t,e){return e?"[200~"+t+"[201~":t}function r(t,e,r,o){t=n(t=i(t),r),o.triggerDataEvent(t,!0),e.value=""}function o(t,e,i){var n=i.getBoundingClientRect();i=t.clientX-n.left-10,t=t.clientY-n.top-10,e.style.position="absolute",e.style.width="20px",e.style.height="20px",e.style.left=i+"px",e.style.top=t+"px",e.style.zIndex="1000",e.focus(),setTimeout((function(){e.style.position="",e.style.width="",e.style.height="",e.style.left="",e.style.top="",e.style.zIndex=""}),200)}Object.defineProperty(e,"__esModule",{value:!0}),e.prepareTextForTerminal=i,e.bracketTextForPaste=n,e.copyHandler=function(t,e){t.clipboardData&&t.clipboardData.setData("text/plain",e.selectionText),t.preventDefault()},e.handlePasteEvent=function(t,e,i,n){t.stopPropagation(),t.clipboardData&&r(t.clipboardData.getData("text/plain"),e,i,n)},e.paste=r,e.moveTextAreaUnderMouseCursor=o,e.rightClickHandler=function(t,e,i,n,r){o(t,e,i),r&&!n.isClickInSelection(t)&&n.selectWordAtCursor(t),e.value=n.selectionText,e.select()}},function(t,e,i){var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(12),s=i(18),l=i(19),c=i(39);t=i(2);var a=i(15),h=i(8),u=i(16),d=i(1),m=i(3),p=i(5),f=i(6),b=i(21),y=i(23),Z={"(":0,")":1,"*":2,"+":3,"-":1,".":2},G=function(){function t(t,e,i,n){this._bufferService=t,this._coreService=e,this._logService=i,this._optionsService=n,this._data=new Uint32Array(0)}return t.prototype.hook=function(){this._data=new Uint32Array(0)},t.prototype.put=function(t,e,i){this._data=a.concat(this._data,t.subarray(e,i))},t.prototype.unhook=function(t){if(t)switch(t=h.utf32ToString(this._data),this._data=new Uint32Array(0),t){case'"q':return this._coreService.triggerDataEvent(o.C0.ESC+'P1$r0"q'+o.C0.ESC+"\\");case'"p':return this._coreService.triggerDataEvent(o.C0.ESC+'P1$r61"p'+o.C0.ESC+"\\");case"r":return this._coreService.triggerDataEvent(o.C0.ESC+"P1$r"+(this._bufferService.buffer.scrollTop+1)+";"+(this._bufferService.buffer.scrollBottom+1)+"r"+o.C0.ESC+"\\");case"m":return this._coreService.triggerDataEvent(o.C0.ESC+"P1$r0m"+o.C0.ESC+"\\");case" q":return t={block:2,underline:4,bar:6}[this._optionsService.options.cursorStyle],t-=this._optionsService.options.cursorBlink?1:0,this._coreService.triggerDataEvent(o.C0.ESC+"P1$r"+t+" q"+o.C0.ESC+"\\");default:this._logService.debug("Unknown DCS $q %s",t),this._coreService.triggerDataEvent(o.C0.ESC+"P0$r"+o.C0.ESC+"\\")}else this._data=new Uint32Array(0)},t}();i=function(t){function e(e,i,n,r,l,a,u,m){function f(t){Y._parser.setEscHandler({intermediates:"(",final:t},(function(){return y.selectCharset("("+t)})),Y._parser.setEscHandler({intermediates:")",final:t},(function(){return y.selectCharset(")"+t)})),Y._parser.setEscHandler({intermediates:"*",final:t},(function(){return y.selectCharset("*"+t)})),Y._parser.setEscHandler({intermediates:"+",final:t},(function(){return y.selectCharset("+"+t)})),Y._parser.setEscHandler({intermediates:"-",final:t},(function(){return y.selectCharset("-"+t)})),Y._parser.setEscHandler({intermediates:".",final:t},(function(){return y.selectCharset("."+t)})),Y._parser.setEscHandler({intermediates:"/",final:t},(function(){return y.selectCharset("/"+t)}))}void 0===m&&(m=new c.EscapeSequenceParser);var y=t.call(this)||this;y._terminal=e,y._bufferService=i,y._coreService=n,y._dirtyRowService=r,y._logService=l,y._optionsService=a,y._coreMouseService=u,y._parser=m,y._parseBuffer=new Uint32Array(4096),y._stringDecoder=new h.StringToUtf32,y._utf8Decoder=new h.Utf8ToUtf32,y._workCell=new p.CellData,y._onCursorMove=new d.EventEmitter,y._onLineFeed=new d.EventEmitter,y._onScroll=new d.EventEmitter,y.register(y._parser),y._parser.setCsiHandlerFallback((function(t,e){y._logService.debug("Unknown CSI code: ",{identifier:y._parser.identToString(t),params:e.toArray()})})),y._parser.setEscHandlerFallback((function(t){y._logService.debug("Unknown ESC code: ",{identifier:y._parser.identToString(t)})})),y._parser.setExecuteHandlerFallback((function(t){y._logService.debug("Unknown EXECUTE code: ",{code:t})})),y._parser.setOscHandlerFallback((function(t,e,i){y._logService.debug("Unknown OSC code: ",{identifier:t,action:e,data:i})})),y._parser.setDcsHandlerFallback((function(t,e,i){"HOOK"===e&&(i=i.toArray()),y._logService.debug("Unknown DCS code: ",{identifier:y._parser.identToString(t),action:e,payload:i})})),y._parser.setPrintHandler((function(t,e,i){return y.print(t,e,i)})),y._parser.setCsiHandler({final:"@"},(function(t){return y.insertChars(t)})),y._parser.setCsiHandler({intermediates:" ",final:"@"},(function(t){return y.scrollLeft(t)})),y._parser.setCsiHandler({final:"A"},(function(t){return y.cursorUp(t)})),y._parser.setCsiHandler({intermediates:" ",final:"A"},(function(t){return y.scrollRight(t)})),y._parser.setCsiHandler({final:"B"},(function(t){return y.cursorDown(t)})),y._parser.setCsiHandler({final:"C"},(function(t){return y.cursorForward(t)})),y._parser.setCsiHandler({final:"D"},(function(t){return y.cursorBackward(t)})),y._parser.setCsiHandler({final:"E"},(function(t){return y.cursorNextLine(t)})),y._parser.setCsiHandler({final:"F"},(function(t){return y.cursorPrecedingLine(t)})),y._parser.setCsiHandler({final:"G"},(function(t){return y.cursorCharAbsolute(t)})),y._parser.setCsiHandler({final:"H"},(function(t){return y.cursorPosition(t)})),y._parser.setCsiHandler({final:"I"},(function(t){return y.cursorForwardTab(t)})),y._parser.setCsiHandler({final:"J"},(function(t){return y.eraseInDisplay(t)})),y._parser.setCsiHandler({prefix:"?",final:"J"},(function(t){return y.eraseInDisplay(t)})),y._parser.setCsiHandler({final:"K"},(function(t){return y.eraseInLine(t)})),y._parser.setCsiHandler({prefix:"?",final:"K"},(function(t){return y.eraseInLine(t)})),y._parser.setCsiHandler({final:"L"},(function(t){return y.insertLines(t)})),y._parser.setCsiHandler({final:"M"},(function(t){return y.deleteLines(t)})),y._parser.setCsiHandler({final:"P"},(function(t){return y.deleteChars(t)})),y._parser.setCsiHandler({final:"S"},(function(t){return y.scrollUp(t)})),y._parser.setCsiHandler({final:"T"},(function(t){return y.scrollDown(t)})),y._parser.setCsiHandler({final:"X"},(function(t){return y.eraseChars(t)})),y._parser.setCsiHandler({final:"Z"},(function(t){return y.cursorBackwardTab(t)})),y._parser.setCsiHandler({final:"`"},(function(t){return y.charPosAbsolute(t)})),y._parser.setCsiHandler({final:"a"},(function(t){return y.hPositionRelative(t)})),y._parser.setCsiHandler({final:"b"},(function(t){return y.repeatPrecedingCharacter(t)})),y._parser.setCsiHandler({final:"c"},(function(t){return y.sendDeviceAttributesPrimary(t)})),y._parser.setCsiHandler({prefix:">",final:"c"},(function(t){return y.sendDeviceAttributesSecondary(t)})),y._parser.setCsiHandler({final:"d"},(function(t){return y.linePosAbsolute(t)})),y._parser.setCsiHandler({final:"e"},(function(t){return y.vPositionRelative(t)})),y._parser.setCsiHandler({final:"f"},(function(t){return y.hVPosition(t)})),y._parser.setCsiHandler({final:"g"},(function(t){return y.tabClear(t)})),y._parser.setCsiHandler({final:"h"},(function(t){return y.setMode(t)})),y._parser.setCsiHandler({prefix:"?",final:"h"},(function(t){return y.setModePrivate(t)})),y._parser.setCsiHandler({final:"l"},(function(t){return y.resetMode(t)})),y._parser.setCsiHandler({prefix:"?",final:"l"},(function(t){return y.resetModePrivate(t)})),y._parser.setCsiHandler({final:"m"},(function(t){return y.charAttributes(t)})),y._parser.setCsiHandler({final:"n"},(function(t){return y.deviceStatus(t)})),y._parser.setCsiHandler({prefix:"?",final:"n"},(function(t){return y.deviceStatusPrivate(t)})),y._parser.setCsiHandler({intermediates:"!",final:"p"},(function(t){return y.softReset(t)})),y._parser.setCsiHandler({intermediates:" ",final:"q"},(function(t){return y.setCursorStyle(t)})),y._parser.setCsiHandler({final:"r"},(function(t){return y.setScrollRegion(t)})),y._parser.setCsiHandler({final:"s"},(function(t){return y.saveCursor(t)})),y._parser.setCsiHandler({final:"u"},(function(t){return y.restoreCursor(t)})),y._parser.setCsiHandler({intermediates:"'",final:"}"},(function(t){return y.insertColumns(t)})),y._parser.setCsiHandler({intermediates:"'",final:"~"},(function(t){return y.deleteColumns(t)})),y._parser.setExecuteHandler(o.C0.BEL,(function(){return y.bell()})),y._parser.setExecuteHandler(o.C0.LF,(function(){return y.lineFeed()})),y._parser.setExecuteHandler(o.C0.VT,(function(){return y.lineFeed()})),y._parser.setExecuteHandler(o.C0.FF,(function(){return y.lineFeed()})),y._parser.setExecuteHandler(o.C0.CR,(function(){return y.carriageReturn()})),y._parser.setExecuteHandler(o.C0.BS,(function(){return y.backspace()})),y._parser.setExecuteHandler(o.C0.HT,(function(){return y.tab()})),y._parser.setExecuteHandler(o.C0.SO,(function(){return y.shiftOut()})),y._parser.setExecuteHandler(o.C0.SI,(function(){return y.shiftIn()})),y._parser.setExecuteHandler(o.C1.IND,(function(){return y.index()})),y._parser.setExecuteHandler(o.C1.NEL,(function(){return y.nextLine()})),y._parser.setExecuteHandler(o.C1.HTS,(function(){return y.tabSet()})),y._parser.setOscHandler(0,new b.OscHandler((function(t){return y.setTitle(t)}))),y._parser.setOscHandler(2,new b.OscHandler((function(t){return y.setTitle(t)}))),y._parser.setEscHandler({final:"7"},(function(){return y.saveCursor()})),y._parser.setEscHandler({final:"8"},(function(){return y.restoreCursor()})),y._parser.setEscHandler({final:"D"},(function(){return y.index()})),y._parser.setEscHandler({final:"E"},(function(){return y.nextLine()})),y._parser.setEscHandler({final:"H"},(function(){return y.tabSet()})),y._parser.setEscHandler({final:"M"},(function(){return y.reverseIndex()})),y._parser.setEscHandler({final:"="},(function(){return y.keypadApplicationMode()})),y._parser.setEscHandler({final:">"},(function(){return y.keypadNumericMode()})),y._parser.setEscHandler({final:"c"},(function(){return y.reset()})),y._parser.setEscHandler({final:"n"},(function(){return y.setgLevel(2)})),y._parser.setEscHandler({final:"o"},(function(){return y.setgLevel(3)})),y._parser.setEscHandler({final:"|"},(function(){return y.setgLevel(3)})),y._parser.setEscHandler({final:"}"},(function(){return y.setgLevel(2)})),y._parser.setEscHandler({final:"~"},(function(){return y.setgLevel(1)})),y._parser.setEscHandler({intermediates:"%",final:"@"},(function(){return y.selectDefaultCharset()})),y._parser.setEscHandler({intermediates:"%",final:"G"},(function(){return y.selectDefaultCharset()}));var Z,Y=this;for(Z in s.CHARSETS)f(Z);return y._parser.setEscHandler({intermediates:"#",final:"8"},(function(){return y.screenAlignmentPattern()})),y._parser.setErrorHandler((function(t){return y._logService.error("Parsing error: ",t),t})),y._parser.setDcsHandler({intermediates:"$",final:"q"},new G(y._bufferService,y._coreService,y._logService,y._optionsService)),y}return r(e,t),Object.defineProperty(e.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){t.prototype.dispose.call(this)},e.prototype.parse=function(t){var e=this._bufferService.buffer,i=e.x,n=e.y;if(this._logService.debug("parsing data",t),this._parseBuffer.length<t.length&&131072>this._parseBuffer.length&&(this._parseBuffer=new Uint32Array(Math.min(t.length,131072))),this._dirtyRowService.clearRange(),131072<t.length)for(var r=0;r<t.length;r+=131072){var o=r+131072<t.length?r+131072:t.length;o="string"==typeof t?this._stringDecoder.decode(t.substring(r,o),this._parseBuffer):this._utf8Decoder.decode(t.subarray(r,o),this._parseBuffer),this._parser.parse(this._parseBuffer,o)}else o="string"==typeof t?this._stringDecoder.decode(t,this._parseBuffer):this._utf8Decoder.decode(t,this._parseBuffer),this._parser.parse(this._parseBuffer,o);(e=this._bufferService.buffer).x===i&&e.y===n||this._onCursorMove.fire(),this._terminal.refresh(this._dirtyRowService.start,this._dirtyRowService.end)},e.prototype.print=function(t,e,i){var n,r=this._bufferService.buffer,o=this._terminal.charset,s=this._optionsService.options.screenReaderMode,c=this._bufferService.cols,a=this._terminal.wraparoundMode,u=this._terminal.insertMode,d=this._terminal.curAttrData,p=r.lines.get(r.y+r.ybase);this._dirtyRowService.markDirty(r.y);for(var f=e;f<i;++f){if(n=t[f],e=l.wcwidth(n),127>n&&o){var b=o[String.fromCharCode(n)];b&&(n=b.charCodeAt(0))}if(s&&this._terminal.onA11yCharEmitter.fire(h.stringFromCodePoint(n)),e||!r.x){if(r.x+e-1>=c)if(a)r.x=0,r.y++,r.y===r.scrollBottom+1?(r.y--,this._terminal.scroll(!0)):(r.y>=this._bufferService.rows&&(r.y=this._bufferService.rows-1),r.lines.get(r.y).isWrapped=!0),p=r.lines.get(r.y+r.ybase);else if(r.x=c-1,2===e)continue;if(u&&(p.insertCells(r.x,e,r.getNullCell(d)),2===p.getWidth(c-1)&&p.setCellFromCodePoint(c-1,m.NULL_CELL_CODE,m.NULL_CELL_WIDTH,d.fg,d.bg)),p.setCellFromCodePoint(r.x++,n,e,d.fg,d.bg),0<e)for(;--e;)p.setCellFromCodePoint(r.x++,0,0,d.fg,d.bg)}else p.getWidth(r.x-1)?p.addCodepointToCell(r.x-1,n):p.addCodepointToCell(r.x-2,n)}i&&(p.loadCell(r.x-1,this._workCell),2===this._workCell.getWidth()||65535<this._workCell.getCode()?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._dirtyRowService.markDirty(r.y)},e.prototype.addCsiHandler=function(t,e){return this._parser.addCsiHandler(t,e)},e.prototype.addDcsHandler=function(t,e){return this._parser.addDcsHandler(t,new y.DcsHandler(e))},e.prototype.addEscHandler=function(t,e){return this._parser.addEscHandler(t,e)},e.prototype.addOscHandler=function(t,e){return this._parser.addOscHandler(t,new b.OscHandler(e))},e.prototype.bell=function(){this._terminal.bell()},e.prototype.lineFeed=function(){var t=this._bufferService.buffer;this._dirtyRowService.markDirty(t.y),this._optionsService.options.convertEol&&(t.x=0),t.y++,t.y===t.scrollBottom+1?(t.y--,this._terminal.scroll()):t.y>=this._bufferService.rows&&(t.y=this._bufferService.rows-1),t.x>=this._bufferService.cols&&t.x--,this._dirtyRowService.markDirty(t.y),this._onLineFeed.fire()},e.prototype.carriageReturn=function(){this._bufferService.buffer.x=0},e.prototype.backspace=function(){this._restrictCursor(),0<this._bufferService.buffer.x&&this._bufferService.buffer.x--},e.prototype.tab=function(){if(!(this._bufferService.buffer.x>=this._bufferService.cols)){var t=this._bufferService.buffer.x;this._bufferService.buffer.x=this._bufferService.buffer.nextStop(),this._optionsService.options.screenReaderMode&&this._terminal.onA11yTabEmitter.fire(this._bufferService.buffer.x-t)}},e.prototype.shiftOut=function(){this._terminal.setgLevel(1)},e.prototype.shiftIn=function(){this._terminal.setgLevel(0)},e.prototype._restrictCursor=function(){this._bufferService.buffer.x=Math.min(this._bufferService.cols-1,Math.max(0,this._bufferService.buffer.x)),this._bufferService.buffer.y=this._terminal.originMode?Math.min(this._bufferService.buffer.scrollBottom,Math.max(this._bufferService.buffer.scrollTop,this._bufferService.buffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._bufferService.buffer.y)),this._dirtyRowService.markDirty(this._bufferService.buffer.y)},e.prototype._setCursor=function(t,e){this._dirtyRowService.markDirty(this._bufferService.buffer.y),this._terminal.originMode?(this._bufferService.buffer.x=t,this._bufferService.buffer.y=this._bufferService.buffer.scrollTop+e):(this._bufferService.buffer.x=t,this._bufferService.buffer.y=e),this._restrictCursor(),this._dirtyRowService.markDirty(this._bufferService.buffer.y)},e.prototype._moveCursor=function(t,e){this._restrictCursor(),this._setCursor(this._bufferService.buffer.x+t,this._bufferService.buffer.y+e)},e.prototype.cursorUp=function(t){var e=this._bufferService.buffer.y-this._bufferService.buffer.scrollTop;0<=e?this._moveCursor(0,-Math.min(e,t.params[0]||1)):this._moveCursor(0,-(t.params[0]||1))},e.prototype.cursorDown=function(t){var e=this._bufferService.buffer.scrollBottom-this._bufferService.buffer.y;0<=e?this._moveCursor(0,Math.min(e,t.params[0]||1)):this._moveCursor(0,t.params[0]||1)},e.prototype.cursorForward=function(t){this._moveCursor(t.params[0]||1,0)},e.prototype.cursorBackward=function(t){this._moveCursor(-(t.params[0]||1),0)},e.prototype.cursorNextLine=function(t){this.cursorDown(t),this._bufferService.buffer.x=0},e.prototype.cursorPrecedingLine=function(t){this.cursorUp(t),this._bufferService.buffer.x=0},e.prototype.cursorCharAbsolute=function(t){this._setCursor((t.params[0]||1)-1,this._bufferService.buffer.y)},e.prototype.cursorPosition=function(t){this._setCursor(2<=t.length?(t.params[1]||1)-1:0,(t.params[0]||1)-1)},e.prototype.charPosAbsolute=function(t){this._setCursor((t.params[0]||1)-1,this._bufferService.buffer.y)},e.prototype.hPositionRelative=function(t){this._moveCursor(t.params[0]||1,0)},e.prototype.linePosAbsolute=function(t){this._setCursor(this._bufferService.buffer.x,(t.params[0]||1)-1)},e.prototype.vPositionRelative=function(t){this._moveCursor(0,t.params[0]||1)},e.prototype.hVPosition=function(t){this.cursorPosition(t)},e.prototype.tabClear=function(t){0===(t=t.params[0])?delete this._bufferService.buffer.tabs[this._bufferService.buffer.x]:3===t&&(this._bufferService.buffer.tabs={})},e.prototype.cursorForwardTab=function(t){if(!(this._bufferService.buffer.x>=this._bufferService.cols))for(t=t.params[0]||1;t--;)this._bufferService.buffer.x=this._bufferService.buffer.nextStop()},e.prototype.cursorBackwardTab=function(t){if(!(this._bufferService.buffer.x>=this._bufferService.cols)){t=t.params[0]||1;for(var e=this._bufferService.buffer;t--;)e.x=e.prevStop()}},e.prototype._eraseInBufferLine=function(t,e,i,n){void 0===n&&(n=!1),(t=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+t)).replaceCells(e,i,this._bufferService.buffer.getNullCell(this._terminal.eraseAttrData())),n&&(t.isWrapped=!1)},e.prototype._resetBufferLine=function(t){(t=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+t)).fill(this._bufferService.buffer.getNullCell(this._terminal.eraseAttrData())),t.isWrapped=!1},e.prototype.eraseInDisplay=function(t){switch(this._restrictCursor(),t.params[0]){case 0:for(t=this._bufferService.buffer.y,this._dirtyRowService.markDirty(t),this._eraseInBufferLine(t++,this._bufferService.buffer.x,this._bufferService.cols,0===this._bufferService.buffer.x);t<this._bufferService.rows;t++)this._resetBufferLine(t);this._dirtyRowService.markDirty(t);break;case 1:for(t=this._bufferService.buffer.y,this._dirtyRowService.markDirty(t),this._eraseInBufferLine(t,0,this._bufferService.buffer.x+1,!0),this._bufferService.buffer.x+1>=this._bufferService.cols&&(this._bufferService.buffer.lines.get(t+1).isWrapped=!1);t--;)this._resetBufferLine(t);this._dirtyRowService.markDirty(0);break;case 2:for(t=this._bufferService.rows,this._dirtyRowService.markDirty(t-1);t--;)this._resetBufferLine(t);this._dirtyRowService.markDirty(0);break;case 3:0<(t=this._bufferService.buffer.lines.length-this._bufferService.rows)&&(this._bufferService.buffer.lines.trimStart(t),this._bufferService.buffer.ybase=Math.max(this._bufferService.buffer.ybase-t,0),this._bufferService.buffer.ydisp=Math.max(this._bufferService.buffer.ydisp-t,0),this._onScroll.fire(0))}},e.prototype.eraseInLine=function(t){switch(this._restrictCursor(),t.params[0]){case 0:this._eraseInBufferLine(this._bufferService.buffer.y,this._bufferService.buffer.x,this._bufferService.cols);break;case 1:this._eraseInBufferLine(this._bufferService.buffer.y,0,this._bufferService.buffer.x+1);break;case 2:this._eraseInBufferLine(this._bufferService.buffer.y,0,this._bufferService.cols)}this._dirtyRowService.markDirty(this._bufferService.buffer.y)},e.prototype.insertLines=function(t){this._restrictCursor(),t=t.params[0]||1;var e=this._bufferService.buffer;if(!(e.y>e.scrollBottom||e.y<e.scrollTop)){for(var i=e.y+e.ybase,n=this._bufferService.rows-1+e.ybase-(this._bufferService.rows-1-e.scrollBottom)+1;t--;)e.lines.splice(n-1,1),e.lines.splice(i,0,e.getBlankLine(this._terminal.eraseAttrData()));this._dirtyRowService.markRangeDirty(e.y,e.scrollBottom),e.x=0}},e.prototype.deleteLines=function(t){this._restrictCursor(),t=t.params[0]||1;var e=this._bufferService.buffer;if(!(e.y>e.scrollBottom||e.y<e.scrollTop)){var i=e.y+e.ybase,n=this._bufferService.rows-1-e.scrollBottom;for(n=this._bufferService.rows-1+e.ybase-n;t--;)e.lines.splice(i,1),e.lines.splice(n,0,e.getBlankLine(this._terminal.eraseAttrData()));this._dirtyRowService.markRangeDirty(e.y,e.scrollBottom),e.x=0}},e.prototype.insertChars=function(t){this._restrictCursor();var e=this._bufferService.buffer.lines.get(this._bufferService.buffer.y+this._bufferService.buffer.ybase);e&&(e.insertCells(this._bufferService.buffer.x,t.params[0]||1,this._bufferService.buffer.getNullCell(this._terminal.eraseAttrData())),this._dirtyRowService.markDirty(this._bufferService.buffer.y))},e.prototype.deleteChars=function(t){this._restrictCursor();var e=this._bufferService.buffer.lines.get(this._bufferService.buffer.y+this._bufferService.buffer.ybase);e&&(e.deleteCells(this._bufferService.buffer.x,t.params[0]||1,this._bufferService.buffer.getNullCell(this._terminal.eraseAttrData())),this._dirtyRowService.markDirty(this._bufferService.buffer.y))},e.prototype.scrollUp=function(t){t=t.params[0]||1;for(var e=this._bufferService.buffer;t--;)e.lines.splice(e.ybase+e.scrollTop,1),e.lines.splice(e.ybase+e.scrollBottom,0,e.getBlankLine(this._terminal.eraseAttrData()));this._dirtyRowService.markRangeDirty(e.scrollTop,e.scrollBottom)},e.prototype.scrollDown=function(t){t=t.params[0]||1;for(var e=this._bufferService.buffer;t--;)e.lines.splice(e.ybase+e.scrollBottom,1),e.lines.splice(e.ybase+e.scrollTop,0,e.getBlankLine(u.DEFAULT_ATTR_DATA));this._dirtyRowService.markRangeDirty(e.scrollTop,e.scrollBottom)},e.prototype.scrollLeft=function(t){var e=this._bufferService.buffer;if(!(e.y>e.scrollBottom||e.y<e.scrollTop)){t=t.params[0]||1;for(var i=e.scrollTop;i<=e.scrollBottom;++i){var n=e.lines.get(e.ybase+i);n.deleteCells(0,t,e.getNullCell(this._terminal.eraseAttrData())),n.isWrapped=!1}this._dirtyRowService.markRangeDirty(e.scrollTop,e.scrollBottom)}},e.prototype.scrollRight=function(t){var e=this._bufferService.buffer;if(!(e.y>e.scrollBottom||e.y<e.scrollTop)){t=t.params[0]||1;for(var i=e.scrollTop;i<=e.scrollBottom;++i){var n=e.lines.get(e.ybase+i);n.insertCells(0,t,e.getNullCell(this._terminal.eraseAttrData())),n.isWrapped=!1}this._dirtyRowService.markRangeDirty(e.scrollTop,e.scrollBottom)}},e.prototype.insertColumns=function(t){var e=this._bufferService.buffer;if(!(e.y>e.scrollBottom||e.y<e.scrollTop)){t=t.params[0]||1;for(var i=e.scrollTop;i<=e.scrollBottom;++i){var n=this._bufferService.buffer.lines.get(e.ybase+i);n.insertCells(e.x,t,e.getNullCell(this._terminal.eraseAttrData())),n.isWrapped=!1}this._dirtyRowService.markRangeDirty(e.scrollTop,e.scrollBottom)}},e.prototype.deleteColumns=function(t){var e=this._bufferService.buffer;if(!(e.y>e.scrollBottom||e.y<e.scrollTop)){t=t.params[0]||1;for(var i=e.scrollTop;i<=e.scrollBottom;++i){var n=e.lines.get(e.ybase+i);n.deleteCells(e.x,t,e.getNullCell(this._terminal.eraseAttrData())),n.isWrapped=!1}this._dirtyRowService.markRangeDirty(e.scrollTop,e.scrollBottom)}},e.prototype.eraseChars=function(t){this._restrictCursor();var e=this._bufferService.buffer.lines.get(this._bufferService.buffer.y+this._bufferService.buffer.ybase);e&&(e.replaceCells(this._bufferService.buffer.x,this._bufferService.buffer.x+(t.params[0]||1),this._bufferService.buffer.getNullCell(this._terminal.eraseAttrData())),this._dirtyRowService.markDirty(this._bufferService.buffer.y))},e.prototype.repeatPrecedingCharacter=function(t){if(this._parser.precedingCodepoint){t=t.params[0]||1;for(var e=new Uint32Array(t),i=0;i<t;++i)e[i]=this._parser.precedingCodepoint;this.print(e,0,e.length)}},e.prototype.sendDeviceAttributesPrimary=function(t){0<t.params[0]||(this._terminal.is("xterm")||this._terminal.is("rxvt-unicode")||this._terminal.is("screen")?this._coreService.triggerDataEvent(o.C0.ESC+"[?1;2c"):this._terminal.is("linux")&&this._coreService.triggerDataEvent(o.C0.ESC+"[?6c"))},e.prototype.sendDeviceAttributesSecondary=function(t){0<t.params[0]||(this._terminal.is("xterm")?this._coreService.triggerDataEvent(o.C0.ESC+"[>0;276;0c"):this._terminal.is("rxvt-unicode")?this._coreService.triggerDataEvent(o.C0.ESC+"[>85;95;0c"):this._terminal.is("linux")?this._coreService.triggerDataEvent(t.params[0]+"c"):this._terminal.is("screen")&&this._coreService.triggerDataEvent(o.C0.ESC+"[>83;40003;0c"))},e.prototype.setMode=function(t){for(var e=0;e<t.length;e++)4===t.params[e]&&(this._terminal.insertMode=!0)},e.prototype.setModePrivate=function(t){for(var e=0;e<t.length;e++)switch(t.params[e]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._terminal.setgCharset(0,s.DEFAULT_CHARSET),this._terminal.setgCharset(1,s.DEFAULT_CHARSET),this._terminal.setgCharset(2,s.DEFAULT_CHARSET),this._terminal.setgCharset(3,s.DEFAULT_CHARSET);break;case 3:this._terminal.savedCols=this._bufferService.cols,this._terminal.resize(132,this._bufferService.rows),this._terminal.reset();break;case 6:this._terminal.originMode=!0,this._setCursor(0,0);break;case 7:this._terminal.wraparoundMode=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._terminal.applicationKeypad=!0,this._terminal.viewport&&this._terminal.viewport.syncScrollArea();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._terminal.sendFocus=!0;break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._terminal.eraseAttrData()),this._terminal.refresh(0,this._bufferService.rows-1),this._terminal.viewport&&this._terminal.viewport.syncScrollArea(),this._terminal.showCursor();break;case 2004:this._terminal.bracketedPasteMode=!0}},e.prototype.resetMode=function(t){for(var e=0;e<t.length;e++)4===t.params[e]&&(this._terminal.insertMode=!1)},e.prototype.resetModePrivate=function(t){for(var e=0;e<t.length;e++)switch(t.params[e]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:132===this._bufferService.cols&&this._terminal.savedCols&&this._terminal.resize(this._terminal.savedCols,this._bufferService.rows),delete this._terminal.savedCols,this._terminal.reset();break;case 6:this._terminal.originMode=!1,this._setCursor(0,0);break;case 7:this._terminal.wraparoundMode=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._terminal.applicationKeypad=!1,this._terminal.viewport&&this._terminal.viewport.syncScrollArea();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._terminal.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),1049===t.params[e]&&this.restoreCursor(),this._terminal.refresh(0,this._bufferService.rows-1),this._terminal.viewport&&this._terminal.viewport.syncScrollArea(),this._terminal.showCursor();break;case 2004:this._terminal.bracketedPasteMode=!1}},e.prototype._extractColor=function(t,e,i){var n=[0,0,-1,0,0,0],r=0,o=0;do{if(n[o+r]=t.params[e+o],t.hasSubParams(e+o)){t=t.getSubParams(e+o),e=0;do{5===n[1]&&(r=1),n[o+e+1+r]=t[e]}while(++e<t.length&&e+o+1+r<n.length);break}if(5===n[1]&&2<=o+r||2===n[1]&&5<=o+r)break;n[1]&&(r=1)}while(++o+e<t.length&&o+r<n.length);for(e=2;e<n.length;++e)-1===n[e]&&(n[e]=0);return 38===n[0]?2===n[1]?(i.fg|=50331648,i.fg&=-16777216,i.fg|=f.AttributeData.fromColorRGB([n[3],n[4],n[5]])):5===n[1]&&(i.fg&=-50331904,i.fg=33554432|i.fg|255&n[3]):48===n[0]&&(2===n[1]?(i.bg|=50331648,i.bg&=-16777216,i.bg|=f.AttributeData.fromColorRGB([n[3],n[4],n[5]])):5===n[1]&&(i.bg&=-50331904,i.bg=33554432|i.bg|255&n[3])),o},e.prototype.charAttributes=function(t){if(1===t.length&&0===t.params[0])return this._terminal.curAttrData.fg=u.DEFAULT_ATTR_DATA.fg,void(this._terminal.curAttrData.bg=u.DEFAULT_ATTR_DATA.bg);for(var e,i=t.length,n=this._terminal.curAttrData,r=0;r<i;r++)30<=(e=t.params[r])&&37>=e?(n.fg&=-50331904,n.fg=16777216|n.fg|e-30):40<=e&&47>=e?(n.bg&=-50331904,n.bg=16777216|n.bg|e-40):90<=e&&97>=e?(n.fg&=-50331904,n.fg=16777224|n.fg|e-90):100<=e&&107>=e?(n.bg&=-50331904,n.bg=16777224|n.bg|e-100):0===e?(n.fg=u.DEFAULT_ATTR_DATA.fg,n.bg=u.DEFAULT_ATTR_DATA.bg):1===e?n.fg|=134217728:3===e?n.bg|=67108864:4===e?n.fg|=268435456:5===e?n.fg|=536870912:7===e?n.fg|=67108864:8===e?n.fg|=1073741824:2===e?n.bg|=134217728:22===e?(n.fg&=-134217729,n.bg&=-134217729):23===e?n.bg&=-67108865:24===e?n.fg&=-268435457:25===e?n.fg&=-536870913:27===e?n.fg&=-67108865:28===e?n.fg&=-1073741825:39===e?(n.fg&=-67108864,n.fg|=16777215&u.DEFAULT_ATTR_DATA.fg):49===e?(n.bg&=-67108864,n.bg|=16777215&u.DEFAULT_ATTR_DATA.bg):38===e||48===e?r+=this._extractColor(t,r,n):100===e?(n.fg&=-67108864,n.fg|=16777215&u.DEFAULT_ATTR_DATA.fg,n.bg&=-67108864,n.bg|=16777215&u.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",e)},e.prototype.deviceStatus=function(t){switch(t.params[0]){case 5:this._coreService.triggerDataEvent(o.C0.ESC+"[0n");break;case 6:this._coreService.triggerDataEvent(o.C0.ESC+"["+(this._bufferService.buffer.y+1)+";"+(this._bufferService.buffer.x+1)+"R")}},e.prototype.deviceStatusPrivate=function(t){6===t.params[0]&&this._coreService.triggerDataEvent(o.C0.ESC+"[?"+(this._bufferService.buffer.y+1)+";"+(this._bufferService.buffer.x+1)+"R")},e.prototype.softReset=function(){this._coreService.isCursorHidden=!1,this._terminal.insertMode=!1,this._terminal.originMode=!1,this._terminal.wraparoundMode=!0,this._terminal.applicationKeypad=!1,this._terminal.viewport&&this._terminal.viewport.syncScrollArea(),this._coreService.decPrivateModes.applicationCursorKeys=!1,this._bufferService.buffer.scrollTop=0,this._bufferService.buffer.scrollBottom=this._bufferService.rows-1,this._terminal.curAttrData=u.DEFAULT_ATTR_DATA.clone(),this._bufferService.buffer.x=this._bufferService.buffer.y=0,this._terminal.charset=null,this._terminal.glevel=0,this._terminal.charsets=[null]},e.prototype.setCursorStyle=function(t){switch(t=t.params[0]||1){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}this._optionsService.options.cursorBlink=1==t%2},e.prototype.setScrollRegion=function(t){var e,i=t.params[0]||1;(2>t.length||(e=t.params[1])>this._bufferService.rows||0===e)&&(e=this._bufferService.rows),e>i&&(this._bufferService.buffer.scrollTop=i-1,this._bufferService.buffer.scrollBottom=e-1,this._setCursor(0,0))},e.prototype.saveCursor=function(){this._bufferService.buffer.savedX=this._bufferService.buffer.x,this._bufferService.buffer.savedY=this._bufferService.buffer.ybase+this._bufferService.buffer.y,this._bufferService.buffer.savedCurAttrData.fg=this._terminal.curAttrData.fg,this._bufferService.buffer.savedCurAttrData.bg=this._terminal.curAttrData.bg,this._bufferService.buffer.savedCharset=this._terminal.charset},e.prototype.restoreCursor=function(){this._bufferService.buffer.x=this._bufferService.buffer.savedX||0,this._bufferService.buffer.y=Math.max(this._bufferService.buffer.savedY-this._bufferService.buffer.ybase,0),this._terminal.curAttrData.fg=this._bufferService.buffer.savedCurAttrData.fg,this._terminal.curAttrData.bg=this._bufferService.buffer.savedCurAttrData.bg,this._terminal.charset=this._savedCharset,this._bufferService.buffer.savedCharset&&(this._terminal.charset=this._bufferService.buffer.savedCharset),this._restrictCursor()},e.prototype.setTitle=function(t){this._terminal.handleTitle(t)},e.prototype.nextLine=function(){this._bufferService.buffer.x=0,this.index()},e.prototype.keypadApplicationMode=function(){this._logService.debug("Serial port requested application keypad."),this._terminal.applicationKeypad=!0,this._terminal.viewport&&this._terminal.viewport.syncScrollArea()},e.prototype.keypadNumericMode=function(){this._logService.debug("Switching back to normal keypad."),this._terminal.applicationKeypad=!1,this._terminal.viewport&&this._terminal.viewport.syncScrollArea()},e.prototype.selectDefaultCharset=function(){this._terminal.setgLevel(0),this._terminal.setgCharset(0,s.DEFAULT_CHARSET)},e.prototype.selectCharset=function(t){2===t.length?"/"!==t[0]&&this._terminal.setgCharset(Z[t[0]],s.CHARSETS[t[1]]||s.DEFAULT_CHARSET):this.selectDefaultCharset()},e.prototype.index=function(){this._restrictCursor();var t=this._bufferService.buffer;this._bufferService.buffer.y++,t.y===t.scrollBottom+1?(t.y--,this._terminal.scroll()):t.y>=this._bufferService.rows&&(t.y=this._bufferService.rows-1),this._restrictCursor()},e.prototype.tabSet=function(){this._bufferService.buffer.tabs[this._bufferService.buffer.x]=!0},e.prototype.reverseIndex=function(){this._restrictCursor();var t=this._bufferService.buffer;t.y===t.scrollTop?(t.lines.shiftElements(t.y+t.ybase,t.scrollBottom-t.scrollTop,1),t.lines.set(t.y+t.ybase,t.getBlankLine(this._terminal.eraseAttrData())),this._dirtyRowService.markRangeDirty(t.scrollTop,t.scrollBottom)):(t.y--,this._restrictCursor())},e.prototype.reset=function(){this._parser.reset(),this._terminal.reset()},e.prototype.setgLevel=function(t){this._terminal.setgLevel(t)},e.prototype.screenAlignmentPattern=function(){var t=new p.CellData;t.content=4194373,t.fg=this._terminal.curAttrData.fg,t.bg=this._terminal.curAttrData.bg;var e=this._bufferService.buffer;this._setCursor(0,0);for(var i=0;i<this._bufferService.rows;++i){var n=e.y+e.ybase+i;e.lines.get(n).fill(t),e.lines.get(n).isWrapped=!1}this._dirtyRowService.markAllDirty(),this._setCursor(0,0)},e}(t.Disposable),e.InputHandler=i},function(t,e,i){var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),t=i(2);var o=i(15),s=i(20),l=i(21),c=i(23),a=function(){function t(t){this.table=new Uint8Array(t)}return t.prototype.setDefault=function(t,e){o.fill(this.table,t<<4|e)},t.prototype.add=function(t,e,i,n){this.table[e<<8|t]=i<<4|n},t.prototype.addMany=function(t,e,i,n){for(var r=0;r<t.length;r++)this.table[e<<8|t[r]]=i<<4|n},t}();e.TransitionTable=a,e.VT500_TRANSITION_TABLE=function(){function t(t,e){return i.slice(t,e)}var e=new a(4095),i=Array.apply(null,Array(256)).map((function(t,e){return e})),n=t(32,127),r=t(0,24);r.push(25),r.push.apply(r,t(28,32));var o,s=t(0,14);for(o in e.setDefault(1,0),e.addMany(n,0,2,0),s)e.addMany([24,26,153,154],o,3,0),e.addMany(t(128,144),o,3,0),e.addMany(t(144,152),o,3,0),e.add(156,o,0,0),e.add(27,o,11,1),e.add(157,o,4,8),e.addMany([152,158,159],o,0,7),e.add(155,o,11,3),e.add(144,o,11,9);return e.addMany(r,0,3,0),e.addMany(r,1,3,1),e.add(127,1,0,1),e.addMany(r,8,0,8),e.addMany(r,3,3,3),e.add(127,3,0,3),e.addMany(r,4,3,4),e.add(127,4,0,4),e.addMany(r,6,3,6),e.addMany(r,5,3,5),e.add(127,5,0,5),e.addMany(r,2,3,2),e.add(127,2,0,2),e.add(93,1,4,8),e.addMany(n,8,5,8),e.add(127,8,5,8),e.addMany([156,27,24,26,7],8,6,0),e.addMany(t(28,32),8,0,8),e.addMany([88,94,95],1,0,7),e.addMany(n,7,0,7),e.addMany(r,7,0,7),e.add(156,7,0,0),e.add(127,7,0,7),e.add(91,1,11,3),e.addMany(t(64,127),3,7,0),e.addMany(t(48,60),3,8,4),e.addMany([60,61,62,63],3,9,4),e.addMany(t(48,60),4,8,4),e.addMany(t(64,127),4,7,0),e.addMany([60,61,62,63],4,0,6),e.addMany(t(32,64),6,0,6),e.add(127,6,0,6),e.addMany(t(64,127),6,0,0),e.addMany(t(32,48),3,9,5),e.addMany(t(32,48),5,9,5),e.addMany(t(48,64),5,0,6),e.addMany(t(64,127),5,7,0),e.addMany(t(32,48),4,9,5),e.addMany(t(32,48),1,9,2),e.addMany(t(32,48),2,9,2),e.addMany(t(48,127),2,10,0),e.addMany(t(48,80),1,10,0),e.addMany(t(81,88),1,10,0),e.addMany([89,90,92],1,10,0),e.addMany(t(96,127),1,10,0),e.add(80,1,11,9),e.addMany(r,9,0,9),e.add(127,9,0,9),e.addMany(t(28,32),9,0,9),e.addMany(t(32,48),9,9,12),e.addMany(t(48,60),9,8,10),e.addMany([60,61,62,63],9,9,10),e.addMany(r,11,0,11),e.addMany(t(32,128),11,0,11),e.addMany(t(28,32),11,0,11),e.addMany(r,10,0,10),e.add(127,10,0,10),e.addMany(t(28,32),10,0,10),e.addMany(t(48,60),10,8,10),e.addMany([60,61,62,63],10,0,11),e.addMany(t(32,48),10,9,12),e.addMany(r,12,0,12),e.add(127,12,0,12),e.addMany(t(28,32),12,0,12),e.addMany(t(32,48),12,9,12),e.addMany(t(48,64),12,0,11),e.addMany(t(64,127),12,12,13),e.addMany(t(64,127),10,12,13),e.addMany(t(64,127),9,12,13),e.addMany(r,13,13,13),e.addMany(n,13,13,13),e.add(127,13,0,13),e.addMany([27,156,24,26],13,14,0),e.add(160,0,2,0),e.add(160,8,5,8),e.add(160,6,0,6),e.add(160,11,0,11),e.add(160,13,13,13),e}(),i=function(t){function i(i){void 0===i&&(i=e.VT500_TRANSITION_TABLE);var n=t.call(this)||this;return n.TRANSITIONS=i,n.initialState=0,n.currentState=n.initialState,n._params=new s.Params,n._params.addParam(0),n._collect=0,n.precedingCodepoint=0,n._printHandlerFb=function(){},n._executeHandlerFb=function(){},n._csiHandlerFb=function(){},n._escHandlerFb=function(){},n._errorHandlerFb=function(t){return t},n._printHandler=n._printHandlerFb,n._executeHandlers=Object.create(null),n._csiHandlers=Object.create(null),n._escHandlers=Object.create(null),n._oscParser=new l.OscParser,n._dcsParser=new c.DcsParser,n._errorHandler=n._errorHandlerFb,n.setEscHandler({final:"\\"},(function(){})),n}return r(i,t),i.prototype._identifier=function(t,e){void 0===e&&(e=[64,126]);var i=0;if(t.prefix){if(1<t.prefix.length)throw Error("only one byte as prefix supported");if((i=t.prefix.charCodeAt(0))&&60>i||63<i)throw Error("prefix must be in range 0x3c .. 0x3f")}if(t.intermediates){if(2<t.intermediates.length)throw Error("only two bytes as intermediates are supported");for(var n=0;n<t.intermediates.length;++n){var r=t.intermediates.charCodeAt(n);if(32>r||47<r)throw Error("intermediate must be in range 0x20 .. 0x2f");i<<=8,i|=r}}if(1!==t.final.length)throw Error("final must be a single byte");if(t=t.final.charCodeAt(0),e[0]>t||t>e[1])throw Error("final must be in range "+e[0]+" .. "+e[1]);return(i<<=8)|t},i.prototype.identToString=function(t){for(var e=[];t;)e.push(String.fromCharCode(255&t)),t>>=8;return e.reverse().join("")},i.prototype.dispose=function(){this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null),this._oscParser.dispose(),this._dcsParser.dispose()},i.prototype.setPrintHandler=function(t){this._printHandler=t},i.prototype.clearPrintHandler=function(){this._printHandler=this._printHandlerFb},i.prototype.addEscHandler=function(t,e){t=this._identifier(t,[48,126]),void 0===this._escHandlers[t]&&(this._escHandlers[t]=[]);var i=this._escHandlers[t];return i.push(e),{dispose:function(){var t=i.indexOf(e);-1!==t&&i.splice(t,1)}}},i.prototype.setEscHandler=function(t,e){this._escHandlers[this._identifier(t,[48,126])]=[e]},i.prototype.clearEscHandler=function(t){this._escHandlers[this._identifier(t,[48,126])]&&delete this._escHandlers[this._identifier(t,[48,126])]},i.prototype.setEscHandlerFallback=function(t){this._escHandlerFb=t},i.prototype.setExecuteHandler=function(t,e){this._executeHandlers[t.charCodeAt(0)]=e},i.prototype.clearExecuteHandler=function(t){this._executeHandlers[t.charCodeAt(0)]&&delete this._executeHandlers[t.charCodeAt(0)]},i.prototype.setExecuteHandlerFallback=function(t){this._executeHandlerFb=t},i.prototype.addCsiHandler=function(t,e){t=this._identifier(t),void 0===this._csiHandlers[t]&&(this._csiHandlers[t]=[]);var i=this._csiHandlers[t];return i.push(e),{dispose:function(){var t=i.indexOf(e);-1!==t&&i.splice(t,1)}}},i.prototype.setCsiHandler=function(t,e){this._csiHandlers[this._identifier(t)]=[e]},i.prototype.clearCsiHandler=function(t){this._csiHandlers[this._identifier(t)]&&delete this._csiHandlers[this._identifier(t)]},i.prototype.setCsiHandlerFallback=function(t){this._csiHandlerFb=t},i.prototype.addDcsHandler=function(t,e){return this._dcsParser.addHandler(this._identifier(t),e)},i.prototype.setDcsHandler=function(t,e){this._dcsParser.setHandler(this._identifier(t),e)},i.prototype.clearDcsHandler=function(t){this._dcsParser.clearHandler(this._identifier(t))},i.prototype.setDcsHandlerFallback=function(t){this._dcsParser.setHandlerFallback(t)},i.prototype.addOscHandler=function(t,e){return this._oscParser.addHandler(t,e)},i.prototype.setOscHandler=function(t,e){this._oscParser.setHandler(t,e)},i.prototype.clearOscHandler=function(t){this._oscParser.clearHandler(t)},i.prototype.setOscHandlerFallback=function(t){this._oscParser.setHandlerFallback(t)},i.prototype.setErrorHandler=function(t){this._errorHandler=t},i.prototype.clearErrorHandler=function(){this._errorHandler=this._errorHandlerFb},i.prototype.reset=function(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this.precedingCodepoint=this._collect=0},i.prototype.parse=function(t,e){for(var i,n=0,r=this.currentState,o=this._oscParser,s=this._dcsParser,l=this._collect,c=this._params,a=this.TRANSITIONS.table,h=0;h<e;++h){switch((i=a[r<<8|(160>(n=t[h])?n:160)])>>4){case 2:for(r=h+1;;++r){if(r>=e||32>(n=t[r])||126<n&&160>n){this._printHandler(t,h,r),h=r-1;break}if(++r>=e||32>(n=t[r])||126<n&&160>n){this._printHandler(t,h,r),h=r-1;break}if(++r>=e||32>(n=t[r])||126<n&&160>n){this._printHandler(t,h,r),h=r-1;break}if(++r>=e||32>(n=t[r])||126<n&&160>n){this._printHandler(t,h,r),h=r-1;break}}break;case 3:this._executeHandlers[n]?this._executeHandlers[n]():this._executeHandlerFb(n),this.precedingCodepoint=0;break;case 1:if(this._errorHandler({position:h,code:n,currentState:r,collect:l,params:c,abort:!1}).abort)return;break;case 7:for(var u=(r=this._csiHandlers[l<<8|n])?r.length-1:-1;0<=u&&!1===r[u](c);u--);0>u&&this._csiHandlerFb(l<<8|n,c),this.precedingCodepoint=0;break;case 8:do{switch(n){case 59:c.addParam(0);break;case 58:c.addSubParam(-1);break;default:c.addDigit(n-48)}}while(++h<e&&47<(n=t[h])&&60>n);h--;break;case 9:l<<=8,l|=n;break;case 10:for(u=(r=this._escHandlers[l<<8|n])?r.length-1:-1;0<=u&&!1===r[u]();u--);0>u&&this._escHandlerFb(l<<8|n),this.precedingCodepoint=0;break;case 11:c.reset(),c.addParam(0),l=0;break;case 12:s.hook(l<<8|n,c);break;case 13:for(r=h+1;;++r)if(r>=e||24===(n=t[r])||26===n||27===n||127<n&&160>n){s.put(t,h,r),h=r-1;break}break;case 14:s.unhook(24!==n&&26!==n),27===n&&(i|=1),c.reset(),c.addParam(0),this.precedingCodepoint=l=0;break;case 4:o.start();break;case 5:for(r=h+1;;r++)if(r>=e||32>(n=t[r])||127<n&&159>=n){o.put(t,h,r),h=r-1;break}break;case 6:o.end(24!==n&&26!==n),27===n&&(i|=1),c.reset(),c.addParam(0),this.precedingCodepoint=l=0}r=15&i}this._collect=l,this.currentState=r},i}(t.Disposable),e.EscapeSequenceParser=i},function(t,e,i){var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),o=this&&this.__decorate||function(t,e,i,n){var r,o=arguments.length,s=3>o?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var l=t.length-1;0<=l;l--)(r=t[l])&&(s=(3>o?r(s):3<o?r(e,i,s):r(e,i))||s);return 3<o&&s&&Object.defineProperty(e,i,s),s},s=this&&this.__param||function(t,e){return function(i,n){e(i,n,t)}};Object.defineProperty(e,"__esModule",{value:!0});var l=i(41),c=i(47),a=i(48),h=i(49),u=i(28);t=i(2);var d=i(4),m=i(0),p=i(24),f=i(1),b=1;i=function(t){function e(e,i,n,r,o,s,d,m){var p=t.call(this)||this;return p._colors=e,p._screenElement=i,p._linkifier=n,p._bufferService=r,p._charSizeService=o,p._optionsService=s,p.coreService=d,p.coreBrowserService=m,p._id=b++,p._onRequestRefreshRows=new f.EventEmitter,e=p._optionsService.options.allowTransparency,p._characterJoinerRegistry=new u.CharacterJoinerRegistry(p._bufferService),p._renderLayers=[new l.TextRenderLayer(p._screenElement,0,p._colors,p._characterJoinerRegistry,e,p._id,p._bufferService,s),new c.SelectionRenderLayer(p._screenElement,1,p._colors,p._id,p._bufferService,s),new h.LinkRenderLayer(p._screenElement,2,p._colors,p._id,p._linkifier,p._bufferService,s),new a.CursorRenderLayer(p._screenElement,3,p._colors,p._id,p._onRequestRefreshRows,p._bufferService,s,d,m)],p.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},p._devicePixelRatio=window.devicePixelRatio,p._updateDimensions(),p.onOptionsChanged(),p}return r(e,t),Object.defineProperty(e.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){t.prototype.dispose.call(this),this._renderLayers.forEach((function(t){return t.dispose()})),p.removeTerminalFromCache(this._id)},e.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._bufferService.cols,this._bufferService.rows))},e.prototype.setColors=function(t){var e=this;this._colors=t,this._renderLayers.forEach((function(t){t.setColors(e._colors),t.reset()}))},e.prototype.onResize=function(){var t=this;this._updateDimensions(),this._renderLayers.forEach((function(e){return e.resize(t.dimensions)})),this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},e.prototype.onCharSizeChanged=function(){this.onResize(this._bufferService.cols,this._bufferService.rows)},e.prototype.onBlur=function(){this._runOperation((function(t){return t.onBlur()}))},e.prototype.onFocus=function(){this._runOperation((function(t){return t.onFocus()}))},e.prototype.onSelectionChanged=function(t,e,i){void 0===i&&(i=!1),this._runOperation((function(n){return n.onSelectionChanged(t,e,i)}))},e.prototype.onCursorMove=function(){this._runOperation((function(t){return t.onCursorMove()}))},e.prototype.onOptionsChanged=function(){this._runOperation((function(t){return t.onOptionsChanged()}))},e.prototype.clear=function(){this._runOperation((function(t){return t.reset()}))},e.prototype._runOperation=function(t){this._renderLayers.forEach((function(e){return t(e)}))},e.prototype.renderRows=function(t,e){this._renderLayers.forEach((function(i){return i.onGridChanged(t,e)}))},e.prototype._updateDimensions=function(){this._charSizeService.hasValidSize&&(this.dimensions.scaledCharWidth=Math.floor(this._charSizeService.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharTop=1===this._optionsService.options.lineHeight?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this._optionsService.options.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._bufferService.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._bufferService.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols)},e.prototype.registerCharacterJoiner=function(t){return this._characterJoinerRegistry.registerCharacterJoiner(t)},e.prototype.deregisterCharacterJoiner=function(t){return this._characterJoinerRegistry.deregisterCharacterJoiner(t)},o([s(3,m.IBufferService),s(4,d.ICharSizeService),s(5,m.IOptionsService),s(6,m.ICoreService),s(7,d.ICoreBrowserService)],e)}(t.Disposable),e.Renderer=i},function(t,e,i){var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(42);t=i(13);var s=i(6),l=i(3),c=i(28),a=i(5);i=function(t){function e(e,i,n,r,s,l,c,h){return(e=t.call(this,e,"text",i,s,n,l,c,h)||this).bufferService=c,e.optionsService=h,e._characterWidth=0,e._characterFont="",e._characterOverlapCache={},e._workCell=new a.CellData,e._state=new o.GridCache,e._characterJoinerRegistry=r,e}return r(e,t),e.prototype.resize=function(e){t.prototype.resize.call(this,e);var i=this._getFont(!1,!1);this._characterWidth===e.scaledCharWidth&&this._characterFont===i||(this._characterWidth=e.scaledCharWidth,this._characterFont=i,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)},e.prototype.reset=function(){this._state.clear(),this._clearAll()},e.prototype._forEachCell=function(t,e,i,n){for(;t<=e;t++){var r=t+this._bufferService.buffer.ydisp,o=this._bufferService.buffer.lines.get(r);r=i?i.getJoinedCharacters(r):[];for(var s=0;s<this._bufferService.cols;s++){o.loadCell(s,this._workCell);var a=this._workCell,h=!1,u=s;0!==a.getWidth()&&(0<r.length&&s===r[0][0]&&(h=!0,u=r.shift(),a=new c.JoinedCellData(this._workCell,o.translateToString(!0,u[0],u[1]),u[1]-u[0]),u=u[1]-1),!h&&this._isOverlapping(a)&&u<o.length-1&&o.getCodePoint(u+1)===l.NULL_CELL_CODE&&(a.content&=-12582913,a.content|=8388608),n(a,s,t),s=u)}}},e.prototype._drawBackground=function(t,e){var i=this,n=this._ctx,r=this._bufferService.cols,o=0,l=0,c=null;n.save(),this._forEachCell(t,e,null,(function(t,e,a){var h=null;t.isInverse()?h=t.isFgDefault()?i._colors.foreground.css:t.isFgRGB()?"rgb("+s.AttributeData.toColorRGB(t.getFgColor()).join(",")+")":i._colors.ansi[t.getFgColor()].css:t.isBgRGB()?h="rgb("+s.AttributeData.toColorRGB(t.getBgColor()).join(",")+")":t.isBgPalette()&&(h=i._colors.ansi[t.getBgColor()].css),null===c&&(o=e,l=a),a!==l?(n.fillStyle=c||"",i._fillCells(o,l,r-o,1),o=e,l=a):c!==h&&(n.fillStyle=c||"",i._fillCells(o,l,e-o,1),o=e,l=a),c=h})),null!==c&&(n.fillStyle=c,this._fillCells(o,l,r-o,1)),n.restore()},e.prototype._drawForeground=function(t,e){var i=this;this._forEachCell(t,e,this._characterJoinerRegistry,(function(t,e,n){if(!t.isInvisible()&&(i._drawChars(t,e,n),t.isUnderline())){if(i._ctx.save(),t.isInverse())if(t.isBgDefault())i._ctx.fillStyle=i._colors.background.css;else if(t.isBgRGB())i._ctx.fillStyle="rgb("+s.AttributeData.toColorRGB(t.getBgColor()).join(",")+")";else{var r=t.getBgColor();i._optionsService.options.drawBoldTextInBrightColors&&t.isBold()&&8>r&&(r+=8),i._ctx.fillStyle=i._colors.ansi[r].css}else t.isFgDefault()?i._ctx.fillStyle=i._colors.foreground.css:t.isFgRGB()?i._ctx.fillStyle="rgb("+s.AttributeData.toColorRGB(t.getFgColor()).join(",")+")":(r=t.getFgColor(),i._optionsService.options.drawBoldTextInBrightColors&&t.isBold()&&8>r&&(r+=8),i._ctx.fillStyle=i._colors.ansi[r].css);i._fillBottomLineAtCells(e,n,t.getWidth()),i._ctx.restore()}}))},e.prototype.onGridChanged=function(t,e){0!==this._state.cache.length&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,t,this._bufferService.cols,e-t+1),this._drawBackground(t,e),this._drawForeground(t,e))},e.prototype.onOptionsChanged=function(){this._setTransparency(this._optionsService.options.allowTransparency)},e.prototype._isOverlapping=function(t){if(1!==t.getWidth()||256>t.getCode())return!1;if(t=t.getChars(),this._characterOverlapCache.hasOwnProperty(t))return this._characterOverlapCache[t];this._ctx.save(),this._ctx.font=this._characterFont;var e=Math.floor(this._ctx.measureText(t).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[t]=e,e},e}(t.BaseRenderLayer),e.TextRenderLayer=i},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),t=function(){function t(){this.cache=[]}return t.prototype.resize=function(t,e){for(var i=0;i<t;i++){this.cache.length<=i&&this.cache.push([]);for(var n=this.cache[i].length;n<e;n++)this.cache[i].push(void 0);this.cache[i].length=e}this.cache.length=t},t.prototype.clear=function(){for(var t=0;t<this.cache.length;t++)for(var e=0;e<this.cache[t].length;e++)this.cache[t][e]=void 0},t}(),e.GridCache=t},function(t,e,i){function n(t){return t.code<<21|t.bg<<12|t.fg<<3|(t.bold?0:4)+(t.dim?0:2)+(t.italic?0:1)}var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var s=i(9);t=i(44);var l=i(26),c=i(46),a=i(11),h=i(27),u=i(10),d={css:"rgba(0, 0, 0, 0)",rgba:0};e.getGlyphCacheKey=n,i=function(t){function e(e,i){var n=t.call(this)||this;return n._config=i,n._drawToCacheCount=0,n._glyphsWaitingOnBitmap=[],n._bitmapCommitTimeout=null,n._bitmap=null,n._cacheCanvas=e.createElement("canvas"),n._cacheCanvas.width=1024,n._cacheCanvas.height=1024,n._cacheCtx=h.throwIfFalsy(n._cacheCanvas.getContext("2d",{alpha:!0})),(e=e.createElement("canvas")).width=n._config.scaledCharWidth,e.height=n._config.scaledCharHeight,n._tmpCtx=h.throwIfFalsy(e.getContext("2d",{alpha:n._config.allowTransparency})),n._width=Math.floor(1024/n._config.scaledCharWidth),n._height=Math.floor(1024/n._config.scaledCharHeight),e=n._width*n._height,n._cacheMap=new c.LRUMap(e),n._cacheMap.prealloc(e),n}return o(e,t),e.prototype.dispose=function(){null!==this._bitmapCommitTimeout&&(window.clearTimeout(this._bitmapCommitTimeout),this._bitmapCommitTimeout=null)},e.prototype.beginFrame=function(){this._drawToCacheCount=0},e.prototype.draw=function(t,e,i,r){if(32===e.code)return!0;if(!this._canCache(e))return!1;var o=n(e),s=this._cacheMap.get(o);return null!=s?(this._drawFromCache(t,s,i,r),!0):100>this._drawToCacheCount&&(s=this._cacheMap.size<this._cacheMap.capacity?this._cacheMap.size:this._cacheMap.peek().index,e=this._drawToCache(e,s),this._cacheMap.set(o,e),this._drawFromCache(t,e,i,r),!0)},e.prototype._canCache=function(t){return 256>t.code},e.prototype._toCoordinateX=function(t){return t%this._width*this._config.scaledCharWidth},e.prototype._toCoordinateY=function(t){return Math.floor(t/this._width)*this._config.scaledCharHeight},e.prototype._drawFromCache=function(t,e,i,n){if(!e.isEmpty){var r=this._toCoordinateX(e.index),o=this._toCoordinateY(e.index);t.drawImage(e.inBitmap?this._bitmap:this._cacheCanvas,r,o,this._config.scaledCharWidth,this._config.scaledCharHeight,i,n,this._config.scaledCharWidth,this._config.scaledCharHeight)}},e.prototype._getColorFromAnsiIndex=function(t){return t<this._config.colors.ansi.length?this._config.colors.ansi[t]:l.DEFAULT_ANSI_COLORS[t]},e.prototype._getBackgroundColor=function(t){return this._config.allowTransparency?d:t.bg===s.INVERTED_DEFAULT_COLOR?this._config.colors.foreground:256>t.bg?this._getColorFromAnsiIndex(t.bg):this._config.colors.background},e.prototype._getForegroundColor=function(t){return t.fg===s.INVERTED_DEFAULT_COLOR?u.opaque(this._config.colors.background):256>t.fg?this._getColorFromAnsiIndex(t.fg):this._config.colors.foreground},e.prototype._drawToCache=function(t,e){this._drawToCacheCount++,this._tmpCtx.save();var i=this._getBackgroundColor(t);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=i.css,this._tmpCtx.fillRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),this._tmpCtx.globalCompositeOperation="source-over",this._tmpCtx.font=(t.italic?"italic":"")+" "+(t.bold?this._config.fontWeightBold:this._config.fontWeight)+" "+this._config.fontSize*this._config.devicePixelRatio+"px "+this._config.fontFamily,this._tmpCtx.textBaseline="middle",this._tmpCtx.fillStyle=this._getForegroundColor(t).css,t.dim&&(this._tmpCtx.globalAlpha=s.DIM_OPACITY),this._tmpCtx.fillText(t.chars,0,this._config.scaledCharHeight/2),this._tmpCtx.restore(),t=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight);var n=!1;if(!this._config.allowTransparency){n=!0;var r=i.rgba>>>24,o=i.rgba>>>16&255;i=i.rgba>>>8&255;for(var l=0;l<t.data.length;l+=4)t.data[l]===r&&t.data[l+1]===o&&t.data[l+2]===i?t.data[l+3]=0:n=!1}return i=this._toCoordinateX(e),r=this._toCoordinateY(e),this._cacheCtx.putImageData(t,i,r),e={index:e,isEmpty:n,inBitmap:!1},this._addGlyphToBitmap(e),e},e.prototype._addGlyphToBitmap=function(t){var e=this;"createImageBitmap"in window&&!a.isFirefox&&!a.isSafari&&(this._glyphsWaitingOnBitmap.push(t),null===this._bitmapCommitTimeout&&(this._bitmapCommitTimeout=window.setTimeout((function(){return e._generateBitmap()}),100)))},e.prototype._generateBitmap=function(){var t=this,e=this._glyphsWaitingOnBitmap;this._glyphsWaitingOnBitmap=[],window.createImageBitmap(this._cacheCanvas).then((function(i){for(t._bitmap=i,i=0;i<e.length;i++)e[i].inBitmap=!0})),this._bitmapCommitTimeout=null},e}(t.BaseCharAtlas),e.DynamicCharAtlas=i,i=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.draw=function(){return!1},e}(t.BaseCharAtlas),e.NoneCharAtlas=i},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),t=function(){function t(){this._didWarmUp=!1}return t.prototype.dispose=function(){},t.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)},t.prototype._doWarmUp=function(){},t.prototype.beginFrame=function(){},t}(),e.BaseCharAtlas=t},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),t=function(){function t(){this._color={},this._rgba={}}return t.prototype.clear=function(){this._color={},this._rgba={}},t.prototype.setCss=function(t,e,i){this._rgba[t]||(this._rgba[t]={}),this._rgba[t][e]=i},t.prototype.getCss=function(t,e){return this._rgba[t]?this._rgba[t][e]:void 0},t.prototype.setColor=function(t,e,i){this._color[t]||(this._color[t]={}),this._color[t][e]=i},t.prototype.getColor=function(t,e){return this._color[t]?this._color[t][e]:void 0},t}(),e.ColorContrastCache=t},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),t=function(){function t(t){this.capacity=t,this._map={},this._tail=this._head=null,this._nodePool=[],this.size=0}return t.prototype._unlinkNode=function(t){var e=t.prev,i=t.next;t===this._head&&(this._head=i),t===this._tail&&(this._tail=e),null!==e&&(e.next=i),null!==i&&(i.prev=e)},t.prototype._appendNode=function(t){var e=this._tail;null!==e&&(e.next=t),t.prev=e,t.next=null,this._tail=t,null===this._head&&(this._head=t)},t.prototype.prealloc=function(t){for(var e=this._nodePool,i=0;i<t;i++)e.push({prev:null,next:null,key:null,value:null})},t.prototype.get=function(t){return void 0!==(t=this._map[t])?(this._unlinkNode(t),this._appendNode(t),t.value):null},t.prototype.peekValue=function(t){return void 0!==(t=this._map[t])?t.value:null},t.prototype.peek=function(){var t=this._head;return null===t?null:t.value},t.prototype.set=function(t,e){var i=this._map[t];if(void 0!==i)i=this._map[t],this._unlinkNode(i),i.value=e;else if(this.size>=this.capacity)i=this._head,this._unlinkNode(i),delete this._map[i.key],i.key=t,i.value=e,this._map[t]=i;else{var n=this._nodePool;0<n.length?((i=n.pop()).key=t,i.value=e):i={prev:null,next:null,key:t,value:e},this._map[t]=i,this.size++}this._appendNode(i)},t}(),e.LRUMap=t},function(t,e,i){var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),t=function(t){function e(e,i,n,r,o,s){return(e=t.call(this,e,"selection",i,!0,n,r,o,s)||this).bufferService=o,e.optionsService=s,e._clearState(),e}return r(e,t),e.prototype._clearState=function(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}},e.prototype.resize=function(e){t.prototype.resize.call(this,e),this._clearState()},e.prototype.reset=function(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())},e.prototype.onSelectionChanged=function(t,e,i){if(this._didStateChange(t,e,i,this._bufferService.buffer.ydisp))if(this._clearAll(),t&&e){var n=t[1]-this._bufferService.buffer.ydisp,r=e[1]-this._bufferService.buffer.ydisp,o=Math.max(n,0),s=Math.min(r,this._bufferService.rows-1);o>=this._bufferService.rows||0>s||(this._ctx.fillStyle=this._colors.selection.css,i?(n=t[0],this._fillCells(n,o,e[0]-n,s-o+1)):(n=n===o?t[0]:0,this._fillCells(n,o,(o===s?e[0]:this._bufferService.cols)-n,1),this._fillCells(0,o+1,this._bufferService.cols,Math.max(s-o-1,0)),o!==s&&this._fillCells(0,s,r===s?e[0]:this._bufferService.cols,1)),this._state.start=[t[0],t[1]],this._state.end=[e[0],e[1]],this._state.columnSelectMode=i,this._state.ydisp=this._bufferService.buffer.ydisp)}else this._clearState()},e.prototype._didStateChange=function(t,e,i,n){return!this._areCoordinatesEqual(t,this._state.start)||!this._areCoordinatesEqual(e,this._state.end)||i!==this._state.columnSelectMode||n!==this._state.ydisp},e.prototype._areCoordinatesEqual=function(t,e){return!(!t||!e)&&t[0]===e[0]&&t[1]===e[1]},e}(i(13).BaseRenderLayer),e.SelectionRenderLayer=t},function(t,e,i){var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),t=i(13);var o=i(5);i=function(t){function e(e,i,n,r,s,l,c,a,h){return(e=t.call(this,e,"cursor",i,!0,n,r,l,c)||this)._onRequestRefreshRowsEvent=s,e.bufferService=l,e.optionsService=c,e._coreService=a,e._coreBrowserService=h,e._cell=new o.CellData,e._state={x:0,y:0,isFocused:!1,style:"",width:0},e._cursorRenderers={bar:e._renderBarCursor.bind(e),block:e._renderBlockCursor.bind(e),underline:e._renderUnderlineCursor.bind(e)},e}return r(e,t),e.prototype.resize=function(e){t.prototype.resize.call(this,e),this._state={x:0,y:0,isFocused:!1,style:"",width:0}},e.prototype.reset=function(){this._clearCursor(),this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=void 0,this.onOptionsChanged())},e.prototype.onBlur=function(){this._cursorBlinkStateManager&&this._cursorBlinkStateManager.pause(),this._onRequestRefreshRowsEvent.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},e.prototype.onFocus=function(){this._cursorBlinkStateManager?this._cursorBlinkStateManager.resume():this._onRequestRefreshRowsEvent.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},e.prototype.onOptionsChanged=function(){var t,e=this;this._optionsService.options.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new s(this._coreBrowserService.isFocused,(function(){e._render(!0)}))):(null===(t=this._cursorBlinkStateManager)||void 0===t||t.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRefreshRowsEvent.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},e.prototype.onCursorMove=function(){this._cursorBlinkStateManager&&this._cursorBlinkStateManager.restartBlinkAnimation()},e.prototype.onGridChanged=function(){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(!1):this._cursorBlinkStateManager.restartBlinkAnimation()},e.prototype._render=function(){if(this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden){var t=this._bufferService.buffer.ybase+this._bufferService.buffer.y,e=t-this._bufferService.buffer.ydisp;if(0>e||e>=this._bufferService.rows)this._clearCursor();else if(this._bufferService.buffer.lines.get(t).loadCell(this._bufferService.buffer.x,this._cell),void 0!==this._cell.content){if(!this._coreBrowserService.isFocused)return this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,(t=this._optionsService.options.cursorStyle)&&"block"!==t?this._cursorRenderers[t](this._bufferService.buffer.x,e,this._cell):this._renderBlurCursor(this._bufferService.buffer.x,e,this._cell),this._ctx.restore(),this._state.x=this._bufferService.buffer.x,this._state.y=e,this._state.isFocused=!1,this._state.style=t,void(this._state.width=this._cell.getWidth());if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===this._bufferService.buffer.x&&this._state.y===e&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.options.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.options.cursorStyle||"block"](this._bufferService.buffer.x,e,this._cell),this._ctx.restore(),this._state.x=this._bufferService.buffer.x,this._state.y=e,this._state.isFocused=!1,this._state.style=this._optionsService.options.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}else this._clearCursor()},e.prototype._clearCursor=function(){this._state&&(this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})},e.prototype._renderBarCursor=function(t,e){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillLeftLineAtCell(t,e),this._ctx.restore()},e.prototype._renderBlockCursor=function(t,e,i){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillCells(t,e,i.getWidth(),1),this._ctx.fillStyle=this._colors.cursorAccent.css,this._fillCharTrueColor(i,t,e),this._ctx.restore()},e.prototype._renderUnderlineCursor=function(t,e){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillBottomLineAtCells(t,e),this._ctx.restore()},e.prototype._renderBlurCursor=function(t,e,i){this._ctx.save(),this._ctx.strokeStyle=this._colors.cursor.css,this._strokeRectAtCell(t,e,i.getWidth(),1),this._ctx.restore()},e}(t.BaseRenderLayer),e.CursorRenderLayer=i;var s=function(){function t(t,e){this._renderCallback=e,this.isCursorVisible=!0,t&&this._restartInterval()}return Object.defineProperty(t.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},t.prototype.restartBlinkAnimation=function(){var t=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame((function(){t._renderCallback(),t._animationFrame=void 0}))))},t.prototype._restartInterval=function(t){var e=this;void 0===t&&(t=600),this._blinkInterval&&window.clearInterval(this._blinkInterval),this._blinkStartTimeout=setTimeout((function(){if(e._animationTimeRestarted){var t=600-(Date.now()-e._animationTimeRestarted);if(e._animationTimeRestarted=void 0,0<t)return void e._restartInterval(t)}e.isCursorVisible=!1,e._animationFrame=window.requestAnimationFrame((function(){e._renderCallback(),e._animationFrame=void 0})),e._blinkInterval=setInterval((function(){if(e._animationTimeRestarted){var t=600-(Date.now()-e._animationTimeRestarted);return e._animationTimeRestarted=void 0,void e._restartInterval(t)}e.isCursorVisible=!e.isCursorVisible,e._animationFrame=window.requestAnimationFrame((function(){e._renderCallback(),e._animationFrame=void 0}))}),600)}),t)},t.prototype.pause=function(){this.isCursorVisible=!0,this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},t.prototype.resume=function(){this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()},t}()},function(t,e,i){var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),t=i(13);var o=i(9),s=i(25);i=function(t){function e(e,i,n,r,o,s,l){var c=t.call(this,e,"link",i,!0,n,r,s,l)||this;return c.bufferService=s,c.optionsService=l,o.onLinkHover((function(t){return c._onLinkHover(t)})),o.onLinkLeave((function(t){return c._onLinkLeave(t)})),c}return r(e,t),e.prototype.resize=function(e){t.prototype.resize.call(this,e),this._state=void 0},e.prototype.reset=function(){this._clearCurrentLink()},e.prototype._clearCurrentLink=function(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var t=this._state.y2-this._state.y1-1;0<t&&this._clearCells(0,this._state.y1+1,this._state.cols,t),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}},e.prototype._onLinkHover=function(t){if(t.fg===o.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._colors.background.css:t.fg&&s.is256Color(t.fg)?this._ctx.fillStyle=this._colors.ansi[t.fg].css:this._ctx.fillStyle=this._colors.foreground.css,t.y1===t.y2)this._fillBottomLineAtCells(t.x1,t.y1,t.x2-t.x1);else{this._fillBottomLineAtCells(t.x1,t.y1,t.cols-t.x1);for(var e=t.y1+1;e<t.y2;e++)this._fillBottomLineAtCells(0,e,t.cols);this._fillBottomLineAtCells(0,t.y2,t.x2)}this._state=t},e.prototype._onLinkLeave=function(){this._clearCurrentLink()},e}(t.BaseRenderLayer),e.LinkRenderLayer=i},function(t,e,i){function n(t,e,i,n,r,o,s,l,c){this.x1=t,this.y1=e,this.x2=i,this.y2=n,this.clickCallback=r,this.hoverCallback=o,this.tooltipCallback=s,this.leaveCallback=l,this.willLinkActivate=c}Object.defineProperty(e,"__esModule",{value:!0});var r=i(19),o=i(1);t=function(){function t(t,e){this._bufferService=t,this._logService=e,this._linkMatchers=[],this._nextLinkMatcherId=0,this._onLinkHover=new o.EventEmitter,this._onLinkLeave=new o.EventEmitter,this._onLinkTooltip=new o.EventEmitter,this._rowsToLinkify={start:void 0,end:void 0}}return Object.defineProperty(t.prototype,"onLinkHover",{get:function(){return this._onLinkHover.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onLinkLeave",{get:function(){return this._onLinkLeave.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onLinkTooltip",{get:function(){return this._onLinkTooltip.event},enumerable:!0,configurable:!0}),t.prototype.attachToDom=function(t,e){this._element=t,this._mouseZoneManager=e},t.prototype.linkifyRows=function(e,i){var n=this;this._mouseZoneManager&&(void 0===this._rowsToLinkify.start||void 0===this._rowsToLinkify.end?(this._rowsToLinkify.start=e,this._rowsToLinkify.end=i):(this._rowsToLinkify.start=Math.min(this._rowsToLinkify.start,e),this._rowsToLinkify.end=Math.max(this._rowsToLinkify.end,i)),this._mouseZoneManager.clearAll(e,i),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),this._rowsTimeoutId=setTimeout((function(){return n._linkifyRows()}),t._timeBeforeLatency))},t.prototype._linkifyRows=function(){this._rowsTimeoutId=void 0;var t=this._bufferService.buffer;if(void 0!==this._rowsToLinkify.start&&void 0!==this._rowsToLinkify.end){var e=t.ydisp+this._rowsToLinkify.start;if(!(e>=t.lines.length)){var i=Math.ceil(2e3/this._bufferService.cols);for(t=this._bufferService.buffer.iterator(!1,e,t.ydisp+Math.min(this._rowsToLinkify.end,this._bufferService.rows)+1,i,i);t.hasNext();)for(e=t.next(),i=0;i<this._linkMatchers.length;i++)this._doLinkifyRow(e.range.first,e.content,this._linkMatchers[i]);this._rowsToLinkify.start=void 0,this._rowsToLinkify.end=void 0}}else this._logService.debug("_rowToLinkify was unset before _linkifyRows was called")},t.prototype.registerLinkMatcher=function(t,e,i){if(void 0===i&&(i={}),!e)throw Error("handler must be defined");return t={id:this._nextLinkMatcherId++,regex:t,handler:e,matchIndex:i.matchIndex,validationCallback:i.validationCallback,hoverTooltipCallback:i.tooltipCallback,hoverLeaveCallback:i.leaveCallback,willLinkActivate:i.willLinkActivate,priority:i.priority||0},this._addLinkMatcherToList(t),t.id},t.prototype._addLinkMatcherToList=function(t){if(0!==this._linkMatchers.length){for(var e=this._linkMatchers.length-1;0<=e;e--)if(t.priority<=this._linkMatchers[e].priority)return void this._linkMatchers.splice(e+1,0,t);this._linkMatchers.splice(0,0,t)}else this._linkMatchers.push(t)},t.prototype.deregisterLinkMatcher=function(t){for(var e=0;e<this._linkMatchers.length;e++)if(this._linkMatchers[e].id===t)return this._linkMatchers.splice(e,1),!0;return!1},t.prototype._doLinkifyRow=function(t,e,i){function n(){var n=r["number"!=typeof i.matchIndex?0:i.matchIndex];if(!n)return c._logService.debug("match found without corresponding matchIndex",r,i),"break";if(l=e.indexOf(n,l+1),s.lastIndex=l+n.length,0>l)return"break";var a=c._bufferService.buffer.stringIndexToBufferIndex(t,l);if(0>a[0])return"break";var h=c._bufferService.buffer.lines.get(a[0]);if(!h)return"break";var u=(h=h.getFg(a[1]))?h>>9&511:void 0;i.validationCallback?i.validationCallback(n,(function(t){o._rowsTimeoutId||t&&o._addLink(a[1],a[0]-o._bufferService.buffer.ydisp,n,i,u)})):c._addLink(a[1],a[0]-c._bufferService.buffer.ydisp,n,i,u)}for(var r,o=this,s=new RegExp(i.regex.source,(i.regex.flags||"")+"g"),l=-1,c=this;null!==(r=s.exec(e))&&"break"!==n(););},t.prototype._addLink=function(t,e,i,o,s){var l=this;if(this._mouseZoneManager&&this._element){var c=r.getStringCellWidth(i),a=t%this._bufferService.cols,h=e+Math.floor(t/this._bufferService.cols),u=(a+c)%this._bufferService.cols,d=h+Math.floor((a+c)/this._bufferService.cols);0===u&&(u=this._bufferService.cols,d--),this._mouseZoneManager.add(new n(a+1,h+1,u+1,d+1,(function(t){if(o.handler)return o.handler(t,i);window.open(i,"_blank")}),(function(){l._onLinkHover.fire(l._createLinkHoverEvent(a,h,u,d,s)),l._element.classList.add("xterm-cursor-pointer")}),(function(t){l._onLinkTooltip.fire(l._createLinkHoverEvent(a,h,u,d,s)),o.hoverTooltipCallback&&o.hoverTooltipCallback(t,i,{start:{x:a,y:h},end:{x:u,y:d}})}),(function(){l._onLinkLeave.fire(l._createLinkHoverEvent(a,h,u,d,s)),l._element.classList.remove("xterm-cursor-pointer"),o.hoverLeaveCallback&&o.hoverLeaveCallback()}),(function(t){return!o.willLinkActivate||o.willLinkActivate(t,i)})))}},t.prototype._createLinkHoverEvent=function(t,e,i,n,r){return{x1:t,y1:e,x2:i,y2:n,cols:this._bufferService.cols,fg:r}},t._timeBeforeLatency=200,t}(),e.Linkifier=t,e.MouseZone=n},function(t,e,i){var n=this&&this.__decorate||function(t,e,i,n){var r,o=arguments.length,s=3>o?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var l=t.length-1;0<=l;l--)(r=t[l])&&(s=(3>o?r(s):3<o?r(e,i,s):r(e,i))||s);return 3<o&&s&&Object.defineProperty(e,i,s),s},r=this&&this.__param||function(t,e){return function(i,n){e(i,n,t)}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(11),s=i(52),l=i(5),c=i(1),a=i(4),h=i(0),u=i(29),d=i(53);t=String.fromCharCode(160);var m=new RegExp(t,"g");t=function(){function t(t,e,i,n,r,o,a,h){var u=this;this._scrollLines=t,this._element=e,this._screenElement=i,this._charSizeService=n,this._bufferService=r,this._coreService=o,this._mouseService=a,this._optionsService=h,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new l.CellData,this._mouseDownTimeStamp=0,this._onLinuxMouseSelection=new c.EventEmitter,this._onRedrawRequest=new c.EventEmitter,this._onSelectionChange=new c.EventEmitter,this._mouseMoveListener=function(t){return u._onMouseMove(t)},this._mouseUpListener=function(t){return u._onMouseUp(t)},this._coreService.onUserInput((function(){u.hasSelection&&u.clearSelection()})),this._trimListener=this._bufferService.buffer.lines.onTrim((function(t){return u._onTrim(t)})),this._bufferService.buffers.onBufferActivate((function(t){return u._onBufferActivate(t)})),this.enable(),this._model=new s.SelectionModel(this._bufferService),this._activeSelectionMode=0}return Object.defineProperty(t.prototype,"onLinuxMouseSelection",{get:function(){return this._onLinuxMouseSelection.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onRedrawRequest",{get:function(){return this._onRedrawRequest.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._removeMouseDownListeners()},t.prototype.reset=function(){this.clearSelection()},t.prototype.disable=function(){this.clearSelection(),this._enabled=!1},t.prototype.enable=function(){this._enabled=!0},Object.defineProperty(t.prototype,"selectionStart",{get:function(){return this._model.finalSelectionStart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectionEnd",{get:function(){return this._model.finalSelectionEnd},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasSelection",{get:function(){var t=this._model.finalSelectionStart,e=this._model.finalSelectionEnd;return!(!t||!e||t[0]===e[0]&&t[1]===e[1])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectionText",{get:function(){var t=this._model.finalSelectionStart,e=this._model.finalSelectionEnd;if(!t||!e)return"";var i=this._bufferService.buffer,n=[];if(3===this._activeSelectionMode){if(t[0]===e[0])return"";for(var r=t[1];r<=e[1];r++){var s=i.translateBufferLineToString(r,!0,t[0],e[0]);n.push(s)}}else{for(n.push(i.translateBufferLineToString(t[1],!0,t[0],t[1]===e[1]?e[0]:void 0)),r=t[1]+1;r<=e[1]-1;r++){var l=i.lines.get(r);s=i.translateBufferLineToString(r,!0),l&&l.isWrapped?n[n.length-1]+=s:n.push(s)}t[1]!==e[1]&&(l=i.lines.get(e[1]),s=i.translateBufferLineToString(e[1],!0,0,e[0]),l&&l.isWrapped?n[n.length-1]+=s:n.push(s))}return n.map((function(t){return t.replace(m," ")})).join(o.isWindows?"\r\n":"\n")},enumerable:!0,configurable:!0}),t.prototype.clearSelection=function(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()},t.prototype.refresh=function(t){var e=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame((function(){return e._refresh()}))),o.isLinux&&t&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)},t.prototype._refresh=function(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:3===this._activeSelectionMode})},t.prototype.isClickInSelection=function(t){t=this._getMouseBufferCoords(t);var e=this._model.finalSelectionStart,i=this._model.finalSelectionEnd;return!!(e&&i&&t)&&this._areCoordsInSelection(t,e,i)},t.prototype._areCoordsInSelection=function(t,e,i){return t[1]>e[1]&&t[1]<i[1]||e[1]===i[1]&&t[1]===e[1]&&t[0]>=e[0]&&t[0]<i[0]||e[1]<i[1]&&t[1]===i[1]&&t[0]<i[0]||e[1]<i[1]&&t[1]===e[1]&&t[0]>=e[0]},t.prototype.selectWordAtCursor=function(t){(t=this._getMouseBufferCoords(t))&&(this._selectWordAt(t,!1),this._model.selectionEnd=void 0,this.refresh(!0))},t.prototype.selectAll=function(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()},t.prototype.selectLines=function(t,e){this._model.clearSelection(),t=Math.max(t,0),e=Math.min(e,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,t],this._model.selectionEnd=[this._bufferService.cols,e],this.refresh(),this._onSelectionChange.fire()},t.prototype._onTrim=function(t){this._model.onTrim(t)&&this.refresh()},t.prototype._getMouseBufferCoords=function(t){if(t=this._mouseService.getCoords(t,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0))return t[0]--,t[1]--,t[1]+=this._bufferService.buffer.ydisp,t},t.prototype._getMouseEventScrollAmount=function(t){t=u.getCoordsRelativeToElement(t,this._screenElement)[1];var e=this._bufferService.rows*Math.ceil(this._charSizeService.height*this._optionsService.options.lineHeight);return 0<=t&&t<=e?0:(t>e&&(t-=e),t=Math.min(Math.max(t,-50),50),(t/=50)/Math.abs(t)+Math.round(14*t))},t.prototype.shouldForceSelection=function(t){return o.isMac?t.altKey&&this._optionsService.options.macOptionClickForcesSelection:t.shiftKey},t.prototype.onMouseDown=function(t){if(this._mouseDownTimeStamp=t.timeStamp,(2!==t.button||!this.hasSelection)&&0===t.button){if(!this._enabled){if(!this.shouldForceSelection(t))return;t.stopPropagation()}t.preventDefault(),this._dragScrollAmount=0,this._enabled&&t.shiftKey?this._onIncrementalClick(t):1===t.detail?this._onSingleClick(t):2===t.detail?this._onDoubleClick(t):3===t.detail&&this._onTripleClick(t),this._addMouseDownListeners(),this.refresh(!0)}},t.prototype._addMouseDownListeners=function(){var t=this;this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=window.setInterval((function(){return t._dragScroll()}),50)},t.prototype._removeMouseDownListeners=function(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0},t.prototype._onIncrementalClick=function(t){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(t))},t.prototype._onSingleClick=function(t){this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(t)?3:0,this._model.selectionStart=this._getMouseBufferCoords(t),this._model.selectionStart&&(this._model.selectionEnd=void 0,(t=this._bufferService.buffer.lines.get(this._model.selectionStart[1]))&&t.length!==this._model.selectionStart[0]&&0===t.hasWidth(this._model.selectionStart[0])&&this._model.selectionStart[0]++)},t.prototype._onDoubleClick=function(t){(t=this._getMouseBufferCoords(t))&&(this._activeSelectionMode=1,this._selectWordAt(t,!0))},t.prototype._onTripleClick=function(t){(t=this._getMouseBufferCoords(t))&&(this._activeSelectionMode=2,this._selectLineAt(t[1]))},t.prototype.shouldColumnSelect=function(t){return t.altKey&&!(o.isMac&&this._optionsService.options.macOptionClickForcesSelection)},t.prototype._onMouseMove=function(t){if(t.stopImmediatePropagation(),this._model.selectionStart){var e=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;this._model.selectionEnd=this._getMouseBufferCoords(t),this._model.selectionEnd?(2===this._activeSelectionMode?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:1===this._activeSelectionMode&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(t),3!==this._activeSelectionMode&&(0<this._dragScrollAmount?this._model.selectionEnd[0]=this._bufferService.cols:0>this._dragScrollAmount&&(this._model.selectionEnd[0]=0)),t=this._bufferService.buffer,this._model.selectionEnd[1]<t.lines.length&&(t=t.lines.get(this._model.selectionEnd[1]))&&0===t.hasWidth(this._model.selectionEnd[0])&&this._model.selectionEnd[0]++,e&&e[0]===this._model.selectionEnd[0]&&e[1]===this._model.selectionEnd[1]||this.refresh(!0)):this.refresh(!0)}},t.prototype._dragScroll=function(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._scrollLines(this._dragScrollAmount,!1);var t=this._bufferService.buffer;0<this._dragScrollAmount?(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(t.ydisp+this._bufferService.rows,t.lines.length-1)):(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=t.ydisp),this.refresh()}},t.prototype._onMouseUp=function(t){var e=t.timeStamp-this._mouseDownTimeStamp;this._removeMouseDownListeners(),1>=this.selectionText.length&&500>e?t.altKey&&this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp&&(t=this._mouseService.getCoords(t,this._element,this._bufferService.cols,this._bufferService.rows,!1))&&void 0!==t[0]&&void 0!==t[1]&&(t=d.moveToCellSequence(t[0]-1,t[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys),this._coreService.triggerDataEvent(t,!0)):this.hasSelection&&this._onSelectionChange.fire()},t.prototype._onBufferActivate=function(t){var e=this;this.clearSelection(),this._trimListener.dispose(),this._trimListener=t.activeBuffer.lines.onTrim((function(t){return e._onTrim(t)}))},t.prototype._convertViewportColToCharacterIndex=function(t,e){for(var i=e[0],n=0;e[0]>=n;n++){var r=t.loadCell(n,this._workCell).getChars().length;0===this._workCell.getWidth()?i--:1<r&&e[0]!==n&&(i+=r-1)}return i},t.prototype.setSelection=function(t,e,i){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[t,e],this._model.selectionStartLength=i,this.refresh()},t.prototype._getWordAt=function(t,e,i,n){if(void 0===i&&(i=!0),void 0===n&&(n=!0),!(t[0]>=this._bufferService.cols)){var r=this._bufferService.buffer,o=r.lines.get(t[1]);if(o){var s=r.translateBufferLineToString(t[1],!1),l=this._convertViewportColToCharacterIndex(o,t),c=l,a=t[0]-l,h=0,u=0,d=0,m=0;if(" "===s.charAt(l)){for(;0<l&&" "===s.charAt(l-1);)l--;for(;c<s.length&&" "===s.charAt(c+1);)c++}else{var p=t[0],f=t[0];0===o.getWidth(p)&&(h++,p--),2===o.getWidth(f)&&(u++,f++);var b=o.getString(f).length;for(1<b&&(m+=b-1,c+=b-1);0<p&&0<l&&!this._isCharWordSeparator(o.loadCell(p-1,this._workCell));)o.loadCell(p-1,this._workCell),b=this._workCell.getChars().length,0===this._workCell.getWidth()?(h++,p--):1<b&&(d+=b-1,l-=b-1),l--,p--;for(;f<o.length&&c+1<s.length&&!this._isCharWordSeparator(o.loadCell(f+1,this._workCell));)o.loadCell(f+1,this._workCell),p=this._workCell.getChars().length,2===this._workCell.getWidth()?(u++,f++):1<p&&(m+=p-1,c+=p-1),c++,f++}if(c++,a=l+a-h+d,h=Math.min(this._bufferService.cols,c-l+h+u-d-m),e||""!==s.slice(l,c).trim())return i&&0===a&&32!==o.getCodePoint(0)&&(e=r.lines.get(t[1]-1))&&o.isWrapped&&32!==e.getCodePoint(this._bufferService.cols-1)&&(e=this._getWordAt([this._bufferService.cols-1,t[1]-1],!1,!0,!1))&&(a-=e=this._bufferService.cols-e.start,h+=e),n&&a+h===this._bufferService.cols&&32!==o.getCodePoint(this._bufferService.cols-1)&&(n=r.lines.get(t[1]+1))&&n.isWrapped&&32!==n.getCodePoint(0)&&(t=this._getWordAt([0,t[1]+1],!1,!1,!0))&&(h+=t.length),{start:a,length:h}}}},t.prototype._selectWordAt=function(t,e){if(e=this._getWordAt(t,e)){for(;0>e.start;)e.start+=this._bufferService.cols,t[1]--;this._model.selectionStart=[e.start,t[1]],this._model.selectionStartLength=e.length}},t.prototype._selectToWordAt=function(t){var e=this._getWordAt(t,!0);if(e){for(t=t[1];0>e.start;)e.start+=this._bufferService.cols,t--;if(!this._model.areSelectionValuesReversed())for(;e.start+e.length>this._bufferService.cols;)e.length-=this._bufferService.cols,t++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?e.start:e.start+e.length,t]}},t.prototype._isCharWordSeparator=function(t){return 0!==t.getWidth()&&0<=this._optionsService.options.wordSeparator.indexOf(t.getChars())},t.prototype._selectLineAt=function(t){t=this._bufferService.buffer.getWrappedRangeForLine(t),this._model.selectionStart=[0,t.first],this._model.selectionEnd=[this._bufferService.cols,t.last],this._model.selectionStartLength=0},n([r(3,a.ICharSizeService),r(4,h.IBufferService),r(5,h.ICoreService),r(6,a.IMouseService),r(7,h.IOptionsService)],t)}(),e.SelectionService=t},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),t=function(){function t(t){this._bufferService=t,this.isSelectAllActive=!1,this.selectionStartLength=0}return t.prototype.clearSelection=function(){this.selectionEnd=this.selectionStart=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0},Object.defineProperty(t.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"finalSelectionEnd",{get:function(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){var t=this.selectionStart[0]+this.selectionStartLength;return t>this._bufferService.cols?[t%this._bufferService.cols,this.selectionStart[1]+Math.floor(t/this._bufferService.cols)]:[t,this.selectionStart[1]]}return this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?[Math.max(this.selectionStart[0]+this.selectionStartLength,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd}},enumerable:!0,configurable:!0}),t.prototype.areSelectionValuesReversed=function(){var t=this.selectionStart,e=this.selectionEnd;return!(!t||!e)&&(t[1]>e[1]||t[1]===e[1]&&t[0]>e[0])},t.prototype.onTrim=function(t){return this.selectionStart&&(this.selectionStart[1]-=t),this.selectionEnd&&(this.selectionEnd[1]-=t),this.selectionEnd&&0>this.selectionEnd[1]?(this.clearSelection(),!0):(this.selectionStart&&0>this.selectionStart[1]&&(this.selectionStart[1]=0),!1)},t}(),e.SelectionModel=t},function(t,e,i){function n(t,e,i,n){var o=t-r(i,t),s=e-r(i,e);o=Math.abs(o-s),s=0;for(var a=t-r(i,t),h=e-r(i,e),u=0;u<Math.abs(a-h);u++){var d=i.buffer.lines.get(a+("A"==(t>e?"A":"B")?-1:1)*u);d&&d.isWrapped&&s++}return c(o-s,l(t>e?"A":"B",n))}function r(t,e){for(var i=0,n=t.buffer.lines.get(e),r=n&&n.isWrapped;r&&0<=e&&e<t.rows;)i++,r=(n=t.buffer.lines.get(--e))&&n.isWrapped;return i}function o(t,e,i,o,s,l){var c;return c=0<n(i,o,s,l).length?o-r(s,o):e,t<i&&c<=o||t>=i&&c<o?"C":"D"}function s(t,e,i,n,r,o){for(var s=t,l="";s!==i||e!==n;)s+=r?1:-1,r&&s>o.cols-1?(l+=o.buffer.translateBufferLineToString(e,!1,t,s),s=0,t=0,e++):!r&&0>s&&(l+=o.buffer.translateBufferLineToString(e,!1,0,t+1),t=s=o.cols-1,e--);return l+o.buffer.translateBufferLineToString(e,!1,t,s)}function l(t,e){return a.C0.ESC+(e?"O":"[")+t}function c(t,e){t=Math.floor(t);for(var i="",n=0;n<t;n++)i+=e;return i}Object.defineProperty(e,"__esModule",{value:!0});var a=i(12);e.moveToCellSequence=function(t,e,i,a){var h=i.buffer.x,u=i.buffer.y;return i.buffer.hasScrollback?function(t,e,i,n,r,s){return e=o(t,e,i,n,r,s),c(Math.abs(t-i),l(e,s))}(h,u,t,e,i,a):function(t,e,i,o,a,h){return 0===n(e,o,a,h).length?"":c(s(t,e,t,e-r(a,e),!1,a).length,l("D",h))}(h,u,0,e,i,a)+n(u,e,i,a)+function(t,e,i,a,h,u){return c(s(t,0<n(e,a,h,u).length?a-r(h,a):e,i,a,"C"===(e=o(t,e,i,a,h,u)),h).length,l(e,u))}(h,u,t,e,i,a)}},function(t,e,i){var n=this&&this.__decorate||function(t,e,i,n){var r,o=arguments.length,s=3>o?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var l=t.length-1;0<=l;l--)(r=t[l])&&(s=(3>o?r(s):3<o?r(e,i,s):r(e,i))||s);return 3<o&&s&&Object.defineProperty(e,i,s),s},r=this&&this.__param||function(t,e){return function(i,n){e(i,n,t)}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(0);t=function(){function t(t){this._optionsService=t}return Object.defineProperty(t,"audioContext",{get:function(){if(!t._audioContext){var e=window.AudioContext||window.webkitAudioContext;if(!e)return console.warn("Web Audio API is not supported by this browser. Consider upgrading to the latest version"),null;t._audioContext=new e}return t._audioContext},enumerable:!0,configurable:!0}),t.prototype.playBellSound=function(){var e=t.audioContext;if(e){var i=e.createBufferSource();e.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._optionsService.options.bellSound)),(function(t){i.buffer=t,i.connect(e.destination),i.start(0)}))}},t.prototype._base64ToArrayBuffer=function(t){for(var e=(t=window.atob(t)).length,i=new Uint8Array(e),n=0;n<e;n++)i[n]=t.charCodeAt(n);return i.buffer},t.prototype._removeMimeType=function(t){return t.split(",")[1]},t=n([r(0,o.IOptionsService)],t)}(),e.SoundService=t},function(t,e,i){var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),o=this&&this.__decorate||function(t,e,i,n){var r,o=arguments.length,s=3>o?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var l=t.length-1;0<=l;l--)(r=t[l])&&(s=(3>o?r(s):3<o?r(e,i,s):r(e,i))||s);return 3<o&&s&&Object.defineProperty(e,i,s),s},s=this&&this.__param||function(t,e){return function(i,n){e(i,n,t)}};Object.defineProperty(e,"__esModule",{value:!0}),t=i(2);var l=i(7),c=i(4),a=i(0);i=function(t){function e(e,i,n,r,o){var s=t.call(this)||this;return s._element=e,s._screenElement=i,s._bufferService=n,s._mouseService=r,s._selectionService=o,s._zones=[],s._areZonesActive=!1,s._lastHoverCoords=[void 0,void 0],s._initialSelectionLength=0,s.register(l.addDisposableDomListener(s._element,"mousedown",(function(t){return s._onMouseDown(t)}))),s._mouseMoveListener=function(t){return s._onMouseMove(t)},s._mouseLeaveListener=function(t){return s._onMouseLeave(t)},s._clickListener=function(t){return s._onClick(t)},s}return r(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this),this._deactivate()},e.prototype.add=function(t){this._zones.push(t),1===this._zones.length&&this._activate()},e.prototype.clearAll=function(t,e){if(0!==this._zones.length){t&&e||(t=0,e=this._bufferService.rows-1);for(var i=0;i<this._zones.length;i++){var n=this._zones[i];(n.y1>t&&n.y1<=e+1||n.y2>t&&n.y2<=e+1||n.y1<t&&n.y2>e+1)&&(this._currentZone&&this._currentZone===n&&(this._currentZone.leaveCallback(),this._currentZone=void 0),this._zones.splice(i--,1))}0===this._zones.length&&this._deactivate()}},e.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._element.addEventListener("mousemove",this._mouseMoveListener),this._element.addEventListener("mouseleave",this._mouseLeaveListener),this._element.addEventListener("click",this._clickListener))},e.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._element.removeEventListener("mousemove",this._mouseMoveListener),this._element.removeEventListener("mouseleave",this._mouseLeaveListener),this._element.removeEventListener("click",this._clickListener))},e.prototype._onMouseMove=function(t){this._lastHoverCoords[0]===t.pageX&&this._lastHoverCoords[1]===t.pageY||(this._onHover(t),this._lastHoverCoords=[t.pageX,t.pageY])},e.prototype._onHover=function(t){var e=this,i=this._findZoneEventAt(t);i!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),i&&(this._currentZone=i,i.hoverCallback&&i.hoverCallback(t),this._tooltipTimeout=setTimeout((function(){return e._onTooltip(t)}),500)))},e.prototype._onTooltip=function(t){this._tooltipTimeout=void 0;var e=this._findZoneEventAt(t);e&&e.tooltipCallback&&e.tooltipCallback(t)},e.prototype._onMouseDown=function(t){var e;this._initialSelectionLength=this._getSelectionLength(),this._areZonesActive&&null!==(e=this._findZoneEventAt(t))&&void 0!==e&&e.willLinkActivate(t)&&(t.preventDefault(),t.stopImmediatePropagation())},e.prototype._onMouseLeave=function(){this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout))},e.prototype._onClick=function(t){var e=this._findZoneEventAt(t),i=this._getSelectionLength();e&&i===this._initialSelectionLength&&(e.clickCallback(t),t.preventDefault(),t.stopImmediatePropagation())},e.prototype._getSelectionLength=function(){var t=this._selectionService.selectionText;return t?t.length:0},e.prototype._findZoneEventAt=function(t){var e=this._mouseService.getCoords(t,this._screenElement,this._bufferService.cols,this._bufferService.rows);if(e){t=e[0],e=e[1];for(var i=0;i<this._zones.length;i++){var n=this._zones[i];if(n.y1===n.y2){if(e===n.y1&&t>=n.x1&&t<n.x2)return n}else if(e===n.y1&&t>=n.x1||e===n.y2&&t<n.x2||e>n.y1&&e<n.y2)return n}}},o([s(2,a.IBufferService),s(3,c.IMouseService),s(4,c.ISelectionService)],e)}(t.Disposable),e.MouseZoneManager=i},function(t,e,i){var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(17),s=i(11),l=i(30),c=i(7);t=i(2);var a=i(31);i=function(t){function e(e,i){var n=t.call(this)||this;for(n._terminal=e,n._renderService=i,n._liveRegionLineCount=0,n._charsToConsume=[],n._charsToAnnounce="",n._accessibilityTreeRoot=document.createElement("div"),n._accessibilityTreeRoot.classList.add("xterm-accessibility"),n._rowContainer=document.createElement("div"),n._rowContainer.classList.add("xterm-accessibility-tree"),n._rowElements=[],e=0;e<n._terminal.rows;e++)n._rowElements[e]=n._createAccessibilityTreeNode(),n._rowContainer.appendChild(n._rowElements[e]);return n._topBoundaryFocusListener=function(t){return n._onBoundaryFocus(t,0)},n._bottomBoundaryFocusListener=function(t){return n._onBoundaryFocus(t,1)},n._rowElements[0].addEventListener("focus",n._topBoundaryFocusListener),n._rowElements[n._rowElements.length-1].addEventListener("focus",n._bottomBoundaryFocusListener),n._refreshRowsDimensions(),n._accessibilityTreeRoot.appendChild(n._rowContainer),n._renderRowsDebouncer=new l.RenderDebouncer(n._renderRows.bind(n)),n._refreshRows(),n._liveRegion=document.createElement("div"),n._liveRegion.classList.add("live-region"),n._liveRegion.setAttribute("aria-live","assertive"),n._accessibilityTreeRoot.appendChild(n._liveRegion),n._terminal.element.insertAdjacentElement("afterbegin",n._accessibilityTreeRoot),n.register(n._renderRowsDebouncer),n.register(n._terminal.onResize((function(t){return n._onResize(t.rows)}))),n.register(n._terminal.onRender((function(t){return n._refreshRows(t.start,t.end)}))),n.register(n._terminal.onScroll((function(){return n._refreshRows()}))),n.register(n._terminal.onA11yChar((function(t){return n._onChar(t)}))),n.register(n._terminal.onLineFeed((function(){return n._onChar("\n")}))),n.register(n._terminal.onA11yTab((function(t){return n._onTab(t)}))),n.register(n._terminal.onKey((function(t){return n._onKey(t.key)}))),n.register(n._terminal.onBlur((function(){return n._clearLiveRegion()}))),n.register(n._renderService.onDimensionsChange((function(){return n._refreshRowsDimensions()}))),n._screenDprMonitor=new a.ScreenDprMonitor,n.register(n._screenDprMonitor),n._screenDprMonitor.setListener((function(){return n._refreshRowsDimensions()})),n.register(c.addDisposableDomListener(window,"resize",(function(){return n._refreshRowsDimensions()}))),n}return r(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this),this._terminal.element.removeChild(this._accessibilityTreeRoot),this._rowElements.length=0},e.prototype._onBoundaryFocus=function(t,e){var i,n,r=t.target,o=this._rowElements[0===e?1:this._rowElements.length-2];r.getAttribute("aria-posinset")!==(0===e?"1":""+this._terminal.buffer.lines.length)&&t.relatedTarget===o&&(0===e?(i=r,n=this._rowElements.pop(),this._rowContainer.removeChild(n)):(i=this._rowElements.shift(),n=r,this._rowContainer.removeChild(i)),i.removeEventListener("focus",this._topBoundaryFocusListener),n.removeEventListener("focus",this._bottomBoundaryFocusListener),0===e?(r=this._createAccessibilityTreeNode(),this._rowElements.unshift(r),this._rowContainer.insertAdjacentElement("afterbegin",r)):(r=this._createAccessibilityTreeNode(),this._rowElements.push(r),this._rowContainer.appendChild(r)),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(0===e?-1:1),this._rowElements[0===e?1:this._rowElements.length-2].focus(),t.preventDefault(),t.stopImmediatePropagation())},e.prototype._onResize=function(t){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(var e=this._rowContainer.children.length;e<this._terminal.rows;e++)this._rowElements[e]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[e]);for(;this._rowElements.length>t;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()},e.prototype._createAccessibilityTreeNode=function(){var t=document.createElement("div");return t.setAttribute("role","listitem"),t.tabIndex=-1,this._refreshRowDimensions(t),t},e.prototype._onTab=function(t){for(var e=0;e<t;e++)this._onChar(" ")},e.prototype._onChar=function(t){var e=this;21>this._liveRegionLineCount&&(0<this._charsToConsume.length?this._charsToConsume.shift()!==t&&(this._charsToAnnounce+=t):this._charsToAnnounce+=t,"\n"===t&&(this._liveRegionLineCount++,21===this._liveRegionLineCount&&(this._liveRegion.textContent+=o.tooMuchOutput)),s.isMac&&this._liveRegion.textContent&&0<this._liveRegion.textContent.length&&!this._liveRegion.parentNode&&setTimeout((function(){e._accessibilityTreeRoot.appendChild(e._liveRegion)}),0))},e.prototype._clearLiveRegion=function(){this._liveRegion.textContent="",this._liveRegionLineCount=0,s.isMac&&this._liveRegion.parentNode&&this._accessibilityTreeRoot.removeChild(this._liveRegion)},e.prototype._onKey=function(t){this._clearLiveRegion(),this._charsToConsume.push(t)},e.prototype._refreshRows=function(t,e){this._renderRowsDebouncer.refresh(t,e,this._terminal.rows)},e.prototype._renderRows=function(t,e){for(var i=this._terminal.buffer,n=i.lines.length.toString();t<=e;t++){var r=i.translateBufferLineToString(i.ydisp+t,!0),o=(i.ydisp+t+1).toString(),s=this._rowElements[t];s&&(0===r.length?s.innerHTML="&nbsp;":s.textContent=r,s.setAttribute("aria-posinset",o),s.setAttribute("aria-setsize",n))}this._announceCharacters()},e.prototype._refreshRowsDimensions=function(){if(this._renderService.dimensions.actualCellHeight){this._rowElements.length!==this._terminal.rows&&this._onResize(this._terminal.rows);for(var t=0;t<this._terminal.rows;t++)this._refreshRowDimensions(this._rowElements[t])}},e.prototype._refreshRowDimensions=function(t){t.style.height=this._renderService.dimensions.actualCellHeight+"px"},e.prototype._announceCharacters=function(){0!==this._charsToAnnounce.length&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")},e}(t.Disposable),e.AccessibilityManager=i},function(t,e,i){var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),o=this&&this.__decorate||function(t,e,i,n){var r,o=arguments.length,s=3>o?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var l=t.length-1;0<=l;l--)(r=t[l])&&(s=(3>o?r(s):3<o?r(e,i,s):r(e,i))||s);return 3<o&&s&&Object.defineProperty(e,i,s),s},s=this&&this.__param||function(t,e){return function(i,n){e(i,n,t)}};Object.defineProperty(e,"__esModule",{value:!0});var l=i(58),c=i(9);t=i(2);var a=i(4),h=i(0),u=i(1),d=i(10),m=1;i=function(t){function e(e,i,n,r,o,s,c,a){var h=t.call(this)||this;return h._colors=e,h._element=i,h._screenElement=n,h._viewportElement=r,h._linkifier=o,h._charSizeService=s,h._optionsService=c,h._bufferService=a,h._terminalClass=m++,h._rowElements=[],h._onRequestRefreshRows=new u.EventEmitter,h._rowContainer=document.createElement("div"),h._rowContainer.classList.add("xterm-rows"),h._rowContainer.style.lineHeight="normal",h._rowContainer.setAttribute("aria-hidden","true"),h._refreshRowElements(h._bufferService.cols,h._bufferService.rows),h._selectionContainer=document.createElement("div"),h._selectionContainer.classList.add("xterm-selection"),h._selectionContainer.setAttribute("aria-hidden","true"),h.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},h._updateDimensions(),h._injectCss(),h._rowFactory=new l.DomRendererRowFactory(document,h._optionsService,h._colors),h._element.classList.add("xterm-dom-renderer-owner-"+h._terminalClass),h._screenElement.appendChild(h._rowContainer),h._screenElement.appendChild(h._selectionContainer),h._linkifier.onLinkHover((function(t){return h._onLinkHover(t)})),h._linkifier.onLinkLeave((function(t){return h._onLinkLeave(t)})),h}return r(e,t),Object.defineProperty(e.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._element.classList.remove("xterm-dom-renderer-owner-"+this._terminalClass),this._screenElement.removeChild(this._rowContainer),this._screenElement.removeChild(this._selectionContainer),this._screenElement.removeChild(this._themeStyleElement),this._screenElement.removeChild(this._dimensionsStyleElement),t.prototype.dispose.call(this)},e.prototype._updateDimensions=function(){var t=this;this.dimensions.scaledCharWidth=this._charSizeService.width*window.devicePixelRatio,this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharLeft=0,this.dimensions.scaledCharTop=0,this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*this._bufferService.cols,this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this._bufferService.rows,this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols,this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this._rowElements.forEach((function(e){e.style.width=t.dimensions.canvasWidth+"px",e.style.height=t.dimensions.actualCellHeight+"px",e.style.lineHeight=t.dimensions.actualCellHeight+"px",e.style.overflow="hidden"})),this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement)),this._dimensionsStyleElement.innerHTML=this._terminalSelector+" .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: "+this.dimensions.actualCellWidth+"px}",this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},e.prototype.setColors=function(t){this._colors=t,this._injectCss()},e.prototype._injectCss=function(){var t=this;this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));var e=this._terminalSelector+" .xterm-rows { color: "+this._colors.foreground.css+"; background-color: "+this._colors.background.css+"; font-family: "+this._optionsService.options.fontFamily+"; font-size: "+this._optionsService.options.fontSize+"px;}";e+=this._terminalSelector+" span:not(."+l.BOLD_CLASS+") { font-weight: "+this._optionsService.options.fontWeight+";}"+this._terminalSelector+" span."+l.BOLD_CLASS+" { font-weight: "+this._optionsService.options.fontWeightBold+";}"+this._terminalSelector+" span."+l.ITALIC_CLASS+" { font-style: italic;}",e+="@keyframes blink_box_shadow { 50% {  box-shadow: none; }}",e+="@keyframes blink_block { 0% {  background-color: "+this._colors.cursor.css+";  color: "+this._colors.cursorAccent.css+"; } 50% {  background-color: "+this._colors.cursorAccent.css+";  color: "+this._colors.cursor.css+"; }}",e+=this._terminalSelector+" .xterm-rows:not(.xterm-focus) ."+l.CURSOR_CLASS+"."+l.CURSOR_STYLE_BLOCK_CLASS+" { outline: 1px solid "+this._colors.cursor.css+"; outline-offset: -1px;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+l.CURSOR_CLASS+"."+l.CURSOR_BLINK_CLASS+":not(."+l.CURSOR_STYLE_BLOCK_CLASS+") { animation: blink_box_shadow 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+l.CURSOR_CLASS+"."+l.CURSOR_BLINK_CLASS+"."+l.CURSOR_STYLE_BLOCK_CLASS+" { animation: blink_block 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+l.CURSOR_CLASS+"."+l.CURSOR_STYLE_BLOCK_CLASS+" { background-color: "+this._colors.cursor.css+"; color: "+this._colors.cursorAccent.css+";}"+this._terminalSelector+" .xterm-rows ."+l.CURSOR_CLASS+"."+l.CURSOR_STYLE_BAR_CLASS+" { box-shadow: 1px 0 0 "+this._colors.cursor.css+" inset;}"+this._terminalSelector+" .xterm-rows ."+l.CURSOR_CLASS+"."+l.CURSOR_STYLE_UNDERLINE_CLASS+" { box-shadow: 0 -1px 0 "+this._colors.cursor.css+" inset;}",e+=this._terminalSelector+" .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}"+this._terminalSelector+" .xterm-selection div { position: absolute; background-color: "+this._colors.selection.css+";}",this._colors.ansi.forEach((function(i,n){e+=t._terminalSelector+" .xterm-fg-"+n+" { color: "+i.css+"; }"+t._terminalSelector+" .xterm-bg-"+n+" { background-color: "+i.css+"; }"})),e+=this._terminalSelector+" .xterm-fg-"+c.INVERTED_DEFAULT_COLOR+" { color: "+d.opaque(this._colors.background).css+"; }"+this._terminalSelector+" .xterm-bg-"+c.INVERTED_DEFAULT_COLOR+" { background-color: "+this._colors.foreground.css+"; }",this._themeStyleElement.innerHTML=e},e.prototype.onDevicePixelRatioChange=function(){this._updateDimensions()},e.prototype._refreshRowElements=function(t,e){for(t=this._rowElements.length;t<=e;t++){var i=document.createElement("div");this._rowContainer.appendChild(i),this._rowElements.push(i)}for(;this._rowElements.length>e;)this._rowContainer.removeChild(this._rowElements.pop())},e.prototype.onResize=function(t,e){this._refreshRowElements(t,e),this._updateDimensions()},e.prototype.onCharSizeChanged=function(){this._updateDimensions()},e.prototype.onBlur=function(){this._rowContainer.classList.remove("xterm-focus")},e.prototype.onFocus=function(){this._rowContainer.classList.add("xterm-focus")},e.prototype.onSelectionChanged=function(t,e,i){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(t&&e){var n=t[1]-this._bufferService.buffer.ydisp,r=e[1]-this._bufferService.buffer.ydisp,o=Math.max(n,0),s=Math.min(r,this._bufferService.rows-1);if(!(o>=this._bufferService.rows||0>s)){var l=document.createDocumentFragment();i?l.appendChild(this._createSelectionElement(o,t[0],e[0],s-o+1)):(l.appendChild(this._createSelectionElement(o,n===o?t[0]:0,o===s?e[0]:this._bufferService.cols)),l.appendChild(this._createSelectionElement(o+1,0,this._bufferService.cols,s-o-1)),o!==s&&l.appendChild(this._createSelectionElement(s,0,r===s?e[0]:this._bufferService.cols))),this._selectionContainer.appendChild(l)}}},e.prototype._createSelectionElement=function(t,e,i,n){void 0===n&&(n=1);var r=document.createElement("div");return r.style.height=n*this.dimensions.actualCellHeight+"px",r.style.top=t*this.dimensions.actualCellHeight+"px",r.style.left=e*this.dimensions.actualCellWidth+"px",r.style.width=this.dimensions.actualCellWidth*(i-e)+"px",r},e.prototype.onCursorMove=function(){},e.prototype.onOptionsChanged=function(){this._updateDimensions(),this._injectCss()},e.prototype.clear=function(){this._rowElements.forEach((function(t){return t.innerHTML=""}))},e.prototype.renderRows=function(t,e){for(var i=this._bufferService.buffer.ybase+this._bufferService.buffer.y,n=this._bufferService.buffer.x,r=this._optionsService.options.cursorBlink;t<=e;t++){var o=this._rowElements[t];o.innerHTML="";var s=t+this._bufferService.buffer.ydisp,l=this._bufferService.buffer.lines.get(s);o.appendChild(this._rowFactory.createRow(l,s===i,this._optionsService.options.cursorStyle,n,r,this.dimensions.actualCellWidth,this._bufferService.cols))}},Object.defineProperty(e.prototype,"_terminalSelector",{get:function(){return".xterm-dom-renderer-owner-"+this._terminalClass},enumerable:!0,configurable:!0}),e.prototype.registerCharacterJoiner=function(){return-1},e.prototype.deregisterCharacterJoiner=function(){return!1},e.prototype._onLinkHover=function(t){this._setCellUnderline(t.x1,t.x2,t.y1,t.y2,t.cols,!0)},e.prototype._onLinkLeave=function(t){this._setCellUnderline(t.x1,t.x2,t.y1,t.y2,t.cols,!1)},e.prototype._setCellUnderline=function(t,e,i,n,r,o){for(;t!==e||i!==n;){var s=this._rowElements[i];if(!s)break;(s=s.children[t])&&(s.style.textDecoration=o?"underline":"none"),++t>=r&&(t=0,i++)}},o([s(5,a.ICharSizeService),s(6,h.IOptionsService),s(7,h.IBufferService)],e)}(t.Disposable),e.DomRenderer=i},function(t,e,i){function n(t,e,i){for(;t.length<i;)t=e+t;return t}Object.defineProperty(e,"__esModule",{value:!0});var r=i(9),o=i(3),s=i(5),l=i(10);e.BOLD_CLASS="xterm-bold",e.DIM_CLASS="xterm-dim",e.ITALIC_CLASS="xterm-italic",e.UNDERLINE_CLASS="xterm-underline",e.CURSOR_CLASS="xterm-cursor",e.CURSOR_BLINK_CLASS="xterm-cursor-blink",e.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",e.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",e.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline",t=function(){function t(t,e,i){this._document=t,this._optionsService=e,this._colors=i,this._workCell=new s.CellData}return t.prototype.setColors=function(t){this._colors=t},t.prototype.createRow=function(t,i,s,c,a,h,u){var d=this._document.createDocumentFragment(),m=0;for(u=Math.min(t.length,u)-1;0<=u;u--)if(t.loadCell(u,this._workCell).getCode()!==o.NULL_CELL_CODE||i&&u===c){m=u+1;break}for(u=0;u<m;u++){t.loadCell(u,this._workCell);var p=this._workCell.getWidth();if(0!==p){var f=this._document.createElement("span");if(1<p&&(f.style.width=h*p+"px"),i&&u===c)switch(f.classList.add(e.CURSOR_CLASS),a&&f.classList.add(e.CURSOR_BLINK_CLASS),s){case"bar":f.classList.add(e.CURSOR_STYLE_BAR_CLASS);break;case"underline":f.classList.add(e.CURSOR_STYLE_UNDERLINE_CLASS);break;default:f.classList.add(e.CURSOR_STYLE_BLOCK_CLASS)}this._workCell.isBold()&&f.classList.add(e.BOLD_CLASS),this._workCell.isItalic()&&f.classList.add(e.ITALIC_CLASS),this._workCell.isDim()&&f.classList.add(e.DIM_CLASS),this._workCell.isUnderline()&&f.classList.add(e.UNDERLINE_CLASS),f.textContent=this._workCell.getChars()||o.WHITESPACE_CELL_CHAR,p=this._workCell.getFgColor();var b=this._workCell.getFgColorMode(),y=this._workCell.getBgColor(),Z=this._workCell.getBgColorMode(),G=!!this._workCell.isInverse();if(G){var Y=p;p=y,y=Y,Y=b,b=Z,Z=Y}switch(b){case 16777216:case 33554432:this._workCell.isBold()&&8>p&&this._optionsService.options.drawBoldTextInBrightColors&&(p+=8),this._applyMinimumContrast(f,this._colors.background,this._colors.ansi[p])||f.classList.add("xterm-fg-"+p);break;case 50331648:b=l.rgbaToColor(p>>16&255,p>>8&255,255&p),this._applyMinimumContrast(f,this._colors.background,b)||this._addStyle(f,"color:#"+n(p.toString(16),"0",6));break;default:this._applyMinimumContrast(f,this._colors.background,this._colors.foreground)||G&&f.classList.add("xterm-fg-"+r.INVERTED_DEFAULT_COLOR)}switch(Z){case 16777216:case 33554432:f.classList.add("xterm-bg-"+y);break;case 50331648:this._addStyle(f,"background-color:#"+n(y.toString(16),"0",6));break;default:G&&f.classList.add("xterm-bg-"+r.INVERTED_DEFAULT_COLOR)}d.appendChild(f)}}return d},t.prototype._applyMinimumContrast=function(t,e,i){if(1===this._optionsService.options.minimumContrastRatio)return!1;var n=this._colors.contrastCache.getColor(this._workCell.bg,this._workCell.fg);return void 0===n&&(n=l.ensureContrastRatio(e,i,this._optionsService.options.minimumContrastRatio),this._colors.contrastCache.setColor(this._workCell.bg,this._workCell.fg,null!=n?n:null)),!!n&&(this._addStyle(t,"color:"+n.css),!0)},t.prototype._addStyle=function(t,e){t.setAttribute("style",""+(t.getAttribute("style")||"")+e+";")},t}(),e.DomRendererRowFactory=t},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(12),r={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};e.evaluateKeyboardEvent=function(t,e,i,o){var s={type:0,cancel:!1,key:void 0},l=(t.shiftKey?1:0)|(t.altKey?2:0)|(t.ctrlKey?4:0)|(t.metaKey?8:0);switch(t.keyCode){case 0:"UIKeyInputUpArrow"===t.key?s.key=e?n.C0.ESC+"OA":n.C0.ESC+"[A":"UIKeyInputLeftArrow"===t.key?s.key=e?n.C0.ESC+"OD":n.C0.ESC+"[D":"UIKeyInputRightArrow"===t.key?s.key=e?n.C0.ESC+"OC":n.C0.ESC+"[C":"UIKeyInputDownArrow"===t.key&&(s.key=e?n.C0.ESC+"OB":n.C0.ESC+"[B");break;case 8:if(t.shiftKey){s.key=n.C0.BS;break}if(t.altKey){s.key=n.C0.ESC+n.C0.DEL;break}s.key=n.C0.DEL;break;case 9:if(t.shiftKey){s.key=n.C0.ESC+"[Z";break}s.key=n.C0.HT,s.cancel=!0;break;case 13:s.key=n.C0.CR,s.cancel=!0;break;case 27:s.key=n.C0.ESC,s.cancel=!0;break;case 37:if(t.metaKey)break;l?(s.key=n.C0.ESC+"[1;"+(l+1)+"D",s.key===n.C0.ESC+"[1;3D"&&(s.key=n.C0.ESC+(i?"b":"[1;5D"))):s.key=e?n.C0.ESC+"OD":n.C0.ESC+"[D";break;case 39:if(t.metaKey)break;l?(s.key=n.C0.ESC+"[1;"+(l+1)+"C",s.key===n.C0.ESC+"[1;3C"&&(s.key=n.C0.ESC+(i?"f":"[1;5C"))):s.key=e?n.C0.ESC+"OC":n.C0.ESC+"[C";break;case 38:if(t.metaKey)break;l?(s.key=n.C0.ESC+"[1;"+(l+1)+"A",i||s.key!==n.C0.ESC+"[1;3A"||(s.key=n.C0.ESC+"[1;5A")):s.key=e?n.C0.ESC+"OA":n.C0.ESC+"[A";break;case 40:if(t.metaKey)break;l?(s.key=n.C0.ESC+"[1;"+(l+1)+"B",i||s.key!==n.C0.ESC+"[1;3B"||(s.key=n.C0.ESC+"[1;5B")):s.key=e?n.C0.ESC+"OB":n.C0.ESC+"[B";break;case 45:t.shiftKey||t.ctrlKey||(s.key=n.C0.ESC+"[2~");break;case 46:s.key=l?n.C0.ESC+"[3;"+(l+1)+"~":n.C0.ESC+"[3~";break;case 36:s.key=l?n.C0.ESC+"[1;"+(l+1)+"H":e?n.C0.ESC+"OH":n.C0.ESC+"[H";break;case 35:s.key=l?n.C0.ESC+"[1;"+(l+1)+"F":e?n.C0.ESC+"OF":n.C0.ESC+"[F";break;case 33:t.shiftKey?s.type=2:s.key=n.C0.ESC+"[5~";break;case 34:t.shiftKey?s.type=3:s.key=n.C0.ESC+"[6~";break;case 112:s.key=l?n.C0.ESC+"[1;"+(l+1)+"P":n.C0.ESC+"OP";break;case 113:s.key=l?n.C0.ESC+"[1;"+(l+1)+"Q":n.C0.ESC+"OQ";break;case 114:s.key=l?n.C0.ESC+"[1;"+(l+1)+"R":n.C0.ESC+"OR";break;case 115:s.key=l?n.C0.ESC+"[1;"+(l+1)+"S":n.C0.ESC+"OS";break;case 116:s.key=l?n.C0.ESC+"[15;"+(l+1)+"~":n.C0.ESC+"[15~";break;case 117:s.key=l?n.C0.ESC+"[17;"+(l+1)+"~":n.C0.ESC+"[17~";break;case 118:s.key=l?n.C0.ESC+"[18;"+(l+1)+"~":n.C0.ESC+"[18~";break;case 119:s.key=l?n.C0.ESC+"[19;"+(l+1)+"~":n.C0.ESC+"[19~";break;case 120:s.key=l?n.C0.ESC+"[20;"+(l+1)+"~":n.C0.ESC+"[20~";break;case 121:s.key=l?n.C0.ESC+"[21;"+(l+1)+"~":n.C0.ESC+"[21~";break;case 122:s.key=l?n.C0.ESC+"[23;"+(l+1)+"~":n.C0.ESC+"[23~";break;case 123:s.key=l?n.C0.ESC+"[24;"+(l+1)+"~":n.C0.ESC+"[24~";break;default:!t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?i&&!o||!t.altKey||t.metaKey?i&&!t.altKey&&!t.ctrlKey&&t.metaKey?65===t.keyCode&&(s.type=1):t.key&&!t.ctrlKey&&!t.altKey&&!t.metaKey&&48<=t.keyCode&&1===t.key.length?s.key=t.key:t.key&&t.ctrlKey&&"_"===t.key&&(s.key=n.C0.US):(e=(e=r[t.keyCode])&&e[t.shiftKey?1:0])?s.key=n.C0.ESC+e:65<=t.keyCode&&90>=t.keyCode&&(s.key=n.C0.ESC+String.fromCharCode(t.ctrlKey?t.keyCode-64:t.keyCode+32)):65<=t.keyCode&&90>=t.keyCode?s.key=String.fromCharCode(t.keyCode-64):32===t.keyCode?s.key=n.C0.NUL:51<=t.keyCode&&55>=t.keyCode?s.key=String.fromCharCode(t.keyCode-51+27):56===t.keyCode?s.key=n.C0.DEL:219===t.keyCode?s.key=n.C0.ESC:220===t.keyCode?s.key=n.C0.FS:221===t.keyCode&&(s.key=n.C0.GS)}return s}},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(3);e.handleWindowsModeLineFeed=function(t){var e,i=null===(e=t.buffer.lines.get(t.buffer.ybase+t.buffer.y-1))||void 0===e?void 0:e.get(t.cols-1);(t=t.buffer.lines.get(t.buffer.ybase+t.buffer.y))&&i&&(t.isWrapped=i[n.CHAR_DATA_CODE_INDEX]!==n.NULL_CELL_CODE&&i[n.CHAR_DATA_CODE_INDEX]!==n.WHITESPACE_CELL_CODE)}},function(t,e,i){var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),o=this&&this.__decorate||function(t,e,i,n){var r,o=arguments.length,s=3>o?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var l=t.length-1;0<=l;l--)(r=t[l])&&(s=(3>o?r(s):3<o?r(e,i,s):r(e,i))||s);return 3<o&&s&&Object.defineProperty(e,i,s),s},s=this&&this.__param||function(t,e){return function(i,n){e(i,n,t)}};Object.defineProperty(e,"__esModule",{value:!0});var l=i(30),c=i(1);t=i(2);var a=i(31),h=i(7),u=i(0),d=i(4);i=function(t){function e(e,i,n,r,o){var s=t.call(this)||this;if(s._renderer=e,s._rowCount=i,s.screenElement=n,s.optionsService=r,s.charSizeService=o,s._isPaused=!1,s._needsFullRefresh=!1,s._canvasWidth=0,s._canvasHeight=0,s._onDimensionsChange=new c.EventEmitter,s._onRender=new c.EventEmitter,s._onRefreshRequest=new c.EventEmitter,s._renderDebouncer=new l.RenderDebouncer((function(t,e){return s._renderRows(t,e)})),s.register(s._renderDebouncer),s._screenDprMonitor=new a.ScreenDprMonitor,s._screenDprMonitor.setListener((function(){return s.onDevicePixelRatioChange()})),s.register(s._screenDprMonitor),s.register(r.onOptionChange((function(){return s._renderer.onOptionsChanged()}))),s.register(o.onCharSizeChange((function(){return s.onCharSizeChanged()}))),s._renderer.onRequestRefreshRows((function(t){return s.refreshRows(t.start,t.end)})),s.register(h.addDisposableDomListener(window,"resize",(function(){return s.onDevicePixelRatioChange()}))),"IntersectionObserver"in window){var u=new IntersectionObserver((function(t){return s._onIntersectionChange(t[t.length-1])}),{threshold:0});u.observe(n),s.register({dispose:function(){return u.disconnect()}})}return s}return r(e,t),Object.defineProperty(e.prototype,"onDimensionsChange",{get:function(){return this._onDimensionsChange.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onRefreshRequest",{get:function(){return this._onRefreshRequest.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dimensions",{get:function(){return this._renderer.dimensions},enumerable:!0,configurable:!0}),e.prototype._onIntersectionChange=function(t){this._isPaused=0===t.intersectionRatio,!this._isPaused&&this._needsFullRefresh&&(this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)},e.prototype.refreshRows=function(t,e){this._isPaused?this._needsFullRefresh=!0:this._renderDebouncer.refresh(t,e,this._rowCount)},e.prototype._renderRows=function(t,e){this._renderer.renderRows(t,e),this._onRender.fire({start:t,end:e})},e.prototype.resize=function(t,e){this._rowCount=e,this._fireOnCanvasResize()},e.prototype.changeOptions=function(){this._renderer.onOptionsChanged(),this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize()},e.prototype._fireOnCanvasResize=function(){this._renderer.dimensions.canvasWidth===this._canvasWidth&&this._renderer.dimensions.canvasHeight===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions)},e.prototype.dispose=function(){this._renderer.dispose(),t.prototype.dispose.call(this)},e.prototype.setRenderer=function(t){var e=this;this._renderer.dispose(),this._renderer=t,this._renderer.onRequestRefreshRows((function(t){return e.refreshRows(t.start,t.end)})),this.refreshRows(0,this._rowCount-1)},e.prototype._fullRefresh=function(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)},e.prototype.setColors=function(t){this._renderer.setColors(t),this._fullRefresh()},e.prototype.onDevicePixelRatioChange=function(){this._renderer.onDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1)},e.prototype.onResize=function(t,e){this._renderer.onResize(t,e),this._fullRefresh()},e.prototype.onCharSizeChanged=function(){this._renderer.onCharSizeChanged()},e.prototype.onBlur=function(){this._renderer.onBlur()},e.prototype.onFocus=function(){this._renderer.onFocus()},e.prototype.onSelectionChanged=function(t,e,i){this._renderer.onSelectionChanged(t,e,i)},e.prototype.onCursorMove=function(){this._renderer.onCursorMove()},e.prototype.clear=function(){this._renderer.clear()},e.prototype.registerCharacterJoiner=function(t){return this._renderer.registerCharacterJoiner(t)},e.prototype.deregisterCharacterJoiner=function(t){return this._renderer.deregisterCharacterJoiner(t)},o([s(3,u.IOptionsService),s(4,d.ICharSizeService)],e)}(t.Disposable),e.RenderService=i},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(1);t=i(11);var r=i(32);e.DEFAULT_BELL_SOUND="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",e.DEFAULT_OPTIONS=Object.freeze({cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",bellSound:e.DEFAULT_BELL_SOUND,bellStyle:"none",drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,letterSpacing:0,logLevel:"info",scrollback:1e3,scrollSensitivity:1,screenReaderMode:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:t.isMac,rendererType:"canvas",windowsMode:!1,convertEol:!1,termName:"xterm",screenKeys:!1,cancelEvents:!1,useFlowControl:!1,wordSeparator:" ()[]{}',:;\"`"});var o=["cols","rows"];i=function(){function t(t){var i=this;this._onOptionChange=new n.EventEmitter,this.options=r.clone(e.DEFAULT_OPTIONS),Object.keys(t).forEach((function(e){e in i.options&&(i.options[e]=t[e])}))}return Object.defineProperty(t.prototype,"onOptionChange",{get:function(){return this._onOptionChange.event},enumerable:!0,configurable:!0}),t.prototype.setOption=function(t,i){if(!(t in e.DEFAULT_OPTIONS))throw Error('No option with key "'+t+'"');if(-1!==o.indexOf(t))throw Error('Option "'+t+'" can only be set in the constructor');this.options[t]!==i&&(i=this._sanitizeAndValidateOption(t,i),this.options[t]!==i&&(this.options[t]=i,this._onOptionChange.fire(t)))},t.prototype._sanitizeAndValidateOption=function(t,i){switch(t){case"bellStyle":case"cursorStyle":case"fontWeight":case"fontWeightBold":case"rendererType":case"wordSeparator":i||(i=e.DEFAULT_OPTIONS[t]);break;case"lineHeight":case"tabStopWidth":if(1>i)throw Error(t+" cannot be less than 1, value: "+i);break;case"minimumContrastRatio":i=Math.max(1,Math.min(21,Math.round(10*i)/10));case"scrollback":if(0>(i=Math.min(i,4294967295)))throw Error(t+" cannot be less than 0, value: "+i);break;case"fastScrollSensitivity":case"scrollSensitivity":if(0>=i)throw Error(t+" cannot be less than or equal to 0, value: "+i)}return i},t.prototype.getOption=function(t){if(!(t in e.DEFAULT_OPTIONS))throw Error('No option with key "'+t+'"');return this.options[t]},t}(),e.OptionsService=i},function(t,e,i){var n=this&&this.__decorate||function(t,e,i,n){var r,o=arguments.length,s=3>o?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var l=t.length-1;0<=l;l--)(r=t[l])&&(s=(3>o?r(s):3<o?r(e,i,s):r(e,i))||s);return 3<o&&s&&Object.defineProperty(e,i,s),s},r=this&&this.__param||function(t,e){return function(i,n){e(i,n,t)}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(0),s=i(1);t=function(){function t(t,e,i){this.document=t,this.parentElement=e,this._optionsService=i,this.height=this.width=0,this._onCharSizeChange=new s.EventEmitter,this._measureStrategy=new l(t,e,this._optionsService)}return Object.defineProperty(t.prototype,"hasValidSize",{get:function(){return 0<this.width&&0<this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onCharSizeChange",{get:function(){return this._onCharSizeChange.event},enumerable:!0,configurable:!0}),t.prototype.measure=function(){var t=this._measureStrategy.measure();t.width===this.width&&t.height===this.height||(this.width=t.width,this.height=t.height,this._onCharSizeChange.fire())},n([r(2,o.IOptionsService)],t)}(),e.CharSizeService=t;var l=function(){function t(t,e,i){this._document=t,this._parentElement=e,this._optionsService=i,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}return t.prototype.measure=function(){this._measureElement.style.fontFamily=this._optionsService.options.fontFamily,this._measureElement.style.fontSize=this._optionsService.options.fontSize+"px";var t=this._measureElement.getBoundingClientRect();return 0!==t.width&&0!==t.height&&(this._result.width=t.width,this._result.height=Math.ceil(t.height)),this._result},t}()},function(t,e,i){var n=this&&this.__decorate||function(t,e,i,n){var r,o=arguments.length,s=3>o?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var l=t.length-1;0<=l;l--)(r=t[l])&&(s=(3>o?r(s):3<o?r(e,i,s):r(e,i))||s);return 3<o&&s&&Object.defineProperty(e,i,s),s},r=this&&this.__param||function(t,e){return function(i,n){e(i,n,t)}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(0),s=i(65);e.MINIMUM_COLS=2,e.MINIMUM_ROWS=1,t=function(){function t(t){this._optionsService=t,this.cols=Math.max(t.options.cols,e.MINIMUM_COLS),this.rows=Math.max(t.options.rows,e.MINIMUM_ROWS),this.buffers=new s.BufferSet(t,this)}return Object.defineProperty(t.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!0,configurable:!0}),t.prototype.resize=function(t,e){this.cols=t,this.rows=e},t.prototype.reset=function(){this.buffers=new s.BufferSet(this._optionsService,this)},n([r(0,o.IOptionsService)],t)}(),e.BufferService=t},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(66),r=i(1);t=function(){function t(t,e){this.optionsService=t,this.bufferService=e,this._onBufferActivate=new r.EventEmitter,this._normal=new n.Buffer(!0,t,e),this._normal.fillViewportRows(),this._alt=new n.Buffer(!1,t,e),this._activeBuffer=this._normal,this.setupTabStops()}return Object.defineProperty(t.prototype,"onBufferActivate",{get:function(){return this._onBufferActivate.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alt",{get:function(){return this._alt},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"active",{get:function(){return this._activeBuffer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"normal",{get:function(){return this._normal},enumerable:!0,configurable:!0}),t.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))},t.prototype.activateAltBuffer=function(t){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(t),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))},t.prototype.resize=function(t,e){this._normal.resize(t,e),this._alt.resize(t,e)},t.prototype.setupTabStops=function(t){this._normal.setupTabStops(t),this._alt.setupTabStops(t)},t}(),e.BufferSet=t},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(67),r=i(16),o=i(5),s=i(3),l=i(68),c=i(69),a=i(18);e.MAX_BUFFER_SIZE=4294967295,t=function(){function t(t,e,i){this._hasScrollback=t,this._optionsService=e,this._bufferService=i,this.savedX=this.savedY=this.x=this.y=this.ybase=this.ydisp=0,this.savedCurAttrData=r.DEFAULT_ATTR_DATA.clone(),this.savedCharset=a.DEFAULT_CHARSET,this.markers=[],this._nullCell=o.CellData.fromCharData([0,s.NULL_CELL_CHAR,s.NULL_CELL_WIDTH,s.NULL_CELL_CODE]),this._whitespaceCell=o.CellData.fromCharData([0,s.WHITESPACE_CELL_CHAR,s.WHITESPACE_CELL_WIDTH,s.WHITESPACE_CELL_CODE]),this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new n.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}return t.prototype.getNullCell=function(t){return t?(this._nullCell.fg=t.fg,this._nullCell.bg=t.bg):(this._nullCell.fg=0,this._nullCell.bg=0),this._nullCell},t.prototype.getWhitespaceCell=function(t){return t?(this._whitespaceCell.fg=t.fg,this._whitespaceCell.bg=t.bg):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0),this._whitespaceCell},t.prototype.getBlankLine=function(t,e){return new r.BufferLine(this._bufferService.cols,this.getNullCell(t),e)},Object.defineProperty(t.prototype,"hasScrollback",{get:function(){return this._hasScrollback&&this.lines.maxLength>this._rows},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isCursorInViewport",{get:function(){var t=this.ybase+this.y-this.ydisp;return 0<=t&&t<this._rows},enumerable:!0,configurable:!0}),t.prototype._getCorrectBufferLength=function(t){return this._hasScrollback&&(t+=this._optionsService.options.scrollback)>e.MAX_BUFFER_SIZE?e.MAX_BUFFER_SIZE:t},t.prototype.fillViewportRows=function(t){if(0===this.lines.length){void 0===t&&(t=r.DEFAULT_ATTR_DATA);for(var e=this._rows;e--;)this.lines.push(this.getBlankLine(t))}},t.prototype.clear=function(){this.x=this.y=this.ybase=this.ydisp=0,this.lines=new n.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()},t.prototype.resize=function(t,e){var i=this.getNullCell(r.DEFAULT_ATTR_DATA),n=this._getCorrectBufferLength(e);if(n>this.lines.maxLength&&(this.lines.maxLength=n),0<this.lines.length){if(this._cols<t)for(var o=0;o<this.lines.length;o++)this.lines.get(o).resize(t,i);if(o=0,this._rows<e)for(var s=this._rows;s<e;s++)this.lines.length<e+this.ybase&&(this._optionsService.options.windowsMode?this.lines.push(new r.BufferLine(t,i)):0<this.ybase&&this.lines.length<=this.ybase+this.y+o+1?(this.ybase--,o++,0<this.ydisp&&this.ydisp--):this.lines.push(new r.BufferLine(t,i)));else for(s=this._rows;s>e;s--)this.lines.length>e+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));n<this.lines.maxLength&&(0<(s=this.lines.length-n)&&(this.lines.trimStart(s),this.ybase=Math.max(this.ybase-s,0),this.ydisp=Math.max(this.ydisp-s,0),this.savedY=Math.max(this.savedY-s,0)),this.lines.maxLength=n),this.x=Math.min(this.x,t-1),this.y=Math.min(this.y,e-1),o&&(this.y+=o),this.savedX=Math.min(this.savedX,t-1),this.scrollTop=0}if(this.scrollBottom=e-1,this._isReflowEnabled&&(this._reflow(t,e),this._cols>t))for(o=0;o<this.lines.length;o++)this.lines.get(o).resize(t,i);this._cols=t,this._rows=e},Object.defineProperty(t.prototype,"_isReflowEnabled",{get:function(){return this._hasScrollback&&!this._optionsService.options.windowsMode},enumerable:!0,configurable:!0}),t.prototype._reflow=function(t,e){this._cols!==t&&(t>this._cols?this._reflowLarger(t,e):this._reflowSmaller(t,e))},t.prototype._reflowLarger=function(t,e){var i=l.reflowLargerGetLinesToRemove(this.lines,this._cols,t,this.ybase+this.y,this.getNullCell(r.DEFAULT_ATTR_DATA));0<i.length&&(i=l.reflowLargerCreateNewLayout(this.lines,i),l.reflowLargerApplyNewLayout(this.lines,i.layout),this._reflowLargerAdjustViewport(t,e,i.countRemoved))},t.prototype._reflowLargerAdjustViewport=function(t,e,i){for(var n=this.getNullCell(r.DEFAULT_ATTR_DATA),o=i;0<o--;)0===this.ybase?(0<this.y&&this.y--,this.lines.length<e&&this.lines.push(new r.BufferLine(t,n))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-i,0)},t.prototype._reflowSmaller=function(t,e){for(var i=this.getNullCell(r.DEFAULT_ATTR_DATA),n=[],o=0,s=this.lines.length-1;0<=s;s--){var c=this.lines.get(s);if(!(!c||!c.isWrapped&&c.getTrimmedLength()<=t)){for(var a=[c];c.isWrapped&&0<s;)c=this.lines.get(--s),a.unshift(c);if(!((c=this.ybase+this.y)>=s&&c<s+a.length)){var h=a[a.length-1].getTrimmedLength(),u=l.reflowSmallerGetNewLineLengths(a,this._cols,t),d=u.length-a.length,m=0===this.ybase&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+d):Math.max(0,this.lines.length-this.lines.maxLength+d),p=[];for(c=0;c<d;c++){var f=this.getBlankLine(r.DEFAULT_ATTR_DATA,!0);p.push(f)}for(0<p.length&&(n.push({start:s+a.length+o,newLines:p}),o+=p.length),a.push.apply(a,p),0===(p=u[c=u.length-1])&&(p=u[--c]),f=a.length-d-1;0<=f;){var b=Math.min(h,p);a[c].copyCellsFrom(a[f],h-b,p-b,b,!0),0==(p-=b)&&(p=u[--c]),0==(h-=b)&&(f--,h=l.getWrappedLineTrimmedLength(a,Math.max(f,0),this._cols))}for(c=0;c<a.length;c++)u[c]<t&&a[c].setCell(u[c],i);for(c=d-m;0<c--;)0===this.ybase?this.y<e-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+o)-e&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+d,this.ybase+e-1)}}}if(0<n.length){for(t=[],i=[],c=0;c<this.lines.length;c++)i.push(this.lines.get(c));for(s=(e=this.lines.length)-1,d=n[a=0],this.lines.length=Math.min(this.lines.maxLength,this.lines.length+o),u=0,c=Math.min(this.lines.maxLength-1,e+o-1);0<=c;c--)if(d&&d.start>s+u){for(m=d.newLines.length-1;0<=m;m--)this.lines.set(c--,d.newLines[m]);c++,t.push({index:s+1,amount:d.newLines.length}),u+=d.newLines.length,d=n[++a]}else this.lines.set(c,i[s--]);for(n=0,c=t.length-1;0<=c;c--)t[c].index+=n,this.lines.onInsertEmitter.fire(t[c]),n+=t[c].amount;0<(o=Math.max(0,e+o-this.lines.maxLength))&&this.lines.onTrimEmitter.fire(o)}},t.prototype.stringIndexToBufferIndex=function(t,e,i){for(void 0===i&&(i=!1);e;){var n=this.lines.get(t);if(!n)return[-1,-1];for(var r=i?n.getTrimmedLength():n.length,o=0;o<r;++o)if(n.get(o)[s.CHAR_DATA_WIDTH_INDEX]&&(e-=n.get(o)[s.CHAR_DATA_CHAR_INDEX].length||1),0>e)return[t,o];t++}return[t,0]},t.prototype.translateBufferLineToString=function(t,e,i,n){return void 0===i&&(i=0),(t=this.lines.get(t))?t.translateToString(e,i,n):""},t.prototype.getWrappedRangeForLine=function(t){for(var e=t;0<e&&this.lines.get(e).isWrapped;)e--;for(;t+1<this.lines.length&&this.lines.get(t+1).isWrapped;)t++;return{first:e,last:t}},t.prototype.setupTabStops=function(t){for(null!=t?this.tabs[t]||(t=this.prevStop(t)):(this.tabs={},t=0);t<this._cols;t+=this._optionsService.options.tabStopWidth)this.tabs[t]=!0},t.prototype.prevStop=function(t){for(null==t&&(t=this.x);!this.tabs[--t]&&0<t;);return t>=this._cols?this._cols-1:0>t?0:t},t.prototype.nextStop=function(t){for(null==t&&(t=this.x);!this.tabs[++t]&&t<this._cols;);return t>=this._cols?this._cols-1:0>t?0:t},t.prototype.addMarker=function(t){var e=this,i=new c.Marker(t);return this.markers.push(i),i.register(this.lines.onTrim((function(t){i.line-=t,0>i.line&&i.dispose()}))),i.register(this.lines.onInsert((function(t){i.line>=t.index&&(i.line+=t.amount)}))),i.register(this.lines.onDelete((function(t){i.line>=t.index&&i.line<t.index+t.amount&&i.dispose(),i.line>t.index&&(i.line-=t.amount)}))),i.register(i.onDispose((function(){return e._removeMarker(i)}))),i},t.prototype._removeMarker=function(t){this.markers.splice(this.markers.indexOf(t),1)},t.prototype.iterator=function(t,e,i,n,r){return new h(this,t,e,i,n,r)},t}(),e.Buffer=t;var h=function(){function t(t,e,i,n,r,o){void 0===i&&(i=0),void 0===n&&(n=t.lines.length),void 0===r&&(r=0),void 0===o&&(o=0),this._buffer=t,this._trimRight=e,this._startIndex=i,this._endIndex=n,this._startOverscan=r,this._endOverscan=o,0>this._startIndex&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}return t.prototype.hasNext=function(){return this._current<this._endIndex},t.prototype.next=function(){var t=this._buffer.getWrappedRangeForLine(this._current);t.first<this._startIndex-this._startOverscan&&(t.first=this._startIndex-this._startOverscan),t.last>this._endIndex+this._endOverscan&&(t.last=this._endIndex+this._endOverscan),t.first=Math.max(t.first,0),t.last=Math.min(t.last,this._buffer.lines.length);for(var e="",i=t.first;i<=t.last;++i)e+=this._buffer.translateBufferLineToString(i,this._trimRight);return this._current=t.last+1,{range:t,content:e}},t}();e.BufferStringIterator=h},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(1);t=function(){function t(t){this._maxLength=t,this.onDeleteEmitter=new n.EventEmitter,this.onInsertEmitter=new n.EventEmitter,this.onTrimEmitter=new n.EventEmitter,this._array=Array(this._maxLength),this._length=this._startIndex=0}return Object.defineProperty(t.prototype,"onDelete",{get:function(){return this.onDeleteEmitter.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onInsert",{get:function(){return this.onInsertEmitter.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onTrim",{get:function(){return this.onTrimEmitter.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxLength",{get:function(){return this._maxLength},set:function(t){if(this._maxLength!==t){for(var e=Array(t),i=0;i<Math.min(t,this.length);i++)e[i]=this._array[this._getCyclicIndex(i)];this._array=e,this._maxLength=t,this._startIndex=0}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._length},set:function(t){if(t>this._length)for(var e=this._length;e<t;e++)this._array[e]=void 0;this._length=t},enumerable:!0,configurable:!0}),t.prototype.get=function(t){return this._array[this._getCyclicIndex(t)]},t.prototype.set=function(t,e){this._array[this._getCyclicIndex(t)]=e},t.prototype.push=function(t){this._array[this._getCyclicIndex(this._length)]=t,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++},t.prototype.recycle=function(){if(this._length!==this._maxLength)throw Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]},Object.defineProperty(t.prototype,"isFull",{get:function(){return this._length===this._maxLength},enumerable:!0,configurable:!0}),t.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length---1)]},t.prototype.splice=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];if(e){for(n=t;n<this._length-e;n++)this._array[this._getCyclicIndex(n)]=this._array[this._getCyclicIndex(n+e)];this._length-=e}for(n=this._length-1;n>=t;n--)this._array[this._getCyclicIndex(n+i.length)]=this._array[this._getCyclicIndex(n)];for(n=0;n<i.length;n++)this._array[this._getCyclicIndex(t+n)]=i[n];this._length+i.length>this._maxLength?(i=this._length+i.length-this._maxLength,this._startIndex+=i,this._length=this._maxLength,this.onTrimEmitter.fire(i)):this._length+=i.length},t.prototype.trimStart=function(t){t>this._length&&(t=this._length),this._startIndex+=t,this._length-=t,this.onTrimEmitter.fire(t)},t.prototype.shiftElements=function(t,e,i){if(!(0>=e)){if(0>t||t>=this._length)throw Error("start argument out of range");if(0>t+i)throw Error("Cannot shift elements in list beyond index 0");if(0<i){for(var n=e-1;0<=n;n--)this.set(t+n+i,this.get(t+n));if(0<(t=t+e+i-this._length))for(this._length+=t;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(n=0;n<e;n++)this.set(t+n+i,this.get(t+n))}},t.prototype._getCyclicIndex=function(t){return(this._startIndex+t)%this._maxLength},t}(),e.CircularList=t},function(t,e){function i(t,e,i){if(e===t.length-1)return t[e].getTrimmedLength();var n=!t[e].hasContent(i-1)&&1===t[e].getWidth(i-1);return t=2===t[e+1].getWidth(0),n&&t?i-1:i}Object.defineProperty(e,"__esModule",{value:!0}),e.reflowLargerGetLinesToRemove=function(t,e,n,r,o){for(var s=[],l=0;l<t.length-1;l++){var c=l,a=t.get(++c);if(a.isWrapped){for(var h=[t.get(l)];c<t.length&&a.isWrapped;)h.push(a),a=t.get(++c);if(!(r>=l&&r<c)){a=i(h,c=0,e);for(var u=1,d=0;u<h.length;){var m=i(h,u,e),p=Math.min(m-d,n-a);h[c].copyCellsFrom(h[u],d,a,p,!1),(a+=p)===n&&(c++,a=0),(d+=p)===m&&(u++,d=0),0===a&&0!==c&&2===h[c-1].getWidth(n-1)&&(h[c].copyCellsFrom(h[c-1],n-1,a++,1,!1),h[c-1].setCell(n-1,o))}for(h[c].replaceCells(a,n,o),a=0,u=h.length-1;0<u&&(u>c||0===h[u].getTrimmedLength());u--)a++;0<a&&(s.push(l+h.length-a),s.push(a))}l+=h.length-1}}return s},e.reflowLargerCreateNewLayout=function(t,e){for(var i=[],n=0,r=e[n],o=0,s=0;s<t.length;s++)r===s?(r=e[++n],t.onDeleteEmitter.fire({index:s-o,amount:r}),s+=r-1,o+=r,r=e[++n]):i.push(s);return{layout:i,countRemoved:o}},e.reflowLargerApplyNewLayout=function(t,e){for(var i=[],n=0;n<e.length;n++)i.push(t.get(e[n]));for(n=0;n<i.length;n++)t.set(n,i[n]);t.length=e.length},e.reflowSmallerGetNewLineLengths=function(t,e,n){for(var r=[],o=t.map((function(n,r){return i(t,r,e)})).reduce((function(t,e){return t+e})),s=0,l=0,c=0;c<o;){if(o-c<n){r.push(o-c);break}s+=n;var a=i(t,l,e);s>a&&(s-=a,l++),(a=2===t[l].getWidth(s-1))&&s--,a=a?n-1:n,r.push(a),c+=a}return r},e.getWrappedLineTrimmedLength=i},function(t,e,i){var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(1);t=function(t){function e(i){var n=t.call(this)||this;return n.line=i,n._id=e._nextId++,n.isDisposed=!1,n._onDispose=new o.EventEmitter,n}return r(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire())},e._nextId=1,e}(i(2).Disposable),e.Marker=t},function(t,e,i){var n=this&&this.__decorate||function(t,e,i,n){var r,o=arguments.length,s=3>o?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var l=t.length-1;0<=l;l--)(r=t[l])&&(s=(3>o?r(s):3<o?r(e,i,s):r(e,i))||s);return 3<o&&s&&Object.defineProperty(e,i,s),s},r=this&&this.__param||function(t,e){return function(i,n){e(i,n,t)}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(4),s=i(29);t=function(){function t(t,e){this._renderService=t,this._charSizeService=e}return t.prototype.getCoords=function(t,e,i,n,r){return s.getCoords(t,e,i,n,this._charSizeService.hasValidSize,this._renderService.dimensions.actualCellWidth,this._renderService.dimensions.actualCellHeight,r)},t.prototype.getRawByteCoords=function(t,e,i,n){return t=this.getCoords(t,e,i,n),s.getRawByteCoords(t)},n([r(0,o.IRenderService),r(1,o.ICharSizeService)],t)}(),e.MouseService=t},function(t,e,i){var n=this&&this.__decorate||function(t,e,i,n){var r,o=arguments.length,s=3>o?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var l=t.length-1;0<=l;l--)(r=t[l])&&(s=(3>o?r(s):3<o?r(e,i,s):r(e,i))||s);return 3<o&&s&&Object.defineProperty(e,i,s),s},r=this&&this.__param||function(t,e){return function(i,n){e(i,n,t)}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(0),s=i(1),l=i(32),c=Object.freeze({applicationCursorKeys:!1});t=function(){function t(t,e,i,n){this._scrollToBottom=t,this._bufferService=e,this._logService=i,this._optionsService=n,this.isCursorHidden=this.isCursorInitialized=!1,this._onData=new s.EventEmitter,this._onUserInput=new s.EventEmitter,this._onBinary=new s.EventEmitter,this.decPrivateModes=l.clone(c)}return Object.defineProperty(t.prototype,"onData",{get:function(){return this._onData.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onUserInput",{get:function(){return this._onUserInput.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!0,configurable:!0}),t.prototype.reset=function(){this.decPrivateModes=l.clone(c)},t.prototype.triggerDataEvent=function(t,e){if(void 0===e&&(e=!1),!this._optionsService.options.disableStdin){var i=this._bufferService.buffer;i.ybase!==i.ydisp&&this._scrollToBottom(),e&&this._onUserInput.fire(),this._logService.debug('sending data "'+t+'"',(function(){return t.split("").map((function(t){return t.charCodeAt(0)}))})),this._onData.fire(t)}},t.prototype.triggerBinaryEvent=function(t){this._optionsService.options.disableStdin||(this._logService.debug('sending binary "'+t+'"',(function(){return t.split("").map((function(t){return t.charCodeAt(0)}))})),this._onBinary.fire(t))},n([r(1,o.IBufferService),r(2,o.ILogService),r(3,o.IOptionsService)],t)}(),e.CoreService=t},function(t,e,i){var n=this&&this.__decorate||function(t,e,i,n){var r,o=arguments.length,s=3>o?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var l=t.length-1;0<=l;l--)(r=t[l])&&(s=(3>o?r(s):3<o?r(e,i,s):r(e,i))||s);return 3<o&&s&&Object.defineProperty(e,i,s),s},r=this&&this.__param||function(t,e){return function(i,n){e(i,n,t)}},o=this&&this.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;t=Array(t);var n=0;for(e=0;e<i;e++)for(var r=arguments[e],o=0,s=r.length;o<s;o++,n++)t[n]=r[o];return t};Object.defineProperty(e,"__esModule",{value:!0});var s,l=i(0);!function(t){t[t.DEBUG=0]="DEBUG",t[t.INFO=1]="INFO",t[t.WARN=2]="WARN",t[t.ERROR=3]="ERROR",t[t.OFF=4]="OFF"}(s=e.LogLevel||(e.LogLevel={}));var c={debug:s.DEBUG,info:s.INFO,warn:s.WARN,error:s.ERROR,off:s.OFF};t=function(){function t(t){var e=this;this._optionsService=t,this._updateLogLevel(),this._optionsService.onOptionChange((function(t){"logLevel"===t&&e._updateLogLevel()}))}return t.prototype._updateLogLevel=function(){this._logLevel=c[this._optionsService.options.logLevel]},t.prototype._evalLazyOptionalParams=function(t){for(var e=0;e<t.length;e++)"function"==typeof t[e]&&(t[e]=t[e]())},t.prototype._log=function(t,e,i){this._evalLazyOptionalParams(i),t.call.apply(t,o([console,"xterm.js: "+e],i))},t.prototype.debug=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this._logLevel<=s.DEBUG&&this._log(console.log,t,e)},t.prototype.info=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this._logLevel<=s.INFO&&this._log(console.info,t,e)},t.prototype.warn=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this._logLevel<=s.WARN&&this._log(console.warn,t,e)},t.prototype.error=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this._logLevel<=s.ERROR&&this._log(console.error,t,e)},n([r(0,l.IOptionsService)],t)}(),e.LogService=t},function(t,e,i){var n=this&&this.__decorate||function(t,e,i,n){var r,o=arguments.length,s=3>o?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var l=t.length-1;0<=l;l--)(r=t[l])&&(s=(3>o?r(s):3<o?r(e,i,s):r(e,i))||s);return 3<o&&s&&Object.defineProperty(e,i,s),s},r=this&&this.__param||function(t,e){return function(i,n){e(i,n,t)}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(0);t=function(){function t(t){this._bufferService=t,this.clearRange()}return Object.defineProperty(t.prototype,"start",{get:function(){return this._start},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return this._end},enumerable:!0,configurable:!0}),t.prototype.clearRange=function(){this._end=this._start=this._bufferService.buffer.y},t.prototype.markDirty=function(t){t<this._start?this._start=t:t>this._end&&(this._end=t)},t.prototype.markRangeDirty=function(t,e){if(t>e){var i=t;t=e,e=i}t<this._start&&(this._start=t),e>this._end&&(this._end=e)},t.prototype.markAllDirty=function(){this.markRangeDirty(0,this._bufferService.rows-1)},n([r(0,o.IBufferService)],t)}(),e.DirtyRowService=t},function(t,e,i){var n=this&&this.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;t=Array(t);var n=0;for(e=0;e<i;e++)for(var r=arguments[e],o=0,s=r.length;o<s;o++,n++)t[n]=r[o];return t};Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=i(14),s=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(this._entries=new Map,e=0;e<t.length;e++){var i=t[e];this.set(i[0],i[1])}}return t.prototype.set=function(t,e){var i=this._entries.get(t);return this._entries.set(t,e),i},t.prototype.forEach=function(t){this._entries.forEach((function(e,i){return t(i,e)}))},t.prototype.has=function(t){return this._entries.has(t)},t.prototype.get=function(t){return this._entries.get(t)},t}();e.ServiceCollection=s,t=function(){function t(){this._services=new s,this._services.set(r.IInstantiationService,this)}return t.prototype.setService=function(t,e){this._services.set(t,e)},t.prototype.createInstance=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var r=o.getServiceDependencies(t).sort((function(t,e){return t.index-e.index}));i=[];for(var s=0;s<r.length;s++){var l=r[s],c=this._services.get(l.id);if(!c)throw Error("[createInstance] "+t.name+" depends on UNKNOWN service "+l.id+".");i.push(c)}if(r=0<r.length?r[0].index:e.length,e.length!==r)throw Error("[createInstance] First service dependency of "+t.name+" at position "+(r+1)+" conflicts with "+e.length+" static arguments");return new(t.bind.apply(t,n([void 0],n(e,i))))},t}(),e.InstantiationService=t},function(t,e,i){function n(t,e){var i=(t.ctrl?16:0)|(t.shift?4:0)|(t.alt?8:0);return 4===t.button?(i|=64,i|=t.action):(i|=3&t.button,4&t.button&&(i|=64),8&t.button&&(i|=128),32===t.action?i|=32:0!==t.action||e||(i|=3)),i}var r=this&&this.__decorate||function(t,e,i,n){var r,o=arguments.length,s=3>o?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var l=t.length-1;0<=l;l--)(r=t[l])&&(s=(3>o?r(s):3<o?r(e,i,s):r(e,i))||s);return 3<o&&s&&Object.defineProperty(e,i,s),s},o=this&&this.__param||function(t,e){return function(i,n){e(i,n,t)}};Object.defineProperty(e,"__esModule",{value:!0});var s=i(0),l=i(1),c={NONE:{events:0,restrict:function(){return!1}},X10:{events:1,restrict:function(t){return 4!==t.button&&1===t.action&&(t.ctrl=!1,t.alt=!1,t.shift=!1,!0)}},VT200:{events:19,restrict:function(t){return 32!==t.action}},DRAG:{events:23,restrict:function(t){return 32!==t.action||3!==t.button}},ANY:{events:31,restrict:function(){return!0}}},a=String.fromCharCode,h={DEFAULT:function(t){return 255<(t=[n(t,!1)+32,t.col+32,t.row+32])[0]||255<t[1]||255<t[2]?"":"[M"+a(t[0])+a(t[1])+a(t[2])},SGR:function(t){var e=0===t.action&&4!==t.button?"m":"M";return"[<"+n(t,!0)+";"+t.col+";"+t.row+e}};t=function(){function t(t,e){var i=this;this._bufferService=t,this._coreService=e,this._protocols={},this._encodings={},this._activeEncoding=this._activeProtocol="",this._onProtocolChange=new l.EventEmitter,this._lastEvent=null,Object.keys(c).forEach((function(t){return i.addProtocol(t,c[t])})),Object.keys(h).forEach((function(t){return i.addEncoding(t,h[t])})),this.reset()}return t.prototype.addProtocol=function(t,e){this._protocols[t]=e},t.prototype.addEncoding=function(t,e){this._encodings[t]=e},Object.defineProperty(t.prototype,"activeProtocol",{get:function(){return this._activeProtocol},set:function(t){if(!this._protocols[t])throw Error('unknown protocol "'+t+'"');this._activeProtocol=t,this._onProtocolChange.fire(this._protocols[t].events)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activeEncoding",{get:function(){return this._activeEncoding},set:function(t){if(!this._encodings[t])throw Error('unknown encoding "'+t+'"');this._activeEncoding=t},enumerable:!0,configurable:!0}),t.prototype.reset=function(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null},Object.defineProperty(t.prototype,"onProtocolChange",{get:function(){return this._onProtocolChange.event},enumerable:!0,configurable:!0}),t.prototype.triggerMouseEvent=function(t){if(0>t.col||t.col>=this._bufferService.cols||0>t.row||t.row>=this._bufferService.rows||4===t.button&&32===t.action||3===t.button&&32!==t.action||4!==t.button&&(2===t.action||3===t.action)||(t.col++,t.row++,32===t.action&&this._lastEvent&&this._compareEvents(this._lastEvent,t))||!this._protocols[this._activeProtocol].restrict(t))return!1;var e=this._encodings[this._activeEncoding](t);return e&&("DEFAULT"===this._activeEncoding?this._coreService.triggerBinaryEvent(e):this._coreService.triggerDataEvent(e,!0)),this._lastEvent=t,!0},t.prototype.explainEvents=function(t){return{DOWN:!!(1&t),UP:!!(2&t),DRAG:!!(4&t),MOVE:!!(8&t),WHEEL:!!(16&t)}},t.prototype._compareEvents=function(t,e){return t.col===e.col&&t.row===e.row&&t.button===e.button&&t.action===e.action&&t.ctrl===e.ctrl&&t.alt===e.alt&&t.shift===e.shift},r([o(0,s.IBufferService),o(1,s.ICoreService)],t)}(),e.CoreMouseService=t},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),t=function(){function t(t){this._action=t,this._writeBuffer=[],this._callbacks=[],this._bufferOffset=this._pendingData=0}return t.prototype.writeSync=function(t){if(this._writeBuffer.length){for(var e=this._bufferOffset;e<this._writeBuffer.length;++e){var i=this._callbacks[e];this._action(this._writeBuffer[e]),i&&i()}this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=2147483647}this._action(t)},t.prototype.write=function(t,e){var i=this;if(5e7<this._pendingData)throw Error("write data discarded, use flow control to avoid losing data");this._writeBuffer.length||(this._bufferOffset=0,setTimeout((function(){return i._innerWrite()}))),this._pendingData+=t.length,this._writeBuffer.push(t),this._callbacks.push(e)},t.prototype._innerWrite=function(){for(var t=this,e=Date.now();this._writeBuffer.length>this._bufferOffset;){var i=this._writeBuffer[this._bufferOffset],n=this._callbacks[this._bufferOffset];if(this._bufferOffset++,this._action(i),this._pendingData-=i.length,n&&n(),12<=Date.now()-e)break}this._writeBuffer.length>this._bufferOffset?(50<this._bufferOffset&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout((function(){return t._innerWrite()}),0)):(this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0)},t}(),e.WriteBuffer=t},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),t=function(){function t(t){this._textarea=t}return Object.defineProperty(t.prototype,"isFocused",{get:function(){return document.activeElement===this._textarea&&document.hasFocus()},enumerable:!0,configurable:!0}),t}(),e.CoreBrowserService=t},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),t=function(){function t(){this._addons=[]}return t.prototype.dispose=function(){for(var t=this._addons.length-1;0<=t;t--)this._addons[t].instance.dispose()},t.prototype.loadAddon=function(t,e){var i=this,n={instance:e,dispose:e.dispose,isDisposed:!1};this._addons.push(n),e.dispose=function(){return i._wrappedAddonDispose(n)},e.activate(t)},t.prototype._wrappedAddonDispose=function(t){if(!t.isDisposed){for(var e=-1,i=0;i<this._addons.length;i++)if(this._addons[i]===t){e=i;break}if(-1===e)throw Error("Could not dispose an addon that has not been loaded");t.isDisposed=!0,t.dispose.apply(t.instance),this._addons.splice(e,1)}},t}(),e.AddonManager=t}])})),s=n(o),l=o.Terminal,c=r((function(t){window,t.exports=function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i||4&i&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var r in t)e.d(n,r,function(e){return t[e]}.bind(null,r));return n},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),t=function(){function t(){}return t.prototype.activate=function(t){this._terminal=t},t.prototype.dispose=function(){},t.prototype.fit=function(){var t=this.proposeDimensions();if(t&&this._terminal){var e=this._terminal._core;this._terminal.rows===t.rows&&this._terminal.cols===t.cols||(e._renderService.clear(),this._terminal.resize(t.cols,t.rows))}},t.prototype.proposeDimensions=function(){if(this._terminal&&this._terminal.element.parentElement){var t=this._terminal._core,e=window.getComputedStyle(this._terminal.element.parentElement),i=parseInt(e.getPropertyValue("height"));e=Math.max(0,parseInt(e.getPropertyValue("width")));var n=window.getComputedStyle(this._terminal.element);return i-=parseInt(n.getPropertyValue("padding-top"))+parseInt(n.getPropertyValue("padding-bottom")),e=e-(parseInt(n.getPropertyValue("padding-right"))+parseInt(n.getPropertyValue("padding-left")))-t.viewport.scrollBarWidth,{cols:Math.floor(e/t._renderService.dimensions.actualCellWidth),rows:Math.floor(i/t._renderService.dimensions.actualCellHeight)}}},t}(),e.FitAddon=t}])}));n(c);var a=c.FitAddon,h=r((function(t){window,t.exports=function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i||4&i&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var r in t)e.d(n,r,function(e){return t[e]}.bind(null,r));return n},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e){function i(t,e){window.open(e,"_blank")}Object.defineProperty(e,"__esModule",{value:!0});var n=/(?:^|[^\da-z\.-]+)((https?:\/\/)((([\da-z\.-]+)\.([a-z\.]{2,6}))|((\d{1,3}\.){3}\d{1,3})|(localhost))(:\d{1,5})?((\/[\/\w\.\-%~:+]*)*([^:"'\s]))?(\?[0-9\w\[\]\(\)\/\?\!#@$%&'*+,:;~\=\.\-]*)?(#[0-9\w\[\]\(\)\/\?\!#@$%&'*+,:;~\=\.\-]*)?)($|[^\/\w\.\-%]+)/;t=function(){function t(t,e){void 0===t&&(t=i),void 0===e&&(e={}),this._handler=t,this._options=e,this._options.matchIndex=1}return t.prototype.activate=function(t){this._terminal=t,this._linkMatcherId=this._terminal.registerLinkMatcher(n,this._handler,this._options)},t.prototype.dispose=function(){void 0!==this._linkMatcherId&&void 0!==this._terminal&&this._terminal.deregisterLinkMatcher(this._linkMatcherId)},t}(),e.WebLinksAddon=t}])}));n(h);var u=h.WebLinksAddon,d=void 0!==i.g?i.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function m(t){var e="function"==typeof Symbol&&t[Symbol.iterator],i=0;return e?e.call(t):{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}}}function p(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;t=i.call(t);var n,r=[];try{for(;(void 0===e||0<e--)&&!(n=t.next()).done;)r.push(n.value)}catch(t){var o={error:t}}finally{try{n&&!n.done&&(i=t.return)&&i.call(t)}finally{if(o)throw o.error}}return r}function f(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(p(arguments[e]));return t}var b="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==d?d:"undefined"!=typeof self?self:{};function y(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Z(t,e){return t(e={exports:{}},e.exports),e.exports}var G=Z((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.constants={O_RDONLY:0,O_WRONLY:1,O_RDWR:2,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:64,O_EXCL:128,O_NOCTTY:256,O_TRUNC:512,O_APPEND:1024,O_DIRECTORY:65536,O_NOATIME:262144,O_NOFOLLOW:131072,O_SYNC:1052672,O_DIRECT:16384,O_NONBLOCK:2048,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_FS_SYMLINK_DIR:1,UV_FS_SYMLINK_JUNCTION:2,UV_FS_COPYFILE_EXCL:1,UV_FS_COPYFILE_FICLONE:2,UV_FS_COPYFILE_FICLONE_FORCE:4,COPYFILE_EXCL:1,COPYFILE_FICLONE:2,COPYFILE_FICLONE_FORCE:4}}));y(G);var Y=Z((function(t,e){e.default="function"==typeof BigInt?BigInt:function(){throw Error("BigInt is not supported in this environment.")}})),g=Z((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=G.constants.S_IFMT,n=G.constants.S_IFDIR,r=G.constants.S_IFREG,o=G.constants.S_IFBLK,s=G.constants.S_IFCHR,l=G.constants.S_IFLNK,c=G.constants.S_IFIFO,a=G.constants.S_IFSOCK;t=function(){function t(){}return t.build=function(e,i){void 0===i&&(i=!1);var n=new t,r=e.gid,o=e.atime,s=e.mtime,l=e.ctime;return i=i?Y.default:function(t){return t},n.uid=i(e.uid),n.gid=i(r),n.rdev=i(0),n.blksize=i(4096),n.ino=i(e.ino),n.size=i(e.getSize()),n.blocks=i(1),n.atime=o,n.mtime=s,n.ctime=l,n.birthtime=l,n.atimeMs=i(o.getTime()),n.mtimeMs=i(s.getTime()),r=i(l.getTime()),n.ctimeMs=r,n.birthtimeMs=r,n.dev=i(0),n.mode=i(e.mode),n.nlink=i(e.nlink),n},t.prototype._checkModeProperty=function(t){return(Number(this.mode)&i)===t},t.prototype.isDirectory=function(){return this._checkModeProperty(n)},t.prototype.isFile=function(){return this._checkModeProperty(r)},t.prototype.isBlockDevice=function(){return this._checkModeProperty(o)},t.prototype.isCharacterDevice=function(){return this._checkModeProperty(s)},t.prototype.isSymbolicLink=function(){return this._checkModeProperty(l)},t.prototype.isFIFO=function(){return this._checkModeProperty(c)},t.prototype.isSocket=function(){return this._checkModeProperty(a)},t}(),e.Stats=t,e.default=t}));y(g);var W=void 0!==d?d:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},S=[],I=[],v="undefined"!=typeof Uint8Array?Uint8Array:Array,R=!1;function X(){R=!0;for(var t=0;64>t;++t)S[t]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[t],I["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(t)]=t;I[45]=62,I[95]=63}function V(t,e,i){for(var n=[],r=e;r<i;r+=3)e=(t[r]<<16)+(t[r+1]<<8)+t[r+2],n.push(S[e>>18&63]+S[e>>12&63]+S[e>>6&63]+S[63&e]);return n.join("")}function C(t){R||X();for(var e=t.length,i=e%3,n="",r=[],o=0,s=e-i;o<s;o+=16383)r.push(V(t,o,o+16383>s?s:o+16383));return 1===i?(t=t[e-1],n+=S[t>>2],n+=S[t<<4&63],n+="=="):2===i&&(t=(t[e-2]<<8)+t[e-1],n+=S[t>>10],n+=S[t>>4&63],n+=S[t<<2&63],n+="="),r.push(n),r.join("")}function T(t,e,i,n,r){var o=8*r-n-1,s=(1<<o)-1,l=s>>1,c=-7,a=i?-1:1,h=t[e+(r=i?r-1:0)];for(r+=a,i=h&(1<<-c)-1,h>>=-c,c+=o;0<c;i=256*i+t[e+r],r+=a,c-=8);for(o=i&(1<<-c)-1,i>>=-c,c+=n;0<c;o=256*o+t[e+r],r+=a,c-=8);if(0===i)i=1-l;else{if(i===s)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,n),i-=l}return(h?-1:1)*o*Math.pow(2,i-n)}function _(t,e,i,n,r,o){var s,l=8*o-r-1,c=(1<<l)-1,a=c>>1,h=23===r?Math.pow(2,-24)-Math.pow(2,-77):0;o=n?0:o-1;var u=n?1:-1,d=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||1/0===e?(e=isNaN(e)?1:0,n=c):(n=Math.floor(Math.log(e)/Math.LN2),1>e*(s=Math.pow(2,-n))&&(n--,s*=2),2<=(e=1<=n+a?e+h/s:e+h*Math.pow(2,1-a))*s&&(n++,s/=2),n+a>=c?(e=0,n=c):1<=n+a?(e=(e*s-1)*Math.pow(2,r),n+=a):(e=e*Math.pow(2,a-1)*Math.pow(2,r),n=0));8<=r;t[i+o]=255&e,o+=u,e/=256,r-=8);for(n=n<<r|e,l+=r;0<l;t[i+o]=255&n,o+=u,n/=256,l-=8);t[i+o-u]|=128*d}var L={}.toString,K=Array.isArray||function(t){return"[object Array]"==L.call(t)};k.TYPED_ARRAY_SUPPORT=void 0===W.TYPED_ARRAY_SUPPORT||W.TYPED_ARRAY_SUPPORT;var w=k.TYPED_ARRAY_SUPPORT?2147483647:1073741823;function E(t,e){if((k.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<e)throw new RangeError("Invalid typed array length");return k.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=k.prototype:(null===t&&(t=new k(e)),t.length=e),t}function k(t,e,i){if(!(k.TYPED_ARRAY_SUPPORT||this instanceof k))return new k(t,e,i);if("number"==typeof t){if("string"==typeof e)throw Error("If encoding is specified then the first argument must be a string");return P(this,t)}return x(this,t,e,i)}function x(t,e,i,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');if("undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer){if(e.byteLength,0>i||e.byteLength<i)throw new RangeError("'offset' is out of bounds");if(e.byteLength<i+(n||0))throw new RangeError("'length' is out of bounds");return e=void 0===i&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,i):new Uint8Array(e,i,n),k.TYPED_ARRAY_SUPPORT?(t=e).__proto__=k.prototype:t=M(t,e),t}if("string"==typeof e){if(n=t,"string"==typeof(t=i)&&""!==t||(t="utf8"),!k.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');return(e=(n=E(n,i=0|j(e,t))).write(e,t))!==i&&(n=n.slice(0,e)),n}return function(t,e){if(F(e)){var i=0|N(e.length);return 0===(t=E(t,i)).length||e.copy(t,0,0,i),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return(i="number"!=typeof e.length)||(i=(i=e.length)!==i),i?E(t,0):M(t,e);if("Buffer"===e.type&&K(e.data))return M(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function J(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(0>t)throw new RangeError('"size" argument must not be negative')}function P(t,e){if(J(e),t=E(t,0>e?0:0|N(e)),!k.TYPED_ARRAY_SUPPORT)for(var i=0;i<e;++i)t[i]=0;return t}function M(t,e){var i=0>e.length?0:0|N(e.length);t=E(t,i);for(var n=0;n<i;n+=1)t[n]=255&e[n];return t}function N(t){if(t>=(k.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(k.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+" bytes");return 0|t}function F(t){return!(null==t||!t._isBuffer)}function j(t,e){if(F(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var i=t.length;if(0===i)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return it(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return rt(t).length;default:if(n)return it(t).length;e=(""+e).toLowerCase(),n=!0}}function O(t,e,i){var n=!1;if((void 0===e||0>e)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),0>=i)return"";if((i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":for(t=e,e=i,i=this.length,(!t||0>t)&&(t=0),(!e||0>e||e>i)&&(e=i),n="",i=t;i<e;++i)n=(t=n)+(n=16>(n=this[i])?"0"+n.toString(16):n.toString(16));return n;case"utf8":case"utf-8":return z(this,e,i);case"ascii":for(t="",i=Math.min(this.length,i);e<i;++e)t+=String.fromCharCode(127&this[e]);return t;case"latin1":case"binary":for(t="",i=Math.min(this.length,i);e<i;++e)t+=String.fromCharCode(this[e]);return t;case"base64":return 0===e&&i===this.length?C(this):C(this.slice(e,i));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(e=this.slice(e,i),i="",t=0;t<e.length;t+=2)i+=String.fromCharCode(e[t]+256*e[t+1]);return i;default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function B(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function U(t,e,i,n,r){if(0===t.length)return-1;if("string"==typeof i?(n=i,i=0):2147483647<i?i=2147483647:-2147483648>i&&(i=-2147483648),i=+i,isNaN(i)&&(i=r?0:t.length-1),0>i&&(i=t.length+i),i>=t.length){if(r)return-1;i=t.length-1}else if(0>i){if(!r)return-1;i=0}if("string"==typeof e&&(e=k.from(e,n)),F(e))return 0===e.length?-1:H(t,e,i,n,r);if("number"==typeof e)return e&=255,k.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):H(t,[e],i,n,r);throw new TypeError("val must be string, number or Buffer")}function H(t,e,i,n,r){function o(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}var s=1,l=t.length,c=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(2>t.length||2>e.length)return-1;s=2,l/=2,c/=2,i/=2}if(r)for(n=-1;i<l;i++)if(o(t,i)===o(e,-1===n?0:i-n)){if(-1===n&&(n=i),i-n+1===c)return n*s}else-1!==n&&(i-=i-n),n=-1;else for(i+c>l&&(i=l-c);0<=i;i--){for(l=!0,n=0;n<c;n++)if(o(t,i+n)!==o(e,n)){l=!1;break}if(l)return i}return-1}function z(t,e,i){i=Math.min(t.length,i);for(var n=[];e<i;){var r=t[e],o=null,s=239<r?4:223<r?3:191<r?2:1;if(e+s<=i)switch(s){case 1:128>r&&(o=r);break;case 2:var l=t[e+1];128==(192&l)&&127<(r=(31&r)<<6|63&l)&&(o=r);break;case 3:l=t[e+1];var c=t[e+2];128==(192&l)&&128==(192&c)&&2047<(r=(15&r)<<12|(63&l)<<6|63&c)&&(55296>r||57343<r)&&(o=r);break;case 4:l=t[e+1],c=t[e+2];var a=t[e+3];128==(192&l)&&128==(192&c)&&128==(192&a)&&65535<(r=(15&r)<<18|(63&l)<<12|(63&c)<<6|63&a)&&1114112>r&&(o=r)}null===o?(o=65533,s=1):65535<o&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),e+=s}if((t=n.length)<=D)n=String.fromCharCode.apply(String,n);else{for(i="",e=0;e<t;)i+=String.fromCharCode.apply(String,n.slice(e,e+=D));n=i}return n}k.poolSize=8192,k._augment=function(t){return t.__proto__=k.prototype,t},k.from=function(t,e,i){return x(null,t,e,i)},k.TYPED_ARRAY_SUPPORT&&(k.prototype.__proto__=Uint8Array.prototype,k.__proto__=Uint8Array),k.alloc=function(t,e,i){return J(t),0>=t?E(null,t):void 0!==e?"string"==typeof i?E(null,t).fill(e,i):E(null,t).fill(e):E(null,t)},k.allocUnsafe=function(t){return P(null,t)},k.allocUnsafeSlow=function(t){return P(null,t)},k.isBuffer=st,k.compare=function(t,e){if(!F(t)||!F(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var i=t.length,n=e.length,r=0,o=Math.min(i,n);r<o;++r)if(t[r]!==e[r]){i=t[r],n=e[r];break}return i<n?-1:n<i?1:0},k.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},k.concat=function(t,e){if(!K(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return k.alloc(0);var i;if(void 0===e)for(i=e=0;i<t.length;++i)e+=t[i].length;e=k.allocUnsafe(e);var n=0;for(i=0;i<t.length;++i){var r=t[i];if(!F(r))throw new TypeError('"list" argument must be an Array of Buffers');r.copy(e,n),n+=r.length}return e},k.byteLength=j,k.prototype._isBuffer=!0,k.prototype.swap16=function(){var t=this.length;if(0!=t%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)B(this,e,e+1);return this},k.prototype.swap32=function(){var t=this.length;if(0!=t%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)B(this,e,e+3),B(this,e+1,e+2);return this},k.prototype.swap64=function(){var t=this.length;if(0!=t%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)B(this,e,e+7),B(this,e+1,e+6),B(this,e+2,e+5),B(this,e+3,e+4);return this},k.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?z(this,0,t):O.apply(this,arguments)},k.prototype.equals=function(t){if(!F(t))throw new TypeError("Argument must be a Buffer");return this===t||0===k.compare(this,t)},k.prototype.inspect=function(){var t="";return 0<this.length&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(t+=" ... ")),"<Buffer "+t+">"},k.prototype.compare=function(t,e,i,n,r){if(!F(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===n&&(n=0),void 0===r&&(r=this.length),0>e||i>t.length||0>n||r>this.length)throw new RangeError("out of range index");if(n>=r&&e>=i)return 0;if(n>=r)return-1;if(e>=i)return 1;if(this===t)return 0;var o=(r>>>=0)-(n>>>=0),s=(i>>>=0)-(e>>>=0),l=Math.min(o,s);for(n=this.slice(n,r),t=t.slice(e,i),e=0;e<l;++e)if(n[e]!==t[e]){o=n[e],s=t[e];break}return o<s?-1:s<o?1:0},k.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},k.prototype.indexOf=function(t,e,i){return U(this,t,e,i,!0)},k.prototype.lastIndexOf=function(t,e,i){return U(this,t,e,i,!1)},k.prototype.write=function(t,e,i,n){if(void 0===e)n="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)n=e,i=this.length,e=0;else{if(!isFinite(e))throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(i)?(i|=0,void 0===n&&(n="utf8")):(n=i,i=void 0)}var r=this.length-e;if((void 0===i||i>r)&&(i=r),0<t.length&&(0>i||0>e)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");for(n||(n="utf8"),r=!1;;)switch(n){case"hex":t:{if(e=Number(e)||0,n=this.length-e,i?(i=Number(i))>n&&(i=n):i=n,0!=(n=t.length)%2)throw new TypeError("Invalid hex string");for(i>n/2&&(i=n/2),n=0;n<i;++n){if(r=parseInt(t.substr(2*n,2),16),isNaN(r)){t=n;break t}this[e+n]=r}t=n}return t;case"utf8":case"utf-8":return ot(it(t,this.length-e),this,e,i);case"ascii":case"latin1":case"binary":return ot(nt(t),this,e,i);case"base64":return ot(rt(t),this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":n=t,r=this.length-e;for(var o=[],s=0;s<n.length&&!(0>(r-=2));++s){var l=n.charCodeAt(s);t=l>>8,l%=256,o.push(l),o.push(t)}return ot(o,this,e,i);default:if(r)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),r=!0}},k.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var D=4096;function A(t,e,i){if(0!=t%1||0>t)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function Q(t,e,i,n,r,o){if(!F(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<o)throw new RangeError('"value" argument is out of bounds');if(i+n>t.length)throw new RangeError("Index out of range")}function q(t,e,i,n){0>e&&(e=65535+e+1);for(var r=0,o=Math.min(t.length-i,2);r<o;++r)t[i+r]=(e&255<<8*(n?r:1-r))>>>8*(n?r:1-r)}function $(t,e,i,n){0>e&&(e=4294967295+e+1);for(var r=0,o=Math.min(t.length-i,4);r<o;++r)t[i+r]=e>>>8*(n?r:3-r)&255}function tt(t,e,i,n){if(i+n>t.length)throw new RangeError("Index out of range");if(0>i)throw new RangeError("Index out of range")}k.prototype.slice=function(t,e){var i=this.length;if(0>(t=~~t)?0>(t+=i)&&(t=0):t>i&&(t=i),0>(e=void 0===e?i:~~e)?0>(e+=i)&&(e=0):e>i&&(e=i),e<t&&(e=t),k.TYPED_ARRAY_SUPPORT)(e=this.subarray(t,e)).__proto__=k.prototype;else{e=new k(i=e-t,void 0);for(var n=0;n<i;++n)e[n]=this[n+t]}return e},k.prototype.readUIntLE=function(t,e,i){t|=0,e|=0,i||A(t,e,this.length),i=this[t];for(var n=1,r=0;++r<e&&(n*=256);)i+=this[t+r]*n;return i},k.prototype.readUIntBE=function(t,e,i){t|=0,e|=0,i||A(t,e,this.length),i=this[t+--e];for(var n=1;0<e&&(n*=256);)i+=this[t+--e]*n;return i},k.prototype.readUInt8=function(t,e){return e||A(t,1,this.length),this[t]},k.prototype.readUInt16LE=function(t,e){return e||A(t,2,this.length),this[t]|this[t+1]<<8},k.prototype.readUInt16BE=function(t,e){return e||A(t,2,this.length),this[t]<<8|this[t+1]},k.prototype.readUInt32LE=function(t,e){return e||A(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},k.prototype.readUInt32BE=function(t,e){return e||A(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},k.prototype.readIntLE=function(t,e,i){t|=0,e|=0,i||A(t,e,this.length),i=this[t];for(var n=1,r=0;++r<e&&(n*=256);)i+=this[t+r]*n;return i>=128*n&&(i-=Math.pow(2,8*e)),i},k.prototype.readIntBE=function(t,e,i){t|=0,e|=0,i||A(t,e,this.length),i=e;for(var n=1,r=this[t+--i];0<i&&(n*=256);)r+=this[t+--i]*n;return r>=128*n&&(r-=Math.pow(2,8*e)),r},k.prototype.readInt8=function(t,e){return e||A(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},k.prototype.readInt16LE=function(t,e){return e||A(t,2,this.length),32768&(t=this[t]|this[t+1]<<8)?4294901760|t:t},k.prototype.readInt16BE=function(t,e){return e||A(t,2,this.length),32768&(t=this[t+1]|this[t]<<8)?4294901760|t:t},k.prototype.readInt32LE=function(t,e){return e||A(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},k.prototype.readInt32BE=function(t,e){return e||A(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},k.prototype.readFloatLE=function(t,e){return e||A(t,4,this.length),T(this,t,!0,23,4)},k.prototype.readFloatBE=function(t,e){return e||A(t,4,this.length),T(this,t,!1,23,4)},k.prototype.readDoubleLE=function(t,e){return e||A(t,8,this.length),T(this,t,!0,52,8)},k.prototype.readDoubleBE=function(t,e){return e||A(t,8,this.length),T(this,t,!1,52,8)},k.prototype.writeUIntLE=function(t,e,i,n){t=+t,e|=0,i|=0,n||Q(this,t,e,i,Math.pow(2,8*i)-1,0),n=1;var r=0;for(this[e]=255&t;++r<i&&(n*=256);)this[e+r]=t/n&255;return e+i},k.prototype.writeUIntBE=function(t,e,i,n){t=+t,e|=0,i|=0,n||Q(this,t,e,i,Math.pow(2,8*i)-1,0);var r=1;for(this[e+(n=i-1)]=255&t;0<=--n&&(r*=256);)this[e+n]=t/r&255;return e+i},k.prototype.writeUInt8=function(t,e,i){return t=+t,e|=0,i||Q(this,t,e,1,255,0),k.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},k.prototype.writeUInt16LE=function(t,e,i){return t=+t,e|=0,i||Q(this,t,e,2,65535,0),k.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):q(this,t,e,!0),e+2},k.prototype.writeUInt16BE=function(t,e,i){return t=+t,e|=0,i||Q(this,t,e,2,65535,0),k.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):q(this,t,e,!1),e+2},k.prototype.writeUInt32LE=function(t,e,i){return t=+t,e|=0,i||Q(this,t,e,4,4294967295,0),k.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):$(this,t,e,!0),e+4},k.prototype.writeUInt32BE=function(t,e,i){return t=+t,e|=0,i||Q(this,t,e,4,4294967295,0),k.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):$(this,t,e,!1),e+4},k.prototype.writeIntLE=function(t,e,i,n){t=+t,e|=0,n||Q(this,t,e,i,(n=Math.pow(2,8*i-1))-1,-n),n=0;var r=1,o=0;for(this[e]=255&t;++n<i&&(r*=256);)0>t&&0===o&&0!==this[e+n-1]&&(o=1),this[e+n]=(t/r>>0)-o&255;return e+i},k.prototype.writeIntBE=function(t,e,i,n){t=+t,e|=0,n||Q(this,t,e,i,(n=Math.pow(2,8*i-1))-1,-n);var r=1,o=0;for(this[e+(n=i-1)]=255&t;0<=--n&&(r*=256);)0>t&&0===o&&0!==this[e+n+1]&&(o=1),this[e+n]=(t/r>>0)-o&255;return e+i},k.prototype.writeInt8=function(t,e,i){return t=+t,e|=0,i||Q(this,t,e,1,127,-128),k.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),0>t&&(t=255+t+1),this[e]=255&t,e+1},k.prototype.writeInt16LE=function(t,e,i){return t=+t,e|=0,i||Q(this,t,e,2,32767,-32768),k.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):q(this,t,e,!0),e+2},k.prototype.writeInt16BE=function(t,e,i){return t=+t,e|=0,i||Q(this,t,e,2,32767,-32768),k.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):q(this,t,e,!1),e+2},k.prototype.writeInt32LE=function(t,e,i){return t=+t,e|=0,i||Q(this,t,e,4,2147483647,-2147483648),k.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):$(this,t,e,!0),e+4},k.prototype.writeInt32BE=function(t,e,i){return t=+t,e|=0,i||Q(this,t,e,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),k.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):$(this,t,e,!1),e+4},k.prototype.writeFloatLE=function(t,e,i){return i||tt(this,0,e,4),_(this,t,e,!0,23,4),e+4},k.prototype.writeFloatBE=function(t,e,i){return i||tt(this,0,e,4),_(this,t,e,!1,23,4),e+4},k.prototype.writeDoubleLE=function(t,e,i){return i||tt(this,0,e,8),_(this,t,e,!0,52,8),e+8},k.prototype.writeDoubleBE=function(t,e,i){return i||tt(this,0,e,8),_(this,t,e,!1,52,8),e+8},k.prototype.copy=function(t,e,i,n){if(i||(i=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),0<n&&n<i&&(n=i),n===i||0===t.length||0===this.length)return 0;if(0>e)throw new RangeError("targetStart out of bounds");if(0>i||i>=this.length)throw new RangeError("sourceStart out of bounds");if(0>n)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-i&&(n=t.length-e+i);var r=n-i;if(this===t&&i<e&&e<n)for(n=r-1;0<=n;--n)t[n+e]=this[n+i];else if(1e3>r||!k.TYPED_ARRAY_SUPPORT)for(n=0;n<r;++n)t[n+e]=this[n+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+r),e);return r},k.prototype.fill=function(t,e,i,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,i=this.length):"string"==typeof i&&(n=i,i=this.length),1===t.length){var r=t.charCodeAt(0);256>r&&(t=r)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!k.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(0>e||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(n=e;n<i;++n)this[n]=t;else for(r=(t=F(t)?t:it(new k(t,n).toString())).length,n=0;n<i-e;++n)this[n+e]=t[n%r];return this};var et=/[^+\/0-9A-Za-z-_]/g;function it(t,e){e=e||1/0;for(var i,n=t.length,r=null,o=[],s=0;s<n;++s){if(55295<(i=t.charCodeAt(s))&&57344>i){if(!r){if(56319<i){-1<(e-=3)&&o.push(239,191,189);continue}if(s+1===n){-1<(e-=3)&&o.push(239,191,189);continue}r=i;continue}if(56320>i){-1<(e-=3)&&o.push(239,191,189),r=i;continue}i=65536+(r-55296<<10|i-56320)}else r&&-1<(e-=3)&&o.push(239,191,189);if(r=null,128>i){if(0>--e)break;o.push(i)}else if(2048>i){if(0>(e-=2))break;o.push(i>>6|192,63&i|128)}else if(65536>i){if(0>(e-=3))break;o.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(1114112>i))throw Error("Invalid code point");if(0>(e-=4))break;o.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return o}function nt(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}function rt(t){if(2>(t=(t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(et,"")).length)t="";else for(;0!=t.length%4;)t+="=";R||X();var e=t.length;if(0<e%4)throw Error("Invalid string. Length must be a multiple of 4");var i="="===t[e-2]?2:"="===t[e-1]?1:0,n=new v(3*e/4-i),r=0<i?e-4:e,o=0;for(e=0;e<r;e+=4){var s=I[t.charCodeAt(e)]<<18|I[t.charCodeAt(e+1)]<<12|I[t.charCodeAt(e+2)]<<6|I[t.charCodeAt(e+3)];n[o++]=s>>16&255,n[o++]=s>>8&255,n[o++]=255&s}return 2===i?(s=I[t.charCodeAt(e)]<<2|I[t.charCodeAt(e+1)]>>4,n[o++]=255&s):1===i&&(s=I[t.charCodeAt(e)]<<10|I[t.charCodeAt(e+1)]<<4|I[t.charCodeAt(e+2)]>>2,n[o++]=s>>8&255,n[o++]=255&s),n}function ot(t,e,i,n){for(var r=0;r<n&&!(r+i>=e.length||r>=t.length);++r)e[r+i]=t[r];return r}function st(t){return null!=t&&(!!t._isBuffer||lt(t)||"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&lt(t.slice(0,0)))}function lt(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}var ct=Object.freeze({__proto__:null,INSPECT_MAX_BYTES:50,kMaxLength:w,Buffer:k,SlowBuffer:function(t){return+t!=t&&(t=0),k.alloc(+t)},isBuffer:st}),at=Z((function(t,e){function i(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return new(ct.Buffer.bind.apply(ct.Buffer,n([void 0,t],e)))}var n=b&&b.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;t=Array(t);var n=0;for(e=0;e<i;e++)for(var r=arguments[e],o=0,s=r.length;o<s;o++,n++)t[n]=r[o];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.Buffer=ct.Buffer,e.bufferAllocUnsafe=ct.Buffer.allocUnsafe||i,e.bufferFrom=ct.Buffer.from||i}));function ht(){throw Error("setTimeout has not been defined")}function ut(){throw Error("clearTimeout has not been defined")}y(at);var dt=ht,mt=ut;function pt(t){if(dt===setTimeout)return setTimeout(t,0);if((dt===ht||!dt)&&setTimeout)return dt=setTimeout,setTimeout(t,0);try{return dt(t,0)}catch(e){try{return dt.call(null,t,0)}catch(e){return dt.call(this,t,0)}}}"function"==typeof W.setTimeout&&(dt=setTimeout),"function"==typeof W.clearTimeout&&(mt=clearTimeout);var ft,bt=[],yt=!1,Zt=-1;function Gt(){yt&&ft&&(yt=!1,ft.length?bt=ft.concat(bt):Zt=-1,bt.length&&Yt())}function Yt(){if(!yt){var t=pt(Gt);yt=!0;for(var e=bt.length;e;){for(ft=bt,bt=[];++Zt<e;)ft&&ft[Zt].run();Zt=-1,e=bt.length}ft=null,yt=!1,function(t){if(mt===clearTimeout)return clearTimeout(t);if((mt===ut||!mt)&&clearTimeout)return mt=clearTimeout,clearTimeout(t);try{mt(t)}catch(e){try{return mt.call(null,t)}catch(e){return mt.call(this,t)}}}(t)}}function gt(t){var e=Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];bt.push(new Wt(t,e)),1!==bt.length||yt||pt(Yt)}function Wt(t,e){this.fun=t,this.array=e}function St(){}Wt.prototype.run=function(){this.fun.apply(null,this.array)};var It=W.performance||{},vt=It.now||It.mozNow||It.msNow||It.oNow||It.webkitNow||function(){return(new Date).getTime()},Rt=new Date,Xt={nextTick:gt,title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:St,addListener:St,once:St,off:St,removeListener:St,removeAllListeners:St,emit:St,binding:function(){throw Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(){throw Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var e=.001*vt.call(It),i=Math.floor(e);return e=Math.floor(e%1*1e9),t&&(i-=t[0],0>(e-=t[1])&&(i--,e+=1e9)),[i,e]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-Rt)/1e3}},Vt="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){function i(){}t.super_=e,i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t},Ct=/%[sdj%]/g;function Tt(t){if(!Ot(t)){for(var e=[],i=0;i<arguments.length;i++)e.push(Et(arguments[i]));return e.join(" ")}i=1;var n=arguments,r=n.length;e=String(t).replace(Ct,(function(t){if("%%"===t)return"%";if(i>=r)return t;switch(t){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch(t){return"[Circular]"}default:return t}}));for(var o=n[i];i<r;o=n[++i])e=null!==o&&Ht(o)?e+" "+Et(o):e+" "+o;return e}function _t(t,e){if(Bt(W.process))return function(){return _t(t,e).apply(this,arguments)};if(!0===Xt.noDeprecation)return t;var i=!1;return function(){if(!i){if(Xt.throwDeprecation)throw Error(e);Xt.traceDeprecation?console.trace(e):console.error(e),i=!0}return t.apply(this,arguments)}}var Lt,Kt={};function wt(t){return Bt(Lt)&&(Lt=Xt.env.NODE_DEBUG||""),t=t.toUpperCase(),Kt[t]||(new RegExp("\\b"+t+"\\b","i").test(Lt)?Kt[t]=function(){var e=Tt.apply(null,arguments);console.error("%s %d: %s",t,0,e)}:Kt[t]=function(){}),Kt[t]}function Et(t,e){var i={seen:[],stylize:xt};return 3<=arguments.length&&(i.depth=arguments[2]),4<=arguments.length&&(i.colors=arguments[3]),Ft(e)?i.showHidden=e:e&&te(i,e),Bt(i.showHidden)&&(i.showHidden=!1),Bt(i.depth)&&(i.depth=2),Bt(i.colors)&&(i.colors=!1),Bt(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=kt),Jt(i,t,i.depth)}function kt(t,e){return(e=Et.styles[e])?"["+Et.colors[e][0]+"m"+t+"["+Et.colors[e][1]+"m":t}function xt(t){return t}function Jt(t,e,i){if(t.customInspect&&e&&At(e.inspect)&&e.inspect!==Et&&(!e.constructor||e.constructor.prototype!==e)){var n=e.inspect(i,t);return Ot(n)||(n=Jt(t,n,i)),n}if(n=function(t,e){return Bt(e)?t.stylize("undefined","undefined"):Ot(e)?(e="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",t.stylize(e,"string")):jt(e)?t.stylize(""+e,"number"):Ft(e)?t.stylize(""+e,"boolean"):null===e?t.stylize("null","null"):void 0}(t,e))return n;var r=Object.keys(e),o=function(t){var e={};return t.forEach((function(t){e[t]=!0})),e}(r);if(t.showHidden&&(r=Object.getOwnPropertyNames(e)),Dt(e)&&(0<=r.indexOf("message")||0<=r.indexOf("description")))return Pt(e);if(0===r.length){if(At(e))return t.stylize("[Function"+(e.name?": "+e.name:"")+"]","special");if(Ut(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(zt(e))return t.stylize(Date.prototype.toString.call(e),"date");if(Dt(e))return Pt(e)}n="";var s=!1,l=["{","}"];return Nt(e)&&(s=!0,l=["[","]"]),At(e)&&(n=" [Function"+(e.name?": "+e.name:"")+"]"),Ut(e)&&(n=" "+RegExp.prototype.toString.call(e)),zt(e)&&(n=" "+Date.prototype.toUTCString.call(e)),Dt(e)&&(n=" "+Pt(e)),0!==r.length||s&&0!=e.length?0>i?Ut(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),r=s?function(t,e,i,n,r){for(var o=[],s=0,l=e.length;s<l;++s)Object.prototype.hasOwnProperty.call(e,String(s))?o.push(Mt(t,e,i,n,String(s),!0)):o.push("");return r.forEach((function(r){r.match(/^\d+$/)||o.push(Mt(t,e,i,n,r,!0))})),o}(t,e,i,o,r):r.map((function(n){return Mt(t,e,i,o,n,s)})),t.seen.pop(),function(t,e,i){return 60<t.reduce((function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)?i[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+i[1]:i[0]+e+" "+t.join(", ")+" "+i[1]}(r,n,l)):l[0]+n+l[1]}function Pt(t){return"["+Error.prototype.toString.call(t)+"]"}function Mt(t,e,i,n,r,o){var s,l;if((e=Object.getOwnPropertyDescriptor(e,r)||{value:e[r]}).get?l=e.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):e.set&&(l=t.stylize("[Setter]","special")),Object.prototype.hasOwnProperty.call(n,r)||(s="["+r+"]"),l||(0>t.seen.indexOf(e.value)?-1<(l=Jt(t,e.value,null===i?null:i-1)).indexOf("\n")&&(l=o?l.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+l.split("\n").map((function(t){return"   "+t})).join("\n")):l=t.stylize("[Circular]","special")),Bt(s)){if(o&&r.match(/^\d+$/))return l;(s=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+l}function Nt(t){return Array.isArray(t)}function Ft(t){return"boolean"==typeof t}function jt(t){return"number"==typeof t}function Ot(t){return"string"==typeof t}function Bt(t){return void 0===t}function Ut(t){return Ht(t)&&"[object RegExp]"===Object.prototype.toString.call(t)}function Ht(t){return"object"==typeof t&&null!==t}function zt(t){return Ht(t)&&"[object Date]"===Object.prototype.toString.call(t)}function Dt(t){return Ht(t)&&("[object Error]"===Object.prototype.toString.call(t)||t instanceof Error)}function At(t){return"function"==typeof t}function Qt(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function qt(t){return 10>t?"0"+t.toString(10):t.toString(10)}Et.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},Et.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var $t="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");function te(t,e){if(!e||!Ht(e))return t;for(var i=Object.keys(e),n=i.length;n--;)t[i[n]]=e[i[n]];return t}var ee={inherits:Vt,_extend:te,log:function(){console.log("%s - %s",function(){var t=new Date,e=[qt(t.getHours()),qt(t.getMinutes()),qt(t.getSeconds())].join(":");return[t.getDate(),$t[t.getMonth()],e].join(" ")}(),Tt.apply(null,arguments))},isBuffer:function(t){return st(t)},isPrimitive:Qt,isFunction:At,isError:Dt,isDate:zt,isObject:Ht,isRegExp:Ut,isUndefined:Bt,isSymbol:function(t){return"symbol"==typeof t},isString:Ot,isNumber:jt,isNullOrUndefined:function(t){return null==t},isNull:function(t){return null===t},isBoolean:Ft,isArray:Nt,inspect:Et,deprecate:_t,format:Tt,debuglog:wt};function ie(t,e){if(t===e)return 0;for(var i=t.length,n=e.length,r=0,o=Math.min(i,n);r<o;++r)if(t[r]!==e[r]){i=t[r],n=e[r];break}return i<n?-1:n<i?1:0}var ne,re=Object.prototype.hasOwnProperty,oe=Object.keys||function(t){var e,i=[];for(e in t)re.call(t,e)&&i.push(e);return i},se=Array.prototype.slice;function le(){return void 0!==ne?ne:ne="foo"===function(){}.name}function ce(t){return!st(t)&&"function"==typeof W.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&!!(t instanceof DataView||t.buffer&&t.buffer instanceof ArrayBuffer))}function ae(t,e){t||fe(t,!0,e,"==",be)}var he=/\s*function\s+([^\(\s]*)\s*/;function ue(t){if(At(t))return le()?t.name:(t=t.toString().match(he))&&t[1]}function de(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=me(pe(this.actual),128)+" "+this.operator+" "+me(pe(this.expected),128),this.generatedMessage=!0);var e=t.stackStartFunction||fe;Error.captureStackTrace?Error.captureStackTrace(this,e):(t=Error()).stack&&(t=t.stack,e=ue(e),0<=(e=t.indexOf("\n"+e))&&(e=t.indexOf("\n",e+1),t=t.substring(e+1)),this.stack=t)}function me(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function pe(t){return le()||!At(t)?Et(t):"[Function"+((t=ue(t))?": "+t:"")+"]"}function fe(t,e,i,n,r){throw new de({message:i,actual:t,expected:e,operator:n,stackStartFunction:r})}function be(t,e){t||fe(t,!0,e,"==",be)}function ye(t,e,i,n){if(t===e)return!0;if(st(t)&&st(e))return 0===ie(t,e);if(zt(t)&&zt(e))return t.getTime()===e.getTime();if(Ut(t)&&Ut(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(!ce(t)||!ce(e)||Object.prototype.toString.call(t)!==Object.prototype.toString.call(e)||t instanceof Float32Array||t instanceof Float64Array){if(st(t)!==st(e))return!1;var r=(n=n||{actual:[],expected:[]}).actual.indexOf(t);return-1!==r&&r===n.expected.indexOf(e)||(n.actual.push(t),n.expected.push(e),function(t,e,i,n){if(null==t||null==e)return!1;if(Qt(t)||Qt(e))return t===e;if(i&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var r="[object Arguments]"==Object.prototype.toString.call(t),o="[object Arguments]"==Object.prototype.toString.call(e);if(r&&!o||!r&&o)return!1;if(r)return ye(t=se.call(t),e=se.call(e),i);r=oe(t);var s=oe(e);if(r.length!==s.length)return!1;for(r.sort(),s.sort(),o=r.length-1;0<=o;o--)if(r[o]!==s[o])return!1;for(o=r.length-1;0<=o;o--)if(!ye(t[s=r[o]],e[s],i,n))return!1;return!0}(t,e,i,n))}return 0===ie(new Uint8Array(t.buffer),new Uint8Array(e.buffer))}return i?t===e:t==e}function Ze(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function Ge(t,e,i,n){if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof i&&(n=i,i=null);try{e()}catch(t){var r=t}e=r,n=(i&&i.name?" ("+i.name+").":".")+(n?" "+n:"."),t&&!e&&fe(e,i,"Missing expected exception"+n),r="string"==typeof n;var o=!t&&e&&!i;if((!t&&Dt(e)&&r&&Ze(e,i)||o)&&fe(e,i,"Got unwanted exception"+n),t&&e&&i&&!Ze(e,i)||!t&&e)throw e}ae.AssertionError=de,Vt(de,Error),ae.fail=fe,ae.ok=be,ae.equal=function t(e,i,n){e!=i&&fe(e,i,n,"==",t)},ae.notEqual=function t(e,i,n){e==i&&fe(e,i,n,"!=",t)},ae.deepEqual=function t(e,i,n){ye(e,i,!1)||fe(e,i,n,"deepEqual",t)},ae.deepStrictEqual=function t(e,i,n){ye(e,i,!0)||fe(e,i,n,"deepStrictEqual",t)},ae.notDeepEqual=function t(e,i,n){ye(e,i,!1)&&fe(e,i,n,"notDeepEqual",t)},ae.notDeepStrictEqual=function t(e,i,n){ye(e,i,!0)&&fe(e,i,n,"notDeepStrictEqual",t)},ae.strictEqual=function t(e,i,n){e!==i&&fe(e,i,n,"===",t)},ae.notStrictEqual=function t(e,i,n){e===i&&fe(e,i,n,"!==",t)},ae.throws=function(t,e,i){Ge(!0,t,e,i)},ae.doesNotThrow=function(t,e,i){Ge(!1,t,e,i)},ae.ifError=function(t){if(t)throw t};var Ye=Z((function(t,e){function i(t){return function(t){function e(e){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];return(i=t.call(this,n(e,i))||this).code=e,i[l]=e,i.name=t.prototype.name+" ["+i[l]+"]",i}return s(e,t),e}(t)}function n(t,e){ae.strictEqual(typeof t,"string");var i=c[t];if(ae(i,"An invalid error message key was used: "+t+"."),"function"==typeof i)t=i;else{if(t=ee.format,void 0===e||0===e.length)return i;e.unshift(i)}return String(t.apply(null,e))}function r(t,e){c[t]="function"==typeof e?e:String(e)}function o(t,e){if(ae(t,"expected is required"),ae("string"==typeof e,"thing is required"),Array.isArray(t)){var i=t.length;return ae(0<i,"At least one expected value needs to be specified"),t=t.map((function(t){return String(t)})),2<i?"one of "+e+" "+t.slice(0,i-1).join(", ")+", or "+t[i-1]:2===i?"one of "+e+" "+t[0]+" or "+t[1]:"of "+e+" "+t[0]}return"of "+e+" "+String(t)}var s=b&&b.__extends||function(){function t(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)}return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var l="undefined"==typeof Symbol?"_kCode":Symbol("code"),c={};t=function(t){function i(i){if("object"!=typeof i||null===i)throw new e.TypeError("ERR_INVALID_ARG_TYPE","options","object");var n=i.message?t.call(this,i.message)||this:t.call(this,ee.inspect(i.actual).slice(0,128)+" "+i.operator+" "+ee.inspect(i.expected).slice(0,128))||this;return n.generatedMessage=!i.message,n.name="AssertionError [ERR_ASSERTION]",n.code="ERR_ASSERTION",n.actual=i.actual,n.expected=i.expected,n.operator=i.operator,e.Error.captureStackTrace(n,i.stackStartFunction),n}return s(i,t),i}(b.Error),e.AssertionError=t,e.message=n,e.E=r,e.Error=i(b.Error),e.TypeError=i(b.TypeError),e.RangeError=i(b.RangeError),r("ERR_ARG_NOT_ITERABLE","%s must be iterable"),r("ERR_ASSERTION","%s"),r("ERR_BUFFER_OUT_OF_BOUNDS",(function(t,e){return e?"Attempt to write outside buffer bounds":'"'+t+'" is outside of buffer bounds'})),r("ERR_CHILD_CLOSED_BEFORE_REPLY","Child closed before reply received"),r("ERR_CONSOLE_WRITABLE_STREAM","Console expects a writable stream instance for %s"),r("ERR_CPU_USAGE","Unable to obtain cpu usage %s"),r("ERR_DNS_SET_SERVERS_FAILED",(function(t,e){return'c-ares failed to set servers: "'+t+'" ['+e+"]"})),r("ERR_FALSY_VALUE_REJECTION","Promise was rejected with falsy value"),r("ERR_ENCODING_NOT_SUPPORTED",(function(t){return'The "'+t+'" encoding is not supported'})),r("ERR_ENCODING_INVALID_ENCODED_DATA",(function(t){return"The encoded data was not valid for encoding "+t})),r("ERR_HTTP_HEADERS_SENT","Cannot render headers after they are sent to the client"),r("ERR_HTTP_INVALID_STATUS_CODE","Invalid status code: %s"),r("ERR_HTTP_TRAILER_INVALID","Trailers are invalid with this transfer encoding"),r("ERR_INDEX_OUT_OF_RANGE","Index out of range"),r("ERR_INVALID_ARG_TYPE",(function(t,e,i){if(ae(t,"name is required"),e.includes("not ")){var n="must not be";e=e.split("not ")[1]}else n="must be";if(Array.isArray(t))n="The "+t.map((function(t){return'"'+t+'"'})).join(", ")+" arguments "+n+" "+o(e,"type");else if(t.includes(" argument"))n="The "+t+" "+n+" "+o(e,"type");else{var r=t.includes(".")?"property":"argument";n='The "'+t+'" '+r+" "+n+" "+o(e,"type")}return 3<=arguments.length&&(n+=". Received type "+(null!==i?typeof i:"null")),n})),r("ERR_INVALID_ARRAY_LENGTH",(function(t,e,i){return ae.strictEqual(typeof i,"number"),'The array "'+t+'" (length '+i+") must be of length "+e+"."})),r("ERR_INVALID_BUFFER_SIZE","Buffer size must be a multiple of %s"),r("ERR_INVALID_CALLBACK","Callback must be a function"),r("ERR_INVALID_CHAR","Invalid character in %s"),r("ERR_INVALID_CURSOR_POS","Cannot set cursor row without setting its column"),r("ERR_INVALID_FD",'"fd" must be a positive integer: %s'),r("ERR_INVALID_FILE_URL_HOST",'File URL host must be "localhost" or empty on %s'),r("ERR_INVALID_FILE_URL_PATH","File URL path %s"),r("ERR_INVALID_HANDLE_TYPE","This handle type cannot be sent"),r("ERR_INVALID_IP_ADDRESS","Invalid IP address: %s"),r("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+String(e)+'" is invalid for option "'+t+'"'})),r("ERR_INVALID_OPT_VALUE_ENCODING",(function(t){return'The value "'+String(t)+'" is invalid for option "encoding"'})),r("ERR_INVALID_REPL_EVAL_CONFIG",'Cannot specify both "breakEvalOnSigint" and "eval" for REPL'),r("ERR_INVALID_SYNC_FORK_INPUT","Asynchronous forks do not support Buffer, Uint8Array or string input: %s"),r("ERR_INVALID_THIS",'Value of "this" must be of type %s'),r("ERR_INVALID_TUPLE","%s must be an iterable %s tuple"),r("ERR_INVALID_URL","Invalid URL: %s"),r("ERR_INVALID_URL_SCHEME",(function(t){return"The URL must be "+o(t,"scheme")})),r("ERR_IPC_CHANNEL_CLOSED","Channel closed"),r("ERR_IPC_DISCONNECTED","IPC channel is already disconnected"),r("ERR_IPC_ONE_PIPE","Child process can have only one IPC pipe"),r("ERR_IPC_SYNC_FORK","IPC cannot be used with synchronous forks"),r("ERR_MISSING_ARGS",(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];ae(0<t.length,"At least one arg needs to be specified"),e="The ";var i=t.length;switch(t=t.map((function(t){return'"'+t+'"'})),i){case 1:e+=t[0]+" argument";break;case 2:e+=t[0]+" and "+t[1]+" arguments";break;default:e+=t.slice(0,i-1).join(", "),e+=", and "+t[i-1]+" arguments"}return e+" must be specified"})),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_NAPI_CONS_FUNCTION","Constructor must be a function"),r("ERR_NAPI_CONS_PROTOTYPE_OBJECT","Constructor.prototype must be an object"),r("ERR_NO_CRYPTO","Node.js is not compiled with OpenSSL crypto support"),r("ERR_NO_LONGER_SUPPORTED","%s is no longer supported"),r("ERR_PARSE_HISTORY_DATA","Could not parse history data in %s"),r("ERR_SOCKET_ALREADY_BOUND","Socket is already bound"),r("ERR_SOCKET_BAD_PORT","Port should be > 0 and < 65536"),r("ERR_SOCKET_BAD_TYPE","Bad socket type specified. Valid types are: udp4, udp6"),r("ERR_SOCKET_CANNOT_SEND","Unable to send data"),r("ERR_SOCKET_CLOSED","Socket is closed"),r("ERR_SOCKET_DGRAM_NOT_RUNNING","Not running"),r("ERR_STDERR_CLOSE","process.stderr cannot be closed"),r("ERR_STDOUT_CLOSE","process.stdout cannot be closed"),r("ERR_STREAM_WRAP","Stream has StringDecoder set or is in objectMode"),r("ERR_TLS_CERT_ALTNAME_INVALID","Hostname/IP does not match certificate's altnames: %s"),r("ERR_TLS_DH_PARAM_SIZE",(function(t){return"DH parameter size "+t+" is less than 2048"})),r("ERR_TLS_HANDSHAKE_TIMEOUT","TLS handshake timeout"),r("ERR_TLS_RENEGOTIATION_FAILED","Failed to renegotiate"),r("ERR_TLS_REQUIRED_SERVER_NAME",'"servername" is required parameter for Server.addContext'),r("ERR_TLS_SESSION_ATTACK","TSL session renegotiation attack detected"),r("ERR_TRANSFORM_ALREADY_TRANSFORMING","Calling transform done when still transforming"),r("ERR_TRANSFORM_WITH_LENGTH_0","Calling transform done when writableState.length != 0"),r("ERR_UNKNOWN_ENCODING","Unknown encoding: %s"),r("ERR_UNKNOWN_SIGNAL","Unknown signal: %s"),r("ERR_UNKNOWN_STDIN_TYPE","Unknown stdin file type"),r("ERR_UNKNOWN_STREAM_TYPE","Unknown stream file type"),r("ERR_V8BREAKITERATOR","Full ICU data not installed. See https://github.com/nodejs/node/wiki/Intl")}));y(Ye);var ge=Z((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.ENCODING_UTF8="utf8",e.assertEncoding=function(t){if(t&&!at.Buffer.isEncoding(t))throw new Ye.TypeError("ERR_INVALID_OPT_VALUE_ENCODING",t)},e.strToEncoding=function(t,i){return i&&i!==e.ENCODING_UTF8?"buffer"===i?new at.Buffer(t):new at.Buffer(t).toString(i):t}}));y(ge);var We=Z((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=G.constants.S_IFMT,n=G.constants.S_IFDIR,r=G.constants.S_IFREG,o=G.constants.S_IFBLK,s=G.constants.S_IFCHR,l=G.constants.S_IFLNK,c=G.constants.S_IFIFO,a=G.constants.S_IFSOCK;t=function(){function t(){this.name="",this.mode=0}return t.build=function(e,i){var n=new t,r=e.getNode().mode;return n.name=ge.strToEncoding(e.getName(),i),n.mode=r,n},t.prototype._checkModeProperty=function(t){return(this.mode&i)===t},t.prototype.isDirectory=function(){return this._checkModeProperty(n)},t.prototype.isFile=function(){return this._checkModeProperty(r)},t.prototype.isBlockDevice=function(){return this._checkModeProperty(o)},t.prototype.isCharacterDevice=function(){return this._checkModeProperty(s)},t.prototype.isSymbolicLink=function(){return this._checkModeProperty(l)},t.prototype.isFIFO=function(){return this._checkModeProperty(c)},t.prototype.isSocket=function(){return this._checkModeProperty(a)},t}(),e.Dirent=t,e.default=t}));function Se(){for(var t="",e=!1,i=arguments.length-1;-1<=i&&!e;i--){var n=0<=i?arguments[i]:"/";if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");n&&(t=n+"/"+t,e="/"===n.charAt(0))}return(e?"/":"")+(t=function(t,e){for(var i=0,n=t.length-1;0<=n;n--){var r=t[n];"."===r?t.splice(n,1):".."===r?(t.splice(n,1),i++):i&&(t.splice(n,1),i--)}if(e)for(;i--;i)t.unshift("..");return t}(function(t,e){if(t.filter)return t.filter(e);for(var i=[],n=0;n<t.length;n++)e(t[n],n,t)&&i.push(t[n]);return i}(t.split("/"),(function(t){return!!t})),!e).join("/"))||"."}function Ie(t,e){function i(t){for(var e=0;e<t.length&&""===t[e];e++);for(var i=t.length-1;0<=i&&""===t[i];i--);return e>i?[]:t.slice(e,i-e+1)}t=Se(t).substr(1),e=Se(e).substr(1),t=i(t.split("/")),e=i(e.split("/"));for(var n=Math.min(t.length,e.length),r=n,o=0;o<n;o++)if(t[o]!==e[o]){r=o;break}for(n=[],o=r;o<t.length;o++)n.push("..");return(n=n.concat(e.slice(r))).join("/")}y(We);var ve=Ie,Re=Se;var Xe=Z((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),t="function"==typeof setImmediate?setImmediate.bind(b):setTimeout.bind(b),e.default=t}));y(Xe);var Ve=Z((function(t,e){function i(){var t=Xt||{};return t.getuid||(t.getuid=function(){return 0}),t.getgid||(t.getgid=function(){return 0}),t.cwd||(t.cwd=function(){return"/"}),t.nextTick||(t.nextTick=Xe.default),t.emitWarning||(t.emitWarning=function(t,e){console.warn(e+(e?": ":"")+t)}),t.env||(t.env={}),t}Object.defineProperty(e,"__esModule",{value:!0}),e.createProcess=i,e.default=i()}));function Ce(){}function Te(){Te.init.call(this)}function _e(t,e,i,n){var r;if("function"!=typeof i)throw new TypeError('"listener" argument must be a function');if(r=t._events){r.newListener&&(t.emit("newListener",e,i.listener?i.listener:i),r=t._events);var o=r[e]}else r=t._events=new Ce,t._eventsCount=0;return o?("function"==typeof o?o=r[e]=n?[i,o]:[o,i]:n?o.unshift(i):o.push(i),o.warned||(i=void 0===t._maxListeners?Te.defaultMaxListeners:t._maxListeners)&&0<i&&o.length>i&&(o.warned=!0,(i=Error("Possible EventEmitter memory leak detected. "+o.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",i.emitter=t,i.type=e,i.count=o.length,"function"==typeof console.warn?console.warn(i):console.log(i))):(r[e]=i,++t._eventsCount),t}function Le(t,e,i){function n(){t.removeListener(e,n),r||(r=!0,i.apply(t,arguments))}var r=!1;return n.listener=i,n}function Ke(t){var e=this._events;if(e){if("function"==typeof(t=e[t]))return 1;if(t)return t.length}return 0}function we(t,e){for(var i=Array(e);e--;)i[e]=t[e];return i}y(Ve),Ce.prototype=Object.create(null),Te.EventEmitter=Te,Te.usingDomains=!1,Te.prototype.domain=void 0,Te.prototype._events=void 0,Te.prototype._maxListeners=void 0,Te.defaultMaxListeners=10,Te.init=function(){this.domain=null,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new Ce,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Te.prototype.setMaxListeners=function(t){if("number"!=typeof t||0>t||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},Te.prototype.getMaxListeners=function(){return void 0===this._maxListeners?Te.defaultMaxListeners:this._maxListeners},Te.prototype.emit=function(t){var e,i,n="error"===t;if(e=this._events)n=n&&null==e.error;else if(!n)return!1;var r=this.domain;if(n){if(e=arguments[1],!r){if(e instanceof Error)throw e;throw(r=Error('Uncaught, unspecified "error" event. ('+e+")")).context=e,r}return e||(e=Error('Uncaught, unspecified "error" event')),e.domainEmitter=this,e.domain=r,e.domainThrown=!1,r.emit("error",e),!1}if(!(r=e[t]))return!1;e="function"==typeof r;var o=arguments.length;switch(o){case 1:if(e)r.call(this);else for(r=we(r,e=r.length),n=0;n<e;++n)r[n].call(this);break;case 2:if(n=arguments[1],e)r.call(this,n);else for(r=we(r,e=r.length),o=0;o<e;++o)r[o].call(this,n);break;case 3:if(n=arguments[1],o=arguments[2],e)r.call(this,n,o);else for(r=we(r,e=r.length),i=0;i<e;++i)r[i].call(this,n,o);break;case 4:if(n=arguments[1],o=arguments[2],i=arguments[3],e)r.call(this,n,o,i);else{r=we(r,e=r.length);for(var s=0;s<e;++s)r[s].call(this,n,o,i)}break;default:for(n=Array(o-1),i=1;i<o;i++)n[i-1]=arguments[i];if(e)r.apply(this,n);else for(r=we(r,e=r.length),o=0;o<e;++o)r[o].apply(this,n)}return!0},Te.prototype.addListener=function(t,e){return _e(this,t,e,!1)},Te.prototype.on=Te.prototype.addListener,Te.prototype.prependListener=function(t,e){return _e(this,t,e,!0)},Te.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,Le(this,t,e)),this},Te.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,Le(this,t,e)),this},Te.prototype.removeListener=function(t,e){var i;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');var n=this._events;if(!n)return this;var r=n[t];if(!r)return this;if(r===e||r.listener&&r.listener===e)0==--this._eventsCount?this._events=new Ce:(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){var o=-1;for(i=r.length;0<i--;)if(r[i]===e||r[i].listener&&r[i].listener===e){var s=r[i].listener;o=i;break}if(0>o)return this;if(1===r.length){if(r[0]=void 0,0==--this._eventsCount)return this._events=new Ce,this;delete n[t]}else{i=o+1;for(var l=r.length;i<l;o+=1,i+=1)r[o]=r[i];r.pop()}n.removeListener&&this.emit("removeListener",t,s||e)}return this},Te.prototype.removeAllListeners=function(t){var e=this._events;if(!e)return this;if(!e.removeListener)return 0===arguments.length?(this._events=new Ce,this._eventsCount=0):e[t]&&(0==--this._eventsCount?this._events=new Ce:delete e[t]),this;if(0===arguments.length){e=Object.keys(e);for(var i,n=0;n<e.length;++n)"removeListener"!==(i=e[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=new Ce,this._eventsCount=0,this}if("function"==typeof(e=e[t]))this.removeListener(t,e);else if(e)do{this.removeListener(t,e[e.length-1])}while(e[0]);return this},Te.prototype.listeners=function(t){var e=this._events;if(e)if(t=e[t])if("function"==typeof t)t=[t.listener||t];else{e=Array(t.length);for(var i=0;i<e.length;++i)e[i]=t[i].listener||t[i];t=e}else t=[];else t=[];return t},Te.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):Ke.call(t,e)},Te.prototype.listenerCount=Ke,Te.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]};var Ee=Z((function(t,e){var i=b&&b.__extends||function(){function t(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)}return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=G.constants.S_IFMT,r=G.constants.S_IFDIR,o=G.constants.S_IFREG,s=G.constants.S_IFLNK,l=G.constants.O_APPEND;e.SEP="/",t=function(t){function e(e,i){void 0===i&&(i=438);var n=t.call(this)||this;return n.uid=Ve.default.getuid(),n.gid=Ve.default.getgid(),n.atime=new Date,n.mtime=new Date,n.ctime=new Date,n.perm=438,n.mode=o,n.nlink=1,n.perm=i,n.mode|=i,n.ino=e,n}return i(e,t),e.prototype.getString=function(t){return void 0===t&&(t="utf8"),this.getBuffer().toString(t)},e.prototype.setString=function(t){this.buf=at.bufferFrom(t,"utf8"),this.touch()},e.prototype.getBuffer=function(){return this.buf||this.setBuffer(at.bufferAllocUnsafe(0)),at.bufferFrom(this.buf)},e.prototype.setBuffer=function(t){this.buf=at.bufferFrom(t),this.touch()},e.prototype.getSize=function(){return this.buf?this.buf.length:0},e.prototype.setModeProperty=function(t){this.mode=this.mode&~n|t},e.prototype.setIsFile=function(){this.setModeProperty(o)},e.prototype.setIsDirectory=function(){this.setModeProperty(r)},e.prototype.setIsSymlink=function(){this.setModeProperty(s)},e.prototype.isFile=function(){return(this.mode&n)===o},e.prototype.isDirectory=function(){return(this.mode&n)===r},e.prototype.isSymlink=function(){return(this.mode&n)===s},e.prototype.makeSymlink=function(t){this.symlink=t,this.setIsSymlink()},e.prototype.write=function(t,e,i,n){if(void 0===e&&(e=0),void 0===i&&(i=t.length),void 0===n&&(n=0),this.buf||(this.buf=at.bufferAllocUnsafe(0)),n+i>this.buf.length){var r=at.bufferAllocUnsafe(n+i);this.buf.copy(r,0,0,this.buf.length),this.buf=r}return t.copy(this.buf,n,e,e+i),this.touch(),i},e.prototype.read=function(t,e,i,n){return void 0===e&&(e=0),void 0===i&&(i=t.byteLength),void 0===n&&(n=0),this.buf||(this.buf=at.bufferAllocUnsafe(0)),i>t.byteLength&&(i=t.byteLength),i+n>this.buf.length&&(i=this.buf.length-n),this.buf.copy(t,e,n,n+i),i},e.prototype.truncate=function(t){if(void 0===t&&(t=0),t)if(this.buf||(this.buf=at.bufferAllocUnsafe(0)),t<=this.buf.length)this.buf=this.buf.slice(0,t);else{var e=at.bufferAllocUnsafe(0);this.buf.copy(e),e.fill(0,t)}else this.buf=at.bufferAllocUnsafe(0);this.touch()},e.prototype.chmod=function(t){this.perm=t,this.mode=-512&this.mode|t,this.touch()},e.prototype.chown=function(t,e){this.uid=t,this.gid=e,this.touch()},e.prototype.touch=function(){this.mtime=new Date,this.emit("change",this)},e.prototype.canRead=function(t,e){return void 0===t&&(t=Ve.default.getuid()),void 0===e&&(e=Ve.default.getgid()),!!(4&this.perm||e===this.gid&&32&this.perm||t===this.uid&&256&this.perm)},e.prototype.canWrite=function(t,e){return void 0===t&&(t=Ve.default.getuid()),void 0===e&&(e=Ve.default.getgid()),!!(2&this.perm||e===this.gid&&16&this.perm||t===this.uid&&128&this.perm)},e.prototype.del=function(){this.emit("delete",this)},e.prototype.toJSON=function(){return{ino:this.ino,uid:this.uid,gid:this.gid,atime:this.atime.getTime(),mtime:this.mtime.getTime(),ctime:this.ctime.getTime(),perm:this.perm,mode:this.mode,nlink:this.nlink,symlink:this.symlink,data:this.getString()}},e}(Te.EventEmitter),e.Node=t,t=function(t){function n(e,i,n){var r=t.call(this)||this;return r.children={},r.steps=[],r.ino=0,r.length=0,r.vol=e,r.parent=i,r.steps=i?i.steps.concat([n]):[n],r}return i(n,t),n.prototype.setNode=function(t){this.node=t,this.ino=t.ino},n.prototype.getNode=function(){return this.node},n.prototype.createChild=function(t,e){void 0===e&&(e=this.vol.createNode());var i=new n(this.vol,this,t);return i.setNode(e),e.isDirectory(),this.setChild(t,i),i},n.prototype.setChild=function(t,e){return void 0===e&&(e=new n(this.vol,this,t)),this.children[t]=e,e.parent=this,this.length++,this.emit("child:add",e,this),e},n.prototype.deleteChild=function(t){delete this.children[t.getName()],this.length--,this.emit("child:delete",t,this)},n.prototype.getChild=function(t){if(Object.hasOwnProperty.call(this.children,t))return this.children[t]},n.prototype.getPath=function(){return this.steps.join(e.SEP)},n.prototype.getName=function(){return this.steps[this.steps.length-1]},n.prototype.walk=function(t,e,i){if(void 0===e&&(e=t.length),void 0===i&&(i=0),i>=t.length||i>=e)return this;var n=this.getChild(t[i]);return n?n.walk(t,e,i+1):null},n.prototype.toJSON=function(){return{steps:this.steps,ino:this.ino,children:Object.keys(this.children)}},n}(Te.EventEmitter),e.Link=t,t=function(){function t(t,e,i,n){this.position=0,this.link=t,this.node=e,this.flags=i,this.fd=n}return t.prototype.getString=function(){return this.node.getString()},t.prototype.setString=function(t){this.node.setString(t)},t.prototype.getBuffer=function(){return this.node.getBuffer()},t.prototype.setBuffer=function(t){this.node.setBuffer(t)},t.prototype.getSize=function(){return this.node.getSize()},t.prototype.truncate=function(t){this.node.truncate(t)},t.prototype.seekTo=function(t){this.position=t},t.prototype.stats=function(){return g.default.build(this.node)},t.prototype.write=function(t,e,i,n){return void 0===e&&(e=0),void 0===i&&(i=t.length),"number"!=typeof n&&(n=this.position),this.flags&l&&(n=this.getSize()),t=this.node.write(t,e,i,n),this.position=n+t,t},t.prototype.read=function(t,e,i,n){return void 0===e&&(e=0),void 0===i&&(i=t.byteLength),"number"!=typeof n&&(n=this.position),t=this.node.read(t,e,i,n),this.position=n+t,t},t.prototype.chmod=function(t){this.node.chmod(t)},t.prototype.chown=function(t,e){this.node.chown(t,e)},t}(),e.File=t}));y(Ee);var ke=Ee.Node,xe=Z((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){var n=setTimeout.apply(null,arguments);return n&&"object"==typeof n&&"function"==typeof n.unref&&n.unref(),n}}));function Je(){this.tail=this.head=null,this.length=0}y(xe),Je.prototype.push=function(t){t={data:t,next:null},0<this.length?this.tail.next=t:this.head=t,this.tail=t,++this.length},Je.prototype.unshift=function(t){t={data:t,next:this.head},0===this.length&&(this.tail=t),this.head=t,++this.length},Je.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,t}},Je.prototype.clear=function(){this.head=this.tail=null,this.length=0},Je.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,i=""+e.data;e=e.next;)i+=t+e.data;return i},Je.prototype.concat=function(t){if(0===this.length)return k.alloc(0);if(1===this.length)return this.head.data;t=k.allocUnsafe(t>>>0);for(var e=this.head,i=0;e;)e.data.copy(t,i),i+=e.data.length,e=e.next;return t};var Pe=k.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Me(t){if(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),t&&!Pe(t))throw Error("Unknown encoding: "+t);switch(this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=Fe;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=je;break;default:return void(this.write=Ne)}this.charBuffer=new k(6),this.charLength=this.charReceived=0}function Ne(t){return t.toString(this.encoding)}function Fe(t){this.charLength=(this.charReceived=t.length%2)?2:0}function je(t){this.charLength=(this.charReceived=t.length%3)?3:0}Me.prototype.write=function(t){for(var e="";this.charLength;){if(e=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length,t.copy(this.charBuffer,this.charReceived,0,e),this.charReceived+=e,this.charReceived<this.charLength)return"";t=t.slice(e,t.length);var i=(e=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(e.length-1);if(!(55296<=i&&56319>=i)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var n=t.length;return this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,n),n-=this.charReceived),n=(e+=t.toString(this.encoding,0,n)).length-1,55296<=(i=e.charCodeAt(n))&&56319>=i?(i=this.surrogateSize,this.charLength+=i,this.charReceived+=i,this.charBuffer.copy(this.charBuffer,i,0,i),t.copy(this.charBuffer,0,0,i),e.substring(0,n)):e},Me.prototype.detectIncompleteChar=function(t){for(var e=3<=t.length?3:t.length;0<e;e--){var i=t[t.length-e];if(1==e&&6==i>>5){this.charLength=2;break}if(2>=e&&14==i>>4){this.charLength=3;break}if(3>=e&&30==i>>3){this.charLength=4;break}}this.charReceived=e},Me.prototype.end=function(t){var e="";return t&&t.length&&(e=this.write(t)),this.charReceived&&(t=this.encoding,e+=this.charBuffer.slice(0,this.charReceived).toString(t)),e},Ue.ReadableState=Be;var Oe=wt("stream");function Be(t,e){t=t||{},this.objectMode=!!t.objectMode,e instanceof Zi&&(this.objectMode=this.objectMode||!!t.readableObjectMode),e=t.highWaterMark;var i=this.objectMode?16:16384;this.highWaterMark=e||0===e?e:i,this.highWaterMark=~~this.highWaterMark,this.buffer=new Je,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.reading=this.endEmitted=this.ended=!1,this.sync=!0,this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.encoding=this.decoder=null,t.encoding&&(this.decoder=new Me(t.encoding),this.encoding=t.encoding)}function Ue(t){if(!(this instanceof Ue))return new Ue(t);this._readableState=new Be(t,this),this.readable=!0,t&&"function"==typeof t.read&&(this._read=t.read),Te.call(this)}function He(t,e,i,n,r){var o=i,s=null;if(st(o)||"string"==typeof o||null==o||e.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),o=s)t.emit("error",o);else if(null===i)e.reading=!1,e.ended||(e.decoder&&(i=e.decoder.end())&&i.length&&(e.buffer.push(i),e.length+=e.objectMode?1:i.length),e.ended=!0,De(t));else if(e.objectMode||i&&0<i.length)if(e.ended&&!r)t.emit("error",Error("stream.push() after EOF"));else if(e.endEmitted&&r)t.emit("error",Error("stream.unshift() after end event"));else{if(e.decoder&&!r&&!n){i=e.decoder.write(i);var l=!e.objectMode&&0===i.length}r||(e.reading=!1),l||(e.flowing&&0===e.length&&!e.sync?(t.emit("data",i),t.read(0)):(e.length+=e.objectMode?1:i.length,r?e.buffer.unshift(i):e.buffer.push(i),e.needReadable&&De(t))),e.readingMore||(e.readingMore=!0,gt(Qe,t,e))}else r||(e.reading=!1);return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function ze(t,e){if(0>=t||0===e.length&&e.ended)return 0;if(e.objectMode)return 1;if(t!=t)return e.flowing&&e.length?e.buffer.head.data.length:e.length;if(t>e.highWaterMark){var i=t;8388608<=i?i=8388608:(i--,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i++),e.highWaterMark=i}return t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0)}function De(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(Oe("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?gt(Ae,t):Ae(t))}function Ae(t){Oe("emit readable"),t.emit("readable"),ti(t)}function Qe(t,e){for(var i=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(Oe("maybeReadMore read 0"),t.read(0),i!==e.length);)i=e.length;e.readingMore=!1}function qe(t){Oe("readable nexttick read 0"),t.read(0)}function $e(t,e){e.reading||(Oe("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),ti(t),e.flowing&&!e.reading&&t.read(0)}function ti(t){var e=t._readableState;for(Oe("flow",e.flowing);e.flowing&&null!==t.read(););}function ei(t,e){if(0===e.length)return null;if(e.objectMode)var i=e.buffer.shift();else if(!t||t>=e.length)i=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear();else{if(i=e.buffer,e=e.decoder,t<i.head.data.length)e=i.head.data.slice(0,t),i.head.data=i.head.data.slice(t);else{if(t===i.head.data.length)i=i.shift();else if(e){var n=1,r=(e=i.head).data;for(t-=r.length;e=e.next;){var o=e.data,s=t>o.length?o.length:t;if(r=s===o.length?r+o:r+o.slice(0,t),0==(t-=s)){s===o.length?(++n,i.head=e.next?e.next:i.tail=null):(i.head=e,e.data=o.slice(s));break}++n}i.length-=n,i=r}else{for(e=k.allocUnsafe(t),r=1,(n=i.head).data.copy(e),t-=n.data.length;n=n.next;){if(s=t>(o=n.data).length?o.length:t,o.copy(e,e.length-t,0,s),0==(t-=s)){s===o.length?(++r,i.head=n.next?n.next:i.tail=null):(i.head=n,n.data=o.slice(s));break}++r}i.length-=r,i=e}e=i}i=e}return i}function ii(t){var e=t._readableState;if(0<e.length)throw Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,gt(ni,e,t))}function ni(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function ri(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1}function oi(){}function si(t,e,i){this.chunk=t,this.encoding=e,this.callback=i,this.next=null}function li(t,e){Object.defineProperty(this,"buffer",{get:_t((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),t=t||{},this.objectMode=!!t.objectMode,e instanceof Zi&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,n=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n,this.highWaterMark=~~this.highWaterMark,this.finished=this.ended=this.ending=this.needDrain=!1,this.decodeStrings=!1!==t.decodeStrings,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){var i=e._writableState,n=i.sync,r=i.writecb;i.writing=!1,i.writecb=null,i.length-=i.writelen,i.writelen=0,t?(--i.pendingcb,n?gt(r,t):r(t),e._writableState.errorEmitted=!0,e.emit("error",t)):((t=di(i))||i.corked||i.bufferProcessing||!i.bufferedRequest||ui(e,i),n?gt(hi,e,i,t,r):hi(e,i,t,r))},this.writecb=null,this.writelen=0,this.lastBufferedRequest=this.bufferedRequest=null,this.pendingcb=0,this.errorEmitted=this.prefinished=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new pi(this)}function ci(t){if(!(this instanceof ci||this instanceof Zi))return new ci(t);this._writableState=new li(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev)),Te.call(this)}function ai(t,e,i,n,r,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,i?t._writev(r,e.onwrite):t._write(r,o,e.onwrite),e.sync=!1}function hi(t,e,i,n){!i&&0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain")),e.pendingcb--,n(),mi(t,e)}function ui(t,e){e.bufferProcessing=!0;var i=e.bufferedRequest;if(t._writev&&i&&i.next){var n=Array(e.bufferedRequestCount),r=e.corkedRequestsFree;r.entry=i;for(var o=0;i;)n[o]=i,i=i.next,o+=1;ai(t,e,!0,e.length,n,"",r.finish),e.pendingcb++,e.lastBufferedRequest=null,r.next?(e.corkedRequestsFree=r.next,r.next=null):e.corkedRequestsFree=new pi(e)}else{for(;i&&(n=i.chunk,ai(t,e,!1,e.objectMode?1:n.length,n,i.encoding,i.callback),i=i.next,!e.writing););null===i&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=i,e.bufferProcessing=!1}function di(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function mi(t,e){var i=di(e);return i&&(0===e.pendingcb?(e.prefinished||(e.prefinished=!0,t.emit("prefinish")),e.finished=!0,t.emit("finish")):e.prefinished||(e.prefinished=!0,t.emit("prefinish"))),i}function pi(t){var e=this;this.entry=this.next=null,this.finish=function(i){var n=e.entry;for(e.entry=null;n;){var r=n.callback;t.pendingcb--,r(i),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}}Vt(Ue,Te),Ue.prototype.push=function(t,e){var i=this._readableState;return i.objectMode||"string"!=typeof t||(e=e||i.defaultEncoding)!==i.encoding&&(t=k.from(t,e),e=""),He(this,i,t,e,!1)},Ue.prototype.unshift=function(t){return He(this,this._readableState,t,"",!0)},Ue.prototype.isPaused=function(){return!1===this._readableState.flowing},Ue.prototype.setEncoding=function(t){return this._readableState.decoder=new Me(t),this._readableState.encoding=t,this},Ue.prototype.read=function(t){Oe("read",t),t=parseInt(t,10);var e=this._readableState,i=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return Oe("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?ii(this):De(this),null;if(0===(t=ze(t,e))&&e.ended)return 0===e.length&&ii(this),null;var n=e.needReadable;return Oe("need readable",n),(0===e.length||e.length-t<e.highWaterMark)&&Oe("length less than watermark",n=!0),e.ended||e.reading?Oe("reading or ended",!1):n&&(Oe("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=ze(i,e))),null===(n=0<t?ei(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),i!==t&&e.ended&&ii(this)),null!==n&&this.emit("data",n),n},Ue.prototype._read=function(){this.emit("error",Error("not implemented"))},Ue.prototype.pipe=function(t,e){function i(t){Oe("onunpipe"),t===h&&r()}function n(){Oe("onend"),t.end()}function r(){Oe("cleanup"),t.removeListener("close",l),t.removeListener("finish",c),t.removeListener("drain",d),t.removeListener("error",s),t.removeListener("unpipe",i),h.removeListener("end",n),h.removeListener("end",r),h.removeListener("data",o),m=!0,!u.awaitDrain||t._writableState&&!t._writableState.needDrain||d()}function o(e){Oe("ondata"),p=!1,!1!==t.write(e)||p||((1===u.pipesCount&&u.pipes===t||1<u.pipesCount&&-1!==ri(u.pipes,t))&&!m&&(Oe("false write response, pause",h._readableState.awaitDrain),h._readableState.awaitDrain++,p=!0),h.pause())}function s(e){Oe("onerror",e),a(),t.removeListener("error",s),0===t.listeners("error").length&&t.emit("error",e)}function l(){t.removeListener("finish",c),a()}function c(){Oe("onfinish"),t.removeListener("close",l),a()}function a(){Oe("unpipe"),h.unpipe(t)}var h=this,u=this._readableState;switch(u.pipesCount){case 0:u.pipes=t;break;case 1:u.pipes=[u.pipes,t];break;default:u.pipes.push(t)}u.pipesCount+=1,Oe("pipe count=%d opts=%j",u.pipesCount,e),e=e&&!1===e.end?r:n,u.endEmitted?gt(e):h.once("end",e),t.on("unpipe",i);var d=function(t){return function(){var e=t._readableState;Oe("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&t.listeners("data").length&&(e.flowing=!0,ti(t))}}(h);t.on("drain",d);var m=!1,p=!1;return h.on("data",o),function(t,e,i){if("function"==typeof t.prependListener)return t.prependListener(e,i);t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(i):t._events[e]=[i,t._events[e]]:t.on(e,i)}(t,"error",s),t.once("close",l),t.once("finish",c),t.emit("pipe",h),u.flowing||(Oe("pipe resume"),h.resume()),t},Ue.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this)),this;if(!t){t=e.pipes;var i=e.pipesCount;for(e.pipes=null,e.pipesCount=0,e.flowing=!1,e=0;e<i;e++)t[e].emit("unpipe",this);return this}return-1===(i=ri(e.pipes,t))||(e.pipes.splice(i,1),--e.pipesCount,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this)),this},Ue.prototype.on=function(t,e){return e=Te.prototype.on.call(this,t,e),"data"===t?!1!==this._readableState.flowing&&this.resume():"readable"===t&&((t=this._readableState).endEmitted||t.readableListening||(t.readableListening=t.needReadable=!0,t.emittedReadable=!1,t.reading?t.length&&De(this):gt(qe,this))),e},Ue.prototype.addListener=Ue.prototype.on,Ue.prototype.resume=function(){var t=this._readableState;return t.flowing||(Oe("resume"),t.flowing=!0,t.resumeScheduled||(t.resumeScheduled=!0,gt($e,this,t))),this},Ue.prototype.pause=function(){return Oe("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(Oe("pause"),this._readableState.flowing=!1,this.emit("pause")),this},Ue.prototype.wrap=function(t){var e=this._readableState,i=!1,n=this;for(var r in t.on("end",(function(){if(Oe("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&n.push(t)}n.push(null)})),t.on("data",(function(r){Oe("wrapped data"),e.decoder&&(r=e.decoder.write(r)),e.objectMode&&null==r||!(e.objectMode||r&&r.length)||n.push(r)||(i=!0,t.pause())})),t)void 0===this[r]&&"function"==typeof t[r]&&(this[r]=function(e){return function(){return t[e].apply(t,arguments)}}(r));return function(t,e){for(var i=0,n=t.length;i<n;i++)e(t[i])}(["error","close","destroy","pause","resume"],(function(e){t.on(e,n.emit.bind(n,e))})),n._read=function(e){Oe("wrapped _read",e),i&&(i=!1,t.resume())},n},Ue._fromList=ei,ci.WritableState=li,Vt(ci,Te),li.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},ci.prototype.pipe=function(){this.emit("error",Error("Cannot pipe, not readable"))},ci.prototype.write=function(t,e,i){var n=this._writableState,r=!1;if("function"==typeof e&&(i=e,e=null),k.isBuffer(t)?e="buffer":e||(e=n.defaultEncoding),"function"!=typeof i&&(i=oi),n.ended)n=i,t=Error("write after end"),this.emit("error",t),gt(n,t);else{var o=i,s=!0,l=!1;null===t?l=new TypeError("May not write null values to stream"):k.isBuffer(t)||"string"==typeof t||void 0===t||n.objectMode||(l=new TypeError("Invalid non-string/buffer chunk")),l&&(this.emit("error",l),gt(o,l),s=!1),s&&(n.pendingcb++,r=e,n.objectMode||!1===n.decodeStrings||"string"!=typeof t||(t=k.from(t,r)),k.isBuffer(t)&&(r="buffer"),o=n.objectMode?1:t.length,n.length+=o,(e=n.length<n.highWaterMark)||(n.needDrain=!0),n.writing||n.corked?(o=n.lastBufferedRequest,n.lastBufferedRequest=new si(t,r,i),o?o.next=n.lastBufferedRequest:n.bufferedRequest=n.lastBufferedRequest,n.bufferedRequestCount+=1):ai(this,n,!1,o,t,r,i),r=e)}return r},ci.prototype.cork=function(){this._writableState.corked++},ci.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||ui(this,t))},ci.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((t+"").toLowerCase())))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},ci.prototype._write=function(t,e,i){i(Error("not implemented"))},ci.prototype._writev=null,ci.prototype.end=function(t,e,i){var n=this._writableState;"function"==typeof t?(i=t,e=t=null):"function"==typeof e&&(i=e,e=null),null!=t&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||(t=i,n.ending=!0,mi(this,n),t&&(n.finished?gt(t):this.once("finish",t)),n.ended=!0,this.writable=!1)},Vt(Zi,Ue);for(var fi=Object.keys(ci.prototype),bi=0;bi<fi.length;bi++){var yi=fi[bi];Zi.prototype[yi]||(Zi.prototype[yi]=ci.prototype[yi])}function Zi(t){if(!(this instanceof Zi))return new Zi(t);Ue.call(this,t),ci.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",Gi)}function Gi(){this.allowHalfOpen||this._writableState.ended||gt(Yi,this)}function Yi(t){t.end()}function gi(t){this.afterTransform=function(e,i){var n=t._transformState;n.transforming=!1;var r=n.writecb;return r?(n.writechunk=null,n.writecb=null,null!=i&&t.push(i),r(e),(e=t._readableState).reading=!1,(e.needReadable||e.length<e.highWaterMark)&&t._read(e.highWaterMark),e=void 0):e=t.emit("error",Error("no writecb in Transform class")),e},this.transforming=this.needTransform=!1,this.writeencoding=this.writechunk=this.writecb=null}function Wi(t){if(!(this instanceof Wi))return new Wi(t);Zi.call(this,t),this._transformState=new gi(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.once("prefinish",(function(){"function"==typeof this._flush?this._flush((function(t){Si(e,t)})):Si(e)}))}function Si(t,e){if(e)return t.emit("error",e);if(e=t._transformState,t._writableState.length)throw Error("Calling transform done when ws.length != 0");if(e.transforming)throw Error("Calling transform done when still transforming");return t.push(null)}function Ii(t){if(!(this instanceof Ii))return new Ii(t);Wi.call(this,t)}function vi(){Te.call(this)}Vt(Wi,Zi),Wi.prototype.push=function(t,e){return this._transformState.needTransform=!1,Zi.prototype.push.call(this,t,e)},Wi.prototype._transform=function(){throw Error("Not implemented")},Wi.prototype._write=function(t,e,i){var n=this._transformState;n.writecb=i,n.writechunk=t,n.writeencoding=e,n.transforming||(t=this._readableState,(n.needTransform||t.needReadable||t.length<t.highWaterMark)&&this._read(t.highWaterMark))},Wi.prototype._read=function(){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},Vt(Ii,Wi),Ii.prototype._transform=function(t,e,i){i(null,t)},Vt(vi,Te),vi.Readable=Ue,vi.Writable=ci,vi.Duplex=Zi,vi.Transform=Wi,vi.PassThrough=Ii,vi.Stream=vi,vi.prototype.pipe=function(t,e){function i(e){t.writable&&!1===t.write(e)&&c.pause&&c.pause()}function n(){c.readable&&c.resume&&c.resume()}function r(){a||(a=!0,t.end())}function o(){a||(a=!0,"function"==typeof t.destroy&&t.destroy())}function s(t){if(l(),0===Te.listenerCount(this,"error"))throw t}function l(){c.removeListener("data",i),t.removeListener("drain",n),c.removeListener("end",r),c.removeListener("close",o),c.removeListener("error",s),t.removeListener("error",s),c.removeListener("end",l),c.removeListener("close",l),t.removeListener("close",l)}var c=this;c.on("data",i),t.on("drain",n),t._isStdio||e&&!1===e.end||(c.on("end",r),c.on("close",o));var a=!1;return c.on("error",s),t.on("error",s),c.on("end",l),c.on("close",l),t.on("close",l),t.emit("pipe",c),t};var Ri=Array.prototype.slice,Xi=function t(e,i){for(var n in i)e[n]=i[n];return 3>arguments.length?e:t.apply(null,[e].concat(Ri.call(arguments,2)))},Vi=Z((function(t,e){function i(t,e,i){return void 0===i&&(i=function(t){return t}),function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return new Promise((function(o,s){t[e].bind(t).apply(void 0,n(r,[function(t,e){return t?s(t):o(i(e))}]))}))}}var n=b&&b.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;t=Array(t);var n=0;for(e=0;e<i;e++)for(var r=arguments[e],o=0,s=r.length;o<s;o++,n++)t[n]=r[o];return t};Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){this.vol=t,this.fd=e}return t.prototype.appendFile=function(t,e){return i(this.vol,"appendFile")(this.fd,t,e)},t.prototype.chmod=function(t){return i(this.vol,"fchmod")(this.fd,t)},t.prototype.chown=function(t,e){return i(this.vol,"fchown")(this.fd,t,e)},t.prototype.close=function(){return i(this.vol,"close")(this.fd)},t.prototype.datasync=function(){return i(this.vol,"fdatasync")(this.fd)},t.prototype.read=function(t,e,n,r){return i(this.vol,"read",(function(e){return{bytesRead:e,buffer:t}}))(this.fd,t,e,n,r)},t.prototype.readFile=function(t){return i(this.vol,"readFile")(this.fd,t)},t.prototype.stat=function(t){return i(this.vol,"fstat")(this.fd,t)},t.prototype.sync=function(){return i(this.vol,"fsync")(this.fd)},t.prototype.truncate=function(t){return i(this.vol,"ftruncate")(this.fd,t)},t.prototype.utimes=function(t,e){return i(this.vol,"futimes")(this.fd,t,e)},t.prototype.write=function(t,e,n,r){return i(this.vol,"write",(function(e){return{bytesWritten:e,buffer:t}}))(this.fd,t,e,n,r)},t.prototype.writeFile=function(t,e){return i(this.vol,"writeFile")(this.fd,t,e)},t}();e.FileHandle=r,e.default=function(t){return"undefined"==typeof Promise?null:{FileHandle:r,access:function(e,n){return i(t,"access")(e,n)},appendFile:function(e,n,o){return i(t,"appendFile")(e instanceof r?e.fd:e,n,o)},chmod:function(e,n){return i(t,"chmod")(e,n)},chown:function(e,n,r){return i(t,"chown")(e,n,r)},copyFile:function(e,n,r){return i(t,"copyFile")(e,n,r)},lchmod:function(e,n){return i(t,"lchmod")(e,n)},lchown:function(e,n,r){return i(t,"lchown")(e,n,r)},link:function(e,n){return i(t,"link")(e,n)},lstat:function(e,n){return i(t,"lstat")(e,n)},mkdir:function(e,n){return i(t,"mkdir")(e,n)},mkdtemp:function(e,n){return i(t,"mkdtemp")(e,n)},open:function(e,n,o){return i(t,"open",(function(e){return new r(t,e)}))(e,n,o)},readdir:function(e,n){return i(t,"readdir")(e,n)},readFile:function(e,n){return i(t,"readFile")(e instanceof r?e.fd:e,n)},readlink:function(e,n){return i(t,"readlink")(e,n)},realpath:function(e,n){return i(t,"realpath")(e,n)},rename:function(e,n){return i(t,"rename")(e,n)},rmdir:function(e){return i(t,"rmdir")(e)},stat:function(e,n){return i(t,"stat")(e,n)},symlink:function(e,n,r){return i(t,"symlink")(e,n,r)},truncate:function(e,n){return i(t,"truncate")(e,n)},unlink:function(e){return i(t,"unlink")(e)},utimes:function(e,n,r){return i(t,"utimes")(e,n,r)},writeFile:function(e,n,o){return i(t,"writeFile")(e instanceof r?e.fd:e,n,o)}}}}));y(Vi);var Ci=/[^\x20-\x7E]/,Ti=/[\x2E\u3002\uFF0E\uFF61]/g,_i="Overflow: input needs wider integers to process",Li=Math.floor,Ki=String.fromCharCode;function wi(t,e){return t+22+75*(26>t)-((0!=e)<<5)}var Ei=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function ki(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}}function xi(t,e){if(t.map)return t.map(e);for(var i=[],n=0;n<t.length;n++)i.push(e(t[n],n));return i}var Ji=Object.keys||function(t){var e,i=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&i.push(e);return i};function Pi(t,e,i,n){i=i||"=";var r={};if("string"!=typeof t||0===t.length)return r;var o=/\+/g;for(t=t.split(e||"&"),e=1e3,n&&"number"==typeof n.maxKeys&&(e=n.maxKeys),n=t.length,0<e&&n>e&&(n=e),e=0;e<n;++e){var s=t[e].replace(o,"%20"),l=s.indexOf(i);if(0<=l){var c=s.substr(0,l);s=s.substr(l+1)}else c=s,s="";c=decodeURIComponent(c),s=decodeURIComponent(s),Object.prototype.hasOwnProperty.call(r,c)?Ei(r[c])?r[c].push(s):r[c]=[r[c],s]:r[c]=s}return r}var Mi={parse:tn,resolve:function(t,e){return tn(t,!1,!0).resolve(e)},resolveObject:function(t,e){return t?tn(t,!1,!0).resolveObject(e):e},format:function(t){return Ot(t)&&(t=en({},t)),nn(t)},Url:Ni};function Ni(){this.href=this.path=this.pathname=this.query=this.search=this.hash=this.hostname=this.port=this.host=this.auth=this.slashes=this.protocol=null}var Fi=/^([a-z0-9.+-]+:)/i,ji=/:[0-9]*$/,Oi=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Bi="{}|\\^`".split("").concat('<>"` \r\n\t'.split("")),Ui=["'"].concat(Bi),Hi=["%","/","?",";","#"].concat(Ui),zi=["/","?","#"],Di=/^[+a-z0-9A-Z_-]{0,63}$/,Ai=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Qi={javascript:!0,"javascript:":!0},qi={javascript:!0,"javascript:":!0},$i={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function tn(t,e,i){if(t&&Ht(t)&&t instanceof Ni)return t;var n=new Ni;return n.parse(t,e,i),n}function en(t,e,i,n){if(!Ot(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?");if(r=-1!==r&&r<e.indexOf("#")?"?":"#",(e=e.split(r))[0]=e[0].replace(/\\/g,"/"),r=(e=e.join(r)).trim(),!n&&1===e.split("#").length&&(e=Oi.exec(r)))return t.path=r,t.href=r,t.pathname=e[1],e[2]?(t.search=e[2],t.query=i?Pi(t.search.substr(1)):t.search.substr(1)):i&&(t.search="",t.query={}),t;if(e=Fi.exec(r)){var o=(e=e[0]).toLowerCase();t.protocol=o,r=r.substr(e.length)}if(n||e||r.match(/^\/\/[^@\/]+@[^@\/]+/)){var s="//"===r.substr(0,2);!s||e&&qi[e]||(r=r.substr(2),t.slashes=!0)}if(!qi[e]&&(s||e&&!$i[e])){for(e=-1,n=0;n<zi.length;n++)-1!==(s=r.indexOf(zi[n]))&&(-1===e||s<e)&&(e=s);for(-1!==(s=-1===e?r.lastIndexOf("@"):r.lastIndexOf("@",e))&&(n=r.slice(0,s),r=r.slice(s+1),t.auth=decodeURIComponent(n)),e=-1,n=0;n<Hi.length;n++)-1!==(s=r.indexOf(Hi[n]))&&(-1===e||s<e)&&(e=s);if(-1===e&&(e=r.length),t.host=r.slice(0,e),r=r.slice(e),rn(t),t.hostname=t.hostname||"",!(s="["===t.hostname[0]&&"]"===t.hostname[t.hostname.length-1])){var l=t.hostname.split(/\./);for(n=0,e=l.length;n<e;n++){var c=l[n];if(c&&!c.match(Di)){for(var a="",h=0,u=c.length;h<u;h++)a=127<c.charCodeAt(h)?a+"x":a+c[h];if(!a.match(Di)){e=l.slice(0,n),n=l.slice(n+1),(c=c.match(Ai))&&(e.push(c[1]),n.unshift(c[2])),n.length&&(r="/"+n.join(".")+r),t.hostname=e.join(".");break}}}}t.hostname=t.hostname.length>255?"":t.hostname.toLowerCase(),s||(t.hostname=function(t){return function(t,e){var i=t.split("@"),n="";1<i.length&&(n=i[0]+"@",t=i[1]),i=(t=(t=t.replace(Ti,".")).split(".")).length;for(var r=[];i--;)r[i]=e(t[i]);return n+r.join(".")}(t,(function(t){if(Ci.test(t)){var e,i=[],n=[],r=0;for(e=t.length;r<e;){var o=t.charCodeAt(r++);if(55296<=o&&56319>=o&&r<e){var s=t.charCodeAt(r++);56320==(64512&s)?n.push(((1023&o)<<10)+(1023&s)+65536):(n.push(o),r--)}else n.push(o)}s=(t=n).length,n=128;var l=0,c=72;for(o=0;o<s;++o){var a=t[o];128>a&&i.push(Ki(a))}for((r=e=i.length)&&i.push("-");r<s;){var h=2147483647;for(o=0;o<s;++o)(a=t[o])>=n&&a<h&&(h=a);var u=r+1;if(h-n>Li((2147483647-l)/u))throw new RangeError(_i);for(l+=(h-n)*u,n=h,o=0;o<s;++o){if((a=t[o])<n&&2147483647<++l)throw new RangeError(_i);if(a==n){var d=l;for(h=36;!(d<(a=h<=c?1:h>=c+26?26:h-c));h+=36){var m=d-a;d=36-a,i.push(Ki(wi(a+m%d,0))),d=Li(m/d)}for(i.push(Ki(wi(d,0))),c=u,h=0,l=r==e?Li(l/700):l>>1,l+=Li(l/c);455<l;h+=36)l=Li(l/35);c=Li(h+36*l/(l+38)),l=0,++r}}++l,++n}i="xn--"+i.join("")}else i=t;return i}))}(t.hostname)),n=t.port?":"+t.port:"",t.host=(t.hostname||"")+n,t.href+=t.host,s&&(t.hostname=t.hostname.substr(1,t.hostname.length-2),"/"!==r[0]&&(r="/"+r))}if(!Qi[o])for(n=0,e=Ui.length;n<e;n++)s=Ui[n],-1!==r.indexOf(s)&&((c=encodeURIComponent(s))===s&&(c=escape(s)),r=r.split(s).join(c));return-1!==(n=r.indexOf("#"))&&(t.hash=r.substr(n),r=r.slice(0,n)),-1!==(n=r.indexOf("?"))?(t.search=r.substr(n),t.query=r.substr(n+1),i&&(t.query=Pi(t.query)),r=r.slice(0,n)):i&&(t.search="",t.query={}),r&&(t.pathname=r),$i[o]&&t.hostname&&!t.pathname&&(t.pathname="/"),(t.pathname||t.search)&&(n=t.pathname||"",t.path=n+(t.search||"")),t.href=nn(t),t}function nn(t){var e=t.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var i=t.protocol||"",n=t.pathname||"",r=t.hash||"",o=!1,s="";return t.host?o=e+t.host:t.hostname&&(o=e+(-1===t.hostname.indexOf(":")?t.hostname:"["+this.hostname+"]"),t.port&&(o+=":"+t.port)),t.query&&Ht(t.query)&&Object.keys(t.query).length&&(s=function(t,e,i,n){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?xi(Ji(t),(function(n){var r=encodeURIComponent(ki(n))+i;return Ei(t[n])?xi(t[n],(function(t){return r+encodeURIComponent(ki(t))})).join(e):r+encodeURIComponent(ki(t[n]))})).join(e):""}(t.query)),e=t.search||s&&"?"+s||"",i&&":"!==i.substr(-1)&&(i+=":"),t.slashes||(!i||$i[i])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),e&&"?"!==e.charAt(0)&&(e="?"+e),n=n.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})),i+o+n+(e=e.replace("#","%23"))+r}function rn(t){var e=t.host,i=ji.exec(e);i&&(":"!==(i=i[0])&&(t.port=i.substr(1)),e=e.substr(0,e.length-i.length)),e&&(t.hostname=e)}Ni.prototype.parse=function(t,e,i){return en(this,t,e,i)},Ni.prototype.format=function(){return nn(this)},Ni.prototype.resolve=function(t){return this.resolveObject(tn(t,!1,!0)).format()},Ni.prototype.resolveObject=function(t){if(Ot(t)){var e=new Ni;e.parse(t,!1,!0),t=e}e=new Ni;for(var i=Object.keys(this),n=0;n<i.length;n++){var r=i[n];e[r]=this[r]}if(e.hash=t.hash,""===t.href)return e.href=e.format(),e;if(t.slashes&&!t.protocol){for(i=Object.keys(t),n=0;n<i.length;n++)"protocol"!==(r=i[n])&&(e[r]=t[r]);return $i[e.protocol]&&e.hostname&&!e.pathname&&(e.path=e.pathname="/"),e.href=e.format(),e}var o;if(t.protocol&&t.protocol!==e.protocol){if(!$i[t.protocol]){for(i=Object.keys(t),n=0;n<i.length;n++)e[r=i[n]]=t[r];return e.href=e.format(),e}if(e.protocol=t.protocol,t.host||qi[t.protocol])e.pathname=t.pathname;else{for(o=(t.pathname||"").split("/");o.length&&!(t.host=o.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==o[0]&&o.unshift(""),2>o.length&&o.unshift(""),e.pathname=o.join("/")}return e.search=t.search,e.query=t.query,e.host=t.host||"",e.auth=t.auth,e.hostname=t.hostname||t.host,e.port=t.port,(e.pathname||e.search)&&(e.path=(e.pathname||"")+(e.search||"")),e.slashes=e.slashes||t.slashes,e.href=e.format(),e}i=e.pathname&&"/"===e.pathname.charAt(0);var s=t.host||t.pathname&&"/"===t.pathname.charAt(0),l=i=s||i||e.host&&t.pathname;if(n=e.pathname&&e.pathname.split("/")||[],r=e.protocol&&!$i[e.protocol],o=t.pathname&&t.pathname.split("/")||[],r&&(e.hostname="",e.port=null,e.host&&(""===n[0]?n[0]=e.host:n.unshift(e.host)),e.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===o[0]?o[0]=t.host:o.unshift(t.host)),t.host=null),i=i&&(""===o[0]||""===n[0])),s)e.host=t.host||""===t.host?t.host:e.host,e.hostname=t.hostname||""===t.hostname?t.hostname:e.hostname,e.search=t.search,e.query=t.query,n=o;else if(o.length)n||(n=[]),n.pop(),n=n.concat(o),e.search=t.search,e.query=t.query;else if(null!=t.search)return r&&(e.hostname=e.host=n.shift(),r=!!(e.host&&0<e.host.indexOf("@"))&&e.host.split("@"))&&(e.auth=r.shift(),e.host=e.hostname=r.shift()),e.search=t.search,e.query=t.query,null===e.pathname&&null===e.search||(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=e.format(),e;if(!n.length)return e.pathname=null,e.path=e.search?"/"+e.search:null,e.href=e.format(),e;s=n.slice(-1)[0],o=(e.host||t.host||1<n.length)&&("."===s||".."===s)||""===s;for(var c=0,a=n.length;0<=a;a--)"."===(s=n[a])?n.splice(a,1):".."===s?(n.splice(a,1),c++):c&&(n.splice(a,1),c--);if(!i&&!l)for(;c--;c)n.unshift("..");return!i||""===n[0]||n[0]&&"/"===n[0].charAt(0)||n.unshift(""),o&&"/"!==n.join("/").substr(-1)&&n.push(""),l=""===n[0]||n[0]&&"/"===n[0].charAt(0),r&&(e.hostname=e.host=l?"":n.length?n.shift():"",r=!!(e.host&&0<e.host.indexOf("@"))&&e.host.split("@"))&&(e.auth=r.shift(),e.host=e.hostname=r.shift()),(i||e.host&&n.length)&&!l&&n.unshift(""),n.length?e.pathname=n.join("/"):(e.pathname=null,e.path=null),null===e.pathname&&null===e.search||(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.auth=t.auth||e.auth,e.slashes=e.slashes||t.slashes,e.href=e.format(),e},Ni.prototype.parseHost=function(){return rn(this)};var on=Z((function(t,e){function i(t,e){return t=t[e],0<e&&("/"===t||r&&"\\"===t)}function n(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(r){var n=t;if("string"!=typeof n)throw new TypeError("expected a string");if(n=n.replace(/[\\\/]+/g,"/"),!1!==e)if(2>(n=(e=n).length-1))n=e;else{for(;i(e,n);)n--;n=e.substr(0,n+1)}return n.replace(/^([a-zA-Z]+:|\.\/)/,"")}return t}Object.defineProperty(e,"__esModule",{value:!0}),e.unixify=n,e.correctPath=function(t){return n(t.replace(/^\\\\\?\\.:\\/,"\\"))};var r="win32"===Xt.platform}));y(on);var sn=Z((function(t,e){function i(t,e){return void 0===e&&(e=Ve.default.cwd()),w(e,t)}function n(t,e){return"function"==typeof t?[r(),t]:[r(t),h(e)]}function r(t){return void 0===t&&(t={}),K({},dt,t)}function o(t){return K({},lt,"number"==typeof t?{mode:t}:t)}function s(t,e,i,n,r){return void 0===e&&(e=""),void 0===i&&(i=""),void 0===n&&(n=""),void 0===r&&(r=Error),e=new r(function(t,e,i,n){void 0===e&&(e=""),void 0===i&&(i=""),void 0===n&&(n="");var r="";switch(i&&(r=" '"+i+"'"),n&&(r+=" -> '"+n+"'"),t){case"ENOENT":return"ENOENT: no such file or directory, "+e+r;case"EBADF":return"EBADF: bad file descriptor, "+e+r;case"EINVAL":return"EINVAL: invalid argument, "+e+r;case"EPERM":return"EPERM: operation not permitted, "+e+r;case"EPROTO":return"EPROTO: protocol error, "+e+r;case"EEXIST":return"EEXIST: file already exists, "+e+r;case"ENOTDIR":return"ENOTDIR: not a directory, "+e+r;case"EISDIR":return"EISDIR: illegal operation on a directory, "+e+r;case"EACCES":return"EACCES: permission denied, "+e+r;case"ENOTEMPTY":return"ENOTEMPTY: directory not empty, "+e+r;case"EMFILE":return"EMFILE: too many open files, "+e+r;case"ENOSYS":return"ENOSYS: function not implemented, "+e+r;default:return t+": error occurred, "+e+r}}(t,e,i,n)),e.code=t,e}function l(t){if("number"==typeof t)return t;if("string"==typeof t){var e=L[t];if(void 0!==e)return e}throw new Ye.TypeError("ERR_INVALID_OPT_VALUE","flags",t)}function c(t,e){if(!e)return t;var i=typeof e;switch(i){case"string":t=K({},t,{encoding:e});break;case"object":t=K({},t,e);break;default:throw TypeError("Expected options to be either an object or a string, but got "+i+" instead")}return"buffer"!==t.encoding&&ge.assertEncoding(t.encoding),t}function a(t){return function(e){return c(t,e)}}function h(t){if("function"!=typeof t)throw TypeError(A.CB);return t}function u(t){return function(e,i){return"function"==typeof e?[t(),e]:[t(e),h(i)]}}function d(t){if("string"!=typeof t&&!at.Buffer.isBuffer(t)){try{if(!(t instanceof Mi.URL))throw new TypeError(A.PATH_STR)}catch(t){throw new TypeError(A.PATH_STR)}if(""!==t.hostname)throw new Ye.TypeError("ERR_INVALID_FILE_URL_HOST",Ve.default.platform);t=t.pathname;for(var e=0;e<t.length;e++)if("%"===t[e]){var i=32|t.codePointAt(e+2);if("2"===t[e+1]&&102===i)throw new Ye.TypeError("ERR_INVALID_FILE_URL_PATH","must not include encoded / characters")}t=decodeURIComponent(t)}return Z(t=String(t)),t}function m(t,e){return(t=i(t,e).substr(1))?t.split(H):[]}function p(t){return m(d(t))}function f(t,e){return void 0===e&&(e=ge.ENCODING_UTF8),at.Buffer.isBuffer(t)?t:t instanceof Uint8Array?at.bufferFrom(t):at.bufferFrom(String(t),e)}function y(t,e){return e&&"buffer"!==e?t.toString(e):t}function Z(t,e){if(-1!==(""+t).indexOf("\0")){if((t=Error("Path must be a string without null bytes")).code="ENOENT","function"!=typeof e)throw t;return Ve.default.nextTick(e,t),!1}return!0}function Y(t,e){if("number"!=typeof(t="number"==typeof t?t:"string"==typeof t?parseInt(t,8):e?Y(e):void 0)||isNaN(t))throw new TypeError(A.MODE_INT);return t}function W(t){if(t>>>0!==t)throw TypeError(A.FD)}function S(t){if("string"==typeof t&&+t==t)return+t;if(t instanceof Date)return t.getTime()/1e3;if(isFinite(t))return 0>t?Date.now()/1e3:t;throw Error("Cannot parse time: "+t)}function I(t){if("number"!=typeof t)throw TypeError(A.UID)}function v(t){if("number"!=typeof t)throw TypeError(A.GID)}function R(t){t.emit("stop")}function X(t,e,i){if(!(this instanceof X))return new X(t,e,i);if(this._vol=t,void 0===(i=K({},c(i,{}))).highWaterMark&&(i.highWaterMark=65536),vi.Readable.call(this,i),this.path=d(e),this.fd=void 0===i.fd?null:i.fd,this.flags=void 0===i.flags?"r":i.flags,this.mode=void 0===i.mode?438:i.mode,this.start=i.start,this.end=i.end,this.autoClose=void 0===i.autoClose||i.autoClose,this.pos=void 0,this.bytesRead=0,void 0!==this.start){if("number"!=typeof this.start)throw new TypeError('"start" option must be a Number');if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw new TypeError('"end" option must be a Number');if(this.start>this.end)throw Error('"start" option must be <= "end" option');this.pos=this.start}"number"!=typeof this.fd&&this.open(),this.on("end",(function(){this.autoClose&&this.destroy&&this.destroy()}))}function V(){this.close()}function C(t,e,i){if(!(this instanceof C))return new C(t,e,i);if(this._vol=t,i=K({},c(i,{})),vi.Writable.call(this,i),this.path=d(e),this.fd=void 0===i.fd?null:i.fd,this.flags=void 0===i.flags?"w":i.flags,this.mode=void 0===i.mode?438:i.mode,this.start=i.start,this.autoClose=void 0===i.autoClose||!!i.autoClose,this.pos=void 0,this.bytesWritten=0,void 0!==this.start){if("number"!=typeof this.start)throw new TypeError('"start" option must be a Number');if(0>this.start)throw Error('"start" must be >= zero');this.pos=this.start}i.encoding&&this.setDefaultEncoding(i.encoding),"number"!=typeof this.fd&&this.open(),this.once("finish",(function(){this.autoClose&&this.close()}))}var T=b&&b.__extends||function(){function t(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)}return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),_=b&&b.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;t=Array(t);var n=0;for(e=0;e<i;e++)for(var r=arguments[e],o=0,s=r.length;o<s;o++,n++)t[n]=r[o];return t};Object.defineProperty(e,"__esModule",{value:!0});var L,K=Xi,w=Re,E=G.constants.O_RDONLY,k=G.constants.O_WRONLY,x=G.constants.O_RDWR,J=G.constants.O_CREAT,P=G.constants.O_EXCL,M=G.constants.O_TRUNC,N=G.constants.O_APPEND,F=G.constants.O_SYNC,j=G.constants.O_DIRECTORY,O=G.constants.F_OK,B=G.constants.COPYFILE_EXCL,U=G.constants.COPYFILE_FICLONE_FORCE,H="/",z=ve,D="win32"===Ve.default.platform,A={PATH_STR:"path must be a string or Buffer",FD:"fd must be a file descriptor",MODE_INT:"mode must be an int",CB:"callback must be a function",UID:"uid must be an unsigned int",GID:"gid must be an unsigned int",LEN:"len must be an integer",ATIME:"atime must be an integer",MTIME:"mtime must be an integer",PREFIX:"filename prefix is required",BUFFER:"buffer must be an instance of Buffer or StaticBuffer",OFFSET:"offset must be an integer",LENGTH:"length must be an integer",POSITION:"position must be an integer"};!function(t){t[t.r=E]="r",t[t["r+"]=x]="r+",t[t.rs=E|F]="rs",t[t.sr=t.rs]="sr",t[t["rs+"]=x|F]="rs+",t[t["sr+"]=t["rs+"]]="sr+",t[t.w=k|J|M]="w",t[t.wx=k|J|M|P]="wx",t[t.xw=t.wx]="xw",t[t["w+"]=x|J|M]="w+",t[t["wx+"]=x|J|M|P]="wx+",t[t["xw+"]=t["wx+"]]="xw+",t[t.a=k|N|J]="a",t[t.ax=k|N|J|P]="ax",t[t.xa=t.ax]="xa",t[t["a+"]=x|N|J]="a+",t[t["ax+"]=x|N|J|P]="ax+",t[t["xa+"]=t["ax+"]]="xa+"}(L=e.FLAGS||(e.FLAGS={})),e.flagsToNumber=l;var Q=a(t={encoding:"utf8"}),q=u(Q),$=a({flag:"r"}),tt={encoding:"utf8",mode:438,flag:L[L.w]},et=a(tt),it={encoding:"utf8",mode:438,flag:L[L.a]},nt=a(it),rt=u(nt),ot=a(t),st=u(ot),lt={mode:511,recursive:!1},ct={recursive:!1},ht=a({encoding:"utf8",withFileTypes:!1}),ut=u(ht),dt={bigint:!1};if(e.pathToFilename=d,D){var mt=i,pt=on.unixify;i=function(t,e){return pt(mt(t,e))}}e.filenameToSteps=m,e.pathToSteps=p,e.dataToStr=function(t,e){return void 0===e&&(e=ge.ENCODING_UTF8),at.Buffer.isBuffer(t)?t.toString(e):t instanceof Uint8Array?at.bufferFrom(t).toString(e):String(t)},e.dataToBuffer=f,e.bufferToEncoding=y,e.toUnixTimestamp=S,t=function(){function t(t){void 0===t&&(t={}),this.ino=0,this.inodes={},this.releasedInos=[],this.fds={},this.releasedFds=[],this.maxFiles=1e4,this.openFiles=0,this.promisesApi=Vi.default(this),this.statWatchers={},this.props=K({Node:Ee.Node,Link:Ee.Link,File:Ee.File},t),(t=this.createLink()).setNode(this.createNode(!0));var e=this;this.StatWatcher=function(t){function i(){return t.call(this,e)||this}return T(i,t),i}(bt),this.ReadStream=function(t){function i(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return t.apply(this,_([e],i))||this}return T(i,t),i}(X),this.WriteStream=function(t){function i(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return t.apply(this,_([e],i))||this}return T(i,t),i}(C),this.FSWatcher=function(t){function i(){return t.call(this,e)||this}return T(i,t),i}(yt),this.root=t}return t.fromJSON=function(e,i){var n=new t;return n.fromJSON(e,i),n},Object.defineProperty(t.prototype,"promises",{get:function(){if(null===this.promisesApi)throw Error("Promise is not supported in this environment.");return this.promisesApi},enumerable:!0,configurable:!0}),t.prototype.createLink=function(t,e,i,n){if(void 0===i&&(i=!1),!t)return new this.props.Link(this,null,"");if(!e)throw Error("createLink: name cannot be empty");return t.createChild(e,this.createNode(i,n))},t.prototype.deleteLink=function(t){var e=t.parent;return!!e&&(e.deleteChild(t),!0)},t.prototype.newInoNumber=function(){return this.releasedInos.pop()||(this.ino=(this.ino+1)%4294967295)},t.prototype.newFdNumber=function(){var e=this.releasedFds.pop();return"number"==typeof e?e:t.fd--},t.prototype.createNode=function(t,e){return void 0===t&&(t=!1),e=new this.props.Node(this.newInoNumber(),e),t&&e.setIsDirectory(),this.inodes[e.ino]=e},t.prototype.getNode=function(t){return this.inodes[t]},t.prototype.deleteNode=function(t){t.del(),delete this.inodes[t.ino],this.releasedInos.push(t.ino)},t.prototype.genRndStr=function(){var t=(Math.random()+1).toString(36).substr(2,6);return 6===t.length?t:this.genRndStr()},t.prototype.getLink=function(t){return this.root.walk(t)},t.prototype.getLinkOrThrow=function(t,e){var i=m(t);if(!(i=this.getLink(i)))throw s("ENOENT",e,t);return i},t.prototype.getResolvedLink=function(t){t="string"==typeof t?m(t):t;for(var e=this.root,i=0;i<t.length;){if(!(e=e.getChild(t[i])))return null;var n=e.getNode();n.isSymlink()?(t=n.symlink.concat(t.slice(i+1)),e=this.root,i=0):i++}return e},t.prototype.getResolvedLinkOrThrow=function(t,e){var i=this.getResolvedLink(t);if(!i)throw s("ENOENT",e,t);return i},t.prototype.resolveSymlinks=function(t){return this.getResolvedLink(t.steps.slice(1))},t.prototype.getLinkAsDirOrThrow=function(t,e){var i=this.getLinkOrThrow(t,e);if(!i.getNode().isDirectory())throw s("ENOTDIR",e,t);return i},t.prototype.getLinkParent=function(t){return this.root.walk(t,t.length-1)},t.prototype.getLinkParentAsDirOrThrow=function(t,e){t=t instanceof Array?t:m(t);var i=this.getLinkParent(t);if(!i)throw s("ENOENT",e,H+t.join(H));if(!i.getNode().isDirectory())throw s("ENOTDIR",e,H+t.join(H));return i},t.prototype.getFileByFd=function(t){return this.fds[String(t)]},t.prototype.getFileByFdOrThrow=function(t,e){if(t>>>0!==t)throw TypeError(A.FD);if(!(t=this.getFileByFd(t)))throw s("EBADF",e);return t},t.prototype.getNodeByIdOrCreate=function(t,e,i){if("number"==typeof t){if(!(t=this.getFileByFd(t)))throw Error("File nto found");return t.node}var n=p(t),r=this.getLink(n);if(r)return r.getNode();if(e&J&&(e=this.getLinkParent(n)))return(r=this.createLink(e,n[n.length-1],!1,i)).getNode();throw s("ENOENT","getNodeByIdOrCreate",d(t))},t.prototype.wrapAsync=function(t,e,i){var n=this;h(i),Xe.default((function(){try{i(null,t.apply(n,e))}catch(t){i(t)}}))},t.prototype._toJSON=function(t,e,i){var n;void 0===t&&(t=this.root),void 0===e&&(e={});var r=!0,o=t.children;for(var s in t.getNode().isFile()&&((n={})[t.getName()]=t.parent.getChild(t.getName()),o=n,t=t.parent),o){if(r=!1,!(o=t.getChild(s)))throw Error("_toJSON: unexpected undefined");(n=o.getNode()).isFile()?(o=o.getPath(),i&&(o=z(i,o)),e[o]=n.getString()):n.isDirectory()&&this._toJSON(o,e,i)}return t=t.getPath(),i&&(t=z(i,t)),t&&r&&(e[t]=null),e},t.prototype.toJSON=function(t,e,i){void 0===e&&(e={}),void 0===i&&(i=!1);var n=[];if(t){t instanceof Array||(t=[t]);for(var r=0;r<t.length;r++){var o=d(t[r]);(o=this.getResolvedLink(o))&&n.push(o)}}else n.push(this.root);if(!n.length)return e;for(r=0;r<n.length;r++)o=n[r],this._toJSON(o,e,i?o.getPath():"");return e},t.prototype.fromJSON=function(t,e){for(var n in void 0===e&&(e=Ve.default.cwd()),t){var r=t[n];if("string"==typeof r){var o=m(n=i(n,e));1<o.length&&(o=H+o.slice(0,o.length-1).join(H),this.mkdirpBase(o,511)),this.writeFileSync(n,r)}else this.mkdirpBase(n,511)}},t.prototype.reset=function(){this.ino=0,this.inodes={},this.releasedInos=[],this.fds={},this.releasedFds=[],this.openFiles=0,this.root=this.createLink(),this.root.setNode(this.createNode(!0))},t.prototype.mountSync=function(t,e){this.fromJSON(e,t)},t.prototype.openLink=function(t,e,i){if(void 0===i&&(i=!0),this.openFiles>=this.maxFiles)throw s("EMFILE","open",t.getPath());var n=t;if(i&&(n=this.resolveSymlinks(t)),!n)throw s("ENOENT","open",t.getPath());if((i=n.getNode()).isDirectory()){if((e&(E|x|k))!==E)throw s("EISDIR","open",t.getPath())}else if(e&j)throw s("ENOTDIR","open",t.getPath());if(!(e&k||i.canRead()))throw s("EACCES","open",t.getPath());return t=new this.props.File(t,i,e,this.newFdNumber()),this.fds[t.fd]=t,this.openFiles++,e&M&&t.truncate(),t},t.prototype.openFile=function(t,e,i,n){void 0===n&&(n=!0);var r=m(t),o=n?this.getResolvedLink(r):this.getLink(r);if(!o&&e&J){var l=this.getResolvedLink(r.slice(0,r.length-1));if(!l)throw s("ENOENT","open",H+r.join(H));e&J&&"number"==typeof i&&(o=this.createLink(l,r[r.length-1],!1,i))}if(o)return this.openLink(o,e,n);throw s("ENOENT","open",t)},t.prototype.openBase=function(t,e,i,n){if(void 0===n&&(n=!0),!(e=this.openFile(t,e,i,n)))throw s("ENOENT","open",t);return e.fd},t.prototype.openSync=function(t,e,i){return void 0===i&&(i=438),i=Y(i),t=d(t),e=l(e),this.openBase(t,e,i)},t.prototype.open=function(t,e,i,n){var r=i;"function"==typeof i&&(r=438,n=i),i=Y(r||438),t=d(t),e=l(e),this.wrapAsync(this.openBase,[t,e,i],n)},t.prototype.closeFile=function(t){this.fds[t.fd]&&(this.openFiles--,delete this.fds[t.fd],this.releasedFds.push(t.fd))},t.prototype.closeSync=function(t){W(t),t=this.getFileByFdOrThrow(t,"close"),this.closeFile(t)},t.prototype.close=function(t,e){W(t),this.wrapAsync(this.closeSync,[t],e)},t.prototype.openFileOrGetById=function(t,e,i){if("number"==typeof t){if(!(t=this.fds[t]))throw s("ENOENT");return t}return this.openFile(d(t),e,i)},t.prototype.readBase=function(t,e,i,n,r){return this.getFileByFdOrThrow(t).read(e,Number(i),Number(n),r)},t.prototype.readSync=function(t,e,i,n,r){return W(t),this.readBase(t,e,i,n,r)},t.prototype.read=function(t,e,i,n,r,o){var s=this;if(h(o),0===n)return Ve.default.nextTick((function(){o&&o(null,0,e)}));Xe.default((function(){try{var l=s.readBase(t,e,i,n,r);o(null,l,e)}catch(t){o(t)}}))},t.prototype.readFileBase=function(t,e,i){var n="number"==typeof t&&t>>>0===t;if(!n){var r=d(t);if(r=m(r),(r=this.getResolvedLink(r))&&r.getNode().isDirectory())throw s("EISDIR","open",r.getPath());t=this.openSync(t,e)}try{var o=y(this.getFileByFdOrThrow(t).getBuffer(),i)}finally{n||this.closeSync(t)}return o},t.prototype.readFileSync=function(t,e){var i=l((e=$(e)).flag);return this.readFileBase(t,i,e.encoding)},t.prototype.readFile=function(t,e,i){e=(i=u($)(e,i))[0],i=i[1];var n=l(e.flag);this.wrapAsync(this.readFileBase,[t,n,e.encoding],i)},t.prototype.writeBase=function(t,e,i,n,r){return this.getFileByFdOrThrow(t,"write").write(e,i,n,r)},t.prototype.writeSync=function(t,e,i,n,r){W(t);var o="string"!=typeof e;if(o){var s=0|(i||0),l=n;i=r}else var c=n;return e=f(e,c),o?void 0===l&&(l=e.length):(s=0,l=e.length),this.writeBase(t,e,s,l,i)},t.prototype.write=function(t,e,i,n,r,o){var s=this;W(t);var l=typeof e,c=typeof i,a=typeof n,u=typeof r;if("string"!==l)if("function"===c)var d=i;else if("function"===a){var m=0|i;d=n}else if("function"===u){m=0|i;var p=n;d=r}else{m=0|i,p=n;var b=r;d=o}else if("function"===c)d=i;else if("function"===a)b=i,d=n;else if("function"===u){b=i;var y=n;d=r}var Z=f(e,y);"string"!==l?void 0===p&&(p=Z.length):(m=0,p=Z.length);var G=h(d);Xe.default((function(){try{var i=s.writeBase(t,Z,m,p,b);G(null,i,"string"!==l?Z:e)}catch(t){G(t)}}))},t.prototype.writeFileBase=function(t,e,i,n){var r="number"==typeof t;t=r?t:this.openBase(d(t),i,n),n=0;var o=e.length;i=i&N?void 0:0;try{for(;0<o;){var s=this.writeSync(t,e,n,o,i);n+=s,o-=s,void 0!==i&&(i+=s)}}finally{r||this.closeSync(t)}},t.prototype.writeFileSync=function(t,e,i){var n=et(i);i=l(n.flag);var r=Y(n.mode);e=f(e,n.encoding),this.writeFileBase(t,e,i,r)},t.prototype.writeFile=function(t,e,i,n){var r=i;"function"==typeof i&&(r=tt,n=i),i=h(n);var o=et(r);r=l(o.flag),n=Y(o.mode),e=f(e,o.encoding),this.wrapAsync(this.writeFileBase,[t,e,r,n],i)},t.prototype.linkBase=function(t,e){var i=m(t),n=this.getLink(i);if(!n)throw s("ENOENT","link",t,e);var r=m(e);if(!(i=this.getLinkParent(r)))throw s("ENOENT","link",t,e);if(r=r[r.length-1],i.getChild(r))throw s("EEXIST","link",t,e);(t=n.getNode()).nlink++,i.createChild(r,t)},t.prototype.copyFileBase=function(t,e,i){var n=this.readFileSync(t);if(i&B&&this.existsSync(e))throw s("EEXIST","copyFile",t,e);if(i&U)throw s("ENOSYS","copyFile",t,e);this.writeFileBase(e,n,L.w,438)},t.prototype.copyFileSync=function(t,e,i){return t=d(t),e=d(e),this.copyFileBase(t,e,0|(i||0))},t.prototype.copyFile=function(t,e,i,n){if(t=d(t),e=d(e),"function"==typeof i)var r=0;else r=i,i=n;h(i),this.wrapAsync(this.copyFileBase,[t,e,r],i)},t.prototype.linkSync=function(t,e){t=d(t),e=d(e),this.linkBase(t,e)},t.prototype.link=function(t,e,i){t=d(t),e=d(e),this.wrapAsync(this.linkBase,[t,e],i)},t.prototype.unlinkBase=function(t){var e=m(t);if(!(e=this.getLink(e)))throw s("ENOENT","unlink",t);if(e.length)throw Error("Dir not empty...");this.deleteLink(e),(t=e.getNode()).nlink--,0>=t.nlink&&this.deleteNode(t)},t.prototype.unlinkSync=function(t){t=d(t),this.unlinkBase(t)},t.prototype.unlink=function(t,e){t=d(t),this.wrapAsync(this.unlinkBase,[t],e)},t.prototype.symlinkBase=function(t,e){var i=m(e),n=this.getLinkParent(i);if(!n)throw s("ENOENT","symlink",t,e);if(i=i[i.length-1],n.getChild(i))throw s("EEXIST","symlink",t,e);return(e=n.createChild(i)).getNode().makeSymlink(m(t)),e},t.prototype.symlinkSync=function(t,e){t=d(t),e=d(e),this.symlinkBase(t,e)},t.prototype.symlink=function(t,e,i,n){i=h("function"==typeof i?i:n),t=d(t),e=d(e),this.wrapAsync(this.symlinkBase,[t,e],i)},t.prototype.realpathBase=function(t,e){var i=m(t);if(!(i=this.getResolvedLink(i)))throw s("ENOENT","realpath",t);return ge.strToEncoding(i.getPath(),e)},t.prototype.realpathSync=function(t,e){return this.realpathBase(d(t),ot(e).encoding)},t.prototype.realpath=function(t,e,i){e=(i=st(e,i))[0],i=i[1],t=d(t),this.wrapAsync(this.realpathBase,[t,e.encoding],i)},t.prototype.lstatBase=function(t,e){void 0===e&&(e=!1);var i=this.getLink(m(t));if(!i)throw s("ENOENT","lstat",t);return g.default.build(i.getNode(),e)},t.prototype.lstatSync=function(t,e){return this.lstatBase(d(t),r(e).bigint)},t.prototype.lstat=function(t,e,i){e=(i=n(e,i))[0],i=i[1],this.wrapAsync(this.lstatBase,[d(t),e.bigint],i)},t.prototype.statBase=function(t,e){void 0===e&&(e=!1);var i=this.getResolvedLink(m(t));if(!i)throw s("ENOENT","stat",t);return g.default.build(i.getNode(),e)},t.prototype.statSync=function(t,e){return this.statBase(d(t),r(e).bigint)},t.prototype.stat=function(t,e,i){e=(i=n(e,i))[0],i=i[1],this.wrapAsync(this.statBase,[d(t),e.bigint],i)},t.prototype.fstatBase=function(t,e){if(void 0===e&&(e=!1),!(t=this.getFileByFd(t)))throw s("EBADF","fstat");return g.default.build(t.node,e)},t.prototype.fstatSync=function(t,e){return this.fstatBase(t,r(e).bigint)},t.prototype.fstat=function(t,e,i){e=n(e,i),this.wrapAsync(this.fstatBase,[t,e[0].bigint],e[1])},t.prototype.renameBase=function(t,e){var i=this.getLink(m(t));if(!i)throw s("ENOENT","rename",t,e);var n=m(e),r=this.getLinkParent(n);if(!r)throw s("ENOENT","rename",t,e);(t=i.parent)&&t.deleteChild(i),i.steps=_(r.steps,[n[n.length-1]]),r.setChild(i.getName(),i)},t.prototype.renameSync=function(t,e){t=d(t),e=d(e),this.renameBase(t,e)},t.prototype.rename=function(t,e,i){t=d(t),e=d(e),this.wrapAsync(this.renameBase,[t,e],i)},t.prototype.existsBase=function(t){return!!this.statBase(t)},t.prototype.existsSync=function(t){try{return this.existsBase(d(t))}catch(t){return!1}},t.prototype.exists=function(t,e){var i=this,n=d(t);if("function"!=typeof e)throw Error(A.CB);Xe.default((function(){try{e(i.existsBase(n))}catch(t){e(!1)}}))},t.prototype.accessBase=function(t){this.getLinkOrThrow(t,"access")},t.prototype.accessSync=function(t,e){void 0===e&&(e=O),t=d(t),this.accessBase(t,0|e)},t.prototype.access=function(t,e,i){var n=O;"function"!=typeof e&&(n=0|e,e=h(i)),t=d(t),this.wrapAsync(this.accessBase,[t,n],e)},t.prototype.appendFileSync=function(t,e,i){void 0===i&&(i=it),(i=nt(i)).flag&&t>>>0!==t||(i.flag="a"),this.writeFileSync(t,e,i)},t.prototype.appendFile=function(t,e,i,n){i=(n=rt(i,n))[0],n=n[1],i.flag&&t>>>0!==t||(i.flag="a"),this.writeFile(t,e,i,n)},t.prototype.readdirBase=function(t,e){var i=m(t);if(!(i=this.getResolvedLink(i)))throw s("ENOENT","readdir",t);if(!i.getNode().isDirectory())throw s("ENOTDIR","scandir",t);if(e.withFileTypes){var n=[];for(r in i.children)(t=i.getChild(r))&&n.push(We.default.build(t,e.encoding));return D||"buffer"===e.encoding||n.sort((function(t,e){return t.name<e.name?-1:t.name>e.name?1:0})),n}var r=[];for(n in i.children)r.push(ge.strToEncoding(n,e.encoding));return D||"buffer"===e.encoding||r.sort(),r},t.prototype.readdirSync=function(t,e){return e=ht(e),t=d(t),this.readdirBase(t,e)},t.prototype.readdir=function(t,e,i){e=(i=ut(e,i))[0],i=i[1],t=d(t),this.wrapAsync(this.readdirBase,[t,e],i)},t.prototype.readlinkBase=function(t,e){var i=this.getLinkOrThrow(t,"readlink").getNode();if(!i.isSymlink())throw s("EINVAL","readlink",t);return t=H+i.symlink.join(H),ge.strToEncoding(t,e)},t.prototype.readlinkSync=function(t,e){return e=Q(e),t=d(t),this.readlinkBase(t,e.encoding)},t.prototype.readlink=function(t,e,i){e=(i=q(e,i))[0],i=i[1],t=d(t),this.wrapAsync(this.readlinkBase,[t,e.encoding],i)},t.prototype.fsyncBase=function(t){this.getFileByFdOrThrow(t,"fsync")},t.prototype.fsyncSync=function(t){this.fsyncBase(t)},t.prototype.fsync=function(t,e){this.wrapAsync(this.fsyncBase,[t],e)},t.prototype.fdatasyncBase=function(t){this.getFileByFdOrThrow(t,"fdatasync")},t.prototype.fdatasyncSync=function(t){this.fdatasyncBase(t)},t.prototype.fdatasync=function(t,e){this.wrapAsync(this.fdatasyncBase,[t],e)},t.prototype.ftruncateBase=function(t,e){this.getFileByFdOrThrow(t,"ftruncate").truncate(e)},t.prototype.ftruncateSync=function(t,e){this.ftruncateBase(t,e)},t.prototype.ftruncate=function(t,e,i){var n="number"==typeof e?e:0;e=h("number"==typeof e?i:e),this.wrapAsync(this.ftruncateBase,[t,n],e)},t.prototype.truncateBase=function(t,e){t=this.openSync(t,"r+");try{this.ftruncateSync(t,e)}finally{this.closeSync(t)}},t.prototype.truncateSync=function(t,e){if(t>>>0===t)return this.ftruncateSync(t,e);this.truncateBase(t,e)},t.prototype.truncate=function(t,e,i){var n="number"==typeof e?e:0;if(e=h("number"==typeof e?i:e),t>>>0===t)return this.ftruncate(t,n,e);this.wrapAsync(this.truncateBase,[t,n],e)},t.prototype.futimesBase=function(t,e,i){(t=this.getFileByFdOrThrow(t,"futimes").node).atime=new Date(1e3*e),t.mtime=new Date(1e3*i)},t.prototype.futimesSync=function(t,e,i){this.futimesBase(t,S(e),S(i))},t.prototype.futimes=function(t,e,i,n){this.wrapAsync(this.futimesBase,[t,S(e),S(i)],n)},t.prototype.utimesBase=function(t,e,i){t=this.openSync(t,"r+");try{this.futimesBase(t,e,i)}finally{this.closeSync(t)}},t.prototype.utimesSync=function(t,e,i){this.utimesBase(d(t),S(e),S(i))},t.prototype.utimes=function(t,e,i,n){this.wrapAsync(this.utimesBase,[d(t),S(e),S(i)],n)},t.prototype.mkdirBase=function(t,e){var i=m(t);if(!i.length)throw s("EISDIR","mkdir",t);var n=this.getLinkParentAsDirOrThrow(t,"mkdir");if(i=i[i.length-1],n.getChild(i))throw s("EEXIST","mkdir",t);n.createChild(i,this.createNode(!0,e))},t.prototype.mkdirpBase=function(t,e){t=m(t);for(var i=this.root,n=0;n<t.length;n++){var r=t[n];if(!i.getNode().isDirectory())throw s("ENOTDIR","mkdir",i.getPath());var o=i.getChild(r);if(o){if(!o.getNode().isDirectory())throw s("ENOTDIR","mkdir",o.getPath());i=o}else i=i.createChild(r,this.createNode(!0,e))}},t.prototype.mkdirSync=function(t,e){var i=Y((e=o(e)).mode,511);t=d(t),e.recursive?this.mkdirpBase(t,i):this.mkdirBase(t,i)},t.prototype.mkdir=function(t,e,i){var n=o(e);e=h("function"==typeof e?e:i),i=Y(n.mode,511),t=d(t),n.recursive?this.wrapAsync(this.mkdirpBase,[t,i],e):this.wrapAsync(this.mkdirBase,[t,i],e)},t.prototype.mkdirpSync=function(t,e){this.mkdirSync(t,{mode:e,recursive:!0})},t.prototype.mkdirp=function(t,e,i){var n="function"==typeof e?void 0:e;e=h("function"==typeof e?e:i),this.mkdir(t,{mode:n,recursive:!0},e)},t.prototype.mkdtempBase=function(t,e,i){void 0===i&&(i=5);var n=t+this.genRndStr();try{return this.mkdirBase(n,511),ge.strToEncoding(n,e)}catch(n){if("EEXIST"===n.code){if(1<i)return this.mkdtempBase(t,e,i-1);throw Error("Could not create temp dir.")}throw n}},t.prototype.mkdtempSync=function(t,e){if(e=Q(e).encoding,!t||"string"!=typeof t)throw new TypeError("filename prefix is required");return Z(t),this.mkdtempBase(t,e)},t.prototype.mkdtemp=function(t,e,i){if(e=(i=q(e,i))[0].encoding,i=i[1],!t||"string"!=typeof t)throw new TypeError("filename prefix is required");Z(t)&&this.wrapAsync(this.mkdtempBase,[t,e],i)},t.prototype.rmdirBase=function(t,e){e=K({},ct,e);var i=this.getLinkAsDirOrThrow(t,"rmdir");if(i.length&&!e.recursive)throw s("ENOTEMPTY","rmdir",t);this.deleteLink(i)},t.prototype.rmdirSync=function(t,e){this.rmdirBase(d(t),e)},t.prototype.rmdir=function(t,e,i){var n=K({},ct,e);e=h("function"==typeof e?e:i),this.wrapAsync(this.rmdirBase,[d(t),n],e)},t.prototype.fchmodBase=function(t,e){this.getFileByFdOrThrow(t,"fchmod").chmod(e)},t.prototype.fchmodSync=function(t,e){this.fchmodBase(t,Y(e))},t.prototype.fchmod=function(t,e,i){this.wrapAsync(this.fchmodBase,[t,Y(e)],i)},t.prototype.chmodBase=function(t,e){t=this.openSync(t,"r+");try{this.fchmodBase(t,e)}finally{this.closeSync(t)}},t.prototype.chmodSync=function(t,e){e=Y(e),t=d(t),this.chmodBase(t,e)},t.prototype.chmod=function(t,e,i){e=Y(e),t=d(t),this.wrapAsync(this.chmodBase,[t,e],i)},t.prototype.lchmodBase=function(t,e){t=this.openBase(t,x,0,!1);try{this.fchmodBase(t,e)}finally{this.closeSync(t)}},t.prototype.lchmodSync=function(t,e){e=Y(e),t=d(t),this.lchmodBase(t,e)},t.prototype.lchmod=function(t,e,i){e=Y(e),t=d(t),this.wrapAsync(this.lchmodBase,[t,e],i)},t.prototype.fchownBase=function(t,e,i){this.getFileByFdOrThrow(t,"fchown").chown(e,i)},t.prototype.fchownSync=function(t,e,i){I(e),v(i),this.fchownBase(t,e,i)},t.prototype.fchown=function(t,e,i,n){I(e),v(i),this.wrapAsync(this.fchownBase,[t,e,i],n)},t.prototype.chownBase=function(t,e,i){this.getResolvedLinkOrThrow(t,"chown").getNode().chown(e,i)},t.prototype.chownSync=function(t,e,i){I(e),v(i),this.chownBase(d(t),e,i)},t.prototype.chown=function(t,e,i,n){I(e),v(i),this.wrapAsync(this.chownBase,[d(t),e,i],n)},t.prototype.lchownBase=function(t,e,i){this.getLinkOrThrow(t,"lchown").getNode().chown(e,i)},t.prototype.lchownSync=function(t,e,i){I(e),v(i),this.lchownBase(d(t),e,i)},t.prototype.lchown=function(t,e,i,n){I(e),v(i),this.wrapAsync(this.lchownBase,[d(t),e,i],n)},t.prototype.watchFile=function(t,e,i){t=d(t);var n=e;if("function"==typeof n&&(i=e,n=null),"function"!=typeof i)throw Error('"watchFile()" requires a listener function');e=5007;var r=!0;return n&&"object"==typeof n&&("number"==typeof n.interval&&(e=n.interval),"boolean"==typeof n.persistent&&(r=n.persistent)),(n=this.statWatchers[t])||((n=new this.StatWatcher).start(t,r,e),this.statWatchers[t]=n),n.addListener("change",i),n},t.prototype.unwatchFile=function(t,e){t=d(t);var i=this.statWatchers[t];i&&("function"==typeof e?i.removeListener("change",e):i.removeAllListeners("change"),0===i.listenerCount("change")&&(i.stop(),delete this.statWatchers[t]))},t.prototype.createReadStream=function(t,e){return new this.ReadStream(t,e)},t.prototype.createWriteStream=function(t,e){return new this.WriteStream(t,e)},t.prototype.watch=function(t,e,i){t=d(t);var n=e;"function"==typeof e&&(i=e,n=null);var r=Q(n);e=r.persistent,n=r.recursive,r=r.encoding,void 0===e&&(e=!0),void 0===n&&(n=!1);var o=new this.FSWatcher;return o.start(t,e,n,r),i&&o.addListener("change",i),o},t.fd=2147483647,t}(),e.Volume=t;var ft,bt=function(t){function e(e){var i=t.call(this)||this;return i.onInterval=function(){try{var t=i.vol.statSync(i.filename);i.hasChanged(t)&&(i.emit("change",t,i.prev),i.prev=t)}finally{i.loop()}},i.vol=e,i}return T(e,t),e.prototype.loop=function(){this.timeoutRef=this.setTimeout(this.onInterval,this.interval)},e.prototype.hasChanged=function(t){return t.mtimeMs>this.prev.mtimeMs||t.nlink!==this.prev.nlink},e.prototype.start=function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=5007),this.filename=d(t),this.setTimeout=e?setTimeout:xe.default,this.interval=i,this.prev=this.vol.statSync(this.filename),this.loop()},e.prototype.stop=function(){clearTimeout(this.timeoutRef),Ve.default.nextTick(R,this)},e}(Te.EventEmitter);e.StatWatcher=bt,ee.inherits(X,vi.Readable),e.ReadStream=X,X.prototype.open=function(){var t=this;this._vol.open(this.path,this.flags,this.mode,(function(e,i){e?(t.autoClose&&t.destroy&&t.destroy(),t.emit("error",e)):(t.fd=i,t.emit("open",i),t.read())}))},X.prototype._read=function(t){if("number"!=typeof this.fd)return this.once("open",(function(){this._read(t)}));if(!this.destroyed){(!ft||128>ft.length-ft.used)&&((ft=at.bufferAllocUnsafe(this._readableState.highWaterMark)).used=0);var e=ft,i=Math.min(ft.length-ft.used,t),n=ft.used;if(void 0!==this.pos&&(i=Math.min(this.end-this.pos+1,i)),0>=i)return this.push(null);var r=this;this._vol.read(this.fd,ft,ft.used,i,this.pos,(function(t,i){t?(r.autoClose&&r.destroy&&r.destroy(),r.emit("error",t)):(t=null,0<i&&(r.bytesRead+=i,t=e.slice(n,n+i)),r.push(t))})),void 0!==this.pos&&(this.pos+=i),ft.used+=i}},X.prototype._destroy=function(t,e){this.close((function(i){e(t||i)}))},X.prototype.close=function(t){var e=this;if(t&&this.once("close",t),this.closed||"number"!=typeof this.fd)return"number"!=typeof this.fd?void this.once("open",V):Ve.default.nextTick((function(){return e.emit("close")}));this.closed=!0,this._vol.close(this.fd,(function(t){t?e.emit("error",t):e.emit("close")})),this.fd=null},ee.inherits(C,vi.Writable),e.WriteStream=C,C.prototype.open=function(){this._vol.open(this.path,this.flags,this.mode,function(t,e){t?(this.autoClose&&this.destroy&&this.destroy(),this.emit("error",t)):(this.fd=e,this.emit("open",e))}.bind(this))},C.prototype._write=function(t,e,i){if(!(t instanceof at.Buffer))return this.emit("error",Error("Invalid data"));if("number"!=typeof this.fd)return this.once("open",(function(){this._write(t,e,i)}));var n=this;this._vol.write(this.fd,t,0,t.length,this.pos,(function(t,e){if(t)return n.autoClose&&n.destroy&&n.destroy(),i(t);n.bytesWritten+=e,i()})),void 0!==this.pos&&(this.pos+=t.length)},C.prototype._writev=function(t,e){if("number"!=typeof this.fd)return this.once("open",(function(){this._writev(t,e)}));for(var i=this,n=t.length,r=Array(n),o=0,s=0;s<n;s++){var l=t[s].chunk;r[s]=l,o+=l.length}n=at.Buffer.concat(r),this._vol.write(this.fd,n,0,n.length,this.pos,(function(t,n){if(t)return i.destroy&&i.destroy(),e(t);i.bytesWritten+=n,e()})),void 0!==this.pos&&(this.pos+=o)},C.prototype._destroy=X.prototype._destroy,C.prototype.close=X.prototype.close,C.prototype.destroySoon=C.prototype.end;var yt=function(t){function e(e){var i=t.call(this)||this;return i._filename="",i._filenameEncoded="",i._recursive=!1,i._encoding=ge.ENCODING_UTF8,i._onNodeChange=function(){i._emit("change")},i._onParentChild=function(t){t.getName()===i._getName()&&i._emit("rename")},i._emit=function(t){i.emit("change",t,i._filenameEncoded)},i._persist=function(){i._timer=setTimeout(i._persist,1e6)},i._vol=e,i}return T(e,t),e.prototype._getName=function(){return this._steps[this._steps.length-1]},e.prototype.start=function(t,e,i,n){void 0===e&&(e=!0),void 0===i&&(i=!1),void 0===n&&(n=ge.ENCODING_UTF8),this._filename=d(t),this._steps=m(this._filename),this._filenameEncoded=ge.strToEncoding(this._filename),this._recursive=i,this._encoding=n;try{this._link=this._vol.getLinkOrThrow(this._filename,"FSWatcher")}catch(t){throw(e=Error("watch "+this._filename+" "+t.code)).code=t.code,e.errno=t.code,e}this._link.getNode().on("change",this._onNodeChange),this._link.on("child:add",this._onNodeChange),this._link.on("child:delete",this._onNodeChange),(t=this._link.parent)&&(t.setMaxListeners(t.getMaxListeners()+1),t.on("child:delete",this._onParentChild)),e&&this._persist()},e.prototype.close=function(){clearTimeout(this._timer),this._link.getNode().removeListener("change",this._onNodeChange);var t=this._link.parent;t&&t.removeListener("child:delete",this._onParentChild)},e}(Te.EventEmitter);e.FSWatcher=yt}));y(sn);var ln=sn.pathToFilename,cn=sn.filenameToSteps,an=sn.Volume,hn=Z((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.fsProps="constants F_OK R_OK W_OK X_OK Stats".split(" "),e.fsSyncMethods="renameSync ftruncateSync truncateSync chownSync fchownSync lchownSync chmodSync fchmodSync lchmodSync statSync lstatSync fstatSync linkSync symlinkSync readlinkSync realpathSync unlinkSync rmdirSync mkdirSync mkdirpSync readdirSync closeSync openSync utimesSync futimesSync fsyncSync writeSync readSync readFileSync writeFileSync appendFileSync existsSync accessSync fdatasyncSync mkdtempSync copyFileSync createReadStream createWriteStream".split(" "),e.fsAsyncMethods="rename ftruncate truncate chown fchown lchown chmod fchmod lchmod stat lstat fstat link symlink readlink realpath unlink rmdir mkdir mkdirp readdir close open utimes futimes fsync write read readFile writeFile appendFile exists access fdatasync mkdtemp copyFile watchFile unwatchFile watch".split(" ")}));y(hn);var un=Z((function(t,e){function i(t){for(var e={F_OK:s,R_OK:l,W_OK:c,X_OK:a,constants:G.constants,Stats:g.default,Dirent:We.default},i=0,n=r;i<n.length;i++){var h=n[i];"function"==typeof t[h]&&(e[h]=t[h].bind(t))}for(i=0,n=o;i<n.length;i++)"function"==typeof t[h=n[i]]&&(e[h]=t[h].bind(t));return e.StatWatcher=t.StatWatcher,e.FSWatcher=t.FSWatcher,e.WriteStream=t.WriteStream,e.ReadStream=t.ReadStream,e.promises=t.promises,e._toUnixTimestamp=sn.toUnixTimestamp,e}var n=b&&b.__assign||function(){return n=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},n.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r=hn.fsSyncMethods,o=hn.fsAsyncMethods,s=G.constants.F_OK,l=G.constants.R_OK,c=G.constants.W_OK,a=G.constants.X_OK;e.Volume=sn.Volume,e.vol=new sn.Volume,e.createFsFromVolume=i,e.fs=i(e.vol),t.exports=n(n({},t.exports),e.fs),t.exports.semantic=!0}));y(un);var dn=un.createFsFromVolume;ke.prototype.emit=function(t){for(var e,i,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];r=this.listeners(t);try{for(var o=m(r),s=o.next();!s.done;s=o.next()){var l=s.value;try{l.apply(void 0,f(n))}catch(t){console.error(t)}}}catch(t){e={error:t}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(e)throw e.error}}return 0<r.length};var mn=function(){function t(){this.volume=new an,this.fs=dn(this.volume),this.fromJSON({"/dev/stdin":"","/dev/stdout":"","/dev/stderr":""})}return t.prototype._toJSON=function(t,e,i){void 0===e&&(e={});var n,r=!0;for(n in t.children){r=!1;var o=t.getChild(n);if(o){var s=o.getNode();s&&s.isFile()?(o=o.getPath(),i&&(o=Ie(i,o)),e[o]=s.getBuffer()):s&&s.isDirectory()&&this._toJSON(o,e,i)}}return t=t.getPath(),i&&(t=Ie(i,t)),t&&r&&(e[t]=null),e},t.prototype.toJSON=function(t,e,i){var n,r;void 0===e&&(e={}),void 0===i&&(i=!1);var o=[];if(t){t instanceof Array||(t=[t]);try{for(var s=m(t),l=s.next();!l.done;l=s.next()){var c=ln(l.value),a=this.volume.getResolvedLink(c);a&&o.push(a)}}catch(t){var h={error:t}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(h)throw h.error}}}else o.push(this.volume.root);if(!o.length)return e;try{for(var u=m(o),d=u.next();!d.done;d=u.next())a=d.value,this._toJSON(a,e,i?a.getPath():"")}catch(t){var p={error:t}}finally{try{d&&!d.done&&(r=u.return)&&r.call(u)}finally{if(p)throw p.error}}return e},t.prototype.fromJSONFixed=function(t,e){for(var i in e){var n=e[i];if(n?null!==Object.getPrototypeOf(n):null!==n){var r=cn(i);1<r.length&&(r="/"+r.slice(0,r.length-1).join("/"),t.mkdirpBase(r,511)),t.writeFileSync(i,n||"")}else t.mkdirpBase(i,511)}},t.prototype.fromJSON=function(t){this.volume=new an,this.fromJSONFixed(this.volume,t),this.fs=dn(this.volume),this.volume.releasedFds=[0,1,2],t=this.volume.openSync("/dev/stderr","w");var e=this.volume.openSync("/dev/stdout","w"),i=this.volume.openSync("/dev/stdin","r");if(2!==t)throw Error("invalid handle for stderr: "+t);if(1!==e)throw Error("invalid handle for stdout: "+e);if(0!==i)throw Error("invalid handle for stdin: "+i)},t.prototype.getStdOut=function(){return function(t,e,i,n){return new(i||(i=Promise))((function(e,r){function o(t){try{l(n.next(t))}catch(t){r(t)}}function s(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?e(t.value):new i((function(e){e(t.value)})).then(o,s)}l((n=n.apply(t,[])).next())}))}(this,0,void 0,(function(){var t=this;return function(t,e){function i(t){return function(e){return n([t,e])}}function n(i){if(r)throw new TypeError("Generator is already executing.");for(;c;)try{if(r=1,o&&(s=2&i[0]?o.return:i[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,i[1])).done)return s;switch(o=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(s=0<(s=c.trys).length&&s[s.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3]))c.label=i[1];else if(6===i[0]&&c.label<s[1])c.label=s[1],s=i;else{if(!(s&&c.label<s[2])){s[2]&&c.ops.pop(),c.trys.pop();continue}c.label=s[2],c.ops.push(i)}}i=e.call(t,c)}catch(t){i=[6,t],o=0}finally{r=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var r,o,s,l,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return l={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l}(this,(function(){return[2,new Promise((function(e){e(t.fs.readFileSync("/dev/stdout","utf8"))}))]}))}))},t}();function pn(t){if(!t)throw Error("You must provide a config for the Wasm terminal.");if(!t.fetchCommand)throw Error("You must provide a fetchCommand for the Wasm terminal config, to handle fetching commands to be run");t.processWorkerUrl||console.warn("Note: It is HIGHLY reccomended you pass in the processWorkerUrl in the terminal config to create process workers. Without this, some wasi programs will not work."),t.processWorkerUrl&&console.warn("The unoptimized bundle of wasm-terminal is currently being used. The process worker does not need to be passed, as it is already inlined into the bundle. If you would like to pass in the process worker url and improve performance, please use the optimized bundle. Instructions can be found in the documentation."),this.fetchCommand=t.fetchCommand,this.processWorkerUrl=t.processWorkerUrl,this.wasmFs=t.wasmFs?t.wasmFs:new mn}function fn(t,e){return fn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},fn(t,e)}function bn(t,e){function i(){this.constructor=t}fn(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function yn(){return yn=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},yn.apply(this,arguments)}function Zn(t,e,i,n){return new(i||(i=Promise))((function(r,o){function s(t){try{c(n.next(t))}catch(t){o(t)}}function l(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){t.done?r(t.value):new i((function(e){e(t.value)})).then(s,l)}c((n=n.apply(t,e||[])).next())}))}function Gn(t,e){function i(t){return function(e){return n([t,e])}}function n(i){if(r)throw new TypeError("Generator is already executing.");for(;c;)try{if(r=1,o&&(s=2&i[0]?o.return:i[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,i[1])).done)return s;switch(o=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(s=0<(s=c.trys).length&&s[s.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3]))c.label=i[1];else if(6===i[0]&&c.label<s[1])c.label=s[1],s=i;else{if(!(s&&c.label<s[2])){s[2]&&c.ops.pop(),c.trys.pop();continue}c.label=s[2],c.ops.push(i)}}i=e.call(t,c)}catch(t){i=[6,t],o=0}finally{r=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var r,o,s,l,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return l={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l}function Yn(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;t=i.call(t);var n,r=[];try{for(;(void 0===e||0<e--)&&!(n=t.next()).done;)r.push(n.value)}catch(t){var o={error:t}}finally{try{n&&!n.done&&(i=t.return)&&i.call(t)}finally{if(o)throw o.error}}return r}function gn(t,e,i){for(var n=0,r=0,o=0;o<e;++o)("\n"===t.charAt(o)||(r+=1)>i)&&(r=0,n+=1);return{row:n,col:r}}for(var Wn=function(){function t(t){this._firstInit=!0,this.xterm=t,this._termSize={cols:this.xterm.cols,rows:this.xterm.rows},this._input=this._continuationPromptPrefix=this._promptPrefix="",this._cursor=0}return t.prototype._getAsyncRead=function(){var t,e,i=this;return{promise:new Promise((function(n,r){t=function(t){i._promptPrefix="",i._continuationPromptPrefix="",n(t)},e=r})),resolve:t,reject:e}},t.prototype.read=function(t,e){return void 0===e&&(e="> "),0<t.length&&this.print(t),this._firstInit=!0,this._promptPrefix=t,this._continuationPromptPrefix=e,this._input="",this._cursor=0,yn({promptPrefix:t,continuationPromptPrefix:e},this._getAsyncRead())},t.prototype.readChar=function(t){return 0<t.length&&this.print(t),yn({promptPrefix:t},this._getAsyncRead())},t.prototype.println=function(t){this.print(t+"\n")},t.prototype.print=function(t,e){var i=this;t=t.replace(/[\r\n]+/g,"\n").replace(/\n/g,"\r\n"),e?(this.xterm._core.writeSync(t),this.xterm._core._renderService._renderer._runOperation((function(t){return t.onGridChanged(0,i.xterm.rows-1)}))):this.xterm.write(t)},t.prototype.printWide=function(t,e){if(void 0===e&&(e=2),0===t.length)return this.println("");e=t.reduce((function(t,e){return Math.max(t,e.length)}),0)+e;for(var i=Math.floor(this._termSize.cols/e),n=Math.ceil(t.length/i),r=0,o=0;o<n;++o){for(var s="",l=0;l<i;++l)if(r<t.length){var c=t[r++];s+=c+=" ".repeat(e-c.length)}this.println(s)}},t.prototype.printStatus=function(t,e){this.print("[s",e),this.print(t,e)},t.prototype.clearStatus=function(t){this.print("[u",t),this.print("[1000D",t),this.print("[0J",t)},t.prototype.applyPrompts=function(t){return this._promptPrefix+t.replace(/\n/g,"\n"+this._continuationPromptPrefix)},t.prototype.applyPromptOffset=function(t,e){return this.applyPrompts(t.substr(0,e)).length},t.prototype.clearInput=function(){var t=this.applyPrompts(this._input),e=gn(t,t.length,this._termSize.cols).row+1,i=this.applyPromptOffset(this._input,this._cursor);for(t=e-(t=gn(t,i,this._termSize.cols).row)-1,i=0;i<t;++i)this.xterm.write("[E");for(this.xterm.write("\r[K"),i=1;i<e;++i)this.xterm.write("[F[K")},t.prototype.clearTty=function(){this.xterm.write("[2J"),this.xterm.write("[0;0H"),this._cursor=0},t.prototype.getFirstInit=function(){return this._firstInit},t.prototype.getPromptPrefix=function(){return this._promptPrefix},t.prototype.getContinuationPromptPrefix=function(){return this._continuationPromptPrefix},t.prototype.getTermSize=function(){return this._termSize},t.prototype.getInput=function(){return this._input},t.prototype.getCursor=function(){return this._cursor},t.prototype.getSize=function(){return this._termSize},t.prototype.getBuffer=function(){return this.xterm.buffer},t.prototype.setInput=function(t,e){void 0===e&&(e=!1),e||this.clearInput();var i=this.applyPrompts(t);this.print(i),this._cursor>t.length&&(this._cursor=t.length);var n=this.applyPromptOffset(t,this._cursor);for(e=gn(i,i.length,this._termSize.cols).row+1,i=(n=gn(i,n,this._termSize.cols)).col,e=e-n.row-1,this.xterm.write("\r"),n=0;n<e;++n)this.xterm.write("[F");for(n=0;n<i;++n)this.xterm.write("[C");this._input=t},t.prototype.setCursor=function(t){0>t&&(t=0),t>this._input.length&&(t=this._input.length),this._writeCursorPosition(t)},t.prototype.setCursorDirectly=function(t){this._writeCursorPosition(t)},t.prototype._writeCursorPosition=function(t){var e=this.applyPrompts(this._input);gn(e,e.length,this._termSize.cols);var i=this.applyPromptOffset(this._input,this._cursor),n=gn(e,i,this._termSize.cols);i=n.col,n=n.row;var r=this.applyPromptOffset(this._input,t);if(e=(r=gn(e,r,this._termSize.cols)).col,(r=r.row)>n)for(var o=n;o<r;++o)this.xterm.write("[B");else for(o=r;o<n;++o)this.xterm.write("[A");if(e>i)for(o=i;o<e;++o)this.xterm.write("[C");else for(o=e;o<i;++o)this.xterm.write("[D");this._cursor=t},t.prototype.setTermSize=function(t,e){this._termSize={cols:t,rows:e}},t.prototype.setFirstInit=function(t){this._firstInit=t},t.prototype.setPromptPrefix=function(t){this._promptPrefix=t},t.prototype.setContinuationPromptPrefix=function(t){this._continuationPromptPrefix=t},t}(),Sn="",In=0;4>In;In++)Sn+=(Math.pow(16,8)*Math.random()).toString(16);function vn(t,e,i){return t=function(t,e,i){var n=t.match(/((?:\|\||\&\&|;;|\|\&|\<\(|>>|>\&|[&;()|<>]))|((\\['"|&;()<> \t]|[^\s'"|&;()<> \t])+|"((\\"|[^"])*?)"|'((\\'|[^'])*?)')*/g).filter(Boolean),r=!1;return n?(e||(e={}),i||(i={}),n.map((function(t,o){function s(){if(d+=1,"{"===t.charAt(d)){if(d+=1,"}"===t.charAt(d))throw Error("Bad substitution: "+t.substr(d-2,3));var i=t.indexOf("}",d);if(0>i)throw Error("Bad substitution: "+t.substr(d));var n=t.substr(d,i-d);d=i}else/[*@#?$!_\-]/.test(t.charAt(d))?(n=t.charAt(d),d+=1):(i=t.substr(d).match(/[^\w\d_]/))?(n=t.substr(d,i.index),d+=i.index-1):(n=t.substr(d),d=t.length);return i=n,void 0===(n="function"==typeof e?e(i):e[i])&&""!=i?n="":void 0===n&&(n="$"),"object"==typeof n?""+Sn+JSON.stringify(n)+Sn:""+n}if(!r){if(/^(?:\|\||\&\&|;;|\|\&|\<\(|>>|>\&|[&;()|<>])$/.test(t))return{op:t};for(var l=i.escape||"\\",c=!1,a=!1,h="",u=!1,d=0,m=t.length;d<m;d++){var p=t.charAt(d);if(u=u||!c&&("*"===p||"?"===p),a)h+=p,a=!1;else if(c)p===c?c=!1:"'"==c?h+=p:p===l?(d+=1,h='"'===(p=t.charAt(d))||p===l||"$"===p?h+p:h+(l+p)):h="$"===p?h+s():h+p;else if('"'===p||"'"===p)c=p;else{if(/^(?:\|\||\&\&|;;|\|\&|\<\(|>>|>\&|[&;()|<>])$/.test(p))return{op:t};if(/^#$/.test(p))return r=!0,h.length?[h,{comment:t.slice(d+1)+n.slice(o+1).join(" ")}]:[{comment:t.slice(d+1)+n.slice(o+1).join(" ")}];p===l?a=!0:h="$"===p?h+s():h+p}}return u?{op:"glob",pattern:h}:h}})).reduce((function(t,e){return void 0===e?t:t.concat(e)}),[])):[]}(t,e,i),"function"!=typeof e?t:t.reduce((function(t,e){return"object"==typeof e?t.concat(e):1===(e=e.split(RegExp("("+Sn+".*?"+Sn+")","g"))).length?t.concat(e[0]):t.concat(e.filter(Boolean).map((function(t){return RegExp("^"+Sn).test(t)?JSON.parse(t.split(Sn)[1]):t})))}),[])}function Rn(t,e){void 0===e&&(e=!0);var i,n=[],r=/\w+/g;for(i=r.exec(t);i;)e?n.push(i.index):n.push(i.index+i[0].length),i=r.exec(t);return n}function Xn(t,e){return void 0===(t=Rn(t,!0).reverse().find((function(t){return t<e})))?0:t}function Vn(t){return null!==t.match(/[^\\][ \t]$/m)}var Cn=function(){function t(t){this.size=t,this.entries=[],this.cursor=0}return t.prototype.push=function(t){""!==t.trim()&&t!==this.entries[this.entries.length-1]&&(this.entries.push(t),this.entries.length>this.size&&this.entries.pop(),this.cursor=this.entries.length)},t.prototype.includes=function(t){return this.entries.includes(t)},t.prototype.rewind=function(){this.cursor=this.entries.length},t.prototype.getPrevious=function(){var t=Math.max(0,this.cursor-1);return this.cursor=t,this.entries[t]},t.prototype.getNext=function(){var t=Math.min(this.entries.length,this.cursor+1);return this.cursor=t,this.entries[t]},t}();let Tn=Symbol("Comlink.proxy"),_n=Symbol("Comlink.endpoint"),Ln=Symbol("Comlink.releaseProxy"),Kn=new WeakSet,wn=new Map([["proxy",{canHandle:t=>t&&t[Tn],serialize(t){const{port1:e,port2:i}=new MessageChannel;return En(t,e),[i,[i]]},deserialize:t=>(t.start(),xn(t,[],void 0))}],["throw",{canHandle:t=>Kn.has(t),serialize(t){const e=t instanceof Error;let i=t;return e&&(i={isError:e,message:t.message,stack:t.stack}),[i,[]]},deserialize(t){if(t.isError)throw Object.assign(Error(),t);throw t}}]]);function En(t,e=self){e.addEventListener("message",(function i(n){if(n&&n.data){var{id:r,type:o,path:s}=Object.assign({path:[]},n.data),l=(n.data.argumentList||[]).map(Fn);try{let e=s.slice(0,-1).reduce(((t,e)=>t[e]),t),i=s.reduce(((t,e)=>t[e]),t);switch(o){case 0:var c=i;break;case 1:e[s.slice(-1)[0]]=Fn(n.data.value),c=!0;break;case 2:c=i.apply(e,l);break;case 3:c=Mn(new i(...l));break;case 4:{let{port1:e,port2:i}=new MessageChannel;En(t,i),c=function(t,e){return Pn.set(t,e),t}(e,[e])}break;case 5:c=void 0}}catch(t){c=t,Kn.add(t)}Promise.resolve(c).catch((t=>(Kn.add(t),t))).then((t=>{let[n,s]=Nn(t);e.postMessage(Object.assign(Object.assign({},n),{id:r}),s),5===o&&(e.removeEventListener("message",i),"MessagePort"===e.constructor.name&&e.close())}))}})),e.start&&e.start()}function kn(t){if(t)throw Error("Proxy has been released and is not useable")}function xn(t,e=[],i=function(){}){let n=!1,r=new Proxy(i,{get:(i,o)=>(kn(n),o===Ln?()=>jn(t,{type:5,path:e.map((t=>t.toString()))}).then((()=>{"MessagePort"===t.constructor.name&&t.close(),n=!0})):"then"===o?0===e.length?{then:()=>r}:(i=jn(t,{type:0,path:e.map((t=>t.toString()))}).then(Fn),i.then.bind(i)):xn(t,[...e,o])),set(i,r,o){kn(n);const[s,l]=Nn(o);return jn(t,{type:1,path:[...e,r].map((t=>t.toString())),value:s},l).then(Fn)},apply(i,r,o){if(kn(n),(i=e[e.length-1])===_n)return jn(t,{type:4}).then(Fn);if("bind"===i)return xn(t,e.slice(0,-1));const[s,l]=Jn(o);return jn(t,{type:2,path:e.map((t=>t.toString())),argumentList:s},l).then(Fn)},construct(i,r){kn(n);const[o,s]=Jn(r);return jn(t,{type:3,path:e.map((t=>t.toString())),argumentList:o},s).then(Fn)}});return r}function Jn(t){return[(t=t.map(Nn)).map((t=>t[0])),Array.prototype.concat.apply([],t.map((t=>t[1])))]}let Pn=new WeakMap;function Mn(t){return Object.assign(t,{[Tn]:!0})}function Nn(t){for(let[e,i]of wn)if(i.canHandle(t)){let[n,r]=i.serialize(t);return[{type:3,name:e,value:n},r]}return[{type:0,value:t},Pn.get(t)||[]]}function Fn(t){switch(t.type){case 3:return wn.get(t.name).deserialize(t.value);case 0:return t.value}}function jn(t,e,i){return new Promise((n=>{let r=Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-");t.addEventListener("message",(function e(i){i.data&&i.data.id&&i.data.id===r&&(t.removeEventListener("message",e),n(i.data))})),t.start&&t.start(),t.postMessage(Object.assign({id:r},e),i)}))}var On=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)};function Bn(t,e){if(t.map)return t.map(e);for(var i=[],n=0;n<t.length;n++){var r=t[n];Un.call(t,n)&&i.push(e(r,n,t))}return i}var Un=Object.prototype.hasOwnProperty;function Hn(t,e){return e?"string"==typeof e&&(e={startRule:e}):e={},zn.parse(t,e)}var zn=function(){function t(t,e,i,n,r,o){this.message=t,this.expected=e,this.found=i,this.offset=n,this.line=r,this.column=o,this.name="SyntaxError"}return function(t,e){function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i}(t,Error),{SyntaxError:t,parse:function e(i){function n(t){qe<ii||(qe>ii&&(ii=qe,ni=[]),ni.push(t))}function r(){var t,e,i=qe,n=[],r=qe,s=[];for(t=w();t!==N;)s.push(t),t=w();if(s!==N)if((t=o())!==N){var l=[];for(e=w();e!==N;)l.push(e),e=w();l!==N?r=s=[s,t,l]:(qe=r,r=O)}else qe=r,r=O;else qe=r,r=O;if(r!==N)for(;r!==N;){for(n.push(r),r=qe,s=[],t=w();t!==N;)s.push(t),t=w();if(s!==N)if((t=o())!==N){for(l=[],e=w();e!==N;)l.push(e),e=w();l!==N?r=s=[s,t,l]:(qe=r,r=O)}else qe=r,r=O;else qe=r,r=O}else n=O;return n!==N&&($e=i,n=function(t){var e=[];return si(t,(function(t){e=e.concat(t[1])})),e}(n)),n}function o(){var t,e;ri++;var i=qe,r=s();if(r!==N){var o=[],c=qe,a=[];for(t=K();t!==N;)a.push(t),t=K();if(a!==N)if((t=l())!==N){var h=[];for(e=w();e!==N;)h.push(e),e=w();h!==N&&(e=s())!==N?c=a=[a,t,h,e]:(qe=c,c=O)}else qe=c,c=O;else qe=c,c=O;for(;c!==N;){for(o.push(c),c=qe,a=[],t=K();t!==N;)a.push(t),t=K();if(a!==N)if((t=l())!==N){for(h=[],e=w();e!==N;)h.push(e),e=w();h!==N&&(e=s())!==N?c=a=[a,t,h,e]:(qe=c,c=O)}else qe=c,c=O;else qe=c,c=O}if(o!==N){for(c=qe,a=[],t=K();t!==N;)a.push(t),t=K();a!==N&&(t=l())!==N?c=a=[a,t]:(qe=c,c=O),c===N&&(c=U),c!==N?($e=i,i=r=function(t,e){var i=[t],n=t;return si(e,(function(t){for(var e=n;e.next;)e=e.next;e.control=t[1],i.push(n=t[3])})),i}(r,o)):(qe=i,i=O)}else qe=i,i=O}else qe=i,i=O;return ri--,i===N&&0===ri&&n(B),i}function s(){var t=qe,e=c();if(e===N&&(e=u())===N){var o,l=qe;if(i.substr(qe,5)===rt?(e=rt,qe+=5):(e=N,0===ri&&n(ot)),e===N&&(i.substr(qe,5)===st?(e=st,qe+=5):(e=N,0===ri&&n(lt))),e!==N){var d=[],m=w();if(m!==N)for(;m!==N;)d.push(m),m=w();else d=O;if(d!==N)if((m=h())!==N){for(d=[],o=w();o!==N;)d.push(o),o=w();d!==N?(i.substr(qe,2)===ct?(o=ct,qe+=2):(o=N,0===ri&&n(at)),o!==N&&(d=w())!==N&&(d=r())!==N?(i.substr(qe,4)===ht?(o=ht,qe+=4):(o=N,0===ri&&n(ut)),o!==N?($e=l,l=e={type:e+"-loop",test:m,body:d}):(qe=l,l=O)):(qe=l,l=O)):(qe=l,l=O)}else qe=l,l=O;else qe=l,l=O}else qe=l,l=O;if((e=l)===N){if(l=qe,i.substr(qe,2)===dt?(e=dt,qe+=2):(e=N,0===ri&&n(mt)),e!==N){if(m=[],(e=w())!==N)for(;e!==N;)m.push(e),e=w();else m=O;if(m!==N)if((e=r())!==N)if(i.substr(qe,4)===pt?(m=pt,qe+=4):(m=N,0===ri&&n(ft)),m!==N){if(d=[],(m=w())!==N)for(;m!==N;)d.push(m),m=w();else d=O;if(d!==N)if((m=r())!==N){for(d=[],o=a();o!==N;)d.push(o),o=a();if(d!==N){if(o=qe,i.substr(qe,4)===bt){var p=bt;qe+=4}else p=N,0===ri&&n(yt);if(p!==N){var f=r();f!==N?o=p=[p,f]:(qe=o,o=O)}else qe=o,o=O;o===N&&(o=U),o!==N?(i.substr(qe,2)===Zt?(p=Zt,qe+=2):(p=N,0===ri&&n(Gt)),p!==N?($e=l,l=e={type:"ifElse",test:e,body:m,elifBlocks:d.length?d:null,elseBody:o?o[1]:null}):(qe=l,l=O)):(qe=l,l=O)}else qe=l,l=O}else qe=l,l=O;else qe=l,l=O}else qe=l,l=O;else qe=l,l=O;else qe=l,l=O}else qe=l,l=O;e=l}}if(e!==N){for(l=qe,m=[],d=K();d!==N;)m.push(d),d=K();if(m!==N){if(d=qe,i.substr(qe,2)===H?(o=H,qe+=2):(o=N,0===ri&&n(z)),o===N&&(i.substr(qe,2)===D?(o=D,qe+=2):(o=N,0===ri&&n(A))),o!==N){for(p=[],f=w();f!==N;)p.push(f),f=w();p!==N&&(f=s())!==N?($e=d,d=o=[o,f]):(qe=d,d=O)}else qe=d,d=O;d!==N?l=m=[m,d]:(qe=l,l=O)}else qe=l,l=O;l===N&&(l=U),l!==N?($e=t,t=e,void 0!==l&&l?(l=l[1],t.control=l[0],t.next=l[1]):(t.control=";",t.next=null)):(qe=t,t=O)}else qe=t,t=O;return t}function l(){var t=qe;if(38===i.charCodeAt(qe)){var e=Q;qe++}else e=N,0===ri&&n(q);return e===N&&(59===i.charCodeAt(qe)?(e=$,qe++):(e=N,0===ri&&n(tt)),e===N&&(10===i.charCodeAt(qe)?(e=et,qe++):(e=N,0===ri&&n(it)))),e!==N&&($e=t,e="\n"==e?";":e),e}function c(){ri++;var t=qe,e=[],r=qe,o=u();if(o===N&&(o=_()),o!==N){var s=[],l=K();if(l!==N)for(;l!==N;)s.push(l),l=K();else s=O;s!==N?r=o=[o,s]:(qe=r,r=O)}else qe=r,r=O;for(;r!==N;)if(e.push(r),r=qe,(o=u())===N&&(o=_()),o!==N){if(s=[],(l=K())!==N)for(;l!==N;)s.push(l),l=K();else s=O;s!==N?r=o=[o,s]:(qe=r,r=O)}else qe=r,r=O;if(e!==N)if((r=d())===N&&(r=m()),r!==N){o=[],s=qe,l=[];var a=K();if(a!==N)for(;a!==N;)l.push(a),a=K();else l=O;for(l!==N?((a=_())===N&&(a=p()),a!==N?s=l=[l,a]:(qe=s,s=O)):(qe=s,s=O);s!==N;){if(o.push(s),s=qe,l=[],(a=K())!==N)for(;a!==N;)l.push(a),a=K();else l=O;l!==N?((a=_())===N&&(a=p()),a!==N?s=l=[l,a]:(qe=s,s=O)):(qe=s,s=O)}if(o!==N){for(s=qe,l=[],a=K();a!==N;)l.push(a),a=K();if(l!==N){var h;if(a=qe,124===i.charCodeAt(qe)){var f=We;qe++}else f=N,0===ri&&n(Se);if(f!==N){for(f=[],h=w();h!==N;)f.push(h),h=w();f!==N&&(h=c())!==N?($e=a,a=f={type:"pipe",command:h}):(qe=a,a=O)}else qe=a,a=O;a!==N?s=l=[l,a]:(qe=s,s=O)}else qe=s,s=O;s===N&&(s=U),s!==N?($e=t,t=e=function(t,e,i,n){var r={type:"command",command:e,args:[],redirects:[],env:{},control:";",next:null};return si(t,x).concat(si(i,J)).forEach((function(t){if(t&&t.type)switch(t.type){case"moveFd":case"duplicateFd":case"redirectFd":return r.redirects.push(t);case"variableAssignment":return r.env[t.name]=t.value;default:r.args.push(t)}})),n&&r.redirects.push(n[1]),r}(e,r,o,s)):(qe=t,t=O)}else qe=t,t=O}else qe=t,t=O;else qe=t,t=O;return ri--,t===N&&0===ri&&n(nt),t}function a(){var t=qe;if(i.substr(qe,4)===Yt){var e=Yt;qe+=4}else e=N,0===ri&&n(gt);if(e!==N){var o=[];if((e=w())!==N)for(;e!==N;)o.push(e),e=w();else o=O;if(o!==N)if((e=h())!==N)if(i.substr(qe,4)===pt?(o=pt,qe+=4):(o=N,0===ri&&n(ft)),o!==N){o=[];var s=w();if(s!==N)for(;s!==N;)o.push(s),s=w();else o=O;o!==N&&(s=r())!==N?($e=t,t=e={type:"ifElse",test:e,body:s}):(qe=t,t=O)}else qe=t,t=O;else qe=t,t=O;else qe=t,t=O}else qe=t,t=O;return t}function h(){var t=qe,e=r();return e!==N&&($e=t),e}function u(){var t=qe,e=X();if(e!==N){if(61===i.charCodeAt(qe)){var r=Wt;qe++}else r=N,0===ri&&n(St);r!==N&&(r=p())!==N?($e=t,t=e={type:"variableAssignment",name:e,value:r}):(qe=t,t=O)}else qe=t,t=O;return t}function d(){var t;ri++;var e=t=qe;ri++;var i=_();if(ri--,i===N?e=vt:(qe=e,e=O),e!==N)if(i=qe,ri++,e=E(),ri--,e===N?i=vt:(qe=i,i=O),i!==N)if(e=qe,ri++,i=u(),ri--,i===N?e=vt:(qe=e,e=O),e!==N){i=qe,e=[];var r=Z();if(r===N&&(r=f())===N&&(r=R())===N&&(r=V())===N&&(r=C())===N&&(r=g())===N&&(r=W()),r!==N)for(;r!==N;)e.push(r),(r=Z())===N&&(r=f())===N&&(r=R())===N&&(r=V())===N&&(r=C())===N&&(r=g())===N&&(r=W());else e=O;e!==N&&($e=i,e=P(e)),(i=e)===N&&(i=m()),i!==N?($e=t,t=i):(qe=t,t=O)}else qe=t,t=O;else qe=t,t=O;else qe=t,t=O;return ri--,t===N&&0===ri&&n(It),t}function m(){if(91===i.charCodeAt(qe)){var t=Rt;qe++}else t=N,0===ri&&n(Xt);return t===N&&(i.substr(qe,2)===Vt?(t=Vt,qe+=2):(t=N,0===ri&&n(Ct))),t}function p(){ri++;var t=d();if(t===N){if(t=qe,Ze.test(i.charAt(qe))){var e=i.charAt(qe);qe++}else e=N,0===ri&&n(Ge);if(e!==N){if(40===i.charCodeAt(qe)){var r=Ye;qe++}else r=N,0===ri&&n(ge);if(r!==N)if((r=o())!==N){if(41===i.charCodeAt(qe)){var s=pe;qe++}else s=N,0===ri&&n(fe);s!==N?($e=t,t=e={type:"processSubstitution",readWrite:e,commands:r}):(qe=t,t=O)}else qe=t,t=O;else qe=t,t=O}else qe=t,t=O}return ri--,t===N&&0===ri&&n(Tt),t}function f(){var t=qe,e=[],i=b();if(i!==N)for(;i!==N;)e.push(i),i=b();else e=O;return e!==N&&($e=t,e=k(e)),e}function b(){var t=qe;if(92===i.charCodeAt(qe)){var e=_t;qe++}else e=N,0===ri&&n(Lt);if(e!==N){var r=y();r!==N?($e=t,t=r):(qe=t,t=O)}else qe=t,t=O;return t===N&&(e=t=qe,ri++,r=y(),ri--,r===N?e=vt:(qe=e,e=O),e!==N?(i.length>qe?(r=i.charAt(qe),qe++):(r=N,0===ri&&n(Kt)),r!==N?($e=t,t=r):(qe=t,t=O)):(qe=t,t=O)),t}function y(){if(wt.test(i.charAt(qe))){var t=i.charAt(qe);qe++}else t=N,0===ri&&n(Et);return t}function Z(){var t,e=qe,r=[];for(t=b();t!==N;)r.push(t),t=b();if(r!==N){if(t=[],42===i.charCodeAt(qe)?(r=kt,qe++):(r=N,0===ri&&n(xt)),r===N&&(63===i.charCodeAt(qe)?(r=Jt,qe++):(r=N,0===ri&&n(Pt)),r===N&&(r=G())===N&&(r=Y())),r!==N)for(;r!==N;)t.push(r),42===i.charCodeAt(qe)?(r=kt,qe++):(r=N,0===ri&&n(xt)),r===N&&(63===i.charCodeAt(qe)?(r=Jt,qe++):(r=N,0===ri&&n(Pt)),r===N&&(r=G())===N&&(r=Y()));else t=O;if(t!==N){for(r=[],t=b();t!==N;)r.push(t),t=b();r!==N?($e=e,e=r={type:"glob",value:i.substring($e,qe)}):(qe=e,e=O)}else qe=e,e=O}else qe=e,e=O;return e}function G(){var t,e=t=qe;if(91===i.charCodeAt(qe)){var r=Rt;qe++}else r=N,0===ri&&n(Xt);if(r!==N){var o=qe;if(ri++,45===i.charCodeAt(qe)){var s=Mt;qe++}else s=N,0===ri&&n(Nt);if(ri--,s===N?o=vt:(qe=o,o=O),o!==N)if(i.length>qe?(s=i.charAt(qe),qe++):(s=N,0===ri&&n(Kt)),s!==N){if(45===i.charCodeAt(qe)){var l=Mt;qe++}else l=N,0===ri&&n(Nt);if(l!==N){var c=qe;if(ri++,45===i.charCodeAt(qe)){var a=Mt;qe++}else a=N,0===ri&&n(Nt);if(ri--,a===N?c=vt:(qe=c,c=O),c!==N)if(i.length>qe?(a=i.charAt(qe),qe++):(a=N,0===ri&&n(Kt)),a!==N){if(93===i.charCodeAt(qe)){var h=Ft;qe++}else h=N,0===ri&&n(jt);h!==N?e=r=[r,o,s,l,c,a,h]:(qe=e,e=O)}else qe=e,e=O;else qe=e,e=O}else qe=e,e=O}else qe=e,e=O;else qe=e,e=O}else qe=e,e=O;return e!==N&&(e=i.substring(t,qe)),e}function Y(){var t,e=t=qe;if(i.length>qe){var r=i.charAt(qe);qe++}else r=N,0===ri&&n(Kt);if(r===N&&(r=U),r!==N){var o=qe;if(ri++,36===i.charCodeAt(qe)){var s=Ot;qe++}else s=N,0===ri&&n(Bt);ri--,s===N?o=vt:(qe=o,o=O),o!==N?e=r=[r,o]:(qe=e,e=O)}else qe=e,e=O;if(e!==N)if(123===i.charCodeAt(qe)?(r=Ut,qe++):(r=N,0===ri&&n(Ht)),r!==N){if(o=[],(s=b())!==N)for(;s!==N;)o.push(s),s=b();else o=O;o!==N?(125===i.charCodeAt(qe)?(s=zt,qe++):(s=N,0===ri&&n(Dt)),s!==N?t=e=[e,r,o,s]:(qe=t,t=O)):(qe=t,t=O)}else qe=t,t=O;else qe=t,t=O;return t}function g(){var t=qe;if(39===i.charCodeAt(qe)){var e=At;qe++}else e=N,0===ri&&n(Qt);if(e!==N){e=qe;var r=[];if(qt.test(i.charAt(qe))){var o=i.charAt(qe);qe++}else o=N,0===ri&&n($t);for(;o!==N;)r.push(o),qt.test(i.charAt(qe))?(o=i.charAt(qe),qe++):(o=N,0===ri&&n($t));r!==N&&(r=i.substring(e,qe)),(e=r)!==N?(39===i.charCodeAt(qe)?(r=At,qe++):(r=N,0===ri&&n(Qt)),r!==N?($e=t,t=e=k(e)):(qe=t,t=O)):(qe=t,t=O)}else qe=t,t=O;return t}function W(){var t=qe;if(34===i.charCodeAt(qe)){var e=te;qe++}else e=N,0===ri&&n(ee);if(e!==N){e=[];var r=v();if(r===N){r=[];var o=S();if(o!==N)for(;o!==N;)r.push(o),o=S();else r=O}for(;r!==N;)if(e.push(r),(r=v())===N)if(r=[],(o=S())!==N)for(;o!==N;)r.push(o),o=S();else r=O;e!==N?(34===i.charCodeAt(qe)?(r=te,qe++):(r=N,0===ri&&n(ee)),r!==N?($e=t,t=e=function(t){return P(t=t.map((function(t){return oi(t)?k(t):t})))}(e)):(qe=t,t=O)):(qe=t,t=O)}else qe=t,t=O;return t}function S(){var t=qe;if(92===i.charCodeAt(qe)){var e=_t;qe++}else e=N,0===ri&&n(Lt);if(e!==N){var r=I();r!==N?($e=t,t=r):(qe=t,t=O)}else qe=t,t=O;return t===N&&(t=qe,i.substr(qe,2)===ie?(e=ie,qe+=2):(e=N,0===ri&&n(ne)),e!==N&&($e=t,e="\\"),(t=e)===N&&(e=t=qe,ri++,r=I(),ri--,r===N?e=vt:(qe=e,e=O),e!==N?(i.length>qe?(r=i.charAt(qe),qe++):(r=N,0===ri&&n(Kt)),r!==N?($e=t,t=r):(qe=t,t=O)):(qe=t,t=O))),t}function I(){if(34===i.charCodeAt(qe)){var t=te;qe++}else t=N,0===ri&&n(ee);return t===N&&(36===i.charCodeAt(qe)?(t=Ot,qe++):(t=N,0===ri&&n(Bt)),t===N&&(96===i.charCodeAt(qe)?(t=re,qe++):(t=N,0===ri&&n(oe)))),t}function v(){var t=C();return t===N&&(t=R())===N&&(t=V()),t}function R(){var t=qe;if(36===i.charCodeAt(qe)){var e=Ot;qe++}else e=N,0===ri&&n(Bt);return e!==N?((e=X())===N&&(63===i.charCodeAt(qe)?(e=Jt,qe++):(e=N,0===ri&&n(Pt))),e!==N?($e=t,t=e={type:"variable",name:e}):(qe=t,t=O)):(qe=t,t=O),t}function X(){var t=qe,e=[];if(se.test(i.charAt(qe))){var r=i.charAt(qe);qe++}else r=N,0===ri&&n(le);if(r!==N)for(;r!==N;)e.push(r),se.test(i.charAt(qe))?(r=i.charAt(qe),qe++):(r=N,0===ri&&n(le));else e=O;return e!==N&&($e=t,e=i.substring($e,qe)),e}function V(){var t=qe;if(i.substr(qe,2)===ce){var e=ce;qe+=2}else e=N,0===ri&&n(ae);if(e!==N){if(e=[],he.test(i.charAt(qe))){var r=i.charAt(qe);qe++}else r=N,0===ri&&n(ue);for(;r!==N;)e.push(r),he.test(i.charAt(qe))?(r=i.charAt(qe),qe++):(r=N,0===ri&&n(ue));e!==N?(125===i.charCodeAt(qe)?(r=zt,qe++):(r=N,0===ri&&n(Dt)),r!==N?($e=t,t=e={type:"variableSubstitution",expression:e.join("")}):(qe=t,t=O)):(qe=t,t=O)}else qe=t,t=O;return t}function C(){var t=qe;if(i.substr(qe,2)===de){var r=de;qe+=2}else r=N,0===ri&&n(me);if(r!==N)if((r=o())!==N){if(41===i.charCodeAt(qe)){var s=pe;qe++}else s=N,0===ri&&n(fe);s!==N?($e=t,t=r={type:"commandSubstitution",commands:r}):(qe=t,t=O)}else qe=t,t=O;else qe=t,t=O;if(t===N)if(t=qe,96===i.charCodeAt(qe)?(r=re,qe++):(r=N,0===ri&&n(oe)),r!==N){if(r=[],(s=T())!==N)for(;s!==N;)r.push(s),s=T();else r=O;r!==N?(96===i.charCodeAt(qe)?(s=re,qe++):(s=N,0===ri&&n(oe)),s!==N?($e=t,t=r={type:"commandSubstitution",commands:e(r.join(""))}):(qe=t,t=O)):(qe=t,t=O)}else qe=t,t=O;return t}function T(){var t=qe;if(i.substr(qe,2)===be){var e=be;qe+=2}else e=N,0===ri&&n(ye);if(e!==N&&($e=t,e="`"),(t=e)===N&&(t=qe,i.substr(qe,2)===ie?(e=ie,qe+=2):(e=N,0===ri&&n(ne)),e!==N&&($e=t,e="\\"),(t=e)===N)){if(e=t=qe,ri++,96===i.charCodeAt(qe)){var r=re;qe++}else r=N,0===ri&&n(oe);ri--,r===N?e=vt:(qe=e,e=O),e!==N?(i.length>qe?(r=i.charAt(qe),qe++):(r=N,0===ri&&n(Kt)),r!==N?($e=t,t=r):(qe=t,t=O)):(qe=t,t=O)}return t}function _(){var t=qe,e=L();if(e===N&&(e=U),e!==N){if(i.substr(qe,2)===Ie){var r=Ie;qe+=2}else r=N,0===ri&&n(ve);if(r===N&&(i.substr(qe,2)===Re?(r=Re,qe+=2):(r=N,0===ri&&n(Xe))),r!==N){var o=L();if(o!==N){if(45===i.charCodeAt(qe)){var s=Mt;qe++}else s=N,0===ri&&n(Nt);s!==N?($e=t,null==(t=e)&&(t="<"==r[0]?0:1),t=e={type:"moveFd",fd:t,op:r,dest:o}):(qe=t,t=O)}else qe=t,t=O}else qe=t,t=O}else qe=t,t=O;if((r=t)===N){if(t=qe,(e=L())===N&&(e=U),e!==N)if(i.substr(qe,2)===Ie?(r=Ie,qe+=2):(r=N,0===ri&&n(ve)),r===N&&(i.substr(qe,2)===Re?(r=Re,qe+=2):(r=N,0===ri&&n(Xe))),r!==N){for(s=[],o=K();o!==N;)s.push(o),o=K();s!==N&&(o=L())!==N?($e=t,null==(t=e)&&(t="<"==r[0]?0:1),t=e={type:"duplicateFd",srcFd:t,op:r,destFd:o}):(qe=t,t=O)}else qe=t,t=O;else qe=t,t=O;if((r=t)===N)if(r=qe,(o=L())===N&&(o=U),o!==N)if(60===i.charCodeAt(qe)?(t=Ve,qe++):(t=N,0===ri&&n(Ce)),t===N&&(62===i.charCodeAt(qe)?(t=Te,qe++):(t=N,0===ri&&n(_e)),t===N&&(i.substr(qe,2)===Le?(t=Le,qe+=2):(t=N,0===ri&&n(Ke)),t===N&&(i.substr(qe,2)===we?(t=we,qe+=2):(t=N,0===ri&&n(Ee)),t===N&&(i.substr(qe,2)===ke?(t=ke,qe+=2):(t=N,0===ri&&n(xe)),t===N&&(i.substr(qe,3)===Je?(t=Je,qe+=3):(t=N,0===ri&&n(Pe))))))),t!==N){for(s=[],e=K();e!==N;)s.push(e),e=K();s!==N&&(e=p())!==N?($e=r,null==(r=o)&&(r="<"==t[0]?0:1),r=o={type:"redirectFd",fd:r,op:t,filename:e}):(qe=r,r=O)}else qe=r,r=O;else qe=r,r=O}return r}function L(){var t=qe,e=[];if(Me.test(i.charAt(qe))){var r=i.charAt(qe);qe++}else r=N,0===ri&&n(Ne);if(r!==N)for(;r!==N;)e.push(r),Me.test(i.charAt(qe))?(r=i.charAt(qe),qe++):(r=N,0===ri&&n(Ne));else e=O;return e!==N&&($e=t,e=parseInt(e.join(""),10)),e}function K(){if(32===i.charCodeAt(qe)){var t=Fe;qe++}else t=N,0===ri&&n(je);return t===N&&(9===i.charCodeAt(qe)?(t=Oe,qe++):(t=N,0===ri&&n(Be))),t}function w(){var t=K();return t===N&&(10===i.charCodeAt(qe)?(t=et,qe++):(t=N,0===ri&&n(it))),t}function E(){var t=qe;if(i.substr(qe,5)===rt){var e=rt;qe+=5}else e=N,0===ri&&n(ot);if(e===N&&(i.substr(qe,5)===st?(e=st,qe+=5):(e=N,0===ri&&n(lt)),e===N&&(i.substr(qe,3)===Ue?(e=Ue,qe+=3):(e=N,0===ri&&n(He)),e===N&&(i.substr(qe,4)===ht?(e=ht,qe+=4):(e=N,0===ri&&n(ut)),e===N&&(i.substr(qe,2)===ct?(e=ct,qe+=2):(e=N,0===ri&&n(at)),e===N&&(i.substr(qe,4)===ze?(e=ze,qe+=4):(e=N,0===ri&&n(De)),e===N&&(i.substr(qe,4)===Ae?(e=Ae,qe+=4):(e=N,0===ri&&n(Qe)),e===N&&(i.substr(qe,2)===dt?(e=dt,qe+=2):(e=N,0===ri&&n(mt)),e===N&&(i.substr(qe,4)===pt?(e=pt,qe+=4):(e=N,0===ri&&n(ft)),e===N&&(i.substr(qe,4)===bt?(e=bt,qe+=4):(e=N,0===ri&&n(yt)),e===N&&(i.substr(qe,4)===Yt?(e=Yt,qe+=4):(e=N,0===ri&&n(gt)),e===N&&(i.substr(qe,2)===Zt?(e=Zt,qe+=2):(e=N,0===ri&&n(Gt)),e===N&&(i.substr(qe,2)===Vt?(e=Vt,qe+=2):(e=N,0===ri&&n(Ct)))))))))))))),e!==N){var r=[],o=w();if(o!==N)for(;o!==N;)r.push(o),o=w();else r=O;r===N&&(r=qe,ri++,i.length>qe?(o=i.charAt(qe),qe++):(o=N,0===ri&&n(Kt)),ri--,o===N?r=vt:(qe=r,r=O)),r!==N?t=e=[e,r]:(qe=t,t=O)}else qe=t,t=O;return t}function k(t){return{type:"literal",value:oi(t)?t.join(""):t}}function x(t){return t[0]}function J(t){return t[1]}function P(t){for(var e,i=[t[0]],n=t.length,r=t[0],o=1;o<n;o++)"concatenation"==(e=t[o]).type&&(e=P(e.pieces)),"concatenation"==e.type?i=i.concat(e.pieces):"literal"!=e.type&&"glob"!=e.type||"literal"!=r.type&&"glob"!=r.type?(i.push(e),r=e):(r.value+=e.value,"glob"!=r.type&&"glob"==e.type&&(r.type="glob"));return 1==i.length?i[0]:{type:"concatenation",pieces:i}}var M=1<arguments.length?arguments[1]:{},N={},F={script:r,command:c,argument:p,continuationStart:function(){var t,e=t=qe;ri++;var r=E();if(r===N&&(34===i.charCodeAt(qe)?(r=te,qe++):(r=N,0===ri&&n(ee)),r===N&&(39===i.charCodeAt(qe)?(r=At,qe++):(r=N,0===ri&&n(Qt)),r===N&&(96===i.charCodeAt(qe)?(r=re,qe++):(r=N,0===ri&&n(oe)),r===N&&(i.substr(qe,2)===de?(r=de,qe+=2):(r=N,0===ri&&n(me)),r===N&&(i.substr(qe,2)===ce?(r=ce,qe+=2):(r=N,0===ri&&n(ae)),r===N&&(40===i.charCodeAt(qe)?(r=Ye,qe++):(r=N,0===ri&&n(ge)))))))),ri--,r!==N?(qe=e,e=vt):e=O,e!==N){if(r=[],i.length>qe){var o=i.charAt(qe);qe++}else o=N,0===ri&&n(Kt);for(;o!==N;)r.push(o),i.length>qe?(o=i.charAt(qe),qe++):(o=N,0===ri&&n(Kt));r!==N?t=e=[e,r]:(qe=t,t=O)}else qe=t,t=O;return t}},j=r,O=N,B={type:"other",description:"a list of statements"},U=null,H="&&",z={type:"literal",value:"&&",description:'"&&"'},D="||",A={type:"literal",value:"||",description:'"||"'},Q="&",q={type:"literal",value:"&",description:'"&"'},$=";",tt={type:"literal",value:";",description:'";"'},et="\n",it={type:"literal",value:"\n",description:'"\\n"'},nt={type:"other",description:"a single command"},rt="while",ot={type:"literal",value:"while",description:'"while"'},st="until",lt={type:"literal",value:"until",description:'"until"'},ct="do",at={type:"literal",value:"do",description:'"do"'},ht="done",ut={type:"literal",value:"done",description:'"done"'},dt="if",mt={type:"literal",value:"if",description:'"if"'},pt="then",ft={type:"literal",value:"then",description:'"then"'},bt="else",yt={type:"literal",value:"else",description:'"else"'},Zt="fi",Gt={type:"literal",value:"fi",description:'"fi"'},Yt="elif",gt={type:"literal",value:"elif",description:'"elif"'},Wt="=",St={type:"literal",value:"=",description:'"="'},It={type:"other",description:"command name"},vt=void 0,Rt="[",Xt={type:"literal",value:"[",description:'"["'},Vt="[[",Ct={type:"literal",value:"[[",description:'"[["'},Tt={type:"other",description:"command argument"},_t="\\",Lt={type:"literal",value:"\\",description:'"\\\\"'},Kt={type:"any",description:"any character"},wt=/^[$"';&<>\n()[*?|` ]/,Et={type:"class",value:"[$\"';&<>\\n()[*?|` ]",description:"[$\"';&<>\\n()[*?|` ]"},kt="*",xt={type:"literal",value:"*",description:'"*"'},Jt="?",Pt={type:"literal",value:"?",description:'"?"'},Mt="-",Nt={type:"literal",value:"-",description:'"-"'},Ft="]",jt={type:"literal",value:"]",description:'"]"'},Ot="$",Bt={type:"literal",value:"$",description:'"$"'},Ut="{",Ht={type:"literal",value:"{",description:'"{"'},zt="}",Dt={type:"literal",value:"}",description:'"}"'},At="'",Qt={type:"literal",value:"'",description:'"\'"'},qt=/^[^']/,$t={type:"class",value:"[^']",description:"[^']"},te='"',ee={type:"literal",value:'"',description:'"\\""'},ie="\\\\",ne={type:"literal",value:"\\\\",description:'"\\\\\\\\"'},re="`",oe={type:"literal",value:"`",description:'"`"'},se=/^[a-zA-Z0-9_]/,le={type:"class",value:"[a-zA-Z0-9_]",description:"[a-zA-Z0-9_]"},ce="${",ae={type:"literal",value:"${",description:'"${"'},he=/^[^}]/,ue={type:"class",value:"[^}]",description:"[^}]"},de="$(",me={type:"literal",value:"$(",description:'"$("'},pe=")",fe={type:"literal",value:")",description:'")"'},be="\\`",ye={type:"literal",value:"\\`",description:'"\\\\`"'},Ze=/^[<>]/,Ge={type:"class",value:"[<>]",description:"[<>]"},Ye="(",ge={type:"literal",value:"(",description:'"("'},We="|",Se={type:"literal",value:"|",description:'"|"'},Ie="<&",ve={type:"literal",value:"<&",description:'"<&"'},Re=">&",Xe={type:"literal",value:">&",description:'">&"'},Ve="<",Ce={type:"literal",value:"<",description:'"<"'},Te=">",_e={type:"literal",value:">",description:'">"'},Le=">|",Ke={type:"literal",value:">|",description:'">|"'},we="&>",Ee={type:"literal",value:"&>",description:'"&>"'},ke=">>",xe={type:"literal",value:">>",description:'">>"'},Je="&>>",Pe={type:"literal",value:"&>>",description:'"&>>"'},Me=/^[0-9]/,Ne={type:"class",value:"[0-9]",description:"[0-9]"},Fe=" ",je={type:"literal",value:" ",description:'" "'},Oe="\t",Be={type:"literal",value:"\t",description:'"\\t"'},Ue="for",He={type:"literal",value:"for",description:'"for"'},ze="case",De={type:"literal",value:"case",description:'"case"'},Ae="esac",Qe={type:"literal",value:"esac",description:'"esac"'},qe=0,$e=0,ti=0,ei={line:1,column:1,seenCR:!1},ii=0,ni=[],ri=0;if("startRule"in M){if(!(M.startRule in F))throw Error("Can't start parsing from rule \""+M.startRule+'".');j=F[M.startRule]}var oi=On,si=Bn,li=j();if(li!==N&&qe===i.length)return li;throw li!==N&&qe<i.length&&n({type:"end",description:"end of input"}),function(e,n,r){var o=function(t){if(ti!==t){ti>t&&(ti=0,ei={line:1,column:1,seenCR:!1});var e,n=ei;for(e=ti;e<t;e++){var r=i.charAt(e);"\n"===r?(n.seenCR||n.line++,n.column=1,n.seenCR=!1):"\r"===r||"\u2028"===r||"\u2029"===r?(n.line++,n.column=1,n.seenCR=!0):(n.column++,n.seenCR=!1)}ti=t}return ei}(r),s=r<i.length?i.charAt(r):null;return null!==n&&function(t){var e=1;for(t.sort((function(t,e){return t.description<e.description?-1:t.description>e.description?1:0}));e<t.length;)t[e-1]===t[e]?t.splice(e,1):e++}(n),new t(function(t,e){var i,n=Array(t.length);for(i=0;i<t.length;i++)n[i]=t[i].description;return t=1<t.length?n.slice(0,-1).join(", ")+" or "+n[t.length-1]:n[0],e=e?'"'+function(t){function e(t){return t.charCodeAt(0).toString(16).toUpperCase()}return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,(function(t){return"\\x0"+e(t)})).replace(/[\x10-\x1F\x80-\xFF]/g,(function(t){return"\\x"+e(t)})).replace(/[\u0180-\u0FFF]/g,(function(t){return"\\u0"+e(t)})).replace(/[\u1080-\uFFFF]/g,(function(t){return"\\u"+e(t)}))}(e)+'"':"end of input","Expected "+t+" but "+e+" found."}(n,s),n,s,r,o.line,o.column)}(0,ni,ii)}}}(),Dn=zn.SyntaxError;Hn.SyntaxError=Dn;var An={DEVICE_FRAMEBUFFER_ZERO:{PATH:"/_wasmer/dev/fb0",FRAME_BUFFER:"/_wasmer/dev/fb0/fb",VIRTUAL_SIZE:"/_wasmer/dev/fb0/virtual_size",DRAW:"/_wasmer/dev/fb0/draw",INPUT:"/_wasmer/dev/fb0/input"}},Qn=void 0;Qn="object"==typeof window?window.TextDecoder:"object"==typeof self?self.TextDecoder:i(9539).TextDecoder;var qn=function(){function t(t){this.wasmFs=t,this.wasmFs.volume.mkdirSync(An.DEVICE_FRAMEBUFFER_ZERO.PATH,{recursive:!0}),this.wasmFs.volume.writeFileSync(An.DEVICE_FRAMEBUFFER_ZERO.FRAME_BUFFER,""),this.wasmFs.volume.writeFileSync(An.DEVICE_FRAMEBUFFER_ZERO.VIRTUAL_SIZE,""),this.wasmFs.volume.writeFileSync(An.DEVICE_FRAMEBUFFER_ZERO.DRAW,""),this.wasmFs.volume.writeFileSync(An.DEVICE_FRAMEBUFFER_ZERO.INPUT,""),this.windowSizeCallback=function(){},this.bufferIndexDisplayCallback=function(){},this.inputCallback=function(){return new Uint8Array},this.fdFrameBuffer=this.wasmFs.volume.openSync(An.DEVICE_FRAMEBUFFER_ZERO.FRAME_BUFFER,"w+"),this.fdBufferIndexDisplay=this.wasmFs.volume.openSync(An.DEVICE_FRAMEBUFFER_ZERO.DRAW,"w+"),this.fdWindowSize=this.wasmFs.fs.openSync(An.DEVICE_FRAMEBUFFER_ZERO.VIRTUAL_SIZE,"w+"),this.fdInput=this.wasmFs.volume.openSync(An.DEVICE_FRAMEBUFFER_ZERO.INPUT,"w+");var e=this,i=this.wasmFs.volume.fds[this.fdInput].node.read;this.wasmFs.volume.fds[this.fdInput].node.read=function(){var t=e.inputCallback();return e.wasmFs.volume.writeFileSync(An.DEVICE_FRAMEBUFFER_ZERO.INPUT,t),t=Array.prototype.slice.call(arguments),i.apply(e.wasmFs.volume.fds[e.fdInput].node,t)};var n=this.wasmFs.volume.fds[this.fdWindowSize].node.write;this.wasmFs.volume.fds[this.fdWindowSize].node.write=function(){var t=Array.prototype.slice.call(arguments);return t=n.apply(e.wasmFs.volume.fds[e.fdWindowSize].node,t),e.windowSizeCallback(),t};var r=this.wasmFs.volume.fds[this.fdBufferIndexDisplay].node.write;this.wasmFs.volume.fds[this.fdBufferIndexDisplay].node.write=function(){var t=Array.prototype.slice.call(arguments);return t=r.apply(e.wasmFs.volume.fds[e.fdBufferIndexDisplay].node,t),e.bufferIndexDisplayCallback(),t}}return t.prototype.getFrameBuffer=function(){return this.wasmFs.fs.readFileSync(An.DEVICE_FRAMEBUFFER_ZERO.FRAME_BUFFER)},t.prototype.getWindowSize=function(){var t=this.wasmFs.fs.readFileSync(An.DEVICE_FRAMEBUFFER_ZERO.VIRTUAL_SIZE);return 0<t.length?(t=new Qn("utf-8").decode(t).split("x"),[parseInt(t[0],10),parseInt(t[1],10)]):[0,0]},t.prototype.setWindowSizeCallback=function(t){this.windowSizeCallback=t},t.prototype.setBufferIndexDisplayCallback=function(t){this.bufferIndexDisplayCallback=t},t.prototype.setInputCallback=function(t){this.inputCallback=t},t}();function $n(t,e){return $n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},$n(t,e)}function tr(t,e){function i(){this.constructor=t}$n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function er(t){var e="function"==typeof Symbol&&t[Symbol.iterator],i=0;return e?e.call(t):{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}}}function ir(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;t=i.call(t);var n,r=[];try{for(;(void 0===e||0<e--)&&!(n=t.next()).done;)r.push(n.value)}catch(t){var o={error:t}}finally{try{n&&!n.done&&(i=t.return)&&i.call(t)}finally{if(o)throw o.error}}return r}function nr(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(ir(arguments[e]));return t}var rr="undefined"!=typeof globalThis?globalThis:void 0!==d?d:{},or="undefined"!=typeof BigInt?BigInt:rr.BigInt||Number,sr=DataView;sr.prototype.setBigUint64||(sr.prototype.setBigUint64=function(t,e,i){if(e<Math.pow(2,32)){e=Number(e);var n=0}else{n=e.toString(2),e="";for(var r=0;r<64-n.length;r++)e+="0";e+=n,n=parseInt(e.substring(0,32),2),e=parseInt(e.substring(32),2)}this.setUint32(t+(i?0:4),e,i),this.setUint32(t+(i?4:0),n,i)},sr.prototype.getBigUint64=function(t,e){var i=this.getUint32(t+(e?0:4),e);t=this.getUint32(t+(e?4:0),e),i=i.toString(2),t=t.toString(2),e="";for(var n=0;n<32-i.length;n++)e+="0";return or("0b"+t+(e+i))});var lr=void 0!==d?d:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},cr=[],ar=[],hr="undefined"!=typeof Uint8Array?Uint8Array:Array,ur=!1;function dr(){ur=!0;for(var t=0;64>t;++t)cr[t]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[t],ar["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(t)]=t;ar[45]=62,ar[95]=63}function mr(t,e,i){for(var n=[],r=e;r<i;r+=3)e=(t[r]<<16)+(t[r+1]<<8)+t[r+2],n.push(cr[e>>18&63]+cr[e>>12&63]+cr[e>>6&63]+cr[63&e]);return n.join("")}function pr(t){ur||dr();for(var e=t.length,i=e%3,n="",r=[],o=0,s=e-i;o<s;o+=16383)r.push(mr(t,o,o+16383>s?s:o+16383));return 1===i?(t=t[e-1],n+=cr[t>>2],n+=cr[t<<4&63],n+="=="):2===i&&(t=(t[e-2]<<8)+t[e-1],n+=cr[t>>10],n+=cr[t>>4&63],n+=cr[t<<2&63],n+="="),r.push(n),r.join("")}function fr(t,e,i,n,r){var o=8*r-n-1,s=(1<<o)-1,l=s>>1,c=-7,a=i?-1:1,h=t[e+(r=i?r-1:0)];for(r+=a,i=h&(1<<-c)-1,h>>=-c,c+=o;0<c;i=256*i+t[e+r],r+=a,c-=8);for(o=i&(1<<-c)-1,i>>=-c,c+=n;0<c;o=256*o+t[e+r],r+=a,c-=8);if(0===i)i=1-l;else{if(i===s)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,n),i-=l}return(h?-1:1)*o*Math.pow(2,i-n)}function br(t,e,i,n,r,o){var s,l=8*o-r-1,c=(1<<l)-1,a=c>>1,h=23===r?Math.pow(2,-24)-Math.pow(2,-77):0;o=n?0:o-1;var u=n?1:-1,d=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||1/0===e?(e=isNaN(e)?1:0,n=c):(n=Math.floor(Math.log(e)/Math.LN2),1>e*(s=Math.pow(2,-n))&&(n--,s*=2),2<=(e=1<=n+a?e+h/s:e+h*Math.pow(2,1-a))*s&&(n++,s/=2),n+a>=c?(e=0,n=c):1<=n+a?(e=(e*s-1)*Math.pow(2,r),n+=a):(e=e*Math.pow(2,a-1)*Math.pow(2,r),n=0));8<=r;t[i+o]=255&e,o+=u,e/=256,r-=8);for(n=n<<r|e,l+=r;0<l;t[i+o]=255&n,o+=u,n/=256,l-=8);t[i+o-u]|=128*d}var yr={}.toString,Zr=Array.isArray||function(t){return"[object Array]"==yr.call(t)};gr.TYPED_ARRAY_SUPPORT=void 0===lr.TYPED_ARRAY_SUPPORT||lr.TYPED_ARRAY_SUPPORT;var Gr=gr.TYPED_ARRAY_SUPPORT?2147483647:1073741823;function Yr(t,e){if((gr.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<e)throw new RangeError("Invalid typed array length");return gr.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=gr.prototype:(null===t&&(t=new gr(e)),t.length=e),t}function gr(t,e,i){if(!(gr.TYPED_ARRAY_SUPPORT||this instanceof gr))return new gr(t,e,i);if("number"==typeof t){if("string"==typeof e)throw Error("If encoding is specified then the first argument must be a string");return Ir(this,t)}return Wr(this,t,e,i)}function Wr(t,e,i,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');if("undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer){if(e.byteLength,0>i||e.byteLength<i)throw new RangeError("'offset' is out of bounds");if(e.byteLength<i+(n||0))throw new RangeError("'length' is out of bounds");return e=void 0===i&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,i):new Uint8Array(e,i,n),gr.TYPED_ARRAY_SUPPORT?(t=e).__proto__=gr.prototype:t=vr(t,e),t}if("string"==typeof e){if(n=t,"string"==typeof(t=i)&&""!==t||(t="utf8"),!gr.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');return(e=(n=Yr(n,i=0|Vr(e,t))).write(e,t))!==i&&(n=n.slice(0,e)),n}return function(t,e){if(Xr(e)){var i=0|Rr(e.length);return 0===(t=Yr(t,i)).length||e.copy(t,0,0,i),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return(i="number"!=typeof e.length)||(i=(i=e.length)!==i),i?Yr(t,0):vr(t,e);if("Buffer"===e.type&&Zr(e.data))return vr(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function Sr(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(0>t)throw new RangeError('"size" argument must not be negative')}function Ir(t,e){if(Sr(e),t=Yr(t,0>e?0:0|Rr(e)),!gr.TYPED_ARRAY_SUPPORT)for(var i=0;i<e;++i)t[i]=0;return t}function vr(t,e){var i=0>e.length?0:0|Rr(e.length);t=Yr(t,i);for(var n=0;n<i;n+=1)t[n]=255&e[n];return t}function Rr(t){if(t>=(gr.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(gr.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+" bytes");return 0|t}function Xr(t){return!(null==t||!t._isBuffer)}function Vr(t,e){if(Xr(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var i=t.length;if(0===i)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return Nr(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return jr(t).length;default:if(n)return Nr(t).length;e=(""+e).toLowerCase(),n=!0}}function Cr(t,e,i){var n=!1;if((void 0===e||0>e)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),0>=i)return"";if((i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":for(t=e,e=i,i=this.length,(!t||0>t)&&(t=0),(!e||0>e||e>i)&&(e=i),n="",i=t;i<e;++i)n=(t=n)+(n=16>(n=this[i])?"0"+n.toString(16):n.toString(16));return n;case"utf8":case"utf-8":return Kr(this,e,i);case"ascii":for(t="",i=Math.min(this.length,i);e<i;++e)t+=String.fromCharCode(127&this[e]);return t;case"latin1":case"binary":for(t="",i=Math.min(this.length,i);e<i;++e)t+=String.fromCharCode(this[e]);return t;case"base64":return 0===e&&i===this.length?pr(this):pr(this.slice(e,i));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(e=this.slice(e,i),i="",t=0;t<e.length;t+=2)i+=String.fromCharCode(e[t]+256*e[t+1]);return i;default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function Tr(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function _r(t,e,i,n,r){if(0===t.length)return-1;if("string"==typeof i?(n=i,i=0):2147483647<i?i=2147483647:-2147483648>i&&(i=-2147483648),i=+i,isNaN(i)&&(i=r?0:t.length-1),0>i&&(i=t.length+i),i>=t.length){if(r)return-1;i=t.length-1}else if(0>i){if(!r)return-1;i=0}if("string"==typeof e&&(e=gr.from(e,n)),Xr(e))return 0===e.length?-1:Lr(t,e,i,n,r);if("number"==typeof e)return e&=255,gr.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):Lr(t,[e],i,n,r);throw new TypeError("val must be string, number or Buffer")}function Lr(t,e,i,n,r){function o(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}var s=1,l=t.length,c=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(2>t.length||2>e.length)return-1;s=2,l/=2,c/=2,i/=2}if(r)for(n=-1;i<l;i++)if(o(t,i)===o(e,-1===n?0:i-n)){if(-1===n&&(n=i),i-n+1===c)return n*s}else-1!==n&&(i-=i-n),n=-1;else for(i+c>l&&(i=l-c);0<=i;i--){for(l=!0,n=0;n<c;n++)if(o(t,i+n)!==o(e,n)){l=!1;break}if(l)return i}return-1}function Kr(t,e,i){i=Math.min(t.length,i);for(var n=[];e<i;){var r=t[e],o=null,s=239<r?4:223<r?3:191<r?2:1;if(e+s<=i)switch(s){case 1:128>r&&(o=r);break;case 2:var l=t[e+1];128==(192&l)&&127<(r=(31&r)<<6|63&l)&&(o=r);break;case 3:l=t[e+1];var c=t[e+2];128==(192&l)&&128==(192&c)&&2047<(r=(15&r)<<12|(63&l)<<6|63&c)&&(55296>r||57343<r)&&(o=r);break;case 4:l=t[e+1],c=t[e+2];var a=t[e+3];128==(192&l)&&128==(192&c)&&128==(192&a)&&65535<(r=(15&r)<<18|(63&l)<<12|(63&c)<<6|63&a)&&1114112>r&&(o=r)}null===o?(o=65533,s=1):65535<o&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),e+=s}if((t=n.length)<=wr)n=String.fromCharCode.apply(String,n);else{for(i="",e=0;e<t;)i+=String.fromCharCode.apply(String,n.slice(e,e+=wr));n=i}return n}gr.poolSize=8192,gr._augment=function(t){return t.__proto__=gr.prototype,t},gr.from=function(t,e,i){return Wr(null,t,e,i)},gr.TYPED_ARRAY_SUPPORT&&(gr.prototype.__proto__=Uint8Array.prototype,gr.__proto__=Uint8Array),gr.alloc=function(t,e,i){return Sr(t),0>=t?Yr(null,t):void 0!==e?"string"==typeof i?Yr(null,t).fill(e,i):Yr(null,t).fill(e):Yr(null,t)},gr.allocUnsafe=function(t){return Ir(null,t)},gr.allocUnsafeSlow=function(t){return Ir(null,t)},gr.isBuffer=Br,gr.compare=function(t,e){if(!Xr(t)||!Xr(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var i=t.length,n=e.length,r=0,o=Math.min(i,n);r<o;++r)if(t[r]!==e[r]){i=t[r],n=e[r];break}return i<n?-1:n<i?1:0},gr.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},gr.concat=function(t,e){if(!Zr(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return gr.alloc(0);var i;if(void 0===e)for(i=e=0;i<t.length;++i)e+=t[i].length;e=gr.allocUnsafe(e);var n=0;for(i=0;i<t.length;++i){var r=t[i];if(!Xr(r))throw new TypeError('"list" argument must be an Array of Buffers');r.copy(e,n),n+=r.length}return e},gr.byteLength=Vr,gr.prototype._isBuffer=!0,gr.prototype.swap16=function(){var t=this.length;if(0!=t%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)Tr(this,e,e+1);return this},gr.prototype.swap32=function(){var t=this.length;if(0!=t%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)Tr(this,e,e+3),Tr(this,e+1,e+2);return this},gr.prototype.swap64=function(){var t=this.length;if(0!=t%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)Tr(this,e,e+7),Tr(this,e+1,e+6),Tr(this,e+2,e+5),Tr(this,e+3,e+4);return this},gr.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?Kr(this,0,t):Cr.apply(this,arguments)},gr.prototype.equals=function(t){if(!Xr(t))throw new TypeError("Argument must be a Buffer");return this===t||0===gr.compare(this,t)},gr.prototype.inspect=function(){var t="";return 0<this.length&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(t+=" ... ")),"<Buffer "+t+">"},gr.prototype.compare=function(t,e,i,n,r){if(!Xr(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===n&&(n=0),void 0===r&&(r=this.length),0>e||i>t.length||0>n||r>this.length)throw new RangeError("out of range index");if(n>=r&&e>=i)return 0;if(n>=r)return-1;if(e>=i)return 1;if(this===t)return 0;var o=(r>>>=0)-(n>>>=0),s=(i>>>=0)-(e>>>=0),l=Math.min(o,s);for(n=this.slice(n,r),t=t.slice(e,i),e=0;e<l;++e)if(n[e]!==t[e]){o=n[e],s=t[e];break}return o<s?-1:s<o?1:0},gr.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},gr.prototype.indexOf=function(t,e,i){return _r(this,t,e,i,!0)},gr.prototype.lastIndexOf=function(t,e,i){return _r(this,t,e,i,!1)},gr.prototype.write=function(t,e,i,n){if(void 0===e)n="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)n=e,i=this.length,e=0;else{if(!isFinite(e))throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(i)?(i|=0,void 0===n&&(n="utf8")):(n=i,i=void 0)}var r=this.length-e;if((void 0===i||i>r)&&(i=r),0<t.length&&(0>i||0>e)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");for(n||(n="utf8"),r=!1;;)switch(n){case"hex":t:{if(e=Number(e)||0,n=this.length-e,i?(i=Number(i))>n&&(i=n):i=n,0!=(n=t.length)%2)throw new TypeError("Invalid hex string");for(i>n/2&&(i=n/2),n=0;n<i;++n){if(r=parseInt(t.substr(2*n,2),16),isNaN(r)){t=n;break t}this[e+n]=r}t=n}return t;case"utf8":case"utf-8":return Or(Nr(t,this.length-e),this,e,i);case"ascii":case"latin1":case"binary":return Or(Fr(t),this,e,i);case"base64":return Or(jr(t),this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":n=t,r=this.length-e;for(var o=[],s=0;s<n.length&&!(0>(r-=2));++s){var l=n.charCodeAt(s);t=l>>8,l%=256,o.push(l),o.push(t)}return Or(o,this,e,i);default:if(r)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),r=!0}},gr.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var wr=4096;function Er(t,e,i){if(0!=t%1||0>t)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function kr(t,e,i,n,r,o){if(!Xr(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<o)throw new RangeError('"value" argument is out of bounds');if(i+n>t.length)throw new RangeError("Index out of range")}function xr(t,e,i,n){0>e&&(e=65535+e+1);for(var r=0,o=Math.min(t.length-i,2);r<o;++r)t[i+r]=(e&255<<8*(n?r:1-r))>>>8*(n?r:1-r)}function Jr(t,e,i,n){0>e&&(e=4294967295+e+1);for(var r=0,o=Math.min(t.length-i,4);r<o;++r)t[i+r]=e>>>8*(n?r:3-r)&255}function Pr(t,e,i,n){if(i+n>t.length)throw new RangeError("Index out of range");if(0>i)throw new RangeError("Index out of range")}gr.prototype.slice=function(t,e){var i=this.length;if(0>(t=~~t)?0>(t+=i)&&(t=0):t>i&&(t=i),0>(e=void 0===e?i:~~e)?0>(e+=i)&&(e=0):e>i&&(e=i),e<t&&(e=t),gr.TYPED_ARRAY_SUPPORT)(e=this.subarray(t,e)).__proto__=gr.prototype;else{e=new gr(i=e-t,void 0);for(var n=0;n<i;++n)e[n]=this[n+t]}return e},gr.prototype.readUIntLE=function(t,e,i){t|=0,e|=0,i||Er(t,e,this.length),i=this[t];for(var n=1,r=0;++r<e&&(n*=256);)i+=this[t+r]*n;return i},gr.prototype.readUIntBE=function(t,e,i){t|=0,e|=0,i||Er(t,e,this.length),i=this[t+--e];for(var n=1;0<e&&(n*=256);)i+=this[t+--e]*n;return i},gr.prototype.readUInt8=function(t,e){return e||Er(t,1,this.length),this[t]},gr.prototype.readUInt16LE=function(t,e){return e||Er(t,2,this.length),this[t]|this[t+1]<<8},gr.prototype.readUInt16BE=function(t,e){return e||Er(t,2,this.length),this[t]<<8|this[t+1]},gr.prototype.readUInt32LE=function(t,e){return e||Er(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},gr.prototype.readUInt32BE=function(t,e){return e||Er(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},gr.prototype.readIntLE=function(t,e,i){t|=0,e|=0,i||Er(t,e,this.length),i=this[t];for(var n=1,r=0;++r<e&&(n*=256);)i+=this[t+r]*n;return i>=128*n&&(i-=Math.pow(2,8*e)),i},gr.prototype.readIntBE=function(t,e,i){t|=0,e|=0,i||Er(t,e,this.length),i=e;for(var n=1,r=this[t+--i];0<i&&(n*=256);)r+=this[t+--i]*n;return r>=128*n&&(r-=Math.pow(2,8*e)),r},gr.prototype.readInt8=function(t,e){return e||Er(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},gr.prototype.readInt16LE=function(t,e){return e||Er(t,2,this.length),32768&(t=this[t]|this[t+1]<<8)?4294901760|t:t},gr.prototype.readInt16BE=function(t,e){return e||Er(t,2,this.length),32768&(t=this[t+1]|this[t]<<8)?4294901760|t:t},gr.prototype.readInt32LE=function(t,e){return e||Er(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},gr.prototype.readInt32BE=function(t,e){return e||Er(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},gr.prototype.readFloatLE=function(t,e){return e||Er(t,4,this.length),fr(this,t,!0,23,4)},gr.prototype.readFloatBE=function(t,e){return e||Er(t,4,this.length),fr(this,t,!1,23,4)},gr.prototype.readDoubleLE=function(t,e){return e||Er(t,8,this.length),fr(this,t,!0,52,8)},gr.prototype.readDoubleBE=function(t,e){return e||Er(t,8,this.length),fr(this,t,!1,52,8)},gr.prototype.writeUIntLE=function(t,e,i,n){t=+t,e|=0,i|=0,n||kr(this,t,e,i,Math.pow(2,8*i)-1,0),n=1;var r=0;for(this[e]=255&t;++r<i&&(n*=256);)this[e+r]=t/n&255;return e+i},gr.prototype.writeUIntBE=function(t,e,i,n){t=+t,e|=0,i|=0,n||kr(this,t,e,i,Math.pow(2,8*i)-1,0);var r=1;for(this[e+(n=i-1)]=255&t;0<=--n&&(r*=256);)this[e+n]=t/r&255;return e+i},gr.prototype.writeUInt8=function(t,e,i){return t=+t,e|=0,i||kr(this,t,e,1,255,0),gr.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},gr.prototype.writeUInt16LE=function(t,e,i){return t=+t,e|=0,i||kr(this,t,e,2,65535,0),gr.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):xr(this,t,e,!0),e+2},gr.prototype.writeUInt16BE=function(t,e,i){return t=+t,e|=0,i||kr(this,t,e,2,65535,0),gr.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):xr(this,t,e,!1),e+2},gr.prototype.writeUInt32LE=function(t,e,i){return t=+t,e|=0,i||kr(this,t,e,4,4294967295,0),gr.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):Jr(this,t,e,!0),e+4},gr.prototype.writeUInt32BE=function(t,e,i){return t=+t,e|=0,i||kr(this,t,e,4,4294967295,0),gr.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):Jr(this,t,e,!1),e+4},gr.prototype.writeIntLE=function(t,e,i,n){t=+t,e|=0,n||kr(this,t,e,i,(n=Math.pow(2,8*i-1))-1,-n),n=0;var r=1,o=0;for(this[e]=255&t;++n<i&&(r*=256);)0>t&&0===o&&0!==this[e+n-1]&&(o=1),this[e+n]=(t/r>>0)-o&255;return e+i},gr.prototype.writeIntBE=function(t,e,i,n){t=+t,e|=0,n||kr(this,t,e,i,(n=Math.pow(2,8*i-1))-1,-n);var r=1,o=0;for(this[e+(n=i-1)]=255&t;0<=--n&&(r*=256);)0>t&&0===o&&0!==this[e+n+1]&&(o=1),this[e+n]=(t/r>>0)-o&255;return e+i},gr.prototype.writeInt8=function(t,e,i){return t=+t,e|=0,i||kr(this,t,e,1,127,-128),gr.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),0>t&&(t=255+t+1),this[e]=255&t,e+1},gr.prototype.writeInt16LE=function(t,e,i){return t=+t,e|=0,i||kr(this,t,e,2,32767,-32768),gr.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):xr(this,t,e,!0),e+2},gr.prototype.writeInt16BE=function(t,e,i){return t=+t,e|=0,i||kr(this,t,e,2,32767,-32768),gr.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):xr(this,t,e,!1),e+2},gr.prototype.writeInt32LE=function(t,e,i){return t=+t,e|=0,i||kr(this,t,e,4,2147483647,-2147483648),gr.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):Jr(this,t,e,!0),e+4},gr.prototype.writeInt32BE=function(t,e,i){return t=+t,e|=0,i||kr(this,t,e,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),gr.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):Jr(this,t,e,!1),e+4},gr.prototype.writeFloatLE=function(t,e,i){return i||Pr(this,0,e,4),br(this,t,e,!0,23,4),e+4},gr.prototype.writeFloatBE=function(t,e,i){return i||Pr(this,0,e,4),br(this,t,e,!1,23,4),e+4},gr.prototype.writeDoubleLE=function(t,e,i){return i||Pr(this,0,e,8),br(this,t,e,!0,52,8),e+8},gr.prototype.writeDoubleBE=function(t,e,i){return i||Pr(this,0,e,8),br(this,t,e,!1,52,8),e+8},gr.prototype.copy=function(t,e,i,n){if(i||(i=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),0<n&&n<i&&(n=i),n===i||0===t.length||0===this.length)return 0;if(0>e)throw new RangeError("targetStart out of bounds");if(0>i||i>=this.length)throw new RangeError("sourceStart out of bounds");if(0>n)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-i&&(n=t.length-e+i);var r=n-i;if(this===t&&i<e&&e<n)for(n=r-1;0<=n;--n)t[n+e]=this[n+i];else if(1e3>r||!gr.TYPED_ARRAY_SUPPORT)for(n=0;n<r;++n)t[n+e]=this[n+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+r),e);return r},gr.prototype.fill=function(t,e,i,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,i=this.length):"string"==typeof i&&(n=i,i=this.length),1===t.length){var r=t.charCodeAt(0);256>r&&(t=r)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!gr.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(0>e||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(n=e;n<i;++n)this[n]=t;else for(r=(t=Xr(t)?t:Nr(new gr(t,n).toString())).length,n=0;n<i-e;++n)this[n+e]=t[n%r];return this};var Mr=/[^+\/0-9A-Za-z-_]/g;function Nr(t,e){e=e||1/0;for(var i,n=t.length,r=null,o=[],s=0;s<n;++s){if(55295<(i=t.charCodeAt(s))&&57344>i){if(!r){if(56319<i){-1<(e-=3)&&o.push(239,191,189);continue}if(s+1===n){-1<(e-=3)&&o.push(239,191,189);continue}r=i;continue}if(56320>i){-1<(e-=3)&&o.push(239,191,189),r=i;continue}i=65536+(r-55296<<10|i-56320)}else r&&-1<(e-=3)&&o.push(239,191,189);if(r=null,128>i){if(0>--e)break;o.push(i)}else if(2048>i){if(0>(e-=2))break;o.push(i>>6|192,63&i|128)}else if(65536>i){if(0>(e-=3))break;o.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(1114112>i))throw Error("Invalid code point");if(0>(e-=4))break;o.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return o}function Fr(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}function jr(t){if(2>(t=(t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(Mr,"")).length)t="";else for(;0!=t.length%4;)t+="=";ur||dr();var e=t.length;if(0<e%4)throw Error("Invalid string. Length must be a multiple of 4");var i="="===t[e-2]?2:"="===t[e-1]?1:0,n=new hr(3*e/4-i),r=0<i?e-4:e,o=0;for(e=0;e<r;e+=4){var s=ar[t.charCodeAt(e)]<<18|ar[t.charCodeAt(e+1)]<<12|ar[t.charCodeAt(e+2)]<<6|ar[t.charCodeAt(e+3)];n[o++]=s>>16&255,n[o++]=s>>8&255,n[o++]=255&s}return 2===i?(s=ar[t.charCodeAt(e)]<<2|ar[t.charCodeAt(e+1)]>>4,n[o++]=255&s):1===i&&(s=ar[t.charCodeAt(e)]<<10|ar[t.charCodeAt(e+1)]<<4|ar[t.charCodeAt(e+2)]>>2,n[o++]=s>>8&255,n[o++]=255&s),n}function Or(t,e,i,n){for(var r=0;r<n&&!(r+i>=e.length||r>=t.length);++r)e[r+i]=t[r];return r}function Br(t){return null!=t&&(!!t._isBuffer||Ur(t)||"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&Ur(t.slice(0,0)))}function Ur(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}var Hr=Object.freeze({__proto__:null,INSPECT_MAX_BYTES:50,kMaxLength:Gr,Buffer:gr,SlowBuffer:function(t){return+t!=t&&(t=0),gr.alloc(+t)},isBuffer:Br}),zr=gr,Dr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==d?d:"undefined"!=typeof self?self:{};function Ar(t,e){return t(e={exports:{}},e.exports),e.exports}function Qr(){throw Error("setTimeout has not been defined")}function qr(){throw Error("clearTimeout has not been defined")}var $r=Qr,to=qr;function eo(t){if($r===setTimeout)return setTimeout(t,0);if(($r===Qr||!$r)&&setTimeout)return $r=setTimeout,setTimeout(t,0);try{return $r(t,0)}catch(e){try{return $r.call(null,t,0)}catch(e){return $r.call(this,t,0)}}}"function"==typeof lr.setTimeout&&($r=setTimeout),"function"==typeof lr.clearTimeout&&(to=clearTimeout);var io,no=[],ro=!1,oo=-1;function so(){ro&&io&&(ro=!1,io.length?no=io.concat(no):oo=-1,no.length&&lo())}function lo(){if(!ro){var t=eo(so);ro=!0;for(var e=no.length;e;){for(io=no,no=[];++oo<e;)io&&io[oo].run();oo=-1,e=no.length}io=null,ro=!1,function(t){if(to===clearTimeout)return clearTimeout(t);if((to===qr||!to)&&clearTimeout)return to=clearTimeout,clearTimeout(t);try{to(t)}catch(e){try{return to.call(null,t)}catch(e){return to.call(this,t)}}}(t)}}function co(t,e){this.fun=t,this.array=e}co.prototype.run=function(){this.fun.apply(null,this.array)};var ao=lr.performance||{},ho=(ao.now||ao.mozNow||ao.msNow||ao.oNow||ao.webkitNow,new Date,function(){return"/"}),uo=Ar((function(t,e){function i(t,e){for(var i in t)e[i]=t[i]}function n(t,e,i){return r(t,e,i)}var r=Hr.Buffer;r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=Hr:(i(Hr,e),e.Buffer=n),n.prototype=Object.create(r.prototype),i(r,n),n.from=function(t,e,i){if("number"==typeof t)throw new TypeError("Argument must not be a number");return r(t,e,i)},n.alloc=function(t,e,i){if("number"!=typeof t)throw new TypeError("Argument must be a number");return t=r(t),void 0!==e?"string"==typeof i?t.fill(e,i):t.fill(e):t.fill(0),t},n.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r(t)},n.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return Hr.SlowBuffer(t)}})),mo=Ar((function(t,e){function i(){throw Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}function n(t,e){if("number"!=typeof t||t!=t)throw new TypeError("offset must be a number");if(t>a||0>t)throw new TypeError("offset must be a uint32");if(t>l||t>e)throw new RangeError("offset out of range")}function r(t,e,i){if("number"!=typeof t||t!=t)throw new TypeError("size must be a number");if(t>a||0>t)throw new TypeError("size must be a uint32");if(t+e>i||t>l)throw new RangeError("buffer too small")}function o(t,e,i,n){if(e=new Uint8Array(t.buffer,e,i),c.getRandomValues(e),!n)return t;!function(t){var e=Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];no.push(new co(t,e)),1!==no.length||ro||eo(lo)}((function(){n(null,t)}))}var s=uo.Buffer,l=uo.kMaxLength,c=Dr.crypto||Dr.msCrypto,a=Math.pow(2,32)-1;c&&c.getRandomValues?(e.randomFill=function(t,e,i,l){if(!(s.isBuffer(t)||t instanceof Dr.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof e)l=e,e=0,i=t.length;else if("function"==typeof i)l=i,i=t.length-e;else if("function"!=typeof l)throw new TypeError('"cb" argument must be a function');return n(e,t.length),r(i,e,t.length),o(t,e,i,l)},e.randomFillSync=function(t,e,i){if(void 0===e&&(e=0),!(s.isBuffer(t)||t instanceof Dr.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return n(e,t.length),void 0===i&&(i=t.length-e),r(i,e,t.length),o(t,e,i)}):(e.randomFill=i,e.randomFillSync=i)})),po=Ar((function(t){t.exports=mo})).randomFillSync,fo=Math.floor(.001*(Date.now()-performance.now()));function bo(t){if("string"!=typeof t)throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function yo(t,e){for(var i,n="",r=0,o=-1,s=0,l=0;l<=t.length;++l){if(l<t.length)i=t.charCodeAt(l);else{if(47===i)break;i=47}if(47===i){if(o!==l-1&&1!==s)if(o!==l-1&&2===s){if(2>n.length||2!==r||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(2<n.length){if((o=n.lastIndexOf("/"))!==n.length-1){-1===o?(n="",r=0):r=(n=n.slice(0,o)).length-1-n.lastIndexOf("/"),o=l,s=0;continue}}else if(2===n.length||1===n.length){n="",r=0,o=l,s=0;continue}e&&(n=0<n.length?n+"/..":"..",r=2)}else n=0<n.length?n+"/"+t.slice(o+1,l):t.slice(o+1,l),r=l-o-1;o=l,s=0}else 46===i&&-1!==s?++s:s=-1}return n}var Zo,Go={resolve:function(){for(var t,e="",i=!1,n=arguments.length-1;-1<=n&&!i;n--){if(0<=n)var r=arguments[n];else void 0===t&&(t=ho()),r=t;bo(r),0!==r.length&&(e=r+"/"+e,i=47===r.charCodeAt(0))}return e=yo(e,!i),i?0<e.length?"/"+e:"/":0<e.length?e:"."},normalize:function(t){if(bo(t),0===t.length)return".";var e=47===t.charCodeAt(0),i=47===t.charCodeAt(t.length-1);return 0!==(t=yo(t,!e)).length||e||(t="."),0<t.length&&i&&(t+="/"),e?"/"+t:t},isAbsolute:function(t){return bo(t),0<t.length&&47===t.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var t,e=0;e<arguments.length;++e){var i=arguments[e];bo(i),0<i.length&&(t=void 0===t?i:t+"/"+i)}return void 0===t?".":Go.normalize(t)},relative:function(t,e){if(bo(t),bo(e),t===e)return"";if((t=Go.resolve(t))===(e=Go.resolve(e)))return"";for(var i=1;i<t.length&&47===t.charCodeAt(i);++i);for(var n=t.length,r=n-i,o=1;o<e.length&&47===e.charCodeAt(o);++o);for(var s=e.length-o,l=r<s?r:s,c=-1,a=0;a<=l;++a){if(a===l){if(s>l){if(47===e.charCodeAt(o+a))return e.slice(o+a+1);if(0===a)return e.slice(o+a)}else r>l&&(47===t.charCodeAt(i+a)?c=a:0===a&&(c=0));break}var h=t.charCodeAt(i+a);if(h!==e.charCodeAt(o+a))break;47===h&&(c=a)}for(r="",a=i+c+1;a<=n;++a)a!==n&&47!==t.charCodeAt(a)||(r=0===r.length?r+"..":r+"/..");return 0<r.length?r+e.slice(o+c):(o+=c,47===e.charCodeAt(o)&&++o,e.slice(o))},_makeLong:function(t){return t},dirname:function(t){if(bo(t),0===t.length)return".";for(var e=t.charCodeAt(0),i=47===e,n=-1,r=!0,o=t.length-1;1<=o;--o)if(47===(e=t.charCodeAt(o))){if(!r){n=o;break}}else r=!1;return-1===n?i?"/":".":i&&1===n?"//":t.slice(0,n)},basename:function(t,e){if(void 0!==e&&"string"!=typeof e)throw new TypeError('"ext" argument must be a string');bo(t);var i,n=0,r=-1,o=!0;if(void 0!==e&&0<e.length&&e.length<=t.length){if(e.length===t.length&&e===t)return"";var s=e.length-1,l=-1;for(i=t.length-1;0<=i;--i){var c=t.charCodeAt(i);if(47===c){if(!o){n=i+1;break}}else-1===l&&(o=!1,l=i+1),0<=s&&(c===e.charCodeAt(s)?-1==--s&&(r=i):(s=-1,r=l))}return n===r?r=l:-1===r&&(r=t.length),t.slice(n,r)}for(i=t.length-1;0<=i;--i)if(47===t.charCodeAt(i)){if(!o){n=i+1;break}}else-1===r&&(o=!1,r=i+1);return-1===r?"":t.slice(n,r)},extname:function(t){bo(t);for(var e=-1,i=0,n=-1,r=!0,o=0,s=t.length-1;0<=s;--s){var l=t.charCodeAt(s);if(47===l){if(!r){i=s+1;break}}else-1===n&&(r=!1,n=s+1),46===l?-1===e?e=s:1!==o&&(o=1):-1!==e&&(o=-1)}return-1===e||-1===n||0===o||1===o&&e===n-1&&e===i+1?"":t.slice(e,n)},format:function(t){if(null===t||"object"!=typeof t)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);var e=t.dir||t.root,i=t.base||(t.name||"")+(t.ext||"");return e?e===t.root?e+i:e+"/"+i:i},parse:function(t){bo(t);var e={root:"",dir:"",base:"",ext:"",name:""};if(0===t.length)return e;var i=t.charCodeAt(0),n=47===i;if(n){e.root="/";var r=1}else r=0;for(var o=-1,s=0,l=-1,c=!0,a=t.length-1,h=0;a>=r;--a)if(47===(i=t.charCodeAt(a))){if(!c){s=a+1;break}}else-1===l&&(c=!1,l=a+1),46===i?-1===o?o=a:1!==h&&(h=1):-1!==o&&(h=-1);return-1===o||-1===l||0===h||1===h&&o===l-1&&o===s+1?-1!==l&&(e.base=e.name=0===s&&n?t.slice(1,l):t.slice(s,l)):(0===s&&n?(e.name=t.slice(1,o),e.base=t.slice(1,l)):(e.name=t.slice(s,o),e.base=t.slice(s,l)),e.ext=t.slice(o,l)),0<s?e.dir=t.slice(0,s-1):n&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null},Yo=Go.posix=Go,go={hrtime:function(t){return t=function(t){var e=.001*performance.now(),i=Math.floor(e)+fo;return e=Math.floor(e%1*1e9),t&&(i-=t[0],0>(e-=t[1])&&(i--,e+=1e9)),[i,e]}(t),1e9*t[0]+t[1]},exit:function(t){throw new bs(t)},kill:function(t){throw new ys(t)},randomFillSync:po,isTTY:function(){return!0},path:Object.freeze({__proto__:null,default:Yo,__moduleExports:Yo}),fs:null},Wo=or(1),So=or(2),Io=or(4),vo=or(8),Ro=or(16),Xo=or(32),Vo=or(64),Co=or(128),To=or(256),_o=or(512),Lo=or(1024),Ko=or(2048),wo=or(4096),Eo=or(8192),ko=or(16384),xo=or(32768),Jo=or(65536),Po=or(131072),Mo=or(262144),No=or(524288),Fo=or(1048576),jo=or(2097152),Oo=or(4194304),Bo=or(8388608),Uo=or(16777216),Ho=or(33554432),zo=or(67108864),Do=or(134217728),Ao=or(268435456),Qo=Wo|So|Io|vo|Ro|Xo|Vo|Co|To|_o|Lo|Ko|wo|Eo|ko|xo|Jo|Po|Mo|No|Fo|jo|Bo|Oo|Uo|zo|Ho|Do|Ao,qo=Wo|So|Io|vo|Ro|Xo|Vo|Co|To|jo|Oo|Bo|Do,$o=or(0),ts=vo|Ro|Co|_o|Lo|Ko|wo|Eo|ko|xo|Jo|Po|Mo|No|Fo|jo|Bo|Uo|zo|Ho|Do,es=ts|qo,is=So|vo|Vo|jo|Do|Ao,ns=So|vo|Vo|jo|Do,rs=or(0),os={E2BIG:1,EACCES:2,EADDRINUSE:3,EADDRNOTAVAIL:4,EAFNOSUPPORT:5,EALREADY:7,EAGAIN:6,EBADF:8,EBADMSG:9,EBUSY:10,ECANCELED:11,ECHILD:12,ECONNABORTED:13,ECONNREFUSED:14,ECONNRESET:15,EDEADLOCK:16,EDESTADDRREQ:17,EDOM:18,EDQUOT:19,EEXIST:20,EFAULT:21,EFBIG:22,EHOSTDOWN:23,EHOSTUNREACH:23,EIDRM:24,EILSEQ:25,EINPROGRESS:26,EINTR:27,EINVAL:28,EIO:29,EISCONN:30,EISDIR:31,ELOOP:32,EMFILE:33,EMLINK:34,EMSGSIZE:35,EMULTIHOP:36,ENAMETOOLONG:37,ENETDOWN:38,ENETRESET:39,ENETUNREACH:40,ENFILE:41,ENOBUFS:42,ENODEV:43,ENOENT:44,ENOEXEC:45,ENOLCK:46,ENOLINK:47,ENOMEM:48,ENOMSG:49,ENOPROTOOPT:50,ENOSPC:51,ENOSYS:52,ENOTCONN:53,ENOTDIR:54,ENOTEMPTY:55,ENOTRECOVERABLE:56,ENOTSOCK:57,ENOTTY:59,ENXIO:60,EOVERFLOW:61,EOWNERDEAD:62,EPERM:63,EPIPE:64,EPROTO:65,EPROTONOSUPPORT:66,EPROTOTYPE:67,ERANGE:68,EROFS:69,ESPIPE:70,ESRCH:71,ESTALE:72,ETIMEDOUT:73,ETXTBSY:74,EXDEV:75},ss=((Zo={})[6]="SIGHUP",Zo[8]="SIGINT",Zo[11]="SIGQUIT",Zo[7]="SIGILL",Zo[15]="SIGTRAP",Zo[0]="SIGABRT",Zo[2]="SIGBUS",Zo[5]="SIGFPE",Zo[9]="SIGKILL",Zo[20]="SIGUSR1",Zo[12]="SIGSEGV",Zo[21]="SIGUSR2",Zo[10]="SIGPIPE",Zo[1]="SIGALRM",Zo[14]="SIGTERM",Zo[3]="SIGCHLD",Zo[4]="SIGCONT",Zo[13]="SIGSTOP",Zo[16]="SIGTSTP",Zo[17]="SIGTTIN",Zo[18]="SIGTTOU",Zo[19]="SIGURG",Zo[23]="SIGXCPU",Zo[24]="SIGXFSZ",Zo[22]="SIGVTALRM",Zo),ls=Wo|So|Ro|Co|jo|Do,cs=Wo|Vo|Ro|Co|jo|Do;function as(t){var e=Math.trunc(t);return t=or(Math.round(1e6*(t-e))),or(e)*or(1e6)+t}function hs(t){return"number"==typeof t&&(t=Math.trunc(t)),t=or(t),Number(t/or(1e6))}function us(t){return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];try{return t.apply(void 0,nr(e))}catch(t){if(t&&t.code&&"string"==typeof t.code)return os[t.code]||28;if(t instanceof fs)return t.errno;throw t}}}function ds(t,e){var i=t.FD_MAP.get(e);if(!i)throw new fs(8);if(void 0===i.filetype){var n=t.bindings.fs.fstatSync(i.real);e=(t=ms(t,e,n)).rightsBase,n=t.rightsInheriting,i.filetype=t.filetype,i.rights||(i.rights={base:e,inheriting:n})}return i}function ms(t,e,i){switch(!0){case i.isBlockDevice():return{filetype:1,rightsBase:Qo,rightsInheriting:Qo};case i.isCharacterDevice():return void 0!==e&&t.bindings.isTTY(e)?{filetype:2,rightsBase:ns,rightsInheriting:rs}:{filetype:2,rightsBase:Qo,rightsInheriting:Qo};case i.isDirectory():return{filetype:3,rightsBase:ts,rightsInheriting:es};case i.isFIFO():return{filetype:6,rightsBase:is,rightsInheriting:Qo};case i.isFile():return{filetype:4,rightsBase:qo,rightsInheriting:$o};case i.isSocket():return{filetype:6,rightsBase:is,rightsInheriting:Qo};case i.isSymbolicLink():return{filetype:7,rightsBase:or(0),rightsInheriting:or(0)};default:return{filetype:0,rightsBase:or(0),rightsInheriting:or(0)}}}var ps,fs=function(t){function e(i){var n=t.call(this)||this;return n.errno=i,Object.setPrototypeOf(n,e.prototype),n}return tr(e,t),e}(Error),bs=function(t){function e(i){var n=t.call(this,"WASI Exit error: "+i)||this;return n.code=i,Object.setPrototypeOf(n,e.prototype),n}return tr(e,t),e}(Error),ys=function(t){function e(i){var n=t.call(this,"WASI Kill signal: "+i)||this;return n.signal=i,Object.setPrototypeOf(n,e.prototype),n}return tr(e,t),e}(Error),Zs=function(){function t(t){function e(t){switch(t){case 1:return a.hrtime();case 0:return as(Date.now());case 2:case 3:return a.hrtime()-Y;default:return null}}function i(t,e){if(t=ds(o,t),e!==or(0)&&(t.rights.base&e)===or(0))throw new fs(63);return t}function n(t,e){return o.refreshMemory(),Array.from({length:e},(function(e,i){return i=t+8*i,e=o.view.getUint32(i,!0),i=o.view.getUint32(i+4,!0),new Uint8Array(o.memory.buffer,e,i)}))}var r,o=this,s={};t&&t.preopens?s=t.preopens:t&&t.preopenDirectories&&(s=t.preopenDirectories);var l={};t&&t.env&&(l=t.env);var c=[];t&&t.args&&(c=t.args);var a=go;t&&t.bindings&&(a=t.bindings),this.view=this.memory=void 0,this.bindings=a,this.FD_MAP=new Map([[0,{real:0,filetype:2,rights:{base:ls,inheriting:or(0)},path:void 0}],[1,{real:1,filetype:2,rights:{base:cs,inheriting:or(0)},path:void 0}],[2,{real:2,filetype:2,rights:{base:cs,inheriting:or(0)},path:void 0}]]);var h=this.bindings.fs,u=this.bindings.path;try{for(var d=er(Object.entries(s)),m=d.next();!m.done;m=d.next()){var p=ir(m.value,2),f=p[0],b=p[1],y=h.openSync(b,h.constants.O_RDONLY),Z=nr(this.FD_MAP.keys()).reverse()[0]+1;this.FD_MAP.set(Z,{real:y,filetype:3,rights:{base:ts,inheriting:es},fakePath:f,path:b})}}catch(t){var G={error:t}}finally{try{m&&!m.done&&(r=d.return)&&r.call(d)}finally{if(G)throw G.error}}var Y=a.hrtime();this.wasiImport={args_get:function(t,e){o.refreshMemory();var i=t,n=e;return c.forEach((function(t){o.view.setUint32(i,n,!0),i+=4,n+=zr.from(o.memory.buffer).write(t+"\0",n)})),0},args_sizes_get:function(t,e){return o.refreshMemory(),o.view.setUint32(t,c.length,!0),t=c.reduce((function(t,e){return t+zr.byteLength(e)+1}),0),o.view.setUint32(e,t,!0),0},environ_get:function(t,e){o.refreshMemory();var i=t,n=e;return Object.entries(l).forEach((function(t){var e=ir(t,2);t=e[0],e=e[1],o.view.setUint32(i,n,!0),i+=4,n+=zr.from(o.memory.buffer).write(t+"="+e+"\0",n)})),0},environ_sizes_get:function(t,e){o.refreshMemory();var i=Object.entries(l).map((function(t){return(t=ir(t,2))[0]+"="+t[1]+"\0"})),n=i.reduce((function(t,e){return t+zr.byteLength(e)}),0);return o.view.setUint32(t,i.length,!0),o.view.setUint32(e,n,!0),0},clock_res_get:function(t,e){switch(t){case 1:case 2:case 3:var i=or(1);break;case 0:i=or(1e3)}return o.view.setBigUint64(e,i),0},clock_time_get:function(t,i,n){return o.refreshMemory(),null===(t=e(t))?28:(o.view.setBigUint64(n,or(t),!0),0)},fd_advise:us((function(t){return i(t,Co),52})),fd_allocate:us((function(t){return i(t,To),52})),fd_close:us((function(t){var e=i(t,or(0));return h.closeSync(e.real),o.FD_MAP.delete(t),0})),fd_datasync:us((function(t){return t=i(t,Wo),h.fdatasyncSync(t.real),0})),fd_fdstat_get:us((function(t,e){return t=i(t,or(0)),o.refreshMemory(),o.view.setUint8(e,t.filetype),o.view.setUint16(e+2,0,!0),o.view.setUint16(e+4,0,!0),o.view.setBigUint64(e+8,or(t.rights.base),!0),o.view.setBigUint64(e+8+8,or(t.rights.inheriting),!0),0})),fd_fdstat_set_flags:us((function(t){return i(t,vo),52})),fd_fdstat_set_rights:us((function(t,e,n){return((t=i(t,or(0))).rights.base|e)>t.rights.base||(t.rights.inheriting|n)>t.rights.inheriting?63:(t.rights.base=e,t.rights.inheriting=n,0)})),fd_filestat_get:us((function(t,e){t=i(t,jo);var n=h.fstatSync(t.real);return o.refreshMemory(),o.view.setBigUint64(e,or(n.dev),!0),e+=8,o.view.setBigUint64(e,or(n.ino),!0),e+=8,o.view.setUint8(e,t.filetype),e+=8,o.view.setBigUint64(e,or(n.nlink),!0),e+=8,o.view.setBigUint64(e,or(n.size),!0),e+=8,o.view.setBigUint64(e,as(n.atimeMs),!0),e+=8,o.view.setBigUint64(e,as(n.mtimeMs),!0),o.view.setBigUint64(e+8,as(n.ctimeMs),!0),0})),fd_filestat_set_size:us((function(t,e){return t=i(t,Oo),h.ftruncateSync(t.real,Number(e)),0})),fd_filestat_set_times:us((function(t,n,r,o){t=i(t,Bo);var s=h.fstatSync(t.real),l=s.atime;s=s.mtime;var c=hs(e(0));return 3==(3&o)||12==(12&o)?28:(1==(1&o)?l=hs(n):2==(2&o)&&(l=c),4==(4&o)?s=hs(r):8==(8&o)&&(s=c),h.futimesSync(t.real,new Date(l),new Date(s)),0)})),fd_prestat_get:us((function(t,e){return(t=i(t,or(0))).path?(o.refreshMemory(),o.view.setUint8(e,0),o.view.setUint32(e+4,zr.byteLength(t.fakePath),!0),0):28})),fd_prestat_dir_name:us((function(t,e,n){return(t=i(t,or(0))).path?(o.refreshMemory(),zr.from(o.memory.buffer).write(t.fakePath,e,n,"utf8"),0):28})),fd_pwrite:us((function(t,e,r,s,l){var c=i(t,Vo|Io),a=0;return n(e,r).forEach((function(t){for(var e=0;e<t.byteLength;)e+=h.writeSync(c.real,t,e,t.byteLength-e,Number(s)+a+e);a+=e})),o.view.setUint32(l,a,!0),0})),fd_write:us((function(t,e,r,s){var l=i(t,Vo),c=0;return n(e,r).forEach((function(t){for(var e=0;e<t.byteLength;){var i=h.writeSync(l.real,t,e,t.byteLength-e,l.offset?Number(l.offset):null);l.offset&&(l.offset+=or(i)),e+=i}c+=e})),o.view.setUint32(s,c,!0),0})),fd_pread:us((function(t,e,r,s,l){var c;t=i(t,So|Io);var a=0;try{var u=er(n(e,r)),d=u.next();t:for(;!d.done;d=u.next()){var m=d.value;for(e=0;e<m.byteLength;){var p=m.byteLength-e,f=h.readSync(t.real,m,e,m.byteLength-e,Number(s)+a+e);if(e+=f,a+=f,0===f||f<p)break t}a+=e}}catch(t){var b={error:t}}finally{try{d&&!d.done&&(c=u.return)&&c.call(u)}finally{if(b)throw b.error}}return o.view.setUint32(l,a,!0),0})),fd_read:us((function(t,e,r,s){var l,c=0===(t=i(t,So)).real,a=0;try{var u=er(n(e,r)),d=u.next();t:for(;!d.done;d=u.next()){var m=d.value;for(e=0;e<m.byteLength;){var p=m.byteLength-e,f=h.readSync(t.real,m,e,p,c||void 0===t.offset?null:Number(t.offset));if(c||(t.offset=(t.offset?t.offset:or(0))+or(f)),e+=f,a+=f,0===f||f<p)break t}}}catch(t){var b={error:t}}finally{try{d&&!d.done&&(l=u.return)&&l.call(u)}finally{if(b)throw b.error}}return o.view.setUint32(s,a,!0),0})),fd_readdir:us((function(t,e,n,r,s){t=i(t,ko),o.refreshMemory();var l=h.readdirSync(t.path,{withFileTypes:!0}),c=e;for(r=Number(r);r<l.length;r+=1){var a=l[r],d=zr.byteLength(a.name);if(e-c>n)break;if(o.view.setBigUint64(e,or(r+1),!0),(e+=8)-c>n)break;var m=h.statSync(u.resolve(t.path,a.name));if(o.view.setBigUint64(e,or(m.ino),!0),(e+=8)-c>n)break;if(o.view.setUint32(e,d,!0),(e+=4)-c>n)break;switch(!0){case m.isBlockDevice():m=1;break;case m.isCharacterDevice():m=2;break;case m.isDirectory():m=3;break;case m.isFIFO():m=6;break;case m.isFile():m=4;break;case m.isSocket():m=6;break;case m.isSymbolicLink():m=7;break;default:m=0}if(o.view.setUint8(e,m),e+=1,(e+=3)+d>=c+n)break;zr.from(o.memory.buffer).write(a.name,e),e+=d}return o.view.setUint32(s,Math.min(e-c,n),!0),0})),fd_renumber:us((function(t,e){return i(t,or(0)),i(e,or(0)),h.closeSync(o.FD_MAP.get(t).real),o.FD_MAP.set(t,o.FD_MAP.get(e)),o.FD_MAP.delete(e),0})),fd_seek:us((function(t,e,n,r){switch(t=i(t,Io),o.refreshMemory(),n){case 1:t.offset=(t.offset?t.offset:or(0))+or(e);break;case 2:n=h.fstatSync(t.real).size,t.offset=or(n)+or(e);break;case 0:t.offset=or(e)}return o.view.setBigUint64(r,t.offset,!0),0})),fd_tell:us((function(t,e){return t=i(t,Xo),o.refreshMemory(),t.offset||(t.offset=or(0)),o.view.setBigUint64(e,t.offset,!0),0})),fd_sync:us((function(t){return t=i(t,Ro),h.fsyncSync(t.real),0})),path_create_directory:us((function(t,e,n){return(t=i(t,_o)).path?(o.refreshMemory(),e=zr.from(o.memory.buffer,e,n).toString(),h.mkdirSync(u.resolve(t.path,e)),0):28})),path_filestat_get:us((function(t,e,n,r,s){return(t=i(t,Mo)).path?(o.refreshMemory(),n=zr.from(o.memory.buffer,n,r).toString(),n=h.statSync(u.resolve(t.path,n)),o.view.setBigUint64(s,or(n.dev),!0),s+=8,o.view.setBigUint64(s,or(n.ino),!0),s+=8,o.view.setUint8(s,ms(o,void 0,n).filetype),s+=8,o.view.setBigUint64(s,or(n.nlink),!0),s+=8,o.view.setBigUint64(s,or(n.size),!0),s+=8,o.view.setBigUint64(s,as(n.atimeMs),!0),s+=8,o.view.setBigUint64(s,as(n.mtimeMs),!0),o.view.setBigUint64(s+8,as(n.ctimeMs),!0),0):28})),path_filestat_set_times:us((function(t,n,r,s,l,c,a){if(!(t=i(t,Fo)).path)return 28;o.refreshMemory();var d=h.fstatSync(t.real);n=d.atime,d=d.mtime;var m=hs(e(0));return 3==(3&a)||12==(12&a)?28:(1==(1&a)?n=hs(l):2==(2&a)&&(n=m),4==(4&a)?d=hs(c):8==(8&a)&&(d=m),r=zr.from(o.memory.buffer,r,s).toString(),h.utimesSync(u.resolve(t.path,r),new Date(n),new Date(d)),0)})),path_link:us((function(t,e,n,r,s,l,c){return t=i(t,Ko),s=i(s,wo),t.path&&s.path?(o.refreshMemory(),n=zr.from(o.memory.buffer,n,r).toString(),l=zr.from(o.memory.buffer,l,c).toString(),h.linkSync(u.resolve(t.path,n),u.resolve(s.path,l)),0):28})),path_open:us((function(t,e,n,r,s,l,c,a,d){e=i(t,Eo),l=or(l),c=or(c),t=(l&(So|ko))!==or(0);var m=(l&(Wo|Vo|To|Oo))!==or(0);if(m&&t)var p=h.constants.O_RDWR;else t?p=h.constants.O_RDONLY:m&&(p=h.constants.O_WRONLY);if(t=l|Eo,l|=c,0!=(1&s)&&(p|=h.constants.O_CREAT,t|=Lo),0!=(2&s)&&(p|=h.constants.O_DIRECTORY),0!=(4&s)&&(p|=h.constants.O_EXCL),0!=(8&s)&&(p|=h.constants.O_TRUNC,t|=No),0!=(1&a)&&(p|=h.constants.O_APPEND),0!=(2&a)&&(p=h.constants.O_DSYNC?p|h.constants.O_DSYNC:p|h.constants.O_SYNC,l|=Wo),0!=(4&a)&&(p|=h.constants.O_NONBLOCK),0!=(8&a)&&(p=h.constants.O_RSYNC?p|h.constants.O_RSYNC:p|h.constants.O_SYNC,l|=Ro),0!=(16&a)&&(p|=h.constants.O_SYNC,l|=Ro),m&&0==(p&(h.constants.O_APPEND|h.constants.O_TRUNC))&&(l|=Io),o.refreshMemory(),n=zr.from(o.memory.buffer,n,r).toString(),n=u.resolve(e.path,n),u.relative(e.path,n).startsWith(".."))return 76;try{var f=h.realpathSync(n);if(u.relative(e.path,f).startsWith(".."))return 76}catch(t){if("ENOENT"!==t.code)throw t;f=n}try{var b=h.statSync(f).isDirectory()}catch(t){}return p=!m&&b?h.openSync(f,h.constants.O_RDONLY):h.openSync(f,p),b=nr(o.FD_MAP.keys()).reverse()[0]+1,o.FD_MAP.set(b,{real:p,filetype:void 0,rights:{base:t,inheriting:l},path:f}),ds(o,b),o.view.setUint32(d,b,!0),0})),path_readlink:us((function(t,e,n,r,s,l){return(t=i(t,xo)).path?(o.refreshMemory(),e=zr.from(o.memory.buffer,e,n).toString(),e=u.resolve(t.path,e),e=h.readlinkSync(e),r=zr.from(o.memory.buffer).write(e,r,s),o.view.setUint32(l,r,!0),0):28})),path_remove_directory:us((function(t,e,n){return(t=i(t,Ho)).path?(o.refreshMemory(),e=zr.from(o.memory.buffer,e,n).toString(),h.rmdirSync(u.resolve(t.path,e)),0):28})),path_rename:us((function(t,e,n,r,s,l){return t=i(t,Jo),r=i(r,Po),t.path&&r.path?(o.refreshMemory(),e=zr.from(o.memory.buffer,e,n).toString(),s=zr.from(o.memory.buffer,s,l).toString(),h.renameSync(u.resolve(t.path,e),u.resolve(r.path,s)),0):28})),path_symlink:us((function(t,e,n,r,s){return(n=i(n,Uo)).path?(o.refreshMemory(),t=zr.from(o.memory.buffer,t,e).toString(),r=zr.from(o.memory.buffer,r,s).toString(),h.symlinkSync(t,u.resolve(n.path,r)),0):28})),path_unlink_file:us((function(t,e,n){return(t=i(t,zo)).path?(o.refreshMemory(),e=zr.from(o.memory.buffer,e,n).toString(),h.unlinkSync(u.resolve(t.path,e)),0):28})),poll_oneoff:function(t,i,n,r){var s=0,l=0;o.refreshMemory();for(var c=0;c<n;c+=1){var h=o.view.getBigUint64(t,!0);t+=8;var u=o.view.getUint8(t);switch(t+=1,u){case 0:t+=7,o.view.getBigUint64(t,!0),t+=8;var d=o.view.getUint32(t,!0);t+=4,t+=4,u=o.view.getBigUint64(t,!0),t+=8,o.view.getBigUint64(t,!0),t+=8;var m=o.view.getUint16(t,!0);t+=2,t+=6;var p=1===m;m=0,null===(d=or(e(d)))?m=28:l=(u=p?u:d+u)>l?u:l,o.view.setBigUint64(i,h,!0),i+=8,o.view.setUint16(i,m,!0),i+=2,o.view.setUint8(i,0),i+=1,i+=5,s+=1;break;case 1:case 2:t+=3,o.view.getUint32(t,!0),t+=4,o.view.setBigUint64(i,h,!0),i+=8,o.view.setUint16(i,52,!0),i+=2,o.view.setUint8(i,u),i+=1,i+=5,s+=1;break;default:return 28}}for(o.view.setUint32(r,s,!0);a.hrtime()<l;);return 0},proc_exit:function(t){return a.exit(t),0},proc_raise:function(t){return t in ss?(a.kill(ss[t]),0):28},random_get:function(t,e){return o.refreshMemory(),a.randomFillSync(new Uint8Array(o.memory.buffer),t,e),0},sched_yield:function(){return 0},sock_recv:function(){return 52},sock_send:function(){return 52},sock_shutdown:function(){return 52}},t.traceSyscalls&&Object.keys(this.wasiImport).forEach((function(t){var e=o.wasiImport[t];o.wasiImport[t]=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];console.log("WASI: wasiImport called: "+t+" ("+i+")");try{var r=e.apply(void 0,nr(i));return console.log("WASI:  => "+r),r}catch(t){throw console.log("Catched error: "+t),t}}}))}return t.prototype.refreshMemory=function(){this.view&&0!==this.view.buffer.byteLength||(this.view=new sr(this.memory.buffer))},t.prototype.setMemory=function(t){this.memory=t},t.prototype.start=function(t){if(null===(t=t.exports)||"object"!=typeof t)throw Error("instance.exports must be an Object. Received "+t+".");var e=t.memory;if(!(e instanceof WebAssembly.Memory))throw Error("instance.exports.memory must be a WebAssembly.Memory. Recceived "+e+".");this.setMemory(e),t._start&&t._start()},t.prototype.getImportNamespace=function(t){var e,i=null;try{for(var n=er(WebAssembly.Module.imports(t)),r=n.next();!r.done;r=n.next()){var o=r.value;if("function"===o.kind&&o.module.startsWith("wasi_"))if(i){if(i!==o.module)throw Error("Multiple namespaces detected.")}else i=o.module}}catch(t){var s={error:t}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(s)throw s.error}}return i},t.prototype.getImports=function(t){switch(this.getImportNamespace(t)){case"wasi_unstable":return{wasi_unstable:this.wasiImport};case"wasi_snapshot_preview1":return{wasi_snapshot_preview1:this.wasiImport};default:throw Error("Can't detect a WASI namespace for the WebAssembly Module")}},t.defaultBindings=go,t}(),Gs=function(){function t(t){this.options=t}return t.prototype.run=function(){return Zn(this,void 0,void 0,(function(){return Gn(this,(function(){throw Error("run not implemented by the Command subclass")}))}))},t}(),Ys=function(t){function e(e){var i=t.call(this,e)||this;if(!e.module)throw Error("Did not find a WebAssembly.Module for the WASI Command");return i}return bn(e,t),e.prototype.run=function(t){return Zn(this,void 0,void 0,(function(){var e,i,n,r;return Gn(this,(function(o){switch(o.label){case 0:return e={preopens:yn({".":".","/":"/"},this.options.preopens||{}),env:this.options.env,args:this.options.args,bindings:yn(yn({},Zs.defaultBindings),{fs:t.fs})},i=new Zs(e),n=this.options.module,[4,WebAssembly.instantiate(n,yn({},i.getImports(n)))];case 1:return r=o.sent(),i.start(r),[2]}}))}))},e}(Gs),gs=function(t){function e(e){var i=t.call(this,e)||this;if(!e.callback)throw Error("The Command Options provided are not for a Callback Command");return i.callback=e.callback,i}return bn(e,t),e.prototype.run=function(t){return Zn(this,void 0,void 0,(function(){var e;return Gn(this,(function(i){switch(i.label){case 0:return[4,Promise.resolve(this.callback(this.options,t))];case 1:return"string"==typeof(e=i.sent())&&t.fs.writeFileSync("/dev/stdout",(new TextEncoder).encode(e+"\n")),[2]}}))}))},e}(Gs),Ws=function(){function t(t,e,i,n,r,o,s,l,c){var a=this;this.stdinPrompt="",this.commandOptions=t,this.wasmFs=new mn,this.wasmFs.fromJSON(e),this.originalWasmFsJson=e,this.ioDevices=new qn(this.wasmFs),this.ioDeviceWindow=o,this.ioDevices.setWindowSizeCallback((function(){var t=a.ioDevices.getWindowSize();a.ioDeviceWindow.resize(t[0],t[1])})),this.ioDevices.setBufferIndexDisplayCallback((function(){var t=a.ioDevices.getFrameBuffer();a.ioDeviceWindow.drawRgbaArrayToFrameBuffer(t)})),this.ioDevices.setInputCallback((function(){if(a.sharedIoDeviceInput){a.ioDeviceWindow.getInputBuffer(),Atomics.wait(a.sharedIoDeviceInput,0,-1);var t=a.sharedIoDeviceInput[0];if(a.sharedIoDeviceInput[0]=-1,0<t){for(var e=new Uint8Array(t),i=0;i<t;i++)e[i]=a.sharedIoDeviceInput[i+1];return e}return new Uint8Array}return a.ioDeviceWindow.getInputBuffer()})),this.dataCallback=i,this.endCallback=n,this.errorCallback=r,e=void 0,s&&(e=new Int32Array(s)),this.sharedIoDeviceInput=e,s=void 0,l&&(s=new Int32Array(l)),this.command=t.module?new Ys(t):new gs(t),this.wasmFs.volume.fds[0].node.read=this.stdinRead.bind(this),this.wasmFs.volume.fds[1].node.write=this.stdoutWrite.bind(this),this.wasmFs.volume.fds[2].node.write=this.stdoutWrite.bind(this),t=this.wasmFs.volume.openSync("/dev/tty","w+"),this.wasmFs.volume.fds[t].node.read=this.stdinRead.bind(this),this.wasmFs.volume.fds[t].node.write=this.stdoutWrite.bind(this),this.sharedStdin=s,this.startStdinReadCallback=c,this.readStdinCounter=0,this.pipedStdin=""}return t.prototype.start=function(t){return Zn(this,void 0,void 0,(function(){var e,i,n,r=this;return Gn(this,(function(o){switch(o.label){case 0:e=function(){r.ioDeviceWindow.resize(0,0),setTimeout((function(){r.endCallback(r.wasmFs.toJSON())}),50)},o.label=1;case 1:return o.trys.push([1,3,,4]),t&&(this.pipedStdin=new TextDecoder("utf-8").decode(t)),[4,this.command.run(this.wasmFs)];case 2:return o.sent(),e(),[3,4];case 3:if((i=o.sent())instanceof bs)return e(),[2];if(n="Unknown Error",void 0!==i.code)n="exited with code: "+i.code;else if(void 0!==i.signal)n="killed with signal: "+i.signal;else if(void 0!==i.user)return e(),[2];return console.error(i),this.errorCallback(n,this.wasmFs.toJSON(),void 0!==i.user),[3,4];case 4:return[2]}}))}))},t.prototype.stdoutWrite=function(t){this.dataCallback&&this.dataCallback(t);var e=new TextDecoder("utf-8").decode(t).split("\n");return this.stdinPrompt=0<e.length?e[e.length-1].replace(/[\u001B\u009B][[\]()#;?]*(?:(?:(?:[a-zA-Z\d]*(?:;[-a-zA-Z\d\/#&.:=?%@~_]*)*)?\u0007)|(?:(?:\d{1,4}(?:;\d{0,4})*)?[\dA-PR-TZcf-ntqry=><~]))/g,""):"",t.length},t.prototype.stdinRead=function(t){if(0!=this.readStdinCounter%2)return this.readStdinCounter++,0;if(this.pipedStdin){var e=this.pipedStdin;this.pipedStdin="",this.readStdinCounter++}else if(this.sharedStdin&&this.startStdinReadCallback){this.startStdinReadCallback(),Atomics.wait(this.sharedStdin,0,-1),e=this.sharedStdin[0],this.sharedStdin[0]=-1;for(var i=new Uint8Array(e),n=0;n<e;n++)i[n]=this.sharedStdin[1+n];e=new TextDecoder("utf-8").decode(i)}else{if(null===(e=prompt("Please enter text for stdin:\n"+this.stdinPrompt)))throw this.dataCallback&&this.dataCallback((new TextEncoder).encode("\n")),(t=Error("Process killed by user")).user=!0,t;e+="\n",this.dataCallback&&this.dataCallback((new TextEncoder).encode(e))}if(!e)return 0;for(e=(new TextEncoder).encode(e),i=0;i<e.length;++i)t[i]=e[i];return e.length},t}(),Ss=function(){function t(t){this.oldPopupKeyCodes=[],this.popupKeyCodes=[],this.oldMouseMovePosition={x:0,y:0},this.mouseMovePosition={x:0,y:0},this.mouseMiddleClickPosition=this.mouseRightClickPosition=this.mouseLeftClickPosition=void 0,t&&(this.sharedIoDeviceInput=new Int32Array(t))}return t.prototype.resize=function(t,e){0===t&&0===e?this.close():this.popupWindow&&this.popupCanvas&&this.popupCanvasContext?(this.popupCanvas.width=t,this.popupCanvas.height=e,this.popupImageData=this.popupCanvasContext.getImageData(0,0,t,e)):this._open(t,e)},t.prototype.close=function(){this.popupWindow&&(this.popupWindow.close(),this.popupWindow=void 0)},t.prototype.drawRgbaArrayToFrameBuffer=function(t){this.popupCanvas&&this.popupCanvasContext&&this.popupImageData&&(this.popupImageData.data.set(t),this.popupCanvasContext.putImageData(this.popupImageData,0,0))},t.prototype.getInputBuffer=function(){var t=this,e=[];this.popupKeyCodes.forEach((function(i){t.oldPopupKeyCodes.includes(i)||(e.push(1),e.push(i))})),this.oldMouseMovePosition.x===this.mouseMovePosition.x&&this.oldMouseMovePosition.y===this.mouseMovePosition.y||(e.push(2),this._append32BitIntToByteArray(this.mouseMovePosition.x,e),this._append32BitIntToByteArray(this.mouseMovePosition.y,e)),this.oldMouseMovePosition=this.mouseMovePosition,this.oldPopupKeyCodes.forEach((function(i){t.popupKeyCodes.includes(i)||(e.push(3),e.push(i))})),this.oldPopupKeyCodes=this.popupKeyCodes.slice(0),this.mouseLeftClickPosition&&(e.push(4),this._append32BitIntToByteArray(this.mouseLeftClickPosition.x,e),this._append32BitIntToByteArray(this.mouseLeftClickPosition.y,e),this.mouseLeftClickPosition=void 0),this.mouseRightClickPosition&&(e.push(5),this._append32BitIntToByteArray(this.mouseRightClickPosition.x,e),this._append32BitIntToByteArray(this.mouseRightClickPosition.y,e),this.mouseRightClickPosition=void 0),this.mouseMiddleClickPosition&&(e.push(4),this._append32BitIntToByteArray(this.mouseMiddleClickPosition.x,e),this._append32BitIntToByteArray(this.mouseMiddleClickPosition.y,e),this.mouseMiddleClickPosition=void 0);var i=new Uint8Array(e);if(this.sharedIoDeviceInput){for(var n=0;n<i.length;n++)this.sharedIoDeviceInput[n+1]=i[n];this.sharedIoDeviceInput[0]=i.length,Atomics.notify(this.sharedIoDeviceInput,0,1)}return i},t.prototype._open=function(t,e){var i=Math.min(Math.floor(screen.width/t),Math.floor(screen.height/e));this.popupWindow=window.open("about:blank","WasmerExperimentalFramebuffer","width="+t*i+",height="+e*i),this.popupWindow.document.body.innerHTML='\n      <style>\n        html, body {\n          width: 100%;\n          height: 100%;\n        }\n\n        body {\n          display: flex;\n          flex-direction: column;\n          justify-content: center;\n          align-items: center;\n\n          margin: 0px;\n          margin-left: auto;\n          margin-right: auto;\n        }\n\n        #io-device-framebuffer {\n\n          width: 100%;\n          height: auto;\n\n          /* Will Keep pixel art looking good */\n          image-rendering: pixelated;\n          image-rendering: -moz-crisp-edges;\n          image-rendering: crisp-edges;\n        }\n      </style>\n      <canvas id="io-device-framebuffer" width="'+t+'" height="'+e+'"></canvas>\n    ',this.popupWindow.document.head.innerHTML="\n      <title>Wasmer Experimental Framebuffer</title>\n    ",this.popupCanvas=this.popupWindow.document.querySelector("#io-device-framebuffer"),this.popupCanvasContext=this.popupCanvas.getContext("2d"),this.popupImageData=this.popupCanvasContext.getImageData(0,0,t,e),this.popupWindow.document.addEventListener("keydown",this._eventListenerKeydown.bind(this)),this.popupWindow.document.addEventListener("keyup",this._eventListenerKeyup.bind(this)),this.popupWindow.document.addEventListener("mousemove",this._eventListenerMousemove.bind(this)),this.popupWindow.document.addEventListener("click",this._eventListenerClick.bind(this))},t.prototype._append32BitIntToByteArray=function(t,e){for(var i=0;4>i;i++){var n=t;n&=255<<8*i,n>>=8*i,e.push(n)}},t.prototype._eventListenerKeydown=function(t){t.preventDefault(),this.popupKeyCodes.includes(t.keyCode)||this.popupKeyCodes.push(t.keyCode)},t.prototype._eventListenerKeyup=function(t){t.preventDefault(),-1<(t=this.popupKeyCodes.indexOf(t.keyCode))&&this.popupKeyCodes.splice(t,1)},t.prototype._eventListenerMousemove=function(t){void 0!==(t=this._getPositionFromMouseEvent(t))&&(this.mouseMovePosition=t)},t.prototype._eventListenerClick=function(t){var e=this._getPositionFromMouseEvent(t);void 0!==e&&(0===t.button?this.mouseLeftClickPosition=e:1===t.button?this.mouseMiddleClickPosition=e:2===t.button&&(this.mouseRightClickPosition=e))},t.prototype._getPositionFromMouseEvent=function(t){if(this.popupCanvas){var e=this.popupCanvas.getBoundingClientRect(),i=e.x,n=e.x+e.width,r=e.y,o=e.y+e.height,s=void 0,l=void 0;if(t.x>=i&&t.x<=n&&(s=t.x-i),t.y>=r&&t.y<=o&&(l=t.y-r),void 0!==s&&void 0!==l)return{x:this.popupCanvas.width/e.width*s,y:this.popupCanvas.height/e.height*l}}},t}(),Is=function(){function t(t,e,i,n,r){this.wasmTerminalConfig=t,this.commandString=e,this.commandStartReadCallback=i,this.commandEndCallback=n,r&&(this.wasmTty=r),this.commandOptionsForProcessesToRun=[],this.spawnedProcessObjects=[],this.spawnedProcesses=0,this.pipedStdinDataForNextProcess=new Uint8Array,this.isRunning=!1,this.supportsSharedArrayBuffer=this.wasmTerminalConfig.processWorkerUrl&&window.SharedArrayBuffer&&window.Atomics}return t.prototype.runCommand=function(){return Zn(this,void 0,void 0,(function(){var t,e,i;return Gn(this,(function(n){switch(n.label){case 0:t=Hn(this.commandString),n.label=1;case 1:if(n.trys.push([1,3,,4]),1<t.length)throw Error("Only one command permitted");if("command"!==t[0].type)throw Error("Only commands allowed");return e=this,[4,this._getCommandOptionsFromAST(t[0],this.wasmTerminalConfig,this.wasmTty)];case 2:return e.commandOptionsForProcessesToRun=n.sent(),[3,4];case 3:return i=n.sent(),this.wasmTty&&(this.wasmTty.print("\r\n"),this.wasmTty.print("wasm shell: parse error ("+i.toString()+")\r\n")),console.error(i),this.commandEndCallback(),[2];case 4:return this.isRunning=!0,[4,this._tryToSpawnProcess(0)];case 5:return n.sent(),[2]}}))}))},t.prototype.kill=function(){this.isRunning&&(this.spawnedProcessObjects.forEach((function(t){t.worker&&t.worker.terminate(),t.ioDeviceWindow&&t.ioDeviceWindow.close()})),this.commandOptionsForProcessesToRun=[],this.spawnedProcessObjects=[],this.isRunning=!1,this.commandEndCallback())},t.prototype._addStdinToSharedStdin=function(t,e){if(this.spawnedProcessObjects[e]){var i=this.spawnedProcessObjects[e].sharedStdin,n=1;0<i[0]&&(n=i[0]),t.forEach((function(t,e){i[n+e]=t})),i[0]=n+t.length-1,Atomics.notify(i,0,1)}},t.prototype._tryToSpawnProcess=function(t){return Zn(this,void 0,void 0,(function(){return Gn(this,(function(e){switch(e.label){case 0:return t+1>this.spawnedProcesses&&2>this.spawnedProcessObjects.length&&t<this.commandOptionsForProcessesToRun.length?(this.spawnedProcesses++,[4,this._spawnProcess(t)]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.prototype._spawnProcess=function(t){return Zn(this,void 0,void 0,(function(){var e,i;return Gn(this,(function(n){switch(n.label){case 0:return e=void 0,this.commandOptionsForProcessesToRun[t].module&&this.supportsSharedArrayBuffer?[4,this._spawnProcessAsWorker(t)]:[3,2];case 1:return e=n.sent(),[3,4];case 2:return[4,this._spawnProcessAsService(t)];case 3:e=n.sent(),n.label=4;case 4:return this.spawnedProcessObjects.push(e),e.process.start(0<this.pipedStdinDataForNextProcess.length?this.pipedStdinDataForNextProcess:void 0),0<this.pipedStdinDataForNextProcess.length&&(this.pipedStdinDataForNextProcess=new Uint8Array),i=!1,this.commandOptionsForProcessesToRun.length>t+1&&(i=void 0!==this.commandOptionsForProcessesToRun[t+1].callback),this.supportsSharedArrayBuffer&&!i&&this._tryToSpawnProcess(t+1),[2]}}))}))},t.prototype._spawnProcessAsWorker=function(t){return Zn(this,void 0,void 0,(function(){var e,i,n,r,o,s,l,c,a;return Gn(this,(function(h){switch(h.label){case 0:if(!this.wasmTerminalConfig.processWorkerUrl)throw Error("Terminal Config missing the Process Worker URL");return this.wasmTerminalConfig.processWorkerUrl,[4,this._getBlobUrlForProcessWorker("data:application/javascript;base64,LyoKICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAgICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICAgIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOyB5b3UgbWF5IG5vdCB1c2UKICAgIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlCiAgICBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoKICAgIFRISVMgQ09ERSBJUyBQUk9WSURFRCBPTiBBTiAqQVMgSVMqIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICAgIEtJTkQsIEVJVEhFUiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBXSVRIT1VUIExJTUlUQVRJT04gQU5ZIElNUExJRUQKICAgIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBUSVRMRSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UsCiAgICBNRVJDSEFOVEFCTElUWSBPUiBOT04tSU5GUklOR0VNRU5ULgoKICAgIFNlZSB0aGUgQXBhY2hlIFZlcnNpb24gMi4wIExpY2Vuc2UgZm9yIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucwogICAgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KJ3VzZSBzdHJpY3QnOyhmdW5jdGlvbigpe2Z1bmN0aW9uIG1jKGMsYT1zZWxmKXthLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLGZ1bmN0aW9uIGUoZCl7aWYoZCYmZC5kYXRhKXt2YXIge2lkOmYsdHlwZTpnLHBhdGg6aH09T2JqZWN0LmFzc2lnbih7cGF0aDpbXX0sZC5kYXRhKSxrPShkLmRhdGEuYXJndW1lbnRMaXN0fHxbXSkubWFwKEZhKTt0cnl7bGV0IGE9aC5zbGljZSgwLC0xKS5yZWR1Y2UoKGEsYyk9PmFbY10sYyksZT1oLnJlZHVjZSgoYSxjKT0+YVtjXSxjKTtzd2l0Y2goZyl7Y2FzZSAwOnZhciB0PWU7YnJlYWs7Y2FzZSAxOmFbaC5zbGljZSgtMSlbMF1dPUZhKGQuZGF0YS52YWx1ZSk7dD0hMDticmVhaztjYXNlIDI6dD1lLmFwcGx5KGEsayk7YnJlYWs7Y2FzZSAzOntsZXQgYT1uZXcgZSguLi5rKTt0PU9iamVjdC5hc3NpZ24oYSx7W3ZkXTohMH0pfWJyZWFrO2Nhc2UgNDp7bGV0IHtwb3J0MTphLHBvcnQyOmR9PW5ldyBNZXNzYWdlQ2hhbm5lbDttYyhjLGQpO3Q9CkNmKGEsW2FdKX1icmVhaztjYXNlIDU6dD12b2lkIDB9fWNhdGNoKHEpe3Q9cSxuYy5hZGQocSl9UHJvbWlzZS5yZXNvbHZlKHQpLmNhdGNoKGE9PntuYy5hZGQoYSk7cmV0dXJuIGF9KS50aGVuKGM9PntsZXQgW2QsaF09b2MoYyk7YS5wb3N0TWVzc2FnZShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZCkse2lkOmZ9KSxoKTs1PT09ZyYmKGEucmVtb3ZlRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsZSksIk1lc3NhZ2VQb3J0Ij09PWEuY29uc3RydWN0b3IubmFtZSYmYS5jbG9zZSgpKX0pfX0pO2Euc3RhcnQmJmEuc3RhcnQoKX1mdW5jdGlvbiBEYihjKXtpZihjKXRocm93IEVycm9yKCJQcm94eSBoYXMgYmVlbiByZWxlYXNlZCBhbmQgaXMgbm90IHVzZWFibGUiKTt9ZnVuY3Rpb24gcGMoYyxhPVtdLGI9ZnVuY3Rpb24oKXt9KXtsZXQgZD0hMSxlPW5ldyBQcm94eShiLHtnZXQoYixnKXtEYihkKTtpZihnPT09RGYpcmV0dXJuKCk9PlRhKGMse3R5cGU6NSxwYXRoOmEubWFwKGE9PgphLnRvU3RyaW5nKCkpfSkudGhlbigoKT0+eyJNZXNzYWdlUG9ydCI9PT1jLmNvbnN0cnVjdG9yLm5hbWUmJmMuY2xvc2UoKTtkPSEwfSk7aWYoInRoZW4iPT09Zyl7aWYoMD09PWEubGVuZ3RoKXJldHVybnt0aGVuOigpPT5lfTtiPVRhKGMse3R5cGU6MCxwYXRoOmEubWFwKGE9PmEudG9TdHJpbmcoKSl9KS50aGVuKEZhKTtyZXR1cm4gYi50aGVuLmJpbmQoYil9cmV0dXJuIHBjKGMsWy4uLmEsZ10pfSxzZXQoYixlLGgpe0RiKGQpO2NvbnN0IFtmLGddPW9jKGgpO3JldHVybiBUYShjLHt0eXBlOjEscGF0aDpbLi4uYSxlXS5tYXAoYT0+YS50b1N0cmluZygpKSx2YWx1ZTpmfSxnKS50aGVuKEZhKX0sYXBwbHkoYixlLGgpe0RiKGQpO2I9YVthLmxlbmd0aC0xXTtpZihiPT09RWYpcmV0dXJuIFRhKGMse3R5cGU6NH0pLnRoZW4oRmEpO2lmKCJiaW5kIj09PWIpcmV0dXJuIHBjKGMsYS5zbGljZSgwLC0xKSk7Y29uc3QgW2YsZ109d2QoaCk7cmV0dXJuIFRhKGMse3R5cGU6MixwYXRoOmEubWFwKGE9PgphLnRvU3RyaW5nKCkpLGFyZ3VtZW50TGlzdDpmfSxnKS50aGVuKEZhKX0sY29uc3RydWN0KGIsZSl7RGIoZCk7Y29uc3QgW2YsZ109d2QoZSk7cmV0dXJuIFRhKGMse3R5cGU6MyxwYXRoOmEubWFwKGE9PmEudG9TdHJpbmcoKSksYXJndW1lbnRMaXN0OmZ9LGcpLnRoZW4oRmEpfX0pO3JldHVybiBlfWZ1bmN0aW9uIHdkKGMpe2M9Yy5tYXAob2MpO3JldHVybltjLm1hcChhPT5hWzBdKSxBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLGMubWFwKGE9PmFbMV0pKV19ZnVuY3Rpb24gQ2YoYyxhKXt4ZC5zZXQoYyxhKTtyZXR1cm4gY31mdW5jdGlvbiBvYyhjKXtmb3IobGV0IFthLGJdb2YgeWQpaWYoYi5jYW5IYW5kbGUoYykpe2xldCBbZCxlXT1iLnNlcmlhbGl6ZShjKTtyZXR1cm5be3R5cGU6MyxuYW1lOmEsdmFsdWU6ZH0sZV19cmV0dXJuW3t0eXBlOjAsdmFsdWU6Y30seGQuZ2V0KGMpfHxbXV19ZnVuY3Rpb24gRmEoYyl7c3dpdGNoKGMudHlwZSl7Y2FzZSAzOnJldHVybiB5ZC5nZXQoYy5uYW1lKS5kZXNlcmlhbGl6ZShjLnZhbHVlKTsKY2FzZSAwOnJldHVybiBjLnZhbHVlfX1mdW5jdGlvbiBUYShjLGEsYil7cmV0dXJuIG5ldyBQcm9taXNlKGQ9PntsZXQgZT1GZigpO2MuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsZnVuY3Rpb24gaChhKXthLmRhdGEmJmEuZGF0YS5pZCYmYS5kYXRhLmlkPT09ZSYmKGMucmVtb3ZlRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsaCksZChhLmRhdGEpKX0pO2Muc3RhcnQmJmMuc3RhcnQoKTtjLnBvc3RNZXNzYWdlKE9iamVjdC5hc3NpZ24oe2lkOmV9LGEpLGIpfSl9ZnVuY3Rpb24gRmYoKXtyZXR1cm4gQXJyYXkoNCkuZmlsbCgwKS5tYXAoKCk9Pk1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSpOdW1iZXIuTUFYX1NBRkVfSU5URUdFUikudG9TdHJpbmcoMTYpKS5qb2luKCItIil9ZnVuY3Rpb24gemQoYyxhKXtmdW5jdGlvbiBiKCl7dGhpcy5jb25zdHJ1Y3Rvcj1jfXFjKGMsYSk7Yy5wcm90b3R5cGU9bnVsbD09PWE/T2JqZWN0LmNyZWF0ZShhKTooYi5wcm90b3R5cGU9YS5wcm90b3R5cGUsCm5ldyBiKX1mdW5jdGlvbiBFYihjLGEsYixkKXtyZXR1cm4gbmV3IChifHwoYj1Qcm9taXNlKSkoZnVuY3Rpb24oZSxmKXtmdW5jdGlvbiBnKGEpe3RyeXtrKGQubmV4dChhKSl9Y2F0Y2gocSl7ZihxKX19ZnVuY3Rpb24gaChhKXt0cnl7ayhkWyJ0aHJvdyJdKGEpKX1jYXRjaChxKXtmKHEpfX1mdW5jdGlvbiBrKGEpe2EuZG9uZT9lKGEudmFsdWUpOihuZXcgYihmdW5jdGlvbihjKXtjKGEudmFsdWUpfSkpLnRoZW4oZyxoKX1rKChkPWQuYXBwbHkoYyxhfHxbXSkpLm5leHQoKSl9KX1mdW5jdGlvbiBGYihjLGEpe2Z1bmN0aW9uIGIoYSl7cmV0dXJuIGZ1bmN0aW9uKGMpe3JldHVybiBkKFthLGNdKX19ZnVuY3Rpb24gZChiKXtpZihmKXRocm93IG5ldyBUeXBlRXJyb3IoIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy4iKTtmb3IoO2U7KXRyeXtpZihmPTEsZyYmKGg9YlswXSYyP2dbInJldHVybiJdOmJbMF0/Z1sidGhyb3ciXXx8KChoPWdbInJldHVybiJdKSYmaC5jYWxsKGcpLAowKTpnLm5leHQpJiYhKGg9aC5jYWxsKGcsYlsxXSkpLmRvbmUpcmV0dXJuIGg7aWYoZz0wLGgpYj1bYlswXSYyLGgudmFsdWVdO3N3aXRjaChiWzBdKXtjYXNlIDA6Y2FzZSAxOmg9YjticmVhaztjYXNlIDQ6cmV0dXJuIGUubGFiZWwrKyx7dmFsdWU6YlsxXSxkb25lOiExfTtjYXNlIDU6ZS5sYWJlbCsrO2c9YlsxXTtiPVswXTtjb250aW51ZTtjYXNlIDc6Yj1lLm9wcy5wb3AoKTtlLnRyeXMucG9wKCk7Y29udGludWU7ZGVmYXVsdDppZighKGg9ZS50cnlzLGg9MDxoLmxlbmd0aCYmaFtoLmxlbmd0aC0xXSkmJig2PT09YlswXXx8Mj09PWJbMF0pKXtlPTA7Y29udGludWV9aWYoMz09PWJbMF0mJighaHx8YlsxXT5oWzBdJiZiWzFdPGhbM10pKWUubGFiZWw9YlsxXTtlbHNlIGlmKDY9PT1iWzBdJiZlLmxhYmVsPGhbMV0pZS5sYWJlbD1oWzFdLGg9YjtlbHNlIGlmKGgmJmUubGFiZWw8aFsyXSllLmxhYmVsPWhbMl0sZS5vcHMucHVzaChiKTtlbHNle2hbMl0mJmUub3BzLnBvcCgpO2UudHJ5cy5wb3AoKTsKY29udGludWV9fWI9YS5jYWxsKGMsZSl9Y2F0Y2gocSl7Yj1bNixxXSxnPTB9ZmluYWxseXtmPWg9MH1pZihiWzBdJjUpdGhyb3cgYlsxXTtyZXR1cm57dmFsdWU6YlswXT9iWzFdOnZvaWQgMCxkb25lOiEwfX12YXIgZT17bGFiZWw6MCxzZW50OmZ1bmN0aW9uKCl7aWYoaFswXSYxKXRocm93IGhbMV07cmV0dXJuIGhbMV19LHRyeXM6W10sb3BzOltdfSxmLGcsaCxrO3JldHVybiBrPXtuZXh0OmIoMCksInRocm93IjpiKDEpLCJyZXR1cm4iOmIoMil9LCJmdW5jdGlvbiI9PT10eXBlb2YgU3ltYm9sJiYoa1tTeW1ib2wuaXRlcmF0b3JdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSxrfWZ1bmN0aW9uIEdmKGMsYSxiLGQpe3JldHVybiBuZXcgKGJ8fChiPVByb21pc2UpKShmdW5jdGlvbihlLGYpe2Z1bmN0aW9uIGcoYSl7dHJ5e2soZC5uZXh0KGEpKX1jYXRjaChxKXtmKHEpfX1mdW5jdGlvbiBoKGEpe3RyeXtrKGRbInRocm93Il0oYSkpfWNhdGNoKHEpe2YocSl9fWZ1bmN0aW9uIGsoYSl7YS5kb25lPwplKGEudmFsdWUpOihuZXcgYihmdW5jdGlvbihjKXtjKGEudmFsdWUpfSkpLnRoZW4oZyxoKX1rKChkPWQuYXBwbHkoYyxhfHxbXSkpLm5leHQoKSl9KX1mdW5jdGlvbiBIZihjLGEpe2Z1bmN0aW9uIGIoYSl7cmV0dXJuIGZ1bmN0aW9uKGMpe3JldHVybiBkKFthLGNdKX19ZnVuY3Rpb24gZChiKXtpZihmKXRocm93IG5ldyBUeXBlRXJyb3IoIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy4iKTtmb3IoO2U7KXRyeXtpZihmPTEsZyYmKGg9YlswXSYyP2dbInJldHVybiJdOmJbMF0/Z1sidGhyb3ciXXx8KChoPWdbInJldHVybiJdKSYmaC5jYWxsKGcpLDApOmcubmV4dCkmJiEoaD1oLmNhbGwoZyxiWzFdKSkuZG9uZSlyZXR1cm4gaDtpZihnPTAsaCliPVtiWzBdJjIsaC52YWx1ZV07c3dpdGNoKGJbMF0pe2Nhc2UgMDpjYXNlIDE6aD1iO2JyZWFrO2Nhc2UgNDpyZXR1cm4gZS5sYWJlbCsrLHt2YWx1ZTpiWzFdLGRvbmU6ITF9O2Nhc2UgNTplLmxhYmVsKys7Zz1iWzFdO2I9WzBdOwpjb250aW51ZTtjYXNlIDc6Yj1lLm9wcy5wb3AoKTtlLnRyeXMucG9wKCk7Y29udGludWU7ZGVmYXVsdDppZighKGg9ZS50cnlzLGg9MDxoLmxlbmd0aCYmaFtoLmxlbmd0aC0xXSkmJig2PT09YlswXXx8Mj09PWJbMF0pKXtlPTA7Y29udGludWV9aWYoMz09PWJbMF0mJighaHx8YlsxXT5oWzBdJiZiWzFdPGhbM10pKWUubGFiZWw9YlsxXTtlbHNlIGlmKDY9PT1iWzBdJiZlLmxhYmVsPGhbMV0pZS5sYWJlbD1oWzFdLGg9YjtlbHNlIGlmKGgmJmUubGFiZWw8aFsyXSllLmxhYmVsPWhbMl0sZS5vcHMucHVzaChiKTtlbHNle2hbMl0mJmUub3BzLnBvcCgpO2UudHJ5cy5wb3AoKTtjb250aW51ZX19Yj1hLmNhbGwoYyxlKX1jYXRjaChxKXtiPVs2LHFdLGc9MH1maW5hbGx5e2Y9aD0wfWlmKGJbMF0mNSl0aHJvdyBiWzFdO3JldHVybnt2YWx1ZTpiWzBdP2JbMV06dm9pZCAwLGRvbmU6ITB9fXZhciBlPXtsYWJlbDowLHNlbnQ6ZnVuY3Rpb24oKXtpZihoWzBdJjEpdGhyb3cgaFsxXTtyZXR1cm4gaFsxXX0sCnRyeXM6W10sb3BzOltdfSxmLGcsaCxrO3JldHVybiBrPXtuZXh0OmIoMCksInRocm93IjpiKDEpLCJyZXR1cm4iOmIoMil9LCJmdW5jdGlvbiI9PT10eXBlb2YgU3ltYm9sJiYoa1tTeW1ib2wuaXRlcmF0b3JdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSxrfWZ1bmN0aW9uIHJjKGMpe3ZhciBhPSJmdW5jdGlvbiI9PT10eXBlb2YgU3ltYm9sJiZjW1N5bWJvbC5pdGVyYXRvcl0sYj0wO3JldHVybiBhP2EuY2FsbChjKTp7bmV4dDpmdW5jdGlvbigpe2MmJmI+PWMubGVuZ3RoJiYoYz12b2lkIDApO3JldHVybnt2YWx1ZTpjJiZjW2IrK10sZG9uZTohY319fX1mdW5jdGlvbiBJZihjLGEpe3ZhciBiPSJmdW5jdGlvbiI9PT10eXBlb2YgU3ltYm9sJiZjW1N5bWJvbC5pdGVyYXRvcl07aWYoIWIpcmV0dXJuIGM7Yz1iLmNhbGwoYyk7dmFyIGQsZT1bXTt0cnl7Zm9yKDsodm9pZCAwPT09YXx8MDxhLS0pJiYhKGQ9Yy5uZXh0KCkpLmRvbmU7KWUucHVzaChkLnZhbHVlKX1jYXRjaChnKXt2YXIgZj0Ke2Vycm9yOmd9fWZpbmFsbHl7dHJ5e2QmJiFkLmRvbmUmJihiPWNbInJldHVybiJdKSYmYi5jYWxsKGMpfWZpbmFsbHl7aWYoZil0aHJvdyBmLmVycm9yO319cmV0dXJuIGV9ZnVuY3Rpb24gSmYoKXtmb3IodmFyIGM9W10sYT0wO2E8YXJndW1lbnRzLmxlbmd0aDthKyspYz1jLmNvbmNhdChJZihhcmd1bWVudHNbYV0pKTtyZXR1cm4gY31mdW5jdGlvbiBRKGMpe3JldHVybiBjJiZjLl9fZXNNb2R1bGUmJk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChjLCJkZWZhdWx0Iik/Y1siZGVmYXVsdCJdOmN9ZnVuY3Rpb24gSyhjLGEpe3JldHVybiBhPXtleHBvcnRzOnt9fSxjKGEsYS5leHBvcnRzKSxhLmV4cG9ydHN9ZnVuY3Rpb24gQWQoKXtzYz0hMDtmb3IodmFyIGM9MDs2ND5jOysrYylSW2NdPSJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvIltjXSxIWyJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvIi5jaGFyQ29kZUF0KGMpXT0KYztIWzQ1XT02MjtIWzk1XT02M31mdW5jdGlvbiBLZihjLGEsYil7Zm9yKHZhciBkPVtdLGU9YTtlPGI7ZSs9MylhPShjW2VdPDwxNikrKGNbZSsxXTw8OCkrY1tlKzJdLGQucHVzaChSW2E+PjE4JjYzXStSW2E+PjEyJjYzXStSW2E+PjYmNjNdK1JbYSY2M10pO3JldHVybiBkLmpvaW4oIiIpfWZ1bmN0aW9uIEJkKGMpe3NjfHxBZCgpO2Zvcih2YXIgYT1jLmxlbmd0aCxiPWElMyxkPSIiLGU9W10sZj0wLGc9YS1iO2Y8ZztmKz0xNjM4MyllLnB1c2goS2YoYyxmLGYrMTYzODM+Zz9nOmYrMTYzODMpKTsxPT09Yj8oYz1jW2EtMV0sZCs9UltjPj4yXSxkKz1SW2M8PDQmNjNdLGQrPSI9PSIpOjI9PT1iJiYoYz0oY1thLTJdPDw4KStjW2EtMV0sZCs9UltjPj4xMF0sZCs9UltjPj40JjYzXSxkKz1SW2M8PDImNjNdLGQrPSI9Iik7ZS5wdXNoKGQpO3JldHVybiBlLmpvaW4oIiIpfWZ1bmN0aW9uIEdiKGMsYSxiLGQsZSl7dmFyIGY9OCplLWQtMSxnPSgxPDxmKS0xLGg9Zz4+MSxrPS03O2U9CmI/ZS0xOjA7dmFyIHQ9Yj8tMToxLHE9Y1thK2VdO2UrPXQ7Yj1xJigxPDwtayktMTtxPj49LWs7Zm9yKGsrPWY7MDxrO2I9MjU2KmIrY1thK2VdLGUrPXQsay09OCk7Zj1iJigxPDwtayktMTtiPj49LWs7Zm9yKGsrPWQ7MDxrO2Y9MjU2KmYrY1thK2VdLGUrPXQsay09OCk7aWYoMD09PWIpYj0xLWg7ZWxzZXtpZihiPT09ZylyZXR1cm4gZj9OYU46SW5maW5pdHkqKHE/LTE6MSk7Zis9TWF0aC5wb3coMixkKTtiLT1ofXJldHVybihxPy0xOjEpKmYqTWF0aC5wb3coMixiLWQpfWZ1bmN0aW9uIEhiKGMsYSxiLGQsZSxmKXt2YXIgZyxoPTgqZi1lLTEsaz0oMTw8aCktMSx0PWs+PjEscT0yMz09PWU/TWF0aC5wb3coMiwtMjQpLU1hdGgucG93KDIsLTc3KTowO2Y9ZD8wOmYtMTt2YXIgQT1kPzE6LTEscj0wPmF8fDA9PT1hJiYwPjEvYT8xOjA7YT1NYXRoLmFicyhhKTtmb3IoaXNOYU4oYSl8fEluZmluaXR5PT09YT8oYT1pc05hTihhKT8xOjAsZD1rKTooZD1NYXRoLmZsb29yKE1hdGgubG9nKGEpLwpNYXRoLkxOMiksMT5hKihnPU1hdGgucG93KDIsLWQpKSYmKGQtLSxnKj0yKSxhPTE8PWQrdD9hK3EvZzphK3EqTWF0aC5wb3coMiwxLXQpLDI8PWEqZyYmKGQrKyxnLz0yKSxkK3Q+PWs/KGE9MCxkPWspOjE8PWQrdD8oYT0oYSpnLTEpKk1hdGgucG93KDIsZSksZCs9dCk6KGE9YSpNYXRoLnBvdygyLHQtMSkqTWF0aC5wb3coMixlKSxkPTApKTs4PD1lO2NbYitmXT1hJjI1NSxmKz1BLGEvPTI1NixlLT04KTtkPWQ8PGV8YTtmb3IoaCs9ZTswPGg7Y1tiK2ZdPWQmMjU1LGYrPUEsZC89MjU2LGgtPTgpO2NbYitmLUFdfD0xMjgqcn1mdW5jdGlvbiBqYShjLGEpe2lmKChsLlRZUEVEX0FSUkFZX1NVUFBPUlQ/MjE0NzQ4MzY0NzoxMDczNzQxODIzKTxhKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIHR5cGVkIGFycmF5IGxlbmd0aCIpO2wuVFlQRURfQVJSQVlfU1VQUE9SVD8oYz1uZXcgVWludDhBcnJheShhKSxjLl9fcHJvdG9fXz1sLnByb3RvdHlwZSk6KG51bGw9PT1jJiYoYz0KbmV3IGwoYSkpLGMubGVuZ3RoPWEpO3JldHVybiBjfWZ1bmN0aW9uIGwoYyxhLGIpe2lmKCEobC5UWVBFRF9BUlJBWV9TVVBQT1JUfHx0aGlzIGluc3RhbmNlb2YgbCkpcmV0dXJuIG5ldyBsKGMsYSxiKTtpZigibnVtYmVyIj09PXR5cGVvZiBjKXtpZigic3RyaW5nIj09PXR5cGVvZiBhKXRocm93IEVycm9yKCJJZiBlbmNvZGluZyBpcyBzcGVjaWZpZWQgdGhlbiB0aGUgZmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIHN0cmluZyIpO3JldHVybiB0Yyh0aGlzLGMpfXJldHVybiBDZCh0aGlzLGMsYSxiKX1mdW5jdGlvbiBDZChjLGEsYixkKXtpZigibnVtYmVyIj09PXR5cGVvZiBhKXRocm93IG5ldyBUeXBlRXJyb3IoJyJ2YWx1ZSIgYXJndW1lbnQgbXVzdCBub3QgYmUgYSBudW1iZXInKTtpZigidW5kZWZpbmVkIiE9PXR5cGVvZiBBcnJheUJ1ZmZlciYmYSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKXthLmJ5dGVMZW5ndGg7aWYoMD5ifHxhLmJ5dGVMZW5ndGg8Yil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiJ29mZnNldCcgaXMgb3V0IG9mIGJvdW5kcyIpOwppZihhLmJ5dGVMZW5ndGg8YisoZHx8MCkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIidsZW5ndGgnIGlzIG91dCBvZiBib3VuZHMiKTthPXZvaWQgMD09PWImJnZvaWQgMD09PWQ/bmV3IFVpbnQ4QXJyYXkoYSk6dm9pZCAwPT09ZD9uZXcgVWludDhBcnJheShhLGIpOm5ldyBVaW50OEFycmF5KGEsYixkKTtsLlRZUEVEX0FSUkFZX1NVUFBPUlQ/KGM9YSxjLl9fcHJvdG9fXz1sLnByb3RvdHlwZSk6Yz11YyhjLGEpO3JldHVybiBjfWlmKCJzdHJpbmciPT09dHlwZW9mIGEpe2Q9YztjPWI7aWYoInN0cmluZyIhPT10eXBlb2YgY3x8IiI9PT1jKWM9InV0ZjgiO2lmKCFsLmlzRW5jb2RpbmcoYykpdGhyb3cgbmV3IFR5cGVFcnJvcignImVuY29kaW5nIiBtdXN0IGJlIGEgdmFsaWQgc3RyaW5nIGVuY29kaW5nJyk7Yj1EZChhLGMpfDA7ZD1qYShkLGIpO2E9ZC53cml0ZShhLGMpO2EhPT1iJiYoZD1kLnNsaWNlKDAsYSkpO3JldHVybiBkfXJldHVybiBMZihjLGEpfWZ1bmN0aW9uIEVkKGMpe2lmKCJudW1iZXIiIT09CnR5cGVvZiBjKXRocm93IG5ldyBUeXBlRXJyb3IoJyJzaXplIiBhcmd1bWVudCBtdXN0IGJlIGEgbnVtYmVyJyk7aWYoMD5jKXRocm93IG5ldyBSYW5nZUVycm9yKCcic2l6ZSIgYXJndW1lbnQgbXVzdCBub3QgYmUgbmVnYXRpdmUnKTt9ZnVuY3Rpb24gdGMoYyxhKXtFZChhKTtjPWphKGMsMD5hPzA6dmMoYSl8MCk7aWYoIWwuVFlQRURfQVJSQVlfU1VQUE9SVClmb3IodmFyIGI9MDtiPGE7KytiKWNbYl09MDtyZXR1cm4gY31mdW5jdGlvbiB1YyhjLGEpe3ZhciBiPTA+YS5sZW5ndGg/MDp2YyhhLmxlbmd0aCl8MDtjPWphKGMsYik7Zm9yKHZhciBkPTA7ZDxiO2QrPTEpY1tkXT1hW2RdJjI1NTtyZXR1cm4gY31mdW5jdGlvbiBMZihjLGEpe2lmKFcoYSkpe3ZhciBiPXZjKGEubGVuZ3RoKXwwO2M9amEoYyxiKTtpZigwPT09Yy5sZW5ndGgpcmV0dXJuIGM7YS5jb3B5KGMsMCwwLGIpO3JldHVybiBjfWlmKGEpe2lmKCJ1bmRlZmluZWQiIT09dHlwZW9mIEFycmF5QnVmZmVyJiZhLmJ1ZmZlciBpbnN0YW5jZW9mCkFycmF5QnVmZmVyfHwibGVuZ3RoImluIGEpcmV0dXJuKGI9Im51bWJlciIhPT10eXBlb2YgYS5sZW5ndGgpfHwoYj1hLmxlbmd0aCxiPWIhPT1iKSxiP2phKGMsMCk6dWMoYyxhKTtpZigiQnVmZmVyIj09PWEudHlwZSYmRmQoYS5kYXRhKSlyZXR1cm4gdWMoYyxhLmRhdGEpfXRocm93IG5ldyBUeXBlRXJyb3IoIkZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBzdHJpbmcsIEJ1ZmZlciwgQXJyYXlCdWZmZXIsIEFycmF5LCBvciBhcnJheS1saWtlIG9iamVjdC4iKTt9ZnVuY3Rpb24gdmMoYyl7aWYoYz49KGwuVFlQRURfQVJSQVlfU1VQUE9SVD8yMTQ3NDgzNjQ3OjEwNzM3NDE4MjMpKXRocm93IG5ldyBSYW5nZUVycm9yKCJBdHRlbXB0IHRvIGFsbG9jYXRlIEJ1ZmZlciBsYXJnZXIgdGhhbiBtYXhpbXVtIHNpemU6IDB4IisobC5UWVBFRF9BUlJBWV9TVVBQT1JUPzIxNDc0ODM2NDc6MTA3Mzc0MTgyMykudG9TdHJpbmcoMTYpKyIgYnl0ZXMiKTtyZXR1cm4gY3wwfWZ1bmN0aW9uIFcoYyl7cmV0dXJuIShudWxsPT0KY3x8IWMuX2lzQnVmZmVyKX1mdW5jdGlvbiBEZChjLGEpe2lmKFcoYykpcmV0dXJuIGMubGVuZ3RoO2lmKCJ1bmRlZmluZWQiIT09dHlwZW9mIEFycmF5QnVmZmVyJiYiZnVuY3Rpb24iPT09dHlwZW9mIEFycmF5QnVmZmVyLmlzVmlldyYmKEFycmF5QnVmZmVyLmlzVmlldyhjKXx8YyBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSlyZXR1cm4gYy5ieXRlTGVuZ3RoOyJzdHJpbmciIT09dHlwZW9mIGMmJihjPSIiK2MpO3ZhciBiPWMubGVuZ3RoO2lmKDA9PT1iKXJldHVybiAwO2Zvcih2YXIgZD0hMTs7KXN3aXRjaChhKXtjYXNlICJhc2NpaSI6Y2FzZSAibGF0aW4xIjpjYXNlICJiaW5hcnkiOnJldHVybiBiO2Nhc2UgInV0ZjgiOmNhc2UgInV0Zi04IjpjYXNlIHZvaWQgMDpyZXR1cm4gSWIoYykubGVuZ3RoO2Nhc2UgInVjczIiOmNhc2UgInVjcy0yIjpjYXNlICJ1dGYxNmxlIjpjYXNlICJ1dGYtMTZsZSI6cmV0dXJuIDIqYjtjYXNlICJoZXgiOnJldHVybiBiPj4+MTtjYXNlICJiYXNlNjQiOnJldHVybiBHZChjKS5sZW5ndGg7CmRlZmF1bHQ6aWYoZClyZXR1cm4gSWIoYykubGVuZ3RoO2E9KCIiK2EpLnRvTG93ZXJDYXNlKCk7ZD0hMH19ZnVuY3Rpb24gTWYoYyxhLGIpe3ZhciBkPSExO2lmKHZvaWQgMD09PWF8fDA+YSlhPTA7aWYoYT50aGlzLmxlbmd0aClyZXR1cm4iIjtpZih2b2lkIDA9PT1ifHxiPnRoaXMubGVuZ3RoKWI9dGhpcy5sZW5ndGg7aWYoMD49YilyZXR1cm4iIjtiPj4+PTA7YT4+Pj0wO2lmKGI8PWEpcmV0dXJuIiI7Zm9yKGN8fChjPSJ1dGY4Iik7Oylzd2l0Y2goYyl7Y2FzZSAiaGV4IjpjPWE7YT1iO2I9dGhpcy5sZW5ndGg7aWYoIWN8fDA+YyljPTA7aWYoIWF8fDA+YXx8YT5iKWE9YjtkPSIiO2ZvcihiPWM7YjxhOysrYiljPWQsZD10aGlzW2JdLGQ9MTY+ZD8iMCIrZC50b1N0cmluZygxNik6ZC50b1N0cmluZygxNiksZD1jK2Q7cmV0dXJuIGQ7Y2FzZSAidXRmOCI6Y2FzZSAidXRmLTgiOnJldHVybiBIZCh0aGlzLGEsYik7Y2FzZSAiYXNjaWkiOmM9IiI7Zm9yKGI9TWF0aC5taW4odGhpcy5sZW5ndGgsCmIpO2E8YjsrK2EpYys9U3RyaW5nLmZyb21DaGFyQ29kZSh0aGlzW2FdJjEyNyk7cmV0dXJuIGM7Y2FzZSAibGF0aW4xIjpjYXNlICJiaW5hcnkiOmM9IiI7Zm9yKGI9TWF0aC5taW4odGhpcy5sZW5ndGgsYik7YTxiOysrYSljKz1TdHJpbmcuZnJvbUNoYXJDb2RlKHRoaXNbYV0pO3JldHVybiBjO2Nhc2UgImJhc2U2NCI6cmV0dXJuIGE9MD09PWEmJmI9PT10aGlzLmxlbmd0aD9CZCh0aGlzKTpCZCh0aGlzLnNsaWNlKGEsYikpLGE7Y2FzZSAidWNzMiI6Y2FzZSAidWNzLTIiOmNhc2UgInV0ZjE2bGUiOmNhc2UgInV0Zi0xNmxlIjphPXRoaXMuc2xpY2UoYSxiKTtiPSIiO2ZvcihjPTA7YzxhLmxlbmd0aDtjKz0yKWIrPVN0cmluZy5mcm9tQ2hhckNvZGUoYVtjXSsyNTYqYVtjKzFdKTtyZXR1cm4gYjtkZWZhdWx0OmlmKGQpdGhyb3cgbmV3IFR5cGVFcnJvcigiVW5rbm93biBlbmNvZGluZzogIitjKTtjPShjKyIiKS50b0xvd2VyQ2FzZSgpO2Q9ITB9fWZ1bmN0aW9uIEdhKGMsYSxiKXt2YXIgZD0KY1thXTtjW2FdPWNbYl07Y1tiXT1kfWZ1bmN0aW9uIElkKGMsYSxiLGQsZSl7aWYoMD09PWMubGVuZ3RoKXJldHVybi0xOyJzdHJpbmciPT09dHlwZW9mIGI/KGQ9YixiPTApOjIxNDc0ODM2NDc8Yj9iPTIxNDc0ODM2NDc6LTIxNDc0ODM2NDg+YiYmKGI9LTIxNDc0ODM2NDgpO2I9K2I7aXNOYU4oYikmJihiPWU/MDpjLmxlbmd0aC0xKTswPmImJihiPWMubGVuZ3RoK2IpO2lmKGI+PWMubGVuZ3RoKXtpZihlKXJldHVybi0xO2I9Yy5sZW5ndGgtMX1lbHNlIGlmKDA+YilpZihlKWI9MDtlbHNlIHJldHVybi0xOyJzdHJpbmciPT09dHlwZW9mIGEmJihhPWwuZnJvbShhLGQpKTtpZihXKGEpKXJldHVybiAwPT09YS5sZW5ndGg/LTE6SmQoYyxhLGIsZCxlKTtpZigibnVtYmVyIj09PXR5cGVvZiBhKXJldHVybiBhJj0yNTUsbC5UWVBFRF9BUlJBWV9TVVBQT1JUJiYiZnVuY3Rpb24iPT09dHlwZW9mIFVpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2Y/ZT9VaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoYywKYSxiKTpVaW50OEFycmF5LnByb3RvdHlwZS5sYXN0SW5kZXhPZi5jYWxsKGMsYSxiKTpKZChjLFthXSxiLGQsZSk7dGhyb3cgbmV3IFR5cGVFcnJvcigidmFsIG11c3QgYmUgc3RyaW5nLCBudW1iZXIgb3IgQnVmZmVyIik7fWZ1bmN0aW9uIEpkKGMsYSxiLGQsZSl7ZnVuY3Rpb24gZihhLGMpe3JldHVybiAxPT09Zz9hW2NdOmEucmVhZFVJbnQxNkJFKGMqZyl9dmFyIGc9MSxoPWMubGVuZ3RoLGs9YS5sZW5ndGg7aWYodm9pZCAwIT09ZCYmKGQ9U3RyaW5nKGQpLnRvTG93ZXJDYXNlKCksInVjczIiPT09ZHx8InVjcy0yIj09PWR8fCJ1dGYxNmxlIj09PWR8fCJ1dGYtMTZsZSI9PT1kKSl7aWYoMj5jLmxlbmd0aHx8Mj5hLmxlbmd0aClyZXR1cm4tMTtnPTI7aC89MjtrLz0yO2IvPTJ9aWYoZSlmb3IoZD0tMTtiPGg7YisrKWlmKGYoYyxiKT09PWYoYSwtMT09PWQ/MDpiLWQpKXtpZigtMT09PWQmJihkPWIpLGItZCsxPT09aylyZXR1cm4gZCpnfWVsc2UtMSE9PWQmJihiLT1iLWQpLGQ9Ci0xO2Vsc2UgZm9yKGIraz5oJiYoYj1oLWspOzA8PWI7Yi0tKXtoPSEwO2ZvcihkPTA7ZDxrO2QrKylpZihmKGMsYitkKSE9PWYoYSxkKSl7aD0hMTticmVha31pZihoKXJldHVybiBifXJldHVybi0xfWZ1bmN0aW9uIEhkKGMsYSxiKXtiPU1hdGgubWluKGMubGVuZ3RoLGIpO2Zvcih2YXIgZD1bXTthPGI7KXt2YXIgZT1jW2FdLGY9bnVsbCxnPTIzOTxlPzQ6MjIzPGU/MzoxOTE8ZT8yOjE7aWYoYStnPD1iKXN3aXRjaChnKXtjYXNlIDE6MTI4PmUmJihmPWUpO2JyZWFrO2Nhc2UgMjp2YXIgaD1jW2ErMV07MTI4PT09KGgmMTkyKSYmKGU9KGUmMzEpPDw2fGgmNjMsMTI3PGUmJihmPWUpKTticmVhaztjYXNlIDM6aD1jW2ErMV07dmFyIGs9Y1thKzJdOzEyOD09PShoJjE5MikmJjEyOD09PShrJjE5MikmJihlPShlJjE1KTw8MTJ8KGgmNjMpPDw2fGsmNjMsMjA0NzxlJiYoNTUyOTY+ZXx8NTczNDM8ZSkmJihmPWUpKTticmVhaztjYXNlIDQ6aD1jW2ErMV07az1jW2ErMl07dmFyIHQ9Y1thKwozXTsxMjg9PT0oaCYxOTIpJiYxMjg9PT0oayYxOTIpJiYxMjg9PT0odCYxOTIpJiYoZT0oZSYxNSk8PDE4fChoJjYzKTw8MTJ8KGsmNjMpPDw2fHQmNjMsNjU1MzU8ZSYmMTExNDExMj5lJiYoZj1lKSl9bnVsbD09PWY/KGY9NjU1MzMsZz0xKTo2NTUzNTxmJiYoZi09NjU1MzYsZC5wdXNoKGY+Pj4xMCYxMDIzfDU1Mjk2KSxmPTU2MzIwfGYmMTAyMyk7ZC5wdXNoKGYpO2ErPWd9Yz1kLmxlbmd0aDtpZihjPD1LZClkPVN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLGQpO2Vsc2V7Yj0iIjtmb3IoYT0wO2E8YzspYis9U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsZC5zbGljZShhLGErPUtkKSk7ZD1ifXJldHVybiBkfWZ1bmN0aW9uIEQoYyxhLGIpe2lmKDAhPT1jJTF8fDA+Yyl0aHJvdyBuZXcgUmFuZ2VFcnJvcigib2Zmc2V0IGlzIG5vdCB1aW50Iik7aWYoYythPmIpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRyeWluZyB0byBhY2Nlc3MgYmV5b25kIGJ1ZmZlciBsZW5ndGgiKTsKfWZ1bmN0aW9uIFQoYyxhLGIsZCxlLGYpe2lmKCFXKGMpKXRocm93IG5ldyBUeXBlRXJyb3IoJyJidWZmZXIiIGFyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXIgaW5zdGFuY2UnKTtpZihhPmV8fGE8Zil0aHJvdyBuZXcgUmFuZ2VFcnJvcignInZhbHVlIiBhcmd1bWVudCBpcyBvdXQgb2YgYm91bmRzJyk7aWYoYitkPmMubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbmRleCBvdXQgb2YgcmFuZ2UiKTt9ZnVuY3Rpb24gSmIoYyxhLGIsZCl7MD5hJiYoYT02NTUzNSthKzEpO2Zvcih2YXIgZT0wLGY9TWF0aC5taW4oYy5sZW5ndGgtYiwyKTtlPGY7KytlKWNbYitlXT0oYSYyNTU8PDgqKGQ/ZToxLWUpKT4+PjgqKGQ/ZToxLWUpfWZ1bmN0aW9uIEtiKGMsYSxiLGQpezA+YSYmKGE9NDI5NDk2NzI5NSthKzEpO2Zvcih2YXIgZT0wLGY9TWF0aC5taW4oYy5sZW5ndGgtYiw0KTtlPGY7KytlKWNbYitlXT1hPj4+OCooZD9lOjMtZSkmMjU1fWZ1bmN0aW9uIExiKGMsYSxiLGQpe2lmKGIrCmQ+Yy5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkluZGV4IG91dCBvZiByYW5nZSIpO2lmKDA+Yil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW5kZXggb3V0IG9mIHJhbmdlIik7fWZ1bmN0aW9uIEliKGMsYSl7YT1hfHxJbmZpbml0eTtmb3IodmFyIGIsZD1jLmxlbmd0aCxlPW51bGwsZj1bXSxnPTA7ZzxkOysrZyl7Yj1jLmNoYXJDb2RlQXQoZyk7aWYoNTUyOTU8YiYmNTczNDQ+Yil7aWYoIWUpe2lmKDU2MzE5PGIpey0xPChhLT0zKSYmZi5wdXNoKDIzOSwxOTEsMTg5KTtjb250aW51ZX1lbHNlIGlmKGcrMT09PWQpey0xPChhLT0zKSYmZi5wdXNoKDIzOSwxOTEsMTg5KTtjb250aW51ZX1lPWI7Y29udGludWV9aWYoNTYzMjA+Yil7LTE8KGEtPTMpJiZmLnB1c2goMjM5LDE5MSwxODkpO2U9Yjtjb250aW51ZX1iPShlLTU1Mjk2PDwxMHxiLTU2MzIwKSs2NTUzNn1lbHNlIGUmJi0xPChhLT0zKSYmZi5wdXNoKDIzOSwxOTEsMTg5KTtlPW51bGw7aWYoMTI4PmIpe2lmKDA+LS1hKWJyZWFrOwpmLnB1c2goYil9ZWxzZSBpZigyMDQ4PmIpe2lmKDA+KGEtPTIpKWJyZWFrO2YucHVzaChiPj42fDE5MixiJjYzfDEyOCl9ZWxzZSBpZig2NTUzNj5iKXtpZigwPihhLT0zKSlicmVhaztmLnB1c2goYj4+MTJ8MjI0LGI+PjYmNjN8MTI4LGImNjN8MTI4KX1lbHNlIGlmKDExMTQxMTI+Yil7aWYoMD4oYS09NCkpYnJlYWs7Zi5wdXNoKGI+PjE4fDI0MCxiPj4xMiY2M3wxMjgsYj4+NiY2M3wxMjgsYiY2M3wxMjgpfWVsc2UgdGhyb3cgRXJyb3IoIkludmFsaWQgY29kZSBwb2ludCIpO31yZXR1cm4gZn1mdW5jdGlvbiBMZChjKXtmb3IodmFyIGE9W10sYj0wO2I8Yy5sZW5ndGg7KytiKWEucHVzaChjLmNoYXJDb2RlQXQoYikmMjU1KTtyZXR1cm4gYX1mdW5jdGlvbiBHZChjKXtjPShjLnRyaW0/Yy50cmltKCk6Yy5yZXBsYWNlKC9eXHMrfFxzKyQvZywiIikpLnJlcGxhY2UoTmYsIiIpO2lmKDI+Yy5sZW5ndGgpYz0iIjtlbHNlIGZvcig7MCE9PWMubGVuZ3RoJTQ7KWMrPSI9IjtzY3x8QWQoKTsKdmFyIGE9Yy5sZW5ndGg7aWYoMDxhJTQpdGhyb3cgRXJyb3IoIkludmFsaWQgc3RyaW5nLiBMZW5ndGggbXVzdCBiZSBhIG11bHRpcGxlIG9mIDQiKTt2YXIgYj0iPSI9PT1jW2EtMl0/MjoiPSI9PT1jW2EtMV0/MTowLGQ9bmV3IE9mKDMqYS80LWIpLGU9MDxiP2EtNDphLGY9MDtmb3IoYT0wO2E8ZTthKz00KXt2YXIgZz1IW2MuY2hhckNvZGVBdChhKV08PDE4fEhbYy5jaGFyQ29kZUF0KGErMSldPDwxMnxIW2MuY2hhckNvZGVBdChhKzIpXTw8NnxIW2MuY2hhckNvZGVBdChhKzMpXTtkW2YrK109Zz4+MTYmMjU1O2RbZisrXT1nPj44JjI1NTtkW2YrK109ZyYyNTV9Mj09PWI/KGc9SFtjLmNoYXJDb2RlQXQoYSldPDwyfEhbYy5jaGFyQ29kZUF0KGErMSldPj40LGRbZisrXT1nJjI1NSk6MT09PWImJihnPUhbYy5jaGFyQ29kZUF0KGEpXTw8MTB8SFtjLmNoYXJDb2RlQXQoYSsxKV08PDR8SFtjLmNoYXJDb2RlQXQoYSsyKV0+PjIsZFtmKytdPWc+PjgmMjU1LGRbZisrXT1nJjI1NSk7CnJldHVybiBkfWZ1bmN0aW9uIG5iKGMsYSxiLGQpe2Zvcih2YXIgZT0wO2U8ZCYmIShlK2I+PWEubGVuZ3RofHxlPj1jLmxlbmd0aCk7KytlKWFbZStiXT1jW2VdO3JldHVybiBlfWZ1bmN0aW9uIHBhKGMpe3JldHVybiBudWxsIT1jJiYoISFjLl9pc0J1ZmZlcnx8TWQoYyl8fCJmdW5jdGlvbiI9PT10eXBlb2YgYy5yZWFkRmxvYXRMRSYmImZ1bmN0aW9uIj09PXR5cGVvZiBjLnNsaWNlJiZNZChjLnNsaWNlKDAsMCkpKX1mdW5jdGlvbiBNZChjKXtyZXR1cm4hIWMuY29uc3RydWN0b3ImJiJmdW5jdGlvbiI9PT10eXBlb2YgYy5jb25zdHJ1Y3Rvci5pc0J1ZmZlciYmYy5jb25zdHJ1Y3Rvci5pc0J1ZmZlcihjKX1mdW5jdGlvbiBOZCgpe3Rocm93IEVycm9yKCJzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkIik7fWZ1bmN0aW9uIE9kKCl7dGhyb3cgRXJyb3IoImNsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCIpO31mdW5jdGlvbiBQZChjKXtpZih1YT09PXNldFRpbWVvdXQpcmV0dXJuIHNldFRpbWVvdXQoYywKMCk7aWYoKHVhPT09TmR8fCF1YSkmJnNldFRpbWVvdXQpcmV0dXJuIHVhPXNldFRpbWVvdXQsc2V0VGltZW91dChjLDApO3RyeXtyZXR1cm4gdWEoYywwKX1jYXRjaChhKXt0cnl7cmV0dXJuIHVhLmNhbGwobnVsbCxjLDApfWNhdGNoKGIpe3JldHVybiB1YS5jYWxsKHRoaXMsYywwKX19fWZ1bmN0aW9uIFBmKGMpe2lmKHZhPT09Y2xlYXJUaW1lb3V0KXJldHVybiBjbGVhclRpbWVvdXQoYyk7aWYoKHZhPT09T2R8fCF2YSkmJmNsZWFyVGltZW91dClyZXR1cm4gdmE9Y2xlYXJUaW1lb3V0LGNsZWFyVGltZW91dChjKTt0cnl7cmV0dXJuIHZhKGMpfWNhdGNoKGEpe3RyeXtyZXR1cm4gdmEuY2FsbChudWxsLGMpfWNhdGNoKGIpe3JldHVybiB2YS5jYWxsKHRoaXMsYyl9fX1mdW5jdGlvbiBRZigpe1VhJiZIYSYmKFVhPSExLEhhLmxlbmd0aD9rYT1IYS5jb25jYXQoa2EpOk1iPS0xLGthLmxlbmd0aCYmUWQoKSl9ZnVuY3Rpb24gUWQoKXtpZighVWEpe3ZhciBjPVBkKFFmKTtVYT0hMDtmb3IodmFyIGE9CmthLmxlbmd0aDthOyl7SGE9a2E7Zm9yKGthPVtdOysrTWI8YTspSGEmJkhhW01iXS5ydW4oKTtNYj0tMTthPWthLmxlbmd0aH1IYT1udWxsO1VhPSExO1BmKGMpfX1mdW5jdGlvbiBYKGMpe3ZhciBhPUFycmF5KGFyZ3VtZW50cy5sZW5ndGgtMSk7aWYoMTxhcmd1bWVudHMubGVuZ3RoKWZvcih2YXIgYj0xO2I8YXJndW1lbnRzLmxlbmd0aDtiKyspYVtiLTFdPWFyZ3VtZW50c1tiXTtrYS5wdXNoKG5ldyBSZChjLGEpKTsxIT09a2EubGVuZ3RofHxVYXx8UGQoUWQpfWZ1bmN0aW9uIFJkKGMsYSl7dGhpcy5mdW49Yzt0aGlzLmFycmF5PWF9ZnVuY3Rpb24gSWEoKXt9ZnVuY3Rpb24gd2MoYyl7aWYoIUphKGMpKXtmb3IodmFyIGE9W10sYj0wO2I8YXJndW1lbnRzLmxlbmd0aDtiKyspYS5wdXNoKGFhKGFyZ3VtZW50c1tiXSkpO3JldHVybiBhLmpvaW4oIiAiKX1iPTE7dmFyIGQ9YXJndW1lbnRzLGU9ZC5sZW5ndGg7YT1TdHJpbmcoYykucmVwbGFjZShSZixmdW5jdGlvbihhKXtpZigiJSUiPT09CmEpcmV0dXJuIiUiO2lmKGI+PWUpcmV0dXJuIGE7c3dpdGNoKGEpe2Nhc2UgIiVzIjpyZXR1cm4gU3RyaW5nKGRbYisrXSk7Y2FzZSAiJWQiOnJldHVybiBOdW1iZXIoZFtiKytdKTtjYXNlICIlaiI6dHJ5e3JldHVybiBKU09OLnN0cmluZ2lmeShkW2IrK10pfWNhdGNoKGgpe3JldHVybiJbQ2lyY3VsYXJdIn1kZWZhdWx0OnJldHVybiBhfX0pO2Zvcih2YXIgZj1kW2JdO2I8ZTtmPWRbKytiXSlhPW51bGwhPT1mJiZ3YShmKT9hKygiICIrYWEoZikpOmErKCIgIitmKTtyZXR1cm4gYX1mdW5jdGlvbiB4YyhjLGEpe2lmKGxhKEthLnByb2Nlc3MpKXJldHVybiBmdW5jdGlvbigpe3JldHVybiB4YyhjLGEpLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07aWYoITA9PT1WYS5ub0RlcHJlY2F0aW9uKXJldHVybiBjO3ZhciBiPSExO3JldHVybiBmdW5jdGlvbigpe2lmKCFiKXtpZihWYS50aHJvd0RlcHJlY2F0aW9uKXRocm93IEVycm9yKGEpO1ZhLnRyYWNlRGVwcmVjYXRpb24/Y29uc29sZS50cmFjZShhKToKY29uc29sZS5lcnJvcihhKTtiPSEwfXJldHVybiBjLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19ZnVuY3Rpb24gU2QoYyl7bGEoeWMpJiYoeWM9VmEuZW52Lk5PREVfREVCVUd8fCIiKTtjPWMudG9VcHBlckNhc2UoKTtOYltjXXx8KChuZXcgUmVnRXhwKCJcXGIiK2MrIlxcYiIsImkiKSkudGVzdCh5Yyk/TmJbY109ZnVuY3Rpb24oKXt2YXIgYT13Yy5hcHBseShudWxsLGFyZ3VtZW50cyk7Y29uc29sZS5lcnJvcigiJXMgJWQ6ICVzIixjLDAsYSl9Ok5iW2NdPWZ1bmN0aW9uKCl7fSk7cmV0dXJuIE5iW2NdfWZ1bmN0aW9uIGFhKGMsYSl7dmFyIGI9e3NlZW46W10sc3R5bGl6ZTpTZn07Mzw9YXJndW1lbnRzLmxlbmd0aCYmKGIuZGVwdGg9YXJndW1lbnRzWzJdKTs0PD1hcmd1bWVudHMubGVuZ3RoJiYoYi5jb2xvcnM9YXJndW1lbnRzWzNdKTt6YyhhKT9iLnNob3dIaWRkZW49YTphJiZUZChiLGEpO2xhKGIuc2hvd0hpZGRlbikmJihiLnNob3dIaWRkZW49ITEpO2xhKGIuZGVwdGgpJiYoYi5kZXB0aD0KMik7bGEoYi5jb2xvcnMpJiYoYi5jb2xvcnM9ITEpO2xhKGIuY3VzdG9tSW5zcGVjdCkmJihiLmN1c3RvbUluc3BlY3Q9ITApO2IuY29sb3JzJiYoYi5zdHlsaXplPVRmKTtyZXR1cm4gT2IoYixjLGIuZGVwdGgpfWZ1bmN0aW9uIFRmKGMsYSl7cmV0dXJuKGE9YWEuc3R5bGVzW2FdKT8iXHUwMDFiWyIrYWEuY29sb3JzW2FdWzBdKyJtIitjKyJcdTAwMWJbIithYS5jb2xvcnNbYV1bMV0rIm0iOmN9ZnVuY3Rpb24gU2YoYyl7cmV0dXJuIGN9ZnVuY3Rpb24gVWYoYyl7dmFyIGE9e307Yy5mb3JFYWNoKGZ1bmN0aW9uKGMpe2FbY109ITB9KTtyZXR1cm4gYX1mdW5jdGlvbiBPYihjLGEsYil7aWYoYy5jdXN0b21JbnNwZWN0JiZhJiZXYShhLmluc3BlY3QpJiZhLmluc3BlY3QhPT1hYSYmKCFhLmNvbnN0cnVjdG9yfHxhLmNvbnN0cnVjdG9yLnByb3RvdHlwZSE9PWEpKXt2YXIgZD1hLmluc3BlY3QoYixjKTtKYShkKXx8KGQ9T2IoYyxkLGIpKTtyZXR1cm4gZH1pZihkPVZmKGMsYSkpcmV0dXJuIGQ7CnZhciBlPU9iamVjdC5rZXlzKGEpLGY9VWYoZSk7Yy5zaG93SGlkZGVuJiYoZT1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhKSk7aWYob2IoYSkmJigwPD1lLmluZGV4T2YoIm1lc3NhZ2UiKXx8MDw9ZS5pbmRleE9mKCJkZXNjcmlwdGlvbiIpKSlyZXR1cm4gQWMoYSk7aWYoMD09PWUubGVuZ3RoKXtpZihXYShhKSlyZXR1cm4gYy5zdHlsaXplKCJbRnVuY3Rpb24iKyhhLm5hbWU/IjogIithLm5hbWU6IiIpKyJdIiwic3BlY2lhbCIpO2lmKFhhKGEpKXJldHVybiBjLnN0eWxpemUoUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpLCJyZWdleHAiKTtpZihwYihhKSlyZXR1cm4gYy5zdHlsaXplKERhdGUucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYSksImRhdGUiKTtpZihvYihhKSlyZXR1cm4gQWMoYSl9ZD0iIjt2YXIgZz0hMSxoPVsieyIsIn0iXTtVZChhKSYmKGc9ITAsaD1bIlsiLCJdIl0pO1dhKGEpJiYoZD0iIFtGdW5jdGlvbiIrKGEubmFtZT8iOiAiK2EubmFtZToKIiIpKyJdIik7WGEoYSkmJihkPSIgIitSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYSkpO3BiKGEpJiYoZD0iICIrRGF0ZS5wcm90b3R5cGUudG9VVENTdHJpbmcuY2FsbChhKSk7b2IoYSkmJihkPSIgIitBYyhhKSk7aWYoMD09PWUubGVuZ3RoJiYoIWd8fDA9PWEubGVuZ3RoKSlyZXR1cm4gaFswXStkK2hbMV07aWYoMD5iKXJldHVybiBYYShhKT9jLnN0eWxpemUoUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpLCJyZWdleHAiKTpjLnN0eWxpemUoIltPYmplY3RdIiwic3BlY2lhbCIpO2Muc2Vlbi5wdXNoKGEpO2U9Zz9XZihjLGEsYixmLGUpOmUubWFwKGZ1bmN0aW9uKGQpe3JldHVybiBCYyhjLGEsYixmLGQsZyl9KTtjLnNlZW4ucG9wKCk7cmV0dXJuIFhmKGUsZCxoKX1mdW5jdGlvbiBWZihjLGEpe2lmKGxhKGEpKXJldHVybiBjLnN0eWxpemUoInVuZGVmaW5lZCIsInVuZGVmaW5lZCIpO2lmKEphKGEpKXJldHVybiBhPSInIitKU09OLnN0cmluZ2lmeShhKS5yZXBsYWNlKC9eInwiJC9nLAoiIikucmVwbGFjZSgvJy9nLCJcXCciKS5yZXBsYWNlKC9cXCIvZywnIicpKyInIixjLnN0eWxpemUoYSwic3RyaW5nIik7aWYoVmQoYSkpcmV0dXJuIGMuc3R5bGl6ZSgiIithLCJudW1iZXIiKTtpZih6YyhhKSlyZXR1cm4gYy5zdHlsaXplKCIiK2EsImJvb2xlYW4iKTtpZihudWxsPT09YSlyZXR1cm4gYy5zdHlsaXplKCJudWxsIiwibnVsbCIpfWZ1bmN0aW9uIEFjKGMpe3JldHVybiJbIitFcnJvci5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChjKSsiXSJ9ZnVuY3Rpb24gV2YoYyxhLGIsZCxlKXtmb3IodmFyIGY9W10sZz0wLGg9YS5sZW5ndGg7ZzxoOysrZylPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYSxTdHJpbmcoZykpP2YucHVzaChCYyhjLGEsYixkLFN0cmluZyhnKSwhMCkpOmYucHVzaCgiIik7ZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UubWF0Y2goL15cZCskLyl8fGYucHVzaChCYyhjLGEsYixkLGUsITApKX0pO3JldHVybiBmfWZ1bmN0aW9uIEJjKGMsCmEsYixkLGUsZil7dmFyIGcsaDthPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYSxlKXx8e3ZhbHVlOmFbZV19O2EuZ2V0P2g9YS5zZXQ/Yy5zdHlsaXplKCJbR2V0dGVyL1NldHRlcl0iLCJzcGVjaWFsIik6Yy5zdHlsaXplKCJbR2V0dGVyXSIsInNwZWNpYWwiKTphLnNldCYmKGg9Yy5zdHlsaXplKCJbU2V0dGVyXSIsInNwZWNpYWwiKSk7T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGQsZSl8fChnPSJbIitlKyJdIik7aHx8KDA+Yy5zZWVuLmluZGV4T2YoYS52YWx1ZSk/KGg9bnVsbD09PWI/T2IoYyxhLnZhbHVlLG51bGwpOk9iKGMsYS52YWx1ZSxiLTEpLC0xPGguaW5kZXhPZigiXG4iKSYmKGg9Zj9oLnNwbGl0KCJcbiIpLm1hcChmdW5jdGlvbihhKXtyZXR1cm4iICAiK2F9KS5qb2luKCJcbiIpLnN1YnN0cigyKToiXG4iK2guc3BsaXQoIlxuIikubWFwKGZ1bmN0aW9uKGEpe3JldHVybiIgICAiK2F9KS5qb2luKCJcbiIpKSk6aD1jLnN0eWxpemUoIltDaXJjdWxhcl0iLAoic3BlY2lhbCIpKTtpZihsYShnKSl7aWYoZiYmZS5tYXRjaCgvXlxkKyQvKSlyZXR1cm4gaDtnPUpTT04uc3RyaW5naWZ5KCIiK2UpO2cubWF0Y2goL14iKFthLXpBLVpfXVthLXpBLVpfMC05XSopIiQvKT8oZz1nLnN1YnN0cigxLGcubGVuZ3RoLTIpLGc9Yy5zdHlsaXplKGcsIm5hbWUiKSk6KGc9Zy5yZXBsYWNlKC8nL2csIlxcJyIpLnJlcGxhY2UoL1xcIi9nLCciJykucmVwbGFjZSgvKF4ifCIkKS9nLCInIiksZz1jLnN0eWxpemUoZywic3RyaW5nIikpfXJldHVybiBnKyI6ICIraH1mdW5jdGlvbiBYZihjLGEsYil7cmV0dXJuIDYwPGMucmVkdWNlKGZ1bmN0aW9uKGEsYyl7Yy5pbmRleE9mKCJcbiIpO3JldHVybiBhK2MucmVwbGFjZSgvXHUwMDFiXFtcZFxkP20vZywiIikubGVuZ3RoKzF9LDApP2JbMF0rKCIiPT09YT8iIjphKyJcbiAiKSsiICIrYy5qb2luKCIsXG4gICIpKyIgIitiWzFdOmJbMF0rYSsiICIrYy5qb2luKCIsICIpKyIgIitiWzFdfWZ1bmN0aW9uIFVkKGMpe3JldHVybiBBcnJheS5pc0FycmF5KGMpfQpmdW5jdGlvbiB6YyhjKXtyZXR1cm4iYm9vbGVhbiI9PT10eXBlb2YgY31mdW5jdGlvbiBWZChjKXtyZXR1cm4ibnVtYmVyIj09PXR5cGVvZiBjfWZ1bmN0aW9uIEphKGMpe3JldHVybiJzdHJpbmciPT09dHlwZW9mIGN9ZnVuY3Rpb24gbGEoYyl7cmV0dXJuIHZvaWQgMD09PWN9ZnVuY3Rpb24gWGEoYyl7cmV0dXJuIHdhKGMpJiYiW29iamVjdCBSZWdFeHBdIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChjKX1mdW5jdGlvbiB3YShjKXtyZXR1cm4ib2JqZWN0Ij09PXR5cGVvZiBjJiZudWxsIT09Y31mdW5jdGlvbiBwYihjKXtyZXR1cm4gd2EoYykmJiJbb2JqZWN0IERhdGVdIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChjKX1mdW5jdGlvbiBvYihjKXtyZXR1cm4gd2EoYykmJigiW29iamVjdCBFcnJvcl0iPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGMpfHxjIGluc3RhbmNlb2YgRXJyb3IpfWZ1bmN0aW9uIFdhKGMpe3JldHVybiJmdW5jdGlvbiI9PT0KdHlwZW9mIGN9ZnVuY3Rpb24gQ2MoYyl7cmV0dXJuIG51bGw9PT1jfHwiYm9vbGVhbiI9PT10eXBlb2YgY3x8Im51bWJlciI9PT10eXBlb2YgY3x8InN0cmluZyI9PT10eXBlb2YgY3x8InN5bWJvbCI9PT10eXBlb2YgY3x8InVuZGVmaW5lZCI9PT10eXBlb2YgY31mdW5jdGlvbiBEYyhjKXtyZXR1cm4gMTA+Yz8iMCIrYy50b1N0cmluZygxMCk6Yy50b1N0cmluZygxMCl9ZnVuY3Rpb24gWWYoKXt2YXIgYz1uZXcgRGF0ZSxhPVtEYyhjLmdldEhvdXJzKCkpLERjKGMuZ2V0TWludXRlcygpKSxEYyhjLmdldFNlY29uZHMoKSldLmpvaW4oIjoiKTtyZXR1cm5bYy5nZXREYXRlKCksWmZbYy5nZXRNb250aCgpXSxhXS5qb2luKCIgIil9ZnVuY3Rpb24gVGQoYyxhKXtpZighYXx8IXdhKGEpKXJldHVybiBjO2Zvcih2YXIgYj1PYmplY3Qua2V5cyhhKSxkPWIubGVuZ3RoO2QtLTspY1tiW2RdXT1hW2JbZF1dO3JldHVybiBjfWZ1bmN0aW9uIFdkKGMsYSl7aWYoYz09PWEpcmV0dXJuIDA7Zm9yKHZhciBiPQpjLmxlbmd0aCxkPWEubGVuZ3RoLGU9MCxmPU1hdGgubWluKGIsZCk7ZTxmOysrZSlpZihjW2VdIT09YVtlXSl7Yj1jW2VdO2Q9YVtlXTticmVha31yZXR1cm4gYjxkPy0xOmQ8Yj8xOjB9ZnVuY3Rpb24gWGQoKXtyZXR1cm4idW5kZWZpbmVkIiE9PXR5cGVvZiBFYz9FYzpFYz1mdW5jdGlvbigpe3JldHVybiJmb28iPT09ZnVuY3Rpb24oKXt9Lm5hbWV9KCl9ZnVuY3Rpb24gWWQoYyl7cmV0dXJuIHBhKGMpfHwiZnVuY3Rpb24iIT09dHlwZW9mIEthLkFycmF5QnVmZmVyPyExOiJmdW5jdGlvbiI9PT10eXBlb2YgQXJyYXlCdWZmZXIuaXNWaWV3P0FycmF5QnVmZmVyLmlzVmlldyhjKTpjP2MgaW5zdGFuY2VvZiBEYXRhVmlld3x8Yy5idWZmZXImJmMuYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXI/ITA6ITE6ITF9ZnVuY3Rpb24gRShjLGEpe2N8fFMoYywhMCxhLCI9PSIsRmMpfWZ1bmN0aW9uIFpkKGMpe2lmKFdhKGMpKXJldHVybiBYZCgpP2MubmFtZTooYz1jLnRvU3RyaW5nKCkubWF0Y2goJGYpKSYmCmNbMV19ZnVuY3Rpb24gR2MoYyl7dGhpcy5uYW1lPSJBc3NlcnRpb25FcnJvciI7dGhpcy5hY3R1YWw9Yy5hY3R1YWw7dGhpcy5leHBlY3RlZD1jLmV4cGVjdGVkO3RoaXMub3BlcmF0b3I9Yy5vcGVyYXRvcjtjLm1lc3NhZ2U/KHRoaXMubWVzc2FnZT1jLm1lc3NhZ2UsdGhpcy5nZW5lcmF0ZWRNZXNzYWdlPSExKToodGhpcy5tZXNzYWdlPSRkKGFlKHRoaXMuYWN0dWFsKSwxMjgpKyIgIit0aGlzLm9wZXJhdG9yKyIgIiskZChhZSh0aGlzLmV4cGVjdGVkKSwxMjgpLHRoaXMuZ2VuZXJhdGVkTWVzc2FnZT0hMCk7dmFyIGE9Yy5zdGFja1N0YXJ0RnVuY3Rpb258fFM7RXJyb3IuY2FwdHVyZVN0YWNrVHJhY2U/RXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcyxhKTooYz1FcnJvcigpLGMuc3RhY2smJihjPWMuc3RhY2ssYT1aZChhKSxhPWMuaW5kZXhPZigiXG4iK2EpLDA8PWEmJihhPWMuaW5kZXhPZigiXG4iLGErMSksYz1jLnN1YnN0cmluZyhhKzEpKSx0aGlzLnN0YWNrPWMpKX1mdW5jdGlvbiAkZChjLAphKXtyZXR1cm4ic3RyaW5nIj09PXR5cGVvZiBjP2MubGVuZ3RoPGE/YzpjLnNsaWNlKDAsYSk6Y31mdW5jdGlvbiBhZShjKXtpZihYZCgpfHwhV2EoYykpcmV0dXJuIGFhKGMpO2M9WmQoYyk7cmV0dXJuIltGdW5jdGlvbiIrKGM/IjogIitjOiIiKSsiXSJ9ZnVuY3Rpb24gUyhjLGEsYixkLGUpe3Rocm93IG5ldyBHYyh7bWVzc2FnZTpiLGFjdHVhbDpjLGV4cGVjdGVkOmEsb3BlcmF0b3I6ZCxzdGFja1N0YXJ0RnVuY3Rpb246ZX0pO31mdW5jdGlvbiBGYyhjLGEpe2N8fFMoYywhMCxhLCI9PSIsRmMpfWZ1bmN0aW9uIGJlKGMsYSxiKXtjIT1hJiZTKGMsYSxiLCI9PSIsYmUpfWZ1bmN0aW9uIGNlKGMsYSxiKXtjPT1hJiZTKGMsYSxiLCIhPSIsY2UpfWZ1bmN0aW9uIGRlKGMsYSxiKXtZYShjLGEsITEpfHxTKGMsYSxiLCJkZWVwRXF1YWwiLGRlKX1mdW5jdGlvbiBlZShjLGEsYil7WWEoYyxhLCEwKXx8UyhjLGEsYiwiZGVlcFN0cmljdEVxdWFsIixlZSl9ZnVuY3Rpb24gWWEoYyxhLGIsCmQpe2lmKGM9PT1hKXJldHVybiEwO2lmKHBhKGMpJiZwYShhKSlyZXR1cm4gMD09PVdkKGMsYSk7aWYocGIoYykmJnBiKGEpKXJldHVybiBjLmdldFRpbWUoKT09PWEuZ2V0VGltZSgpO2lmKFhhKGMpJiZYYShhKSlyZXR1cm4gYy5zb3VyY2U9PT1hLnNvdXJjZSYmYy5nbG9iYWw9PT1hLmdsb2JhbCYmYy5tdWx0aWxpbmU9PT1hLm11bHRpbGluZSYmYy5sYXN0SW5kZXg9PT1hLmxhc3RJbmRleCYmYy5pZ25vcmVDYXNlPT09YS5pZ25vcmVDYXNlO2lmKG51bGwhPT1jJiYib2JqZWN0Ij09PXR5cGVvZiBjfHxudWxsIT09YSYmIm9iamVjdCI9PT10eXBlb2YgYSl7aWYoIVlkKGMpfHwhWWQoYSl8fE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChjKSE9PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhKXx8YyBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheXx8YyBpbnN0YW5jZW9mIEZsb2F0NjRBcnJheSl7aWYocGEoYykhPT1wYShhKSlyZXR1cm4hMTtkPWR8fHthY3R1YWw6W10sCmV4cGVjdGVkOltdfTt2YXIgZT1kLmFjdHVhbC5pbmRleE9mKGMpO2lmKC0xIT09ZSYmZT09PWQuZXhwZWN0ZWQuaW5kZXhPZihhKSlyZXR1cm4hMDtkLmFjdHVhbC5wdXNoKGMpO2QuZXhwZWN0ZWQucHVzaChhKTtyZXR1cm4gYWcoYyxhLGIsZCl9cmV0dXJuIDA9PT1XZChuZXcgVWludDhBcnJheShjLmJ1ZmZlciksbmV3IFVpbnQ4QXJyYXkoYS5idWZmZXIpKX1yZXR1cm4gYj9jPT09YTpjPT1hfWZ1bmN0aW9uIGFnKGMsYSxiLGQpe2lmKG51bGw9PT1jfHx2b2lkIDA9PT1jfHxudWxsPT09YXx8dm9pZCAwPT09YSlyZXR1cm4hMTtpZihDYyhjKXx8Q2MoYSkpcmV0dXJuIGM9PT1hO2lmKGImJk9iamVjdC5nZXRQcm90b3R5cGVPZihjKSE9PU9iamVjdC5nZXRQcm90b3R5cGVPZihhKSlyZXR1cm4hMTt2YXIgZT0iW29iamVjdCBBcmd1bWVudHNdIj09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGMpLGY9IltvYmplY3QgQXJndW1lbnRzXSI9PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhKTsKaWYoZSYmIWZ8fCFlJiZmKXJldHVybiExO2lmKGUpcmV0dXJuIGM9ZmUuY2FsbChjKSxhPWZlLmNhbGwoYSksWWEoYyxhLGIpO2U9Z2UoYyk7dmFyIGc9Z2UoYSk7aWYoZS5sZW5ndGghPT1nLmxlbmd0aClyZXR1cm4hMTtlLnNvcnQoKTtnLnNvcnQoKTtmb3IoZj1lLmxlbmd0aC0xOzA8PWY7Zi0tKWlmKGVbZl0hPT1nW2ZdKXJldHVybiExO2ZvcihmPWUubGVuZ3RoLTE7MDw9ZjtmLS0paWYoZz1lW2ZdLCFZYShjW2ddLGFbZ10sYixkKSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBoZShjLGEsYil7WWEoYyxhLCExKSYmUyhjLGEsYiwibm90RGVlcEVxdWFsIixoZSl9ZnVuY3Rpb24gaWUoYyxhLGIpe1lhKGMsYSwhMCkmJlMoYyxhLGIsIm5vdERlZXBTdHJpY3RFcXVhbCIsaWUpfWZ1bmN0aW9uIGplKGMsYSxiKXtjIT09YSYmUyhjLGEsYiwiPT09IixqZSl9ZnVuY3Rpb24ga2UoYyxhLGIpe2M9PT1hJiZTKGMsYSxiLCIhPT0iLGtlKX1mdW5jdGlvbiBsZShjLGEpe2lmKCFjfHwhYSlyZXR1cm4hMTsKaWYoIltvYmplY3QgUmVnRXhwXSI9PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhKSlyZXR1cm4gYS50ZXN0KGMpO3RyeXtpZihjIGluc3RhbmNlb2YgYSlyZXR1cm4hMH1jYXRjaChiKXt9cmV0dXJuIEVycm9yLmlzUHJvdG90eXBlT2YoYSk/ITE6ITA9PT1hLmNhbGwoe30sYyl9ZnVuY3Rpb24gbWUoYyxhLGIsZCl7aWYoImZ1bmN0aW9uIiE9PXR5cGVvZiBhKXRocm93IG5ldyBUeXBlRXJyb3IoJyJibG9jayIgYXJndW1lbnQgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7InN0cmluZyI9PT10eXBlb2YgYiYmKGQ9YixiPW51bGwpO3RyeXthKCl9Y2F0Y2goaCl7dmFyIGU9aH1hPWU7ZD0oYiYmYi5uYW1lPyIgKCIrYi5uYW1lKyIpLiI6Ii4iKSsoZD8iICIrZDoiLiIpO2MmJiFhJiZTKGEsYiwiTWlzc2luZyBleHBlY3RlZCBleGNlcHRpb24iK2QpO2U9InN0cmluZyI9PT10eXBlb2YgZDt2YXIgZj0hYyYmb2IoYSksZz0hYyYmYSYmIWI7KGYmJmUmJmxlKGEsYil8fGcpJiZTKGEsCmIsIkdvdCB1bndhbnRlZCBleGNlcHRpb24iK2QpO2lmKGMmJmEmJmImJiFsZShhLGIpfHwhYyYmYSl0aHJvdyBhO31mdW5jdGlvbiBiZyhjLGEpe2Zvcih2YXIgYj0wLGQ9Yy5sZW5ndGgtMTswPD1kO2QtLSl7dmFyIGU9Y1tkXTsiLiI9PT1lP2Muc3BsaWNlKGQsMSk6Ii4uIj09PWU/KGMuc3BsaWNlKGQsMSksYisrKTpiJiYoYy5zcGxpY2UoZCwxKSxiLS0pfWlmKGEpZm9yKDtiLS07YiljLnVuc2hpZnQoIi4uIik7cmV0dXJuIGN9ZnVuY3Rpb24gSGMoKXtmb3IodmFyIGM9IiIsYT0hMSxiPWFyZ3VtZW50cy5sZW5ndGgtMTstMTw9YiYmIWE7Yi0tKXt2YXIgZD0wPD1iP2FyZ3VtZW50c1tiXToiLyI7aWYoInN0cmluZyIhPT10eXBlb2YgZCl0aHJvdyBuZXcgVHlwZUVycm9yKCJBcmd1bWVudHMgdG8gcGF0aC5yZXNvbHZlIG11c3QgYmUgc3RyaW5ncyIpO2QmJihjPWQrIi8iK2MsYT0iLyI9PT1kLmNoYXJBdCgwKSl9Yz1iZyhjZyhjLnNwbGl0KCIvIiksZnVuY3Rpb24oYSl7cmV0dXJuISFhfSksCiFhKS5qb2luKCIvIik7cmV0dXJuKGE/Ii8iOiIiKStjfHwiLiJ9ZnVuY3Rpb24gUGIoYyxhKXtmdW5jdGlvbiBiKGEpe2Zvcih2YXIgYz0wO2M8YS5sZW5ndGgmJiIiPT09YVtjXTtjKyspO2Zvcih2YXIgYj1hLmxlbmd0aC0xOzA8PWImJiIiPT09YVtiXTtiLS0pO3JldHVybiBjPmI/W106YS5zbGljZShjLGItYysxKX1jPUhjKGMpLnN1YnN0cigxKTthPUhjKGEpLnN1YnN0cigxKTtjPWIoYy5zcGxpdCgiLyIpKTthPWIoYS5zcGxpdCgiLyIpKTtmb3IodmFyIGQ9TWF0aC5taW4oYy5sZW5ndGgsYS5sZW5ndGgpLGU9ZCxmPTA7ZjxkO2YrKylpZihjW2ZdIT09YVtmXSl7ZT1mO2JyZWFrfWQ9W107Zm9yKGY9ZTtmPGMubGVuZ3RoO2YrKylkLnB1c2goIi4uIik7ZD1kLmNvbmNhdChhLnNsaWNlKGUpKTtyZXR1cm4gZC5qb2luKCIvIil9ZnVuY3Rpb24gY2coYyxhKXtpZihjLmZpbHRlcilyZXR1cm4gYy5maWx0ZXIoYSk7Zm9yKHZhciBiPVtdLGQ9MDtkPGMubGVuZ3RoO2QrKylhKGNbZF0sCmQsYykmJmIucHVzaChjW2RdKTtyZXR1cm4gYn1mdW5jdGlvbiBxYSgpe31mdW5jdGlvbiB4KCl7eC5pbml0LmNhbGwodGhpcyl9ZnVuY3Rpb24gbmUoYyxhLGIsZCl7dmFyIGU7aWYoImZ1bmN0aW9uIiE9PXR5cGVvZiBiKXRocm93IG5ldyBUeXBlRXJyb3IoJyJsaXN0ZW5lciIgYXJndW1lbnQgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7aWYoZT1jLl9ldmVudHMpe2UubmV3TGlzdGVuZXImJihjLmVtaXQoIm5ld0xpc3RlbmVyIixhLGIubGlzdGVuZXI/Yi5saXN0ZW5lcjpiKSxlPWMuX2V2ZW50cyk7dmFyIGY9ZVthXX1lbHNlIGU9Yy5fZXZlbnRzPW5ldyBxYSxjLl9ldmVudHNDb3VudD0wO2Y/KCJmdW5jdGlvbiI9PT10eXBlb2YgZj9mPWVbYV09ZD9bYixmXTpbZixiXTpkP2YudW5zaGlmdChiKTpmLnB1c2goYiksZi53YXJuZWR8fChiPXZvaWQgMD09PWMuX21heExpc3RlbmVycz94LmRlZmF1bHRNYXhMaXN0ZW5lcnM6Yy5fbWF4TGlzdGVuZXJzKSYmMDxiJiZmLmxlbmd0aD5iJiYoZi53YXJuZWQ9CiEwLGI9RXJyb3IoIlBvc3NpYmxlIEV2ZW50RW1pdHRlciBtZW1vcnkgbGVhayBkZXRlY3RlZC4gIitmLmxlbmd0aCsiICIrYSsiIGxpc3RlbmVycyBhZGRlZC4gVXNlIGVtaXR0ZXIuc2V0TWF4TGlzdGVuZXJzKCkgdG8gaW5jcmVhc2UgbGltaXQiKSxiLm5hbWU9Ik1heExpc3RlbmVyc0V4Y2VlZGVkV2FybmluZyIsYi5lbWl0dGVyPWMsYi50eXBlPWEsYi5jb3VudD1mLmxlbmd0aCwiZnVuY3Rpb24iPT09dHlwZW9mIGNvbnNvbGUud2Fybj9jb25zb2xlLndhcm4oYik6Y29uc29sZS5sb2coYikpKTooZVthXT1iLCsrYy5fZXZlbnRzQ291bnQpO3JldHVybiBjfWZ1bmN0aW9uIG9lKGMsYSxiKXtmdW5jdGlvbiBkKCl7Yy5yZW1vdmVMaXN0ZW5lcihhLGQpO2V8fChlPSEwLGIuYXBwbHkoYyxhcmd1bWVudHMpKX12YXIgZT0hMTtkLmxpc3RlbmVyPWI7cmV0dXJuIGR9ZnVuY3Rpb24gcGUoYyl7dmFyIGE9dGhpcy5fZXZlbnRzO2lmKGEpe2M9YVtjXTtpZigiZnVuY3Rpb24iPT09dHlwZW9mIGMpcmV0dXJuIDE7CmlmKGMpcmV0dXJuIGMubGVuZ3RofXJldHVybiAwfWZ1bmN0aW9uIHFiKGMsYSl7Zm9yKHZhciBiPUFycmF5KGEpO2EtLTspYlthXT1jW2FdO3JldHVybiBifWZ1bmN0aW9uIExhKCl7dGhpcy50YWlsPXRoaXMuaGVhZD1udWxsO3RoaXMubGVuZ3RoPTB9ZnVuY3Rpb24gcmIoYyl7dGhpcy5lbmNvZGluZz0oY3x8InV0ZjgiKS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1stX10vLCIiKTtpZihjJiYhZGcoYykpdGhyb3cgRXJyb3IoIlVua25vd24gZW5jb2Rpbmc6ICIrYyk7c3dpdGNoKHRoaXMuZW5jb2Rpbmcpe2Nhc2UgInV0ZjgiOnRoaXMuc3Vycm9nYXRlU2l6ZT0zO2JyZWFrO2Nhc2UgInVjczIiOmNhc2UgInV0ZjE2bGUiOnRoaXMuc3Vycm9nYXRlU2l6ZT0yO3RoaXMuZGV0ZWN0SW5jb21wbGV0ZUNoYXI9ZWc7YnJlYWs7Y2FzZSAiYmFzZTY0Ijp0aGlzLnN1cnJvZ2F0ZVNpemU9Mzt0aGlzLmRldGVjdEluY29tcGxldGVDaGFyPWZnO2JyZWFrO2RlZmF1bHQ6dGhpcy53cml0ZT1nZzsKcmV0dXJufXRoaXMuY2hhckJ1ZmZlcj1uZXcgbCg2KTt0aGlzLmNoYXJMZW5ndGg9dGhpcy5jaGFyUmVjZWl2ZWQ9MH1mdW5jdGlvbiBnZyhjKXtyZXR1cm4gYy50b1N0cmluZyh0aGlzLmVuY29kaW5nKX1mdW5jdGlvbiBlZyhjKXt0aGlzLmNoYXJMZW5ndGg9KHRoaXMuY2hhclJlY2VpdmVkPWMubGVuZ3RoJTIpPzI6MH1mdW5jdGlvbiBmZyhjKXt0aGlzLmNoYXJMZW5ndGg9KHRoaXMuY2hhclJlY2VpdmVkPWMubGVuZ3RoJTMpPzM6MH1mdW5jdGlvbiBoZyhjLGEsYil7aWYoImZ1bmN0aW9uIj09PXR5cGVvZiBjLnByZXBlbmRMaXN0ZW5lcilyZXR1cm4gYy5wcmVwZW5kTGlzdGVuZXIoYSxiKTtpZihjLl9ldmVudHMmJmMuX2V2ZW50c1thXSlBcnJheS5pc0FycmF5KGMuX2V2ZW50c1thXSk/Yy5fZXZlbnRzW2FdLnVuc2hpZnQoYik6Yy5fZXZlbnRzW2FdPVtiLGMuX2V2ZW50c1thXV07ZWxzZSBjLm9uKGEsYil9ZnVuY3Rpb24gcWUoYyxhKXtjPWN8fHt9O3RoaXMub2JqZWN0TW9kZT0KISFjLm9iamVjdE1vZGU7YSBpbnN0YW5jZW9mIFUmJih0aGlzLm9iamVjdE1vZGU9dGhpcy5vYmplY3RNb2RlfHwhIWMucmVhZGFibGVPYmplY3RNb2RlKTthPWMuaGlnaFdhdGVyTWFyazt2YXIgYj10aGlzLm9iamVjdE1vZGU/MTY6MTYzODQ7dGhpcy5oaWdoV2F0ZXJNYXJrPWF8fDA9PT1hP2E6Yjt0aGlzLmhpZ2hXYXRlck1hcms9fn50aGlzLmhpZ2hXYXRlck1hcms7dGhpcy5idWZmZXI9bmV3IExhO3RoaXMubGVuZ3RoPTA7dGhpcy5waXBlcz1udWxsO3RoaXMucGlwZXNDb3VudD0wO3RoaXMuZmxvd2luZz1udWxsO3RoaXMucmVhZGluZz10aGlzLmVuZEVtaXR0ZWQ9dGhpcy5lbmRlZD0hMTt0aGlzLnN5bmM9ITA7dGhpcy5yZXN1bWVTY2hlZHVsZWQ9dGhpcy5yZWFkYWJsZUxpc3RlbmluZz10aGlzLmVtaXR0ZWRSZWFkYWJsZT10aGlzLm5lZWRSZWFkYWJsZT0hMTt0aGlzLmRlZmF1bHRFbmNvZGluZz1jLmRlZmF1bHRFbmNvZGluZ3x8InV0ZjgiO3RoaXMucmFuT3V0PSExO3RoaXMuYXdhaXREcmFpbj0KMDt0aGlzLnJlYWRpbmdNb3JlPSExO3RoaXMuZW5jb2Rpbmc9dGhpcy5kZWNvZGVyPW51bGw7Yy5lbmNvZGluZyYmKHRoaXMuZGVjb2Rlcj1uZXcgcmIoYy5lbmNvZGluZyksdGhpcy5lbmNvZGluZz1jLmVuY29kaW5nKX1mdW5jdGlvbiB5KGMpe2lmKCEodGhpcyBpbnN0YW5jZW9mIHkpKXJldHVybiBuZXcgeShjKTt0aGlzLl9yZWFkYWJsZVN0YXRlPW5ldyBxZShjLHRoaXMpO3RoaXMucmVhZGFibGU9ITA7YyYmImZ1bmN0aW9uIj09PXR5cGVvZiBjLnJlYWQmJih0aGlzLl9yZWFkPWMucmVhZCk7eC5jYWxsKHRoaXMpfWZ1bmN0aW9uIHJlKGMsYSxiLGQsZSl7dmFyIGY9YixnPW51bGw7cGEoZil8fCJzdHJpbmciPT09dHlwZW9mIGZ8fG51bGw9PT1mfHx2b2lkIDA9PT1mfHxhLm9iamVjdE1vZGV8fChnPW5ldyBUeXBlRXJyb3IoIkludmFsaWQgbm9uLXN0cmluZy9idWZmZXIgY2h1bmsiKSk7aWYoZj1nKWMuZW1pdCgiZXJyb3IiLGYpO2Vsc2UgaWYobnVsbD09PWIpYS5yZWFkaW5nPQohMSxhLmVuZGVkfHwoYS5kZWNvZGVyJiYoYj1hLmRlY29kZXIuZW5kKCkpJiZiLmxlbmd0aCYmKGEuYnVmZmVyLnB1c2goYiksYS5sZW5ndGgrPWEub2JqZWN0TW9kZT8xOmIubGVuZ3RoKSxhLmVuZGVkPSEwLFFiKGMpKTtlbHNlIGlmKGEub2JqZWN0TW9kZXx8YiYmMDxiLmxlbmd0aClpZihhLmVuZGVkJiYhZSljLmVtaXQoImVycm9yIixFcnJvcigic3RyZWFtLnB1c2goKSBhZnRlciBFT0YiKSk7ZWxzZSBpZihhLmVuZEVtaXR0ZWQmJmUpYy5lbWl0KCJlcnJvciIsRXJyb3IoInN0cmVhbS51bnNoaWZ0KCkgYWZ0ZXIgZW5kIGV2ZW50IikpO2Vsc2V7aWYoYS5kZWNvZGVyJiYhZSYmIWQpe2I9YS5kZWNvZGVyLndyaXRlKGIpO3ZhciBoPSFhLm9iamVjdE1vZGUmJjA9PT1iLmxlbmd0aH1lfHwoYS5yZWFkaW5nPSExKTtofHwoYS5mbG93aW5nJiYwPT09YS5sZW5ndGgmJiFhLnN5bmM/KGMuZW1pdCgiZGF0YSIsYiksYy5yZWFkKDApKTooYS5sZW5ndGgrPWEub2JqZWN0TW9kZT8xOmIubGVuZ3RoLAplP2EuYnVmZmVyLnVuc2hpZnQoYik6YS5idWZmZXIucHVzaChiKSxhLm5lZWRSZWFkYWJsZSYmUWIoYykpKTthLnJlYWRpbmdNb3JlfHwoYS5yZWFkaW5nTW9yZT0hMCxYKGlnLGMsYSkpfWVsc2UgZXx8KGEucmVhZGluZz0hMSk7cmV0dXJuIWEuZW5kZWQmJihhLm5lZWRSZWFkYWJsZXx8YS5sZW5ndGg8YS5oaWdoV2F0ZXJNYXJrfHwwPT09YS5sZW5ndGgpfWZ1bmN0aW9uIHNlKGMsYSl7aWYoMD49Y3x8MD09PWEubGVuZ3RoJiZhLmVuZGVkKXJldHVybiAwO2lmKGEub2JqZWN0TW9kZSlyZXR1cm4gMTtpZihjIT09YylyZXR1cm4gYS5mbG93aW5nJiZhLmxlbmd0aD9hLmJ1ZmZlci5oZWFkLmRhdGEubGVuZ3RoOmEubGVuZ3RoO2lmKGM+YS5oaWdoV2F0ZXJNYXJrKXt2YXIgYj1jOzgzODg2MDg8PWI/Yj04Mzg4NjA4OihiLS0sYnw9Yj4+PjEsYnw9Yj4+PjIsYnw9Yj4+PjQsYnw9Yj4+PjgsYnw9Yj4+PjE2LGIrKyk7YS5oaWdoV2F0ZXJNYXJrPWJ9cmV0dXJuIGM8PWEubGVuZ3RoP2M6CmEuZW5kZWQ/YS5sZW5ndGg6KGEubmVlZFJlYWRhYmxlPSEwLDApfWZ1bmN0aW9uIFFiKGMpe3ZhciBhPWMuX3JlYWRhYmxlU3RhdGU7YS5uZWVkUmVhZGFibGU9ITE7YS5lbWl0dGVkUmVhZGFibGV8fCh6KCJlbWl0UmVhZGFibGUiLGEuZmxvd2luZyksYS5lbWl0dGVkUmVhZGFibGU9ITAsYS5zeW5jP1godGUsYyk6dGUoYykpfWZ1bmN0aW9uIHRlKGMpe3ooImVtaXQgcmVhZGFibGUiKTtjLmVtaXQoInJlYWRhYmxlIik7SWMoYyl9ZnVuY3Rpb24gaWcoYyxhKXtmb3IodmFyIGI9YS5sZW5ndGg7IWEucmVhZGluZyYmIWEuZmxvd2luZyYmIWEuZW5kZWQmJmEubGVuZ3RoPGEuaGlnaFdhdGVyTWFyayYmKHooIm1heWJlUmVhZE1vcmUgcmVhZCAwIiksYy5yZWFkKDApLGIhPT1hLmxlbmd0aCk7KWI9YS5sZW5ndGg7YS5yZWFkaW5nTW9yZT0hMX1mdW5jdGlvbiBqZyhjKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgYT1jLl9yZWFkYWJsZVN0YXRlO3ooInBpcGVPbkRyYWluIixhLmF3YWl0RHJhaW4pOwphLmF3YWl0RHJhaW4mJmEuYXdhaXREcmFpbi0tOzA9PT1hLmF3YWl0RHJhaW4mJmMubGlzdGVuZXJzKCJkYXRhIikubGVuZ3RoJiYoYS5mbG93aW5nPSEwLEljKGMpKX19ZnVuY3Rpb24ga2coYyl7eigicmVhZGFibGUgbmV4dHRpY2sgcmVhZCAwIik7Yy5yZWFkKDApfWZ1bmN0aW9uIGxnKGMsYSl7YS5yZWFkaW5nfHwoeigicmVzdW1lIHJlYWQgMCIpLGMucmVhZCgwKSk7YS5yZXN1bWVTY2hlZHVsZWQ9ITE7YS5hd2FpdERyYWluPTA7Yy5lbWl0KCJyZXN1bWUiKTtJYyhjKTthLmZsb3dpbmcmJiFhLnJlYWRpbmcmJmMucmVhZCgwKX1mdW5jdGlvbiBJYyhjKXt2YXIgYT1jLl9yZWFkYWJsZVN0YXRlO2Zvcih6KCJmbG93IixhLmZsb3dpbmcpO2EuZmxvd2luZyYmbnVsbCE9PWMucmVhZCgpOyk7fWZ1bmN0aW9uIHVlKGMsYSl7aWYoMD09PWEubGVuZ3RoKXJldHVybiBudWxsO2lmKGEub2JqZWN0TW9kZSl2YXIgYj1hLmJ1ZmZlci5zaGlmdCgpO2Vsc2UgaWYoIWN8fGM+PWEubGVuZ3RoKWI9CmEuZGVjb2Rlcj9hLmJ1ZmZlci5qb2luKCIiKToxPT09YS5idWZmZXIubGVuZ3RoP2EuYnVmZmVyLmhlYWQuZGF0YTphLmJ1ZmZlci5jb25jYXQoYS5sZW5ndGgpLGEuYnVmZmVyLmNsZWFyKCk7ZWxzZXtiPWEuYnVmZmVyO2E9YS5kZWNvZGVyO2lmKGM8Yi5oZWFkLmRhdGEubGVuZ3RoKWE9Yi5oZWFkLmRhdGEuc2xpY2UoMCxjKSxiLmhlYWQuZGF0YT1iLmhlYWQuZGF0YS5zbGljZShjKTtlbHNle2lmKGM9PT1iLmhlYWQuZGF0YS5sZW5ndGgpYj1iLnNoaWZ0KCk7ZWxzZSBpZihhKXthPWIuaGVhZDt2YXIgZD0xLGU9YS5kYXRhO2ZvcihjLT1lLmxlbmd0aDthPWEubmV4dDspe3ZhciBmPWEuZGF0YSxnPWM+Zi5sZW5ndGg/Zi5sZW5ndGg6YztlPWc9PT1mLmxlbmd0aD9lK2Y6ZStmLnNsaWNlKDAsYyk7Yy09ZztpZigwPT09Yyl7Zz09PWYubGVuZ3RoPygrK2QsYi5oZWFkPWEubmV4dD9hLm5leHQ6Yi50YWlsPW51bGwpOihiLmhlYWQ9YSxhLmRhdGE9Zi5zbGljZShnKSk7YnJlYWt9KytkfWIubGVuZ3RoLT0KZDtiPWV9ZWxzZXthPWwuYWxsb2NVbnNhZmUoYyk7ZD1iLmhlYWQ7ZT0xO2QuZGF0YS5jb3B5KGEpO2ZvcihjLT1kLmRhdGEubGVuZ3RoO2Q9ZC5uZXh0Oyl7Zj1kLmRhdGE7Zz1jPmYubGVuZ3RoP2YubGVuZ3RoOmM7Zi5jb3B5KGEsYS5sZW5ndGgtYywwLGcpO2MtPWc7aWYoMD09PWMpe2c9PT1mLmxlbmd0aD8oKytlLGIuaGVhZD1kLm5leHQ/ZC5uZXh0OmIudGFpbD1udWxsKTooYi5oZWFkPWQsZC5kYXRhPWYuc2xpY2UoZykpO2JyZWFrfSsrZX1iLmxlbmd0aC09ZTtiPWF9YT1ifWI9YX1yZXR1cm4gYn1mdW5jdGlvbiBKYyhjKXt2YXIgYT1jLl9yZWFkYWJsZVN0YXRlO2lmKDA8YS5sZW5ndGgpdGhyb3cgRXJyb3IoJyJlbmRSZWFkYWJsZSgpIiBjYWxsZWQgb24gbm9uLWVtcHR5IHN0cmVhbScpO2EuZW5kRW1pdHRlZHx8KGEuZW5kZWQ9ITAsWChtZyxhLGMpKX1mdW5jdGlvbiBtZyhjLGEpe2MuZW5kRW1pdHRlZHx8MCE9PWMubGVuZ3RofHwoYy5lbmRFbWl0dGVkPSEwLGEucmVhZGFibGU9CiExLGEuZW1pdCgiZW5kIikpfWZ1bmN0aW9uIG5nKGMsYSl7Zm9yKHZhciBiPTAsZD1jLmxlbmd0aDtiPGQ7YisrKWEoY1tiXSxiKX1mdW5jdGlvbiB2ZShjLGEpe2Zvcih2YXIgYj0wLGQ9Yy5sZW5ndGg7YjxkO2IrKylpZihjW2JdPT09YSlyZXR1cm4gYjtyZXR1cm4tMX1mdW5jdGlvbiBvZygpe31mdW5jdGlvbiBwZyhjLGEsYil7dGhpcy5jaHVuaz1jO3RoaXMuZW5jb2Rpbmc9YTt0aGlzLmNhbGxiYWNrPWI7dGhpcy5uZXh0PW51bGx9ZnVuY3Rpb24gS2MoYyxhKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywiYnVmZmVyIix7Z2V0OnhjKGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0QnVmZmVyKCl9LCJfd3JpdGFibGVTdGF0ZS5idWZmZXIgaXMgZGVwcmVjYXRlZC4gVXNlIF93cml0YWJsZVN0YXRlLmdldEJ1ZmZlciBpbnN0ZWFkLiIpfSk7Yz1jfHx7fTt0aGlzLm9iamVjdE1vZGU9ISFjLm9iamVjdE1vZGU7YSBpbnN0YW5jZW9mIFUmJih0aGlzLm9iamVjdE1vZGU9dGhpcy5vYmplY3RNb2RlfHwKISFjLndyaXRhYmxlT2JqZWN0TW9kZSk7dmFyIGI9Yy5oaWdoV2F0ZXJNYXJrLGQ9dGhpcy5vYmplY3RNb2RlPzE2OjE2Mzg0O3RoaXMuaGlnaFdhdGVyTWFyaz1ifHwwPT09Yj9iOmQ7dGhpcy5oaWdoV2F0ZXJNYXJrPX5+dGhpcy5oaWdoV2F0ZXJNYXJrO3RoaXMuZmluaXNoZWQ9dGhpcy5lbmRlZD10aGlzLmVuZGluZz10aGlzLm5lZWREcmFpbj0hMTt0aGlzLmRlY29kZVN0cmluZ3M9ITEhPT1jLmRlY29kZVN0cmluZ3M7dGhpcy5kZWZhdWx0RW5jb2Rpbmc9Yy5kZWZhdWx0RW5jb2Rpbmd8fCJ1dGY4Ijt0aGlzLmxlbmd0aD0wO3RoaXMud3JpdGluZz0hMTt0aGlzLmNvcmtlZD0wO3RoaXMuc3luYz0hMDt0aGlzLmJ1ZmZlclByb2Nlc3Npbmc9ITE7dGhpcy5vbndyaXRlPWZ1bmN0aW9uKGMpe3ZhciBiPWEuX3dyaXRhYmxlU3RhdGUsZD1iLnN5bmMsZT1iLndyaXRlY2I7Yi53cml0aW5nPSExO2Iud3JpdGVjYj1udWxsO2IubGVuZ3RoLT1iLndyaXRlbGVuO2Iud3JpdGVsZW49MDtjPwooLS1iLnBlbmRpbmdjYixkP1goZSxjKTplKGMpLGEuX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkPSEwLGEuZW1pdCgiZXJyb3IiLGMpKTooKGM9d2UoYikpfHxiLmNvcmtlZHx8Yi5idWZmZXJQcm9jZXNzaW5nfHwhYi5idWZmZXJlZFJlcXVlc3R8fHhlKGEsYiksZD9YKHllLGEsYixjLGUpOnllKGEsYixjLGUpKX07dGhpcy53cml0ZWNiPW51bGw7dGhpcy53cml0ZWxlbj0wO3RoaXMubGFzdEJ1ZmZlcmVkUmVxdWVzdD10aGlzLmJ1ZmZlcmVkUmVxdWVzdD1udWxsO3RoaXMucGVuZGluZ2NiPTA7dGhpcy5lcnJvckVtaXR0ZWQ9dGhpcy5wcmVmaW5pc2hlZD0hMTt0aGlzLmJ1ZmZlcmVkUmVxdWVzdENvdW50PTA7dGhpcy5jb3JrZWRSZXF1ZXN0c0ZyZWU9bmV3IHplKHRoaXMpfWZ1bmN0aW9uIEwoYyl7aWYoISh0aGlzIGluc3RhbmNlb2YgTHx8dGhpcyBpbnN0YW5jZW9mIFUpKXJldHVybiBuZXcgTChjKTt0aGlzLl93cml0YWJsZVN0YXRlPW5ldyBLYyhjLHRoaXMpO3RoaXMud3JpdGFibGU9CiEwO2MmJigiZnVuY3Rpb24iPT09dHlwZW9mIGMud3JpdGUmJih0aGlzLl93cml0ZT1jLndyaXRlKSwiZnVuY3Rpb24iPT09dHlwZW9mIGMud3JpdGV2JiYodGhpcy5fd3JpdGV2PWMud3JpdGV2KSk7eC5jYWxsKHRoaXMpfWZ1bmN0aW9uIExjKGMsYSxiLGQsZSxmLGcpe2Eud3JpdGVsZW49ZDthLndyaXRlY2I9ZzthLndyaXRpbmc9ITA7YS5zeW5jPSEwO2I/Yy5fd3JpdGV2KGUsYS5vbndyaXRlKTpjLl93cml0ZShlLGYsYS5vbndyaXRlKTthLnN5bmM9ITF9ZnVuY3Rpb24geWUoYyxhLGIsZCl7IWImJjA9PT1hLmxlbmd0aCYmYS5uZWVkRHJhaW4mJihhLm5lZWREcmFpbj0hMSxjLmVtaXQoImRyYWluIikpO2EucGVuZGluZ2NiLS07ZCgpO0FlKGMsYSl9ZnVuY3Rpb24geGUoYyxhKXthLmJ1ZmZlclByb2Nlc3Npbmc9ITA7dmFyIGI9YS5idWZmZXJlZFJlcXVlc3Q7aWYoYy5fd3JpdGV2JiZiJiZiLm5leHQpe3ZhciBkPUFycmF5KGEuYnVmZmVyZWRSZXF1ZXN0Q291bnQpLGU9YS5jb3JrZWRSZXF1ZXN0c0ZyZWU7CmUuZW50cnk9Yjtmb3IodmFyIGY9MDtiOylkW2ZdPWIsYj1iLm5leHQsZis9MTtMYyhjLGEsITAsYS5sZW5ndGgsZCwiIixlLmZpbmlzaCk7YS5wZW5kaW5nY2IrKzthLmxhc3RCdWZmZXJlZFJlcXVlc3Q9bnVsbDtlLm5leHQ/KGEuY29ya2VkUmVxdWVzdHNGcmVlPWUubmV4dCxlLm5leHQ9bnVsbCk6YS5jb3JrZWRSZXF1ZXN0c0ZyZWU9bmV3IHplKGEpfWVsc2V7Zm9yKDtiJiYoZD1iLmNodW5rLExjKGMsYSwhMSxhLm9iamVjdE1vZGU/MTpkLmxlbmd0aCxkLGIuZW5jb2RpbmcsYi5jYWxsYmFjayksYj1iLm5leHQsIWEud3JpdGluZyk7KTtudWxsPT09YiYmKGEubGFzdEJ1ZmZlcmVkUmVxdWVzdD1udWxsKX1hLmJ1ZmZlcmVkUmVxdWVzdENvdW50PTA7YS5idWZmZXJlZFJlcXVlc3Q9YjthLmJ1ZmZlclByb2Nlc3Npbmc9ITF9ZnVuY3Rpb24gd2UoYyl7cmV0dXJuIGMuZW5kaW5nJiYwPT09Yy5sZW5ndGgmJm51bGw9PT1jLmJ1ZmZlcmVkUmVxdWVzdCYmIWMuZmluaXNoZWQmJiFjLndyaXRpbmd9CmZ1bmN0aW9uIEFlKGMsYSl7dmFyIGI9d2UoYSk7YiYmKDA9PT1hLnBlbmRpbmdjYj8oYS5wcmVmaW5pc2hlZHx8KGEucHJlZmluaXNoZWQ9ITAsYy5lbWl0KCJwcmVmaW5pc2giKSksYS5maW5pc2hlZD0hMCxjLmVtaXQoImZpbmlzaCIpKTphLnByZWZpbmlzaGVkfHwoYS5wcmVmaW5pc2hlZD0hMCxjLmVtaXQoInByZWZpbmlzaCIpKSk7cmV0dXJuIGJ9ZnVuY3Rpb24gemUoYyl7dmFyIGE9dGhpczt0aGlzLmVudHJ5PXRoaXMubmV4dD1udWxsO3RoaXMuZmluaXNoPWZ1bmN0aW9uKGIpe3ZhciBkPWEuZW50cnk7Zm9yKGEuZW50cnk9bnVsbDtkOyl7dmFyIGU9ZC5jYWxsYmFjaztjLnBlbmRpbmdjYi0tO2UoYik7ZD1kLm5leHR9Yy5jb3JrZWRSZXF1ZXN0c0ZyZWU/Yy5jb3JrZWRSZXF1ZXN0c0ZyZWUubmV4dD1hOmMuY29ya2VkUmVxdWVzdHNGcmVlPWF9fWZ1bmN0aW9uIFUoYyl7aWYoISh0aGlzIGluc3RhbmNlb2YgVSkpcmV0dXJuIG5ldyBVKGMpO3kuY2FsbCh0aGlzLGMpO0wuY2FsbCh0aGlzLApjKTtjJiYhMT09PWMucmVhZGFibGUmJih0aGlzLnJlYWRhYmxlPSExKTtjJiYhMT09PWMud3JpdGFibGUmJih0aGlzLndyaXRhYmxlPSExKTt0aGlzLmFsbG93SGFsZk9wZW49ITA7YyYmITE9PT1jLmFsbG93SGFsZk9wZW4mJih0aGlzLmFsbG93SGFsZk9wZW49ITEpO3RoaXMub25jZSgiZW5kIixxZyl9ZnVuY3Rpb24gcWcoKXt0aGlzLmFsbG93SGFsZk9wZW58fHRoaXMuX3dyaXRhYmxlU3RhdGUuZW5kZWR8fFgocmcsdGhpcyl9ZnVuY3Rpb24gcmcoYyl7Yy5lbmQoKX1mdW5jdGlvbiBzZyhjKXt0aGlzLmFmdGVyVHJhbnNmb3JtPWZ1bmN0aW9uKGEsYil7dmFyIGQ9Yy5fdHJhbnNmb3JtU3RhdGU7ZC50cmFuc2Zvcm1pbmc9ITE7dmFyIGU9ZC53cml0ZWNiO2U/KGQud3JpdGVjaHVuaz1udWxsLGQud3JpdGVjYj1udWxsLG51bGwhPT1iJiZ2b2lkIDAhPT1iJiZjLnB1c2goYiksZShhKSxhPWMuX3JlYWRhYmxlU3RhdGUsYS5yZWFkaW5nPSExLChhLm5lZWRSZWFkYWJsZXx8YS5sZW5ndGg8CmEuaGlnaFdhdGVyTWFyaykmJmMuX3JlYWQoYS5oaWdoV2F0ZXJNYXJrKSxhPXZvaWQgMCk6YT1jLmVtaXQoImVycm9yIixFcnJvcigibm8gd3JpdGVjYiBpbiBUcmFuc2Zvcm0gY2xhc3MiKSk7cmV0dXJuIGF9O3RoaXMudHJhbnNmb3JtaW5nPXRoaXMubmVlZFRyYW5zZm9ybT0hMTt0aGlzLndyaXRlZW5jb2Rpbmc9dGhpcy53cml0ZWNodW5rPXRoaXMud3JpdGVjYj1udWxsfWZ1bmN0aW9uIGJhKGMpe2lmKCEodGhpcyBpbnN0YW5jZW9mIGJhKSlyZXR1cm4gbmV3IGJhKGMpO1UuY2FsbCh0aGlzLGMpO3RoaXMuX3RyYW5zZm9ybVN0YXRlPW5ldyBzZyh0aGlzKTt2YXIgYT10aGlzO3RoaXMuX3JlYWRhYmxlU3RhdGUubmVlZFJlYWRhYmxlPSEwO3RoaXMuX3JlYWRhYmxlU3RhdGUuc3luYz0hMTtjJiYoImZ1bmN0aW9uIj09PXR5cGVvZiBjLnRyYW5zZm9ybSYmKHRoaXMuX3RyYW5zZm9ybT1jLnRyYW5zZm9ybSksImZ1bmN0aW9uIj09PXR5cGVvZiBjLmZsdXNoJiYodGhpcy5fZmx1c2g9CmMuZmx1c2gpKTt0aGlzLm9uY2UoInByZWZpbmlzaCIsZnVuY3Rpb24oKXsiZnVuY3Rpb24iPT09dHlwZW9mIHRoaXMuX2ZsdXNoP3RoaXMuX2ZsdXNoKGZ1bmN0aW9uKGMpe0JlKGEsYyl9KTpCZShhKX0pfWZ1bmN0aW9uIEJlKGMsYSl7aWYoYSlyZXR1cm4gYy5lbWl0KCJlcnJvciIsYSk7YT1jLl90cmFuc2Zvcm1TdGF0ZTtpZihjLl93cml0YWJsZVN0YXRlLmxlbmd0aCl0aHJvdyBFcnJvcigiQ2FsbGluZyB0cmFuc2Zvcm0gZG9uZSB3aGVuIHdzLmxlbmd0aCAhPSAwIik7aWYoYS50cmFuc2Zvcm1pbmcpdGhyb3cgRXJyb3IoIkNhbGxpbmcgdHJhbnNmb3JtIGRvbmUgd2hlbiBzdGlsbCB0cmFuc2Zvcm1pbmciKTtyZXR1cm4gYy5wdXNoKG51bGwpfWZ1bmN0aW9uIHNiKGMpe2lmKCEodGhpcyBpbnN0YW5jZW9mIHNiKSlyZXR1cm4gbmV3IHNiKGMpO2JhLmNhbGwodGhpcyxjKX1mdW5jdGlvbiBjYSgpe3guY2FsbCh0aGlzKX1mdW5jdGlvbiB0ZyhjLGEpe3ZhciBiPWMuc3BsaXQoIkAiKSwKZD0iIjsxPGIubGVuZ3RoJiYoZD1iWzBdKyJAIixjPWJbMV0pO2M9Yy5yZXBsYWNlKHVnLCIuIik7Yz1jLnNwbGl0KCIuIik7Yj1jLmxlbmd0aDtmb3IodmFyIGU9W107Yi0tOyllW2JdPWEoY1tiXSk7YT1lLmpvaW4oIi4iKTtyZXR1cm4gZCthfWZ1bmN0aW9uIENlKGMsYSl7cmV0dXJuIGMrMjIrNzUqKDI2PmMpLSgoMCE9YSk8PDUpfWZ1bmN0aW9uIHZnKGMpe3JldHVybiB0ZyhjLGZ1bmN0aW9uKGEpe2lmKHdnLnRlc3QoYSkpe3ZhciBjLGQ9W10sZT1bXSxmPTA7Zm9yKGM9YS5sZW5ndGg7ZjxjOyl7dmFyIGc9YS5jaGFyQ29kZUF0KGYrKyk7aWYoNTUyOTY8PWcmJjU2MzE5Pj1nJiZmPGMpe3ZhciBoPWEuY2hhckNvZGVBdChmKyspOzU2MzIwPT0oaCY2NDUxMik/ZS5wdXNoKCgoZyYxMDIzKTw8MTApKyhoJjEwMjMpKzY1NTM2KTooZS5wdXNoKGcpLGYtLSl9ZWxzZSBlLnB1c2goZyl9YT1lO2g9YS5sZW5ndGg7ZT0xMjg7dmFyIGs9MCx0PTcyO2ZvcihnPTA7ZzxoOysrZyl7dmFyIHE9CmFbZ107MTI4PnEmJmQucHVzaChNYyhxKSl9Zm9yKChmPWM9ZC5sZW5ndGgpJiZkLnB1c2goIi0iKTtmPGg7KXt2YXIgQT0yMTQ3NDgzNjQ3O2ZvcihnPTA7ZzxoOysrZylxPWFbZ10scT49ZSYmcTxBJiYoQT1xKTt2YXIgcj1mKzE7aWYoQS1lPlphKCgyMTQ3NDgzNjQ3LWspL3IpKXRocm93IG5ldyBSYW5nZUVycm9yKERlLm92ZXJmbG93KTtrKz0oQS1lKSpyO2U9QTtmb3IoZz0wO2c8aDsrK2cpe3E9YVtnXTtpZihxPGUmJjIxNDc0ODM2NDc8KytrKXRocm93IG5ldyBSYW5nZUVycm9yKERlLm92ZXJmbG93KTtpZihxPT1lKXt2YXIgUD1rO2ZvcihBPTM2OztBKz0zNil7cT1BPD10PzE6QT49dCsyNj8yNjpBLXQ7aWYoUDxxKWJyZWFrO3ZhciBwPVAtcTtQPTM2LXE7ZC5wdXNoKE1jKENlKHErcCVQLDApKSk7UD1aYShwL1ApfWQucHVzaChNYyhDZShQLDApKSk7dD1yO0E9MDtrPWY9PWM/WmEoay83MDApOms+PjE7Zm9yKGsrPVphKGsvdCk7NDU1PGs7QSs9MzYpaz1aYShrLzM1KTt0PQpaYShBKzM2KmsvKGsrMzgpKTtrPTA7KytmfX0rK2s7KytlfWQ9InhuLS0iK2Quam9pbigiIil9ZWxzZSBkPWE7cmV0dXJuIGR9KX1mdW5jdGlvbiB0YihjKXtzd2l0Y2godHlwZW9mIGMpe2Nhc2UgInN0cmluZyI6cmV0dXJuIGM7Y2FzZSAiYm9vbGVhbiI6cmV0dXJuIGM/InRydWUiOiJmYWxzZSI7Y2FzZSAibnVtYmVyIjpyZXR1cm4gaXNGaW5pdGUoYyk/YzoiIjtkZWZhdWx0OnJldHVybiIifX1mdW5jdGlvbiB4ZyhjLGEsYixkKXthPWF8fCImIjtiPWJ8fCI9IjtudWxsPT09YyYmKGM9dm9pZCAwKTtyZXR1cm4ib2JqZWN0Ij09PXR5cGVvZiBjP0VlKHlnKGMpLGZ1bmN0aW9uKGQpe3ZhciBlPWVuY29kZVVSSUNvbXBvbmVudCh0YihkKSkrYjtyZXR1cm4gRmUoY1tkXSk/RWUoY1tkXSxmdW5jdGlvbihhKXtyZXR1cm4gZStlbmNvZGVVUklDb21wb25lbnQodGIoYSkpfSkuam9pbihhKTplK2VuY29kZVVSSUNvbXBvbmVudCh0YihjW2RdKSl9KS5qb2luKGEpOmQ/ZW5jb2RlVVJJQ29tcG9uZW50KHRiKGQpKSsKYitlbmNvZGVVUklDb21wb25lbnQodGIoYykpOiIifWZ1bmN0aW9uIEVlKGMsYSl7aWYoYy5tYXApcmV0dXJuIGMubWFwKGEpO2Zvcih2YXIgYj1bXSxkPTA7ZDxjLmxlbmd0aDtkKyspYi5wdXNoKGEoY1tkXSxkKSk7cmV0dXJuIGJ9ZnVuY3Rpb24gR2UoYyxhLGIsZCl7Yj1ifHwiPSI7dmFyIGU9e307aWYoInN0cmluZyIhPT10eXBlb2YgY3x8MD09PWMubGVuZ3RoKXJldHVybiBlO3ZhciBmPS9cKy9nO2M9Yy5zcGxpdChhfHwiJiIpO2E9MUUzO2QmJiJudW1iZXIiPT09dHlwZW9mIGQubWF4S2V5cyYmKGE9ZC5tYXhLZXlzKTtkPWMubGVuZ3RoOzA8YSYmZD5hJiYoZD1hKTtmb3IoYT0wO2E8ZDsrK2Epe3ZhciBnPWNbYV0ucmVwbGFjZShmLCIlMjAiKSxoPWcuaW5kZXhPZihiKTtpZigwPD1oKXt2YXIgaz1nLnN1YnN0cigwLGgpO2c9Zy5zdWJzdHIoaCsxKX1lbHNlIGs9ZyxnPSIiO2s9ZGVjb2RlVVJJQ29tcG9uZW50KGspO2c9ZGVjb2RlVVJJQ29tcG9uZW50KGcpO09iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLAprKT9GZShlW2tdKT9lW2tdLnB1c2goZyk6ZVtrXT1bZVtrXSxnXTplW2tdPWd9cmV0dXJuIGV9ZnVuY3Rpb24gZGEoKXt0aGlzLmhyZWY9dGhpcy5wYXRoPXRoaXMucGF0aG5hbWU9dGhpcy5xdWVyeT10aGlzLnNlYXJjaD10aGlzLmhhc2g9dGhpcy5ob3N0bmFtZT10aGlzLnBvcnQ9dGhpcy5ob3N0PXRoaXMuYXV0aD10aGlzLnNsYXNoZXM9dGhpcy5wcm90b2NvbD1udWxsfWZ1bmN0aW9uIFJiKGMsYSxiKXtpZihjJiZ3YShjKSYmYyBpbnN0YW5jZW9mIGRhKXJldHVybiBjO3ZhciBkPW5ldyBkYTtkLnBhcnNlKGMsYSxiKTtyZXR1cm4gZH1mdW5jdGlvbiBIZShjLGEsYixkKXtpZighSmEoYSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiUGFyYW1ldGVyICd1cmwnIG11c3QgYmUgYSBzdHJpbmcsIG5vdCAiK3R5cGVvZiBhKTt2YXIgZT1hLmluZGV4T2YoIj8iKTtlPS0xIT09ZSYmZTxhLmluZGV4T2YoIiMiKT8iPyI6IiMiO2E9YS5zcGxpdChlKTthWzBdPWFbMF0ucmVwbGFjZSgvXFwvZywKIi8iKTthPWEuam9pbihlKTtlPWEudHJpbSgpO2lmKCFkJiYxPT09YS5zcGxpdCgiIyIpLmxlbmd0aCYmKGE9emcuZXhlYyhlKSkpcmV0dXJuIGMucGF0aD1lLGMuaHJlZj1lLGMucGF0aG5hbWU9YVsxXSxhWzJdPyhjLnNlYXJjaD1hWzJdLGMucXVlcnk9Yj9HZShjLnNlYXJjaC5zdWJzdHIoMSkpOmMuc2VhcmNoLnN1YnN0cigxKSk6YiYmKGMuc2VhcmNoPSIiLGMucXVlcnk9e30pLGM7aWYoYT1BZy5leGVjKGUpKXthPWFbMF07dmFyIGY9YS50b0xvd2VyQ2FzZSgpO2MucHJvdG9jb2w9ZjtlPWUuc3Vic3RyKGEubGVuZ3RoKX1pZihkfHxhfHxlLm1hdGNoKC9eXC9cL1teQFwvXStAW15AXC9dKy8pKXt2YXIgZz0iLy8iPT09ZS5zdWJzdHIoMCwyKTshZ3x8YSYmTmNbYV18fChlPWUuc3Vic3RyKDIpLGMuc2xhc2hlcz0hMCl9aWYoIU5jW2FdJiYoZ3x8YSYmISRhW2FdKSl7YT0tMTtmb3IoZD0wO2Q8SWUubGVuZ3RoO2QrKylnPWUuaW5kZXhPZihJZVtkXSksLTEhPT1nJiYoLTE9PT1hfHwKZzxhKSYmKGE9Zyk7Zz0tMT09PWE/ZS5sYXN0SW5kZXhPZigiQCIpOmUubGFzdEluZGV4T2YoIkAiLGEpOy0xIT09ZyYmKGQ9ZS5zbGljZSgwLGcpLGU9ZS5zbGljZShnKzEpLGMuYXV0aD1kZWNvZGVVUklDb21wb25lbnQoZCkpO2E9LTE7Zm9yKGQ9MDtkPEplLmxlbmd0aDtkKyspZz1lLmluZGV4T2YoSmVbZF0pLC0xIT09ZyYmKC0xPT09YXx8ZzxhKSYmKGE9Zyk7LTE9PT1hJiYoYT1lLmxlbmd0aCk7Yy5ob3N0PWUuc2xpY2UoMCxhKTtlPWUuc2xpY2UoYSk7S2UoYyk7Yy5ob3N0bmFtZT1jLmhvc3RuYW1lfHwiIjtnPSJbIj09PWMuaG9zdG5hbWVbMF0mJiJdIj09PWMuaG9zdG5hbWVbYy5ob3N0bmFtZS5sZW5ndGgtMV07aWYoIWcpe3ZhciBoPWMuaG9zdG5hbWUuc3BsaXQoL1wuLyk7ZD0wO2ZvcihhPWgubGVuZ3RoO2Q8YTtkKyspe3ZhciBrPWhbZF07aWYoayYmIWsubWF0Y2goTGUpKXtmb3IodmFyIHQ9IiIscT0wLEE9ay5sZW5ndGg7cTxBO3ErKyl0PTEyNzxrLmNoYXJDb2RlQXQocSk/CnQrIngiOnQra1txXTtpZighdC5tYXRjaChMZSkpe2E9aC5zbGljZSgwLGQpO2Q9aC5zbGljZShkKzEpO2lmKGs9ay5tYXRjaChCZykpYS5wdXNoKGtbMV0pLGQudW5zaGlmdChrWzJdKTtkLmxlbmd0aCYmKGU9Ii8iK2Quam9pbigiLiIpK2UpO2MuaG9zdG5hbWU9YS5qb2luKCIuIik7YnJlYWt9fX19Yy5ob3N0bmFtZT1jLmhvc3RuYW1lLmxlbmd0aD5DZz8iIjpjLmhvc3RuYW1lLnRvTG93ZXJDYXNlKCk7Z3x8KGMuaG9zdG5hbWU9dmcoYy5ob3N0bmFtZSkpO2Q9Yy5wb3J0PyI6IitjLnBvcnQ6IiI7Yy5ob3N0PShjLmhvc3RuYW1lfHwiIikrZDtjLmhyZWYrPWMuaG9zdDtnJiYoYy5ob3N0bmFtZT1jLmhvc3RuYW1lLnN1YnN0cigxLGMuaG9zdG5hbWUubGVuZ3RoLTIpLCIvIiE9PWVbMF0mJihlPSIvIitlKSl9aWYoIURnW2ZdKWZvcihkPTAsYT1PYy5sZW5ndGg7ZDxhO2QrKylnPU9jW2RdLC0xIT09ZS5pbmRleE9mKGcpJiYoaz1lbmNvZGVVUklDb21wb25lbnQoZyksaz09PWcmJgooaz1lc2NhcGUoZykpLGU9ZS5zcGxpdChnKS5qb2luKGspKTtkPWUuaW5kZXhPZigiIyIpOy0xIT09ZCYmKGMuaGFzaD1lLnN1YnN0cihkKSxlPWUuc2xpY2UoMCxkKSk7ZD1lLmluZGV4T2YoIj8iKTstMSE9PWQ/KGMuc2VhcmNoPWUuc3Vic3RyKGQpLGMucXVlcnk9ZS5zdWJzdHIoZCsxKSxiJiYoYy5xdWVyeT1HZShjLnF1ZXJ5KSksZT1lLnNsaWNlKDAsZCkpOmImJihjLnNlYXJjaD0iIixjLnF1ZXJ5PXt9KTtlJiYoYy5wYXRobmFtZT1lKTskYVtmXSYmYy5ob3N0bmFtZSYmIWMucGF0aG5hbWUmJihjLnBhdGhuYW1lPSIvIik7aWYoYy5wYXRobmFtZXx8Yy5zZWFyY2gpZD1jLnBhdGhuYW1lfHwiIixjLnBhdGg9ZCsoYy5zZWFyY2h8fCIiKTtjLmhyZWY9UGMoYyk7cmV0dXJuIGN9ZnVuY3Rpb24gUGMoYyl7dmFyIGE9Yy5hdXRofHwiIjthJiYoYT1lbmNvZGVVUklDb21wb25lbnQoYSksYT1hLnJlcGxhY2UoLyUzQS9pLCI6IiksYSs9IkAiKTt2YXIgYj1jLnByb3RvY29sfHwiIiwKZD1jLnBhdGhuYW1lfHwiIixlPWMuaGFzaHx8IiIsZj0hMSxnPSIiO2MuaG9zdD9mPWErYy5ob3N0OmMuaG9zdG5hbWUmJihmPWErKC0xPT09Yy5ob3N0bmFtZS5pbmRleE9mKCI6Iik/Yy5ob3N0bmFtZToiWyIrdGhpcy5ob3N0bmFtZSsiXSIpLGMucG9ydCYmKGYrPSI6IitjLnBvcnQpKTtjLnF1ZXJ5JiZ3YShjLnF1ZXJ5KSYmT2JqZWN0LmtleXMoYy5xdWVyeSkubGVuZ3RoJiYoZz14ZyhjLnF1ZXJ5KSk7YT1jLnNlYXJjaHx8ZyYmIj8iK2d8fCIiO2ImJiI6IiE9PWIuc3Vic3RyKC0xKSYmKGIrPSI6Iik7Yy5zbGFzaGVzfHwoIWJ8fCRhW2JdKSYmITEhPT1mPyhmPSIvLyIrKGZ8fCIiKSxkJiYiLyIhPT1kLmNoYXJBdCgwKSYmKGQ9Ii8iK2QpKTpmfHwoZj0iIik7ZSYmIiMiIT09ZS5jaGFyQXQoMCkmJihlPSIjIitlKTthJiYiPyIhPT1hLmNoYXJBdCgwKSYmKGE9Ij8iK2EpO2Q9ZC5yZXBsYWNlKC9bPyNdL2csZnVuY3Rpb24oYSl7cmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChhKX0pOwphPWEucmVwbGFjZSgiIyIsIiUyMyIpO3JldHVybiBiK2YrZCthK2V9ZnVuY3Rpb24gS2UoYyl7dmFyIGE9Yy5ob3N0LGI9RWcuZXhlYyhhKTtiJiYoYj1iWzBdLCI6IiE9PWImJihjLnBvcnQ9Yi5zdWJzdHIoMSkpLGE9YS5zdWJzdHIoMCxhLmxlbmd0aC1iLmxlbmd0aCkpO2EmJihjLmhvc3RuYW1lPWEpfWZ1bmN0aW9uIFFjKGMsYSl7UWM9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGEsYyl7YS5fX3Byb3RvX189Y318fGZ1bmN0aW9uKGEsYyl7Zm9yKHZhciBiIGluIGMpYy5oYXNPd25Qcm9wZXJ0eShiKSYmKGFbYl09Y1tiXSl9O3JldHVybiBRYyhjLGEpfWZ1bmN0aW9uIFJjKGMsYSl7ZnVuY3Rpb24gYigpe3RoaXMuY29uc3RydWN0b3I9Y31RYyhjLGEpO2MucHJvdG90eXBlPW51bGw9PT1hP09iamVjdC5jcmVhdGUoYSk6KGIucHJvdG90eXBlPWEucHJvdG90eXBlLG5ldyBiKX1mdW5jdGlvbiBTYihjKXt2YXIgYT0KImZ1bmN0aW9uIj09PXR5cGVvZiBTeW1ib2wmJmNbU3ltYm9sLml0ZXJhdG9yXSxiPTA7cmV0dXJuIGE/YS5jYWxsKGMpOntuZXh0OmZ1bmN0aW9uKCl7YyYmYj49Yy5sZW5ndGgmJihjPXZvaWQgMCk7cmV0dXJue3ZhbHVlOmMmJmNbYisrXSxkb25lOiFjfX19fWZ1bmN0aW9uIFRiKGMsYSl7dmFyIGI9ImZ1bmN0aW9uIj09PXR5cGVvZiBTeW1ib2wmJmNbU3ltYm9sLml0ZXJhdG9yXTtpZighYilyZXR1cm4gYztjPWIuY2FsbChjKTt2YXIgZCxlPVtdO3RyeXtmb3IoOyh2b2lkIDA9PT1hfHwwPGEtLSkmJiEoZD1jLm5leHQoKSkuZG9uZTspZS5wdXNoKGQudmFsdWUpfWNhdGNoKGcpe3ZhciBmPXtlcnJvcjpnfX1maW5hbGx5e3RyeXtkJiYhZC5kb25lJiYoYj1jWyJyZXR1cm4iXSkmJmIuY2FsbChjKX1maW5hbGx5e2lmKGYpdGhyb3cgZi5lcnJvcjt9fXJldHVybiBlfWZ1bmN0aW9uIFViKCl7Zm9yKHZhciBjPVtdLGE9MDthPGFyZ3VtZW50cy5sZW5ndGg7YSsrKWM9Yy5jb25jYXQoVGIoYXJndW1lbnRzW2FdKSk7CnJldHVybiBjfWZ1bmN0aW9uIE1lKCl7U2M9ITA7Zm9yKHZhciBjPTA7NjQ+YzsrK2MpZWFbY109IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8iW2NdLE1bIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8iLmNoYXJDb2RlQXQoYyldPWM7TVs0NV09NjI7TVs5NV09NjN9ZnVuY3Rpb24gRmcoYyxhLGIpe2Zvcih2YXIgZD1bXSxlPWE7ZTxiO2UrPTMpYT0oY1tlXTw8MTYpKyhjW2UrMV08PDgpK2NbZSsyXSxkLnB1c2goZWFbYT4+MTgmNjNdK2VhW2E+PjEyJjYzXStlYVthPj42JjYzXStlYVthJjYzXSk7cmV0dXJuIGQuam9pbigiIil9ZnVuY3Rpb24gTmUoYyl7U2N8fE1lKCk7Zm9yKHZhciBhPWMubGVuZ3RoLGI9YSUzLGQ9IiIsZT1bXSxmPTAsZz1hLWI7ZjxnO2YrPTE2MzgzKWUucHVzaChGZyhjLGYsZisxNjM4Mz5nP2c6ZisxNjM4MykpOzE9PT0KYj8oYz1jW2EtMV0sZCs9ZWFbYz4+Ml0sZCs9ZWFbYzw8NCY2M10sZCs9Ij09Iik6Mj09PWImJihjPShjW2EtMl08PDgpK2NbYS0xXSxkKz1lYVtjPj4xMF0sZCs9ZWFbYz4+NCY2M10sZCs9ZWFbYzw8MiY2M10sZCs9Ij0iKTtlLnB1c2goZCk7cmV0dXJuIGUuam9pbigiIil9ZnVuY3Rpb24gVmIoYyxhLGIsZCxlKXt2YXIgZj04KmUtZC0xLGc9KDE8PGYpLTEsaD1nPj4xLGs9LTc7ZT1iP2UtMTowO3ZhciB0PWI/LTE6MSxxPWNbYStlXTtlKz10O2I9cSYoMTw8LWspLTE7cT4+PS1rO2ZvcihrKz1mOzA8aztiPTI1NipiK2NbYStlXSxlKz10LGstPTgpO2Y9YiYoMTw8LWspLTE7Yj4+PS1rO2ZvcihrKz1kOzA8aztmPTI1NipmK2NbYStlXSxlKz10LGstPTgpO2lmKDA9PT1iKWI9MS1oO2Vsc2V7aWYoYj09PWcpcmV0dXJuIGY/TmFOOkluZmluaXR5KihxPy0xOjEpO2YrPU1hdGgucG93KDIsZCk7Yi09aH1yZXR1cm4ocT8tMToxKSpmKk1hdGgucG93KDIsYi1kKX1mdW5jdGlvbiBXYihjLAphLGIsZCxlLGYpe3ZhciBnLGg9OCpmLWUtMSxrPSgxPDxoKS0xLHQ9az4+MSxxPTIzPT09ZT9NYXRoLnBvdygyLC0yNCktTWF0aC5wb3coMiwtNzcpOjA7Zj1kPzA6Zi0xO3ZhciBBPWQ/MTotMSxyPTA+YXx8MD09PWEmJjA+MS9hPzE6MDthPU1hdGguYWJzKGEpO2Zvcihpc05hTihhKXx8SW5maW5pdHk9PT1hPyhhPWlzTmFOKGEpPzE6MCxkPWspOihkPU1hdGguZmxvb3IoTWF0aC5sb2coYSkvTWF0aC5MTjIpLDE+YSooZz1NYXRoLnBvdygyLC1kKSkmJihkLS0sZyo9MiksYT0xPD1kK3Q/YStxL2c6YStxKk1hdGgucG93KDIsMS10KSwyPD1hKmcmJihkKyssZy89MiksZCt0Pj1rPyhhPTAsZD1rKToxPD1kK3Q/KGE9KGEqZy0xKSpNYXRoLnBvdygyLGUpLGQrPXQpOihhPWEqTWF0aC5wb3coMix0LTEpKk1hdGgucG93KDIsZSksZD0wKSk7ODw9ZTtjW2IrZl09YSYyNTUsZis9QSxhLz0yNTYsZS09OCk7ZD1kPDxlfGE7Zm9yKGgrPWU7MDxoO2NbYitmXT1kJjI1NSxmKz1BLGQvPTI1NiwKaC09OCk7Y1tiK2YtQV18PTEyOCpyfWZ1bmN0aW9uIG1hKGMsYSl7aWYoKG0uVFlQRURfQVJSQVlfU1VQUE9SVD8yMTQ3NDgzNjQ3OjEwNzM3NDE4MjMpPGEpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgdHlwZWQgYXJyYXkgbGVuZ3RoIik7bS5UWVBFRF9BUlJBWV9TVVBQT1JUPyhjPW5ldyBVaW50OEFycmF5KGEpLGMuX19wcm90b19fPW0ucHJvdG90eXBlKToobnVsbD09PWMmJihjPW5ldyBtKGEpKSxjLmxlbmd0aD1hKTtyZXR1cm4gY31mdW5jdGlvbiBtKGMsYSxiKXtpZighKG0uVFlQRURfQVJSQVlfU1VQUE9SVHx8dGhpcyBpbnN0YW5jZW9mIG0pKXJldHVybiBuZXcgbShjLGEsYik7aWYoIm51bWJlciI9PT10eXBlb2YgYyl7aWYoInN0cmluZyI9PT10eXBlb2YgYSl0aHJvdyBFcnJvcigiSWYgZW5jb2RpbmcgaXMgc3BlY2lmaWVkIHRoZW4gdGhlIGZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBzdHJpbmciKTtyZXR1cm4gVGModGhpcyxjKX1yZXR1cm4gT2UodGhpcyxjLAphLGIpfWZ1bmN0aW9uIE9lKGMsYSxiLGQpe2lmKCJudW1iZXIiPT09dHlwZW9mIGEpdGhyb3cgbmV3IFR5cGVFcnJvcignInZhbHVlIiBhcmd1bWVudCBtdXN0IG5vdCBiZSBhIG51bWJlcicpO2lmKCJ1bmRlZmluZWQiIT09dHlwZW9mIEFycmF5QnVmZmVyJiZhIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpe2EuYnl0ZUxlbmd0aDtpZigwPmJ8fGEuYnl0ZUxlbmd0aDxiKXRocm93IG5ldyBSYW5nZUVycm9yKCInb2Zmc2V0JyBpcyBvdXQgb2YgYm91bmRzIik7aWYoYS5ieXRlTGVuZ3RoPGIrKGR8fDApKXRocm93IG5ldyBSYW5nZUVycm9yKCInbGVuZ3RoJyBpcyBvdXQgb2YgYm91bmRzIik7YT12b2lkIDA9PT1iJiZ2b2lkIDA9PT1kP25ldyBVaW50OEFycmF5KGEpOnZvaWQgMD09PWQ/bmV3IFVpbnQ4QXJyYXkoYSxiKTpuZXcgVWludDhBcnJheShhLGIsZCk7bS5UWVBFRF9BUlJBWV9TVVBQT1JUPyhjPWEsYy5fX3Byb3RvX189bS5wcm90b3R5cGUpOmM9VWMoYyxhKTtyZXR1cm4gY31pZigic3RyaW5nIj09PQp0eXBlb2YgYSl7ZD1jO2M9YjtpZigic3RyaW5nIiE9PXR5cGVvZiBjfHwiIj09PWMpYz0idXRmOCI7aWYoIW0uaXNFbmNvZGluZyhjKSl0aHJvdyBuZXcgVHlwZUVycm9yKCciZW5jb2RpbmciIG11c3QgYmUgYSB2YWxpZCBzdHJpbmcgZW5jb2RpbmcnKTtiPVBlKGEsYyl8MDtkPW1hKGQsYik7YT1kLndyaXRlKGEsYyk7YSE9PWImJihkPWQuc2xpY2UoMCxhKSk7cmV0dXJuIGR9cmV0dXJuIEdnKGMsYSl9ZnVuY3Rpb24gUWUoYyl7aWYoIm51bWJlciIhPT10eXBlb2YgYyl0aHJvdyBuZXcgVHlwZUVycm9yKCcic2l6ZSIgYXJndW1lbnQgbXVzdCBiZSBhIG51bWJlcicpO2lmKDA+Yyl0aHJvdyBuZXcgUmFuZ2VFcnJvcignInNpemUiIGFyZ3VtZW50IG11c3Qgbm90IGJlIG5lZ2F0aXZlJyk7fWZ1bmN0aW9uIFRjKGMsYSl7UWUoYSk7Yz1tYShjLDA+YT8wOlZjKGEpfDApO2lmKCFtLlRZUEVEX0FSUkFZX1NVUFBPUlQpZm9yKHZhciBiPTA7YjxhOysrYiljW2JdPTA7cmV0dXJuIGN9ZnVuY3Rpb24gVWMoYywKYSl7dmFyIGI9MD5hLmxlbmd0aD8wOlZjKGEubGVuZ3RoKXwwO2M9bWEoYyxiKTtmb3IodmFyIGQ9MDtkPGI7ZCs9MSljW2RdPWFbZF0mMjU1O3JldHVybiBjfWZ1bmN0aW9uIEdnKGMsYSl7aWYoZmEoYSkpe3ZhciBiPVZjKGEubGVuZ3RoKXwwO2M9bWEoYyxiKTtpZigwPT09Yy5sZW5ndGgpcmV0dXJuIGM7YS5jb3B5KGMsMCwwLGIpO3JldHVybiBjfWlmKGEpe2lmKCJ1bmRlZmluZWQiIT09dHlwZW9mIEFycmF5QnVmZmVyJiZhLmJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyfHwibGVuZ3RoImluIGEpcmV0dXJuKGI9Im51bWJlciIhPT10eXBlb2YgYS5sZW5ndGgpfHwoYj1hLmxlbmd0aCxiPWIhPT1iKSxiP21hKGMsMCk6VWMoYyxhKTtpZigiQnVmZmVyIj09PWEudHlwZSYmUmUoYS5kYXRhKSlyZXR1cm4gVWMoYyxhLmRhdGEpfXRocm93IG5ldyBUeXBlRXJyb3IoIkZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBzdHJpbmcsIEJ1ZmZlciwgQXJyYXlCdWZmZXIsIEFycmF5LCBvciBhcnJheS1saWtlIG9iamVjdC4iKTsKfWZ1bmN0aW9uIFZjKGMpe2lmKGM+PShtLlRZUEVEX0FSUkFZX1NVUFBPUlQ/MjE0NzQ4MzY0NzoxMDczNzQxODIzKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQXR0ZW1wdCB0byBhbGxvY2F0ZSBCdWZmZXIgbGFyZ2VyIHRoYW4gbWF4aW11bSBzaXplOiAweCIrKG0uVFlQRURfQVJSQVlfU1VQUE9SVD8yMTQ3NDgzNjQ3OjEwNzM3NDE4MjMpLnRvU3RyaW5nKDE2KSsiIGJ5dGVzIik7cmV0dXJuIGN8MH1mdW5jdGlvbiBmYShjKXtyZXR1cm4hKG51bGw9PWN8fCFjLl9pc0J1ZmZlcil9ZnVuY3Rpb24gUGUoYyxhKXtpZihmYShjKSlyZXR1cm4gYy5sZW5ndGg7aWYoInVuZGVmaW5lZCIhPT10eXBlb2YgQXJyYXlCdWZmZXImJiJmdW5jdGlvbiI9PT10eXBlb2YgQXJyYXlCdWZmZXIuaXNWaWV3JiYoQXJyYXlCdWZmZXIuaXNWaWV3KGMpfHxjIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpKXJldHVybiBjLmJ5dGVMZW5ndGg7InN0cmluZyIhPT10eXBlb2YgYyYmKGM9IiIrYyk7dmFyIGI9Yy5sZW5ndGg7CmlmKDA9PT1iKXJldHVybiAwO2Zvcih2YXIgZD0hMTs7KXN3aXRjaChhKXtjYXNlICJhc2NpaSI6Y2FzZSAibGF0aW4xIjpjYXNlICJiaW5hcnkiOnJldHVybiBiO2Nhc2UgInV0ZjgiOmNhc2UgInV0Zi04IjpjYXNlIHZvaWQgMDpyZXR1cm4gWGIoYykubGVuZ3RoO2Nhc2UgInVjczIiOmNhc2UgInVjcy0yIjpjYXNlICJ1dGYxNmxlIjpjYXNlICJ1dGYtMTZsZSI6cmV0dXJuIDIqYjtjYXNlICJoZXgiOnJldHVybiBiPj4+MTtjYXNlICJiYXNlNjQiOnJldHVybiBTZShjKS5sZW5ndGg7ZGVmYXVsdDppZihkKXJldHVybiBYYihjKS5sZW5ndGg7YT0oIiIrYSkudG9Mb3dlckNhc2UoKTtkPSEwfX1mdW5jdGlvbiBIZyhjLGEsYil7dmFyIGQ9ITE7aWYodm9pZCAwPT09YXx8MD5hKWE9MDtpZihhPnRoaXMubGVuZ3RoKXJldHVybiIiO2lmKHZvaWQgMD09PWJ8fGI+dGhpcy5sZW5ndGgpYj10aGlzLmxlbmd0aDtpZigwPj1iKXJldHVybiIiO2I+Pj49MDthPj4+PTA7aWYoYjw9YSlyZXR1cm4iIjsKZm9yKGN8fChjPSJ1dGY4Iik7Oylzd2l0Y2goYyl7Y2FzZSAiaGV4IjpjPWE7YT1iO2I9dGhpcy5sZW5ndGg7aWYoIWN8fDA+YyljPTA7aWYoIWF8fDA+YXx8YT5iKWE9YjtkPSIiO2ZvcihiPWM7YjxhOysrYiljPWQsZD10aGlzW2JdLGQ9MTY+ZD8iMCIrZC50b1N0cmluZygxNik6ZC50b1N0cmluZygxNiksZD1jK2Q7cmV0dXJuIGQ7Y2FzZSAidXRmOCI6Y2FzZSAidXRmLTgiOnJldHVybiBUZSh0aGlzLGEsYik7Y2FzZSAiYXNjaWkiOmM9IiI7Zm9yKGI9TWF0aC5taW4odGhpcy5sZW5ndGgsYik7YTxiOysrYSljKz1TdHJpbmcuZnJvbUNoYXJDb2RlKHRoaXNbYV0mMTI3KTtyZXR1cm4gYztjYXNlICJsYXRpbjEiOmNhc2UgImJpbmFyeSI6Yz0iIjtmb3IoYj1NYXRoLm1pbih0aGlzLmxlbmd0aCxiKTthPGI7KythKWMrPVN0cmluZy5mcm9tQ2hhckNvZGUodGhpc1thXSk7cmV0dXJuIGM7Y2FzZSAiYmFzZTY0IjpyZXR1cm4gYT0wPT09YSYmYj09PXRoaXMubGVuZ3RoP05lKHRoaXMpOgpOZSh0aGlzLnNsaWNlKGEsYikpLGE7Y2FzZSAidWNzMiI6Y2FzZSAidWNzLTIiOmNhc2UgInV0ZjE2bGUiOmNhc2UgInV0Zi0xNmxlIjphPXRoaXMuc2xpY2UoYSxiKTtiPSIiO2ZvcihjPTA7YzxhLmxlbmd0aDtjKz0yKWIrPVN0cmluZy5mcm9tQ2hhckNvZGUoYVtjXSsyNTYqYVtjKzFdKTtyZXR1cm4gYjtkZWZhdWx0OmlmKGQpdGhyb3cgbmV3IFR5cGVFcnJvcigiVW5rbm93biBlbmNvZGluZzogIitjKTtjPShjKyIiKS50b0xvd2VyQ2FzZSgpO2Q9ITB9fWZ1bmN0aW9uIE1hKGMsYSxiKXt2YXIgZD1jW2FdO2NbYV09Y1tiXTtjW2JdPWR9ZnVuY3Rpb24gVWUoYyxhLGIsZCxlKXtpZigwPT09Yy5sZW5ndGgpcmV0dXJuLTE7InN0cmluZyI9PT10eXBlb2YgYj8oZD1iLGI9MCk6MjE0NzQ4MzY0NzxiP2I9MjE0NzQ4MzY0NzotMjE0NzQ4MzY0OD5iJiYoYj0tMjE0NzQ4MzY0OCk7Yj0rYjtpc05hTihiKSYmKGI9ZT8wOmMubGVuZ3RoLTEpOzA+YiYmKGI9Yy5sZW5ndGgrYik7aWYoYj49CmMubGVuZ3RoKXtpZihlKXJldHVybi0xO2I9Yy5sZW5ndGgtMX1lbHNlIGlmKDA+YilpZihlKWI9MDtlbHNlIHJldHVybi0xOyJzdHJpbmciPT09dHlwZW9mIGEmJihhPW0uZnJvbShhLGQpKTtpZihmYShhKSlyZXR1cm4gMD09PWEubGVuZ3RoPy0xOlZlKGMsYSxiLGQsZSk7aWYoIm51bWJlciI9PT10eXBlb2YgYSlyZXR1cm4gYSY9MjU1LG0uVFlQRURfQVJSQVlfU1VQUE9SVCYmImZ1bmN0aW9uIj09PXR5cGVvZiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mP2U/VWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGMsYSxiKTpVaW50OEFycmF5LnByb3RvdHlwZS5sYXN0SW5kZXhPZi5jYWxsKGMsYSxiKTpWZShjLFthXSxiLGQsZSk7dGhyb3cgbmV3IFR5cGVFcnJvcigidmFsIG11c3QgYmUgc3RyaW5nLCBudW1iZXIgb3IgQnVmZmVyIik7fWZ1bmN0aW9uIFZlKGMsYSxiLGQsZSl7ZnVuY3Rpb24gZihhLGMpe3JldHVybiAxPT09Zz9hW2NdOmEucmVhZFVJbnQxNkJFKGMqCmcpfXZhciBnPTEsaD1jLmxlbmd0aCxrPWEubGVuZ3RoO2lmKHZvaWQgMCE9PWQmJihkPVN0cmluZyhkKS50b0xvd2VyQ2FzZSgpLCJ1Y3MyIj09PWR8fCJ1Y3MtMiI9PT1kfHwidXRmMTZsZSI9PT1kfHwidXRmLTE2bGUiPT09ZCkpe2lmKDI+Yy5sZW5ndGh8fDI+YS5sZW5ndGgpcmV0dXJuLTE7Zz0yO2gvPTI7ay89MjtiLz0yfWlmKGUpZm9yKGQ9LTE7YjxoO2IrKylpZihmKGMsYik9PT1mKGEsLTE9PT1kPzA6Yi1kKSl7aWYoLTE9PT1kJiYoZD1iKSxiLWQrMT09PWspcmV0dXJuIGQqZ31lbHNlLTEhPT1kJiYoYi09Yi1kKSxkPS0xO2Vsc2UgZm9yKGIraz5oJiYoYj1oLWspOzA8PWI7Yi0tKXtoPSEwO2ZvcihkPTA7ZDxrO2QrKylpZihmKGMsYitkKSE9PWYoYSxkKSl7aD0hMTticmVha31pZihoKXJldHVybiBifXJldHVybi0xfWZ1bmN0aW9uIFRlKGMsYSxiKXtiPU1hdGgubWluKGMubGVuZ3RoLGIpO2Zvcih2YXIgZD1bXTthPGI7KXt2YXIgZT1jW2FdLGY9bnVsbCxnPTIzOTxlPwo0OjIyMzxlPzM6MTkxPGU/MjoxO2lmKGErZzw9Yilzd2l0Y2goZyl7Y2FzZSAxOjEyOD5lJiYoZj1lKTticmVhaztjYXNlIDI6dmFyIGg9Y1thKzFdOzEyOD09PShoJjE5MikmJihlPShlJjMxKTw8NnxoJjYzLDEyNzxlJiYoZj1lKSk7YnJlYWs7Y2FzZSAzOmg9Y1thKzFdO3ZhciBrPWNbYSsyXTsxMjg9PT0oaCYxOTIpJiYxMjg9PT0oayYxOTIpJiYoZT0oZSYxNSk8PDEyfChoJjYzKTw8NnxrJjYzLDIwNDc8ZSYmKDU1Mjk2PmV8fDU3MzQzPGUpJiYoZj1lKSk7YnJlYWs7Y2FzZSA0Omg9Y1thKzFdO2s9Y1thKzJdO3ZhciB0PWNbYSszXTsxMjg9PT0oaCYxOTIpJiYxMjg9PT0oayYxOTIpJiYxMjg9PT0odCYxOTIpJiYoZT0oZSYxNSk8PDE4fChoJjYzKTw8MTJ8KGsmNjMpPDw2fHQmNjMsNjU1MzU8ZSYmMTExNDExMj5lJiYoZj1lKSl9bnVsbD09PWY/KGY9NjU1MzMsZz0xKTo2NTUzNTxmJiYoZi09NjU1MzYsZC5wdXNoKGY+Pj4xMCYxMDIzfDU1Mjk2KSxmPTU2MzIwfGYmMTAyMyk7CmQucHVzaChmKTthKz1nfWM9ZC5sZW5ndGg7aWYoYzw9V2UpZD1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZyxkKTtlbHNle2I9IiI7Zm9yKGE9MDthPGM7KWIrPVN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLGQuc2xpY2UoYSxhKz1XZSkpO2Q9Yn1yZXR1cm4gZH1mdW5jdGlvbiBJKGMsYSxiKXtpZigwIT09YyUxfHwwPmMpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIm9mZnNldCBpcyBub3QgdWludCIpO2lmKGMrYT5iKXRocm93IG5ldyBSYW5nZUVycm9yKCJUcnlpbmcgdG8gYWNjZXNzIGJleW9uZCBidWZmZXIgbGVuZ3RoIik7fWZ1bmN0aW9uIFYoYyxhLGIsZCxlLGYpe2lmKCFmYShjKSl0aHJvdyBuZXcgVHlwZUVycm9yKCciYnVmZmVyIiBhcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyIGluc3RhbmNlJyk7aWYoYT5lfHxhPGYpdGhyb3cgbmV3IFJhbmdlRXJyb3IoJyJ2YWx1ZSIgYXJndW1lbnQgaXMgb3V0IG9mIGJvdW5kcycpO2lmKGIrZD5jLmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW5kZXggb3V0IG9mIHJhbmdlIik7Cn1mdW5jdGlvbiBZYihjLGEsYixkKXswPmEmJihhPTY1NTM1K2ErMSk7Zm9yKHZhciBlPTAsZj1NYXRoLm1pbihjLmxlbmd0aC1iLDIpO2U8ZjsrK2UpY1tiK2VdPShhJjI1NTw8OCooZD9lOjEtZSkpPj4+OCooZD9lOjEtZSl9ZnVuY3Rpb24gWmIoYyxhLGIsZCl7MD5hJiYoYT00Mjk0OTY3Mjk1K2ErMSk7Zm9yKHZhciBlPTAsZj1NYXRoLm1pbihjLmxlbmd0aC1iLDQpO2U8ZjsrK2UpY1tiK2VdPWE+Pj44KihkP2U6My1lKSYyNTV9ZnVuY3Rpb24gJGIoYyxhLGIsZCl7aWYoYitkPmMubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbmRleCBvdXQgb2YgcmFuZ2UiKTtpZigwPmIpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkluZGV4IG91dCBvZiByYW5nZSIpO31mdW5jdGlvbiBYYihjLGEpe2E9YXx8SW5maW5pdHk7Zm9yKHZhciBiLGQ9Yy5sZW5ndGgsZT1udWxsLGY9W10sZz0wO2c8ZDsrK2cpe2I9Yy5jaGFyQ29kZUF0KGcpO2lmKDU1Mjk1PGImJjU3MzQ0PmIpe2lmKCFlKXtpZig1NjMxOTwKYil7LTE8KGEtPTMpJiZmLnB1c2goMjM5LDE5MSwxODkpO2NvbnRpbnVlfWVsc2UgaWYoZysxPT09ZCl7LTE8KGEtPTMpJiZmLnB1c2goMjM5LDE5MSwxODkpO2NvbnRpbnVlfWU9Yjtjb250aW51ZX1pZig1NjMyMD5iKXstMTwoYS09MykmJmYucHVzaCgyMzksMTkxLDE4OSk7ZT1iO2NvbnRpbnVlfWI9KGUtNTUyOTY8PDEwfGItNTYzMjApKzY1NTM2fWVsc2UgZSYmLTE8KGEtPTMpJiZmLnB1c2goMjM5LDE5MSwxODkpO2U9bnVsbDtpZigxMjg+Yil7aWYoMD4tLWEpYnJlYWs7Zi5wdXNoKGIpfWVsc2UgaWYoMjA0OD5iKXtpZigwPihhLT0yKSlicmVhaztmLnB1c2goYj4+NnwxOTIsYiY2M3wxMjgpfWVsc2UgaWYoNjU1MzY+Yil7aWYoMD4oYS09MykpYnJlYWs7Zi5wdXNoKGI+PjEyfDIyNCxiPj42JjYzfDEyOCxiJjYzfDEyOCl9ZWxzZSBpZigxMTE0MTEyPmIpe2lmKDA+KGEtPTQpKWJyZWFrO2YucHVzaChiPj4xOHwyNDAsYj4+MTImNjN8MTI4LGI+PjYmNjN8MTI4LGImNjN8MTI4KX1lbHNlIHRocm93IEVycm9yKCJJbnZhbGlkIGNvZGUgcG9pbnQiKTsKfXJldHVybiBmfWZ1bmN0aW9uIFhlKGMpe2Zvcih2YXIgYT1bXSxiPTA7YjxjLmxlbmd0aDsrK2IpYS5wdXNoKGMuY2hhckNvZGVBdChiKSYyNTUpO3JldHVybiBhfWZ1bmN0aW9uIFNlKGMpe2M9KGMudHJpbT9jLnRyaW0oKTpjLnJlcGxhY2UoL15ccyt8XHMrJC9nLCIiKSkucmVwbGFjZShJZywiIik7aWYoMj5jLmxlbmd0aCljPSIiO2Vsc2UgZm9yKDswIT09Yy5sZW5ndGglNDspYys9Ij0iO1NjfHxNZSgpO3ZhciBhPWMubGVuZ3RoO2lmKDA8YSU0KXRocm93IEVycm9yKCJJbnZhbGlkIHN0cmluZy4gTGVuZ3RoIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA0Iik7dmFyIGI9Ij0iPT09Y1thLTJdPzI6Ij0iPT09Y1thLTFdPzE6MCxkPW5ldyBKZygzKmEvNC1iKSxlPTA8Yj9hLTQ6YSxmPTA7Zm9yKGE9MDthPGU7YSs9NCl7dmFyIGc9TVtjLmNoYXJDb2RlQXQoYSldPDwxOHxNW2MuY2hhckNvZGVBdChhKzEpXTw8MTJ8TVtjLmNoYXJDb2RlQXQoYSsyKV08PDZ8TVtjLmNoYXJDb2RlQXQoYSsKMyldO2RbZisrXT1nPj4xNiYyNTU7ZFtmKytdPWc+PjgmMjU1O2RbZisrXT1nJjI1NX0yPT09Yj8oZz1NW2MuY2hhckNvZGVBdChhKV08PDJ8TVtjLmNoYXJDb2RlQXQoYSsxKV0+PjQsZFtmKytdPWcmMjU1KToxPT09YiYmKGc9TVtjLmNoYXJDb2RlQXQoYSldPDwxMHxNW2MuY2hhckNvZGVBdChhKzEpXTw8NHxNW2MuY2hhckNvZGVBdChhKzIpXT4+MixkW2YrK109Zz4+OCYyNTUsZFtmKytdPWcmMjU1KTtyZXR1cm4gZH1mdW5jdGlvbiB1YihjLGEsYixkKXtmb3IodmFyIGU9MDtlPGQmJiEoZStiPj1hLmxlbmd0aHx8ZT49Yy5sZW5ndGgpOysrZSlhW2UrYl09Y1tlXTtyZXR1cm4gZX1mdW5jdGlvbiBZZShjKXtyZXR1cm4gbnVsbCE9YyYmKCEhYy5faXNCdWZmZXJ8fFplKGMpfHwiZnVuY3Rpb24iPT09dHlwZW9mIGMucmVhZEZsb2F0TEUmJiJmdW5jdGlvbiI9PT10eXBlb2YgYy5zbGljZSYmWmUoYy5zbGljZSgwLDApKSl9ZnVuY3Rpb24gWmUoYyl7cmV0dXJuISFjLmNvbnN0cnVjdG9yJiYKImZ1bmN0aW9uIj09PXR5cGVvZiBjLmNvbnN0cnVjdG9yLmlzQnVmZmVyJiZjLmNvbnN0cnVjdG9yLmlzQnVmZmVyKGMpfWZ1bmN0aW9uIFdjKGMsYSl7cmV0dXJuIGE9e2V4cG9ydHM6e319LGMoYSxhLmV4cG9ydHMpLGEuZXhwb3J0c31mdW5jdGlvbiAkZSgpe3Rocm93IEVycm9yKCJzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkIik7fWZ1bmN0aW9uIGFmKCl7dGhyb3cgRXJyb3IoImNsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCIpO31mdW5jdGlvbiBiZihjKXtpZihyYT09PXNldFRpbWVvdXQpcmV0dXJuIHNldFRpbWVvdXQoYywwKTtpZigocmE9PT0kZXx8IXJhKSYmc2V0VGltZW91dClyZXR1cm4gcmE9c2V0VGltZW91dCxzZXRUaW1lb3V0KGMsMCk7dHJ5e3JldHVybiByYShjLDApfWNhdGNoKGEpe3RyeXtyZXR1cm4gcmEuY2FsbChudWxsLGMsMCl9Y2F0Y2goYil7cmV0dXJuIHJhLmNhbGwodGhpcyxjLDApfX19ZnVuY3Rpb24gS2coYyl7aWYoeWE9PT1jbGVhclRpbWVvdXQpcmV0dXJuIGNsZWFyVGltZW91dChjKTsKaWYoKHlhPT09YWZ8fCF5YSkmJmNsZWFyVGltZW91dClyZXR1cm4geWE9Y2xlYXJUaW1lb3V0LGNsZWFyVGltZW91dChjKTt0cnl7cmV0dXJuIHlhKGMpfWNhdGNoKGEpe3RyeXtyZXR1cm4geWEuY2FsbChudWxsLGMpfWNhdGNoKGIpe3JldHVybiB5YS5jYWxsKHRoaXMsYyl9fX1mdW5jdGlvbiBMZygpe2FiJiZOYSYmKGFiPSExLE5hLmxlbmd0aD9zYT1OYS5jb25jYXQoc2EpOmFjPS0xLHNhLmxlbmd0aCYmY2YoKSl9ZnVuY3Rpb24gY2YoKXtpZighYWIpe3ZhciBjPWJmKExnKTthYj0hMDtmb3IodmFyIGE9c2EubGVuZ3RoO2E7KXtOYT1zYTtmb3Ioc2E9W107KythYzxhOylOYSYmTmFbYWNdLnJ1bigpO2FjPS0xO2E9c2EubGVuZ3RofU5hPW51bGw7YWI9ITE7S2coYyl9fWZ1bmN0aW9uIGRmKGMpe3ZhciBhPUFycmF5KGFyZ3VtZW50cy5sZW5ndGgtMSk7aWYoMTxhcmd1bWVudHMubGVuZ3RoKWZvcih2YXIgYj0xO2I8YXJndW1lbnRzLmxlbmd0aDtiKyspYVtiLTFdPWFyZ3VtZW50c1tiXTsKc2EucHVzaChuZXcgZWYoYyxhKSk7MSE9PXNhLmxlbmd0aHx8YWJ8fGJmKGNmKX1mdW5jdGlvbiBlZihjLGEpe3RoaXMuZnVuPWM7dGhpcy5hcnJheT1hfWZ1bmN0aW9uIE9hKCl7fWZ1bmN0aW9uIGhhKGMpe2lmKCJzdHJpbmciIT09dHlwZW9mIGMpdGhyb3cgbmV3IFR5cGVFcnJvcigiUGF0aCBtdXN0IGJlIGEgc3RyaW5nLiBSZWNlaXZlZCAiK0pTT04uc3RyaW5naWZ5KGMpKTt9ZnVuY3Rpb24gZmYoYyxhKXtmb3IodmFyIGI9IiIsZD0wLGU9LTEsZj0wLGcsaD0wO2g8PWMubGVuZ3RoOysraCl7aWYoaDxjLmxlbmd0aClnPWMuY2hhckNvZGVBdChoKTtlbHNlIGlmKDQ3PT09ZylicmVhaztlbHNlIGc9NDc7aWYoNDc9PT1nKXtpZihlIT09aC0xJiYxIT09ZilpZihlIT09aC0xJiYyPT09Zil7aWYoMj5iLmxlbmd0aHx8MiE9PWR8fDQ2IT09Yi5jaGFyQ29kZUF0KGIubGVuZ3RoLTEpfHw0NiE9PWIuY2hhckNvZGVBdChiLmxlbmd0aC0yKSlpZigyPGIubGVuZ3RoKXtpZihlPWIubGFzdEluZGV4T2YoIi8iKSwKZSE9PWIubGVuZ3RoLTEpey0xPT09ZT8oYj0iIixkPTApOihiPWIuc2xpY2UoMCxlKSxkPWIubGVuZ3RoLTEtYi5sYXN0SW5kZXhPZigiLyIpKTtlPWg7Zj0wO2NvbnRpbnVlfX1lbHNlIGlmKDI9PT1iLmxlbmd0aHx8MT09PWIubGVuZ3RoKXtiPSIiO2Q9MDtlPWg7Zj0wO2NvbnRpbnVlfWEmJihiPTA8Yi5sZW5ndGg/YisiLy4uIjoiLi4iLGQ9Mil9ZWxzZSBiPTA8Yi5sZW5ndGg/YisoIi8iK2Muc2xpY2UoZSsxLGgpKTpjLnNsaWNlKGUrMSxoKSxkPWgtZS0xO2U9aDtmPTB9ZWxzZSA0Nj09PWcmJi0xIT09Zj8rK2Y6Zj0tMX1yZXR1cm4gYn1mdW5jdGlvbiBQYShjKXt2YXIgYT1NYXRoLnRydW5jKGMpO2M9bihNYXRoLnJvdW5kKDFFNiooYy1hKSkpO3JldHVybiBuKGEpKm4oMUU2KStjfWZ1bmN0aW9uIGJiKGMpeyJudW1iZXIiPT09dHlwZW9mIGMmJihjPU1hdGgudHJ1bmMoYykpO2M9bihjKTtyZXR1cm4gTnVtYmVyKGMvbigxRTYpKX1mdW5jdGlvbiBCKGMpe3JldHVybiBmdW5jdGlvbigpe2Zvcih2YXIgYT0KW10sYj0wO2I8YXJndW1lbnRzLmxlbmd0aDtiKyspYVtiXT1hcmd1bWVudHNbYl07dHJ5e3JldHVybiBjLmFwcGx5KHZvaWQgMCxVYihhKSl9Y2F0Y2goZCl7aWYoZCYmZC5jb2RlJiYic3RyaW5nIj09PXR5cGVvZiBkLmNvZGUpcmV0dXJuIE1nW2QuY29kZV18fDI4O2lmKGQgaW5zdGFuY2VvZiBYYylyZXR1cm4gZC5lcnJubzt0aHJvdyBkO319fWZ1bmN0aW9uIGdmKGMsYSl7dmFyIGI9Yy5GRF9NQVAuZ2V0KGEpO2lmKCFiKXRocm93IG5ldyBYYyg4KTtpZih2b2lkIDA9PT1iLmZpbGV0eXBlKXt2YXIgZD1jLmJpbmRpbmdzLmZzLmZzdGF0U3luYyhiLnJlYWwpO2M9aGYoYyxhLGQpO2E9Yy5yaWdodHNCYXNlO2Q9Yy5yaWdodHNJbmhlcml0aW5nO2IuZmlsZXR5cGU9Yy5maWxldHlwZTtiLnJpZ2h0c3x8KGIucmlnaHRzPXtiYXNlOmEsaW5oZXJpdGluZzpkfSl9cmV0dXJuIGJ9ZnVuY3Rpb24gaGYoYyxhLGIpe3N3aXRjaCghMCl7Y2FzZSBiLmlzQmxvY2tEZXZpY2UoKTpyZXR1cm57ZmlsZXR5cGU6MSwKcmlnaHRzQmFzZTpjYixyaWdodHNJbmhlcml0aW5nOmNifTtjYXNlIGIuaXNDaGFyYWN0ZXJEZXZpY2UoKTpyZXR1cm4gdm9pZCAwIT09YSYmYy5iaW5kaW5ncy5pc1RUWShhKT97ZmlsZXR5cGU6MixyaWdodHNCYXNlOk5nLHJpZ2h0c0luaGVyaXRpbmc6T2d9OntmaWxldHlwZToyLHJpZ2h0c0Jhc2U6Y2IscmlnaHRzSW5oZXJpdGluZzpjYn07Y2FzZSBiLmlzRGlyZWN0b3J5KCk6cmV0dXJue2ZpbGV0eXBlOjMscmlnaHRzQmFzZTpZYyxyaWdodHNJbmhlcml0aW5nOmpmfTtjYXNlIGIuaXNGSUZPKCk6cmV0dXJue2ZpbGV0eXBlOjYscmlnaHRzQmFzZTprZixyaWdodHNJbmhlcml0aW5nOmNifTtjYXNlIGIuaXNGaWxlKCk6cmV0dXJue2ZpbGV0eXBlOjQscmlnaHRzQmFzZTpsZixyaWdodHNJbmhlcml0aW5nOlBnfTtjYXNlIGIuaXNTb2NrZXQoKTpyZXR1cm57ZmlsZXR5cGU6NixyaWdodHNCYXNlOmtmLHJpZ2h0c0luaGVyaXRpbmc6Y2J9O2Nhc2UgYi5pc1N5bWJvbGljTGluaygpOnJldHVybntmaWxldHlwZTo3LApyaWdodHNCYXNlOm4oMCkscmlnaHRzSW5oZXJpdGluZzpuKDApfTtkZWZhdWx0OnJldHVybntmaWxldHlwZTowLHJpZ2h0c0Jhc2U6bigwKSxyaWdodHNJbmhlcml0aW5nOm4oMCl9fX1sZXQgdmQ9U3ltYm9sKCJDb21saW5rLnByb3h5IiksRWY9U3ltYm9sKCJDb21saW5rLmVuZHBvaW50IiksRGY9U3ltYm9sKCJDb21saW5rLnJlbGVhc2VQcm94eSIpLG5jPW5ldyBXZWFrU2V0LHlkPW5ldyBNYXAoW1sicHJveHkiLHtjYW5IYW5kbGU6Yz0+YyYmY1t2ZF0sc2VyaWFsaXplKGMpe2NvbnN0IHtwb3J0MTphLHBvcnQyOmJ9PW5ldyBNZXNzYWdlQ2hhbm5lbDttYyhjLGEpO3JldHVybltiLFtiXV19LGRlc2VyaWFsaXplOmM9PntjLnN0YXJ0KCk7cmV0dXJuIHBjKGMsW10sdm9pZCAwKX19XSxbInRocm93Iix7Y2FuSGFuZGxlOmM9Pm5jLmhhcyhjKSxzZXJpYWxpemUoYyl7Y29uc3QgYT1jIGluc3RhbmNlb2YgRXJyb3I7bGV0IGI9YzthJiYoYj17aXNFcnJvcjphLG1lc3NhZ2U6Yy5tZXNzYWdlLApzdGFjazpjLnN0YWNrfSk7cmV0dXJuW2IsW11dfSxkZXNlcmlhbGl6ZShjKXtpZihjLmlzRXJyb3IpdGhyb3cgT2JqZWN0LmFzc2lnbihFcnJvcigpLGMpO3Rocm93IGM7fX1dXSkseGQ9bmV3IFdlYWtNYXA7dmFyIHFjPWZ1bmN0aW9uKGMsYSl7cWM9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGEsYyl7YS5fX3Byb3RvX189Y318fGZ1bmN0aW9uKGEsYyl7Zm9yKHZhciBiIGluIGMpYy5oYXNPd25Qcm9wZXJ0eShiKSYmKGFbYl09Y1tiXSl9O3JldHVybiBxYyhjLGEpfSxkYj1mdW5jdGlvbigpe2RiPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKGMpe2Zvcih2YXIgYSxiPTEsZD1hcmd1bWVudHMubGVuZ3RoO2I8ZDtiKyspe2E9YXJndW1lbnRzW2JdO2Zvcih2YXIgZSBpbiBhKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhLGUpJiYoY1tlXT1hW2VdKX1yZXR1cm4gY307cmV0dXJuIGRiLmFwcGx5KHRoaXMsCmFyZ3VtZW50cyl9LG5hPSJ1bmRlZmluZWQiIT09dHlwZW9mIGdsb2JhbD9nbG9iYWw6InVuZGVmaW5lZCIhPT10eXBlb2Ygc2VsZj9zZWxmOiJ1bmRlZmluZWQiIT09dHlwZW9mIHdpbmRvdz93aW5kb3c6e30sTj0idW5kZWZpbmVkIiE9PXR5cGVvZiBnbG9iYWxUaGlzP2dsb2JhbFRoaXM6InVuZGVmaW5lZCIhPT10eXBlb2Ygd2luZG93P3dpbmRvdzoidW5kZWZpbmVkIiE9PXR5cGVvZiBuYT9uYToidW5kZWZpbmVkIiE9PXR5cGVvZiBzZWxmP3NlbGY6e30sdT1LKGZ1bmN0aW9uKGMsYSl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGEsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO2EuY29uc3RhbnRzPXtPX1JET05MWTowLE9fV1JPTkxZOjEsT19SRFdSOjIsU19JRk1UOjYxNDQwLFNfSUZSRUc6MzI3NjgsU19JRkRJUjoxNjM4NCxTX0lGQ0hSOjgxOTIsU19JRkJMSzoyNDU3NixTX0lGSUZPOjQwOTYsU19JRkxOSzo0MDk2MCxTX0lGU09DSzo0OTE1MixPX0NSRUFUOjY0LE9fRVhDTDoxMjgsCk9fTk9DVFRZOjI1NixPX1RSVU5DOjUxMixPX0FQUEVORDoxMDI0LE9fRElSRUNUT1JZOjY1NTM2LE9fTk9BVElNRToyNjIxNDQsT19OT0ZPTExPVzoxMzEwNzIsT19TWU5DOjEwNTI2NzIsT19ESVJFQ1Q6MTYzODQsT19OT05CTE9DSzoyMDQ4LFNfSVJXWFU6NDQ4LFNfSVJVU1I6MjU2LFNfSVdVU1I6MTI4LFNfSVhVU1I6NjQsU19JUldYRzo1NixTX0lSR1JQOjMyLFNfSVdHUlA6MTYsU19JWEdSUDo4LFNfSVJXWE86NyxTX0lST1RIOjQsU19JV09USDoyLFNfSVhPVEg6MSxGX09LOjAsUl9PSzo0LFdfT0s6MixYX09LOjEsVVZfRlNfU1lNTElOS19ESVI6MSxVVl9GU19TWU1MSU5LX0pVTkNUSU9OOjIsVVZfRlNfQ09QWUZJTEVfRVhDTDoxLFVWX0ZTX0NPUFlGSUxFX0ZJQ0xPTkU6MixVVl9GU19DT1BZRklMRV9GSUNMT05FX0ZPUkNFOjQsQ09QWUZJTEVfRVhDTDoxLENPUFlGSUxFX0ZJQ0xPTkU6MixDT1BZRklMRV9GSUNMT05FX0ZPUkNFOjR9fSk7USh1KTt2YXIgUWc9SyhmdW5jdGlvbihjLAphKXthLmRlZmF1bHQ9ImZ1bmN0aW9uIj09PXR5cGVvZiBCaWdJbnQ/QmlnSW50OmZ1bmN0aW9uKCl7dGhyb3cgRXJyb3IoIkJpZ0ludCBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgZW52aXJvbm1lbnQuIik7fX0pLGViPUsoZnVuY3Rpb24oYyxhKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoYSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGI9dS5jb25zdGFudHMuU19JRk1ULGQ9dS5jb25zdGFudHMuU19JRkRJUixlPXUuY29uc3RhbnRzLlNfSUZSRUcsZj11LmNvbnN0YW50cy5TX0lGQkxLLGc9dS5jb25zdGFudHMuU19JRkNIUixoPXUuY29uc3RhbnRzLlNfSUZMTkssaz11LmNvbnN0YW50cy5TX0lGSUZPLHQ9dS5jb25zdGFudHMuU19JRlNPQ0s7Yz1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXt9YS5idWlsZD1mdW5jdGlvbihjLGIpe3ZvaWQgMD09PWImJihiPSExKTt2YXIgZD1uZXcgYSxlPWMuZ2lkLGY9Yy5hdGltZSxoPWMubXRpbWUsZz1jLmN0aW1lO2I9Yj9RZy5kZWZhdWx0OgpmdW5jdGlvbihhKXtyZXR1cm4gYX07ZC51aWQ9YihjLnVpZCk7ZC5naWQ9YihlKTtkLnJkZXY9YigwKTtkLmJsa3NpemU9Yig0MDk2KTtkLmlubz1iKGMuaW5vKTtkLnNpemU9YihjLmdldFNpemUoKSk7ZC5ibG9ja3M9YigxKTtkLmF0aW1lPWY7ZC5tdGltZT1oO2QuY3RpbWU9ZztkLmJpcnRodGltZT1nO2QuYXRpbWVNcz1iKGYuZ2V0VGltZSgpKTtkLm10aW1lTXM9YihoLmdldFRpbWUoKSk7ZT1iKGcuZ2V0VGltZSgpKTtkLmN0aW1lTXM9ZTtkLmJpcnRodGltZU1zPWU7ZC5kZXY9YigwKTtkLm1vZGU9YihjLm1vZGUpO2Qubmxpbms9YihjLm5saW5rKTtyZXR1cm4gZH07YS5wcm90b3R5cGUuX2NoZWNrTW9kZVByb3BlcnR5PWZ1bmN0aW9uKGEpe3JldHVybihOdW1iZXIodGhpcy5tb2RlKSZiKT09PWF9O2EucHJvdG90eXBlLmlzRGlyZWN0b3J5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoZWNrTW9kZVByb3BlcnR5KGQpfTthLnByb3RvdHlwZS5pc0ZpbGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hlY2tNb2RlUHJvcGVydHkoZSl9OwphLnByb3RvdHlwZS5pc0Jsb2NrRGV2aWNlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoZWNrTW9kZVByb3BlcnR5KGYpfTthLnByb3RvdHlwZS5pc0NoYXJhY3RlckRldmljZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGVja01vZGVQcm9wZXJ0eShnKX07YS5wcm90b3R5cGUuaXNTeW1ib2xpY0xpbms9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hlY2tNb2RlUHJvcGVydHkoaCl9O2EucHJvdG90eXBlLmlzRklGTz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGVja01vZGVQcm9wZXJ0eShrKX07YS5wcm90b3R5cGUuaXNTb2NrZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hlY2tNb2RlUHJvcGVydHkodCl9O3JldHVybiBhfSgpO2EuU3RhdHM9YzthLmRlZmF1bHQ9Y30pO1EoZWIpO3ZhciBLYT0idW5kZWZpbmVkIiE9PXR5cGVvZiBuYT9uYToidW5kZWZpbmVkIiE9PXR5cGVvZiBzZWxmP3NlbGY6InVuZGVmaW5lZCIhPT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fSxSPVtdLApIPVtdLE9mPSJ1bmRlZmluZWQiIT09dHlwZW9mIFVpbnQ4QXJyYXk/VWludDhBcnJheTpBcnJheSxzYz0hMSxSZz17fS50b1N0cmluZyxGZD1BcnJheS5pc0FycmF5fHxmdW5jdGlvbihjKXtyZXR1cm4iW29iamVjdCBBcnJheV0iPT1SZy5jYWxsKGMpfTtsLlRZUEVEX0FSUkFZX1NVUFBPUlQ9dm9pZCAwIT09S2EuVFlQRURfQVJSQVlfU1VQUE9SVD9LYS5UWVBFRF9BUlJBWV9TVVBQT1JUOiEwO3ZhciBTZz1sLlRZUEVEX0FSUkFZX1NVUFBPUlQ/MjE0NzQ4MzY0NzoxMDczNzQxODIzO2wucG9vbFNpemU9ODE5MjtsLl9hdWdtZW50PWZ1bmN0aW9uKGMpe2MuX19wcm90b19fPWwucHJvdG90eXBlO3JldHVybiBjfTtsLmZyb209ZnVuY3Rpb24oYyxhLGIpe3JldHVybiBDZChudWxsLGMsYSxiKX07bC5UWVBFRF9BUlJBWV9TVVBQT1JUJiYobC5wcm90b3R5cGUuX19wcm90b19fPVVpbnQ4QXJyYXkucHJvdG90eXBlLGwuX19wcm90b19fPVVpbnQ4QXJyYXkpO2wuYWxsb2M9ZnVuY3Rpb24oYywKYSxiKXtFZChjKTtyZXR1cm4gYz0wPj1jP2phKG51bGwsYyk6dm9pZCAwIT09YT8ic3RyaW5nIj09PXR5cGVvZiBiP2phKG51bGwsYykuZmlsbChhLGIpOmphKG51bGwsYykuZmlsbChhKTpqYShudWxsLGMpfTtsLmFsbG9jVW5zYWZlPWZ1bmN0aW9uKGMpe3JldHVybiB0YyhudWxsLGMpfTtsLmFsbG9jVW5zYWZlU2xvdz1mdW5jdGlvbihjKXtyZXR1cm4gdGMobnVsbCxjKX07bC5pc0J1ZmZlcj1wYTtsLmNvbXBhcmU9ZnVuY3Rpb24oYyxhKXtpZighVyhjKXx8IVcoYSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQXJndW1lbnRzIG11c3QgYmUgQnVmZmVycyIpO2lmKGM9PT1hKXJldHVybiAwO2Zvcih2YXIgYj1jLmxlbmd0aCxkPWEubGVuZ3RoLGU9MCxmPU1hdGgubWluKGIsZCk7ZTxmOysrZSlpZihjW2VdIT09YVtlXSl7Yj1jW2VdO2Q9YVtlXTticmVha31yZXR1cm4gYjxkPy0xOmQ8Yj8xOjB9O2wuaXNFbmNvZGluZz1mdW5jdGlvbihjKXtzd2l0Y2goU3RyaW5nKGMpLnRvTG93ZXJDYXNlKCkpe2Nhc2UgImhleCI6Y2FzZSAidXRmOCI6Y2FzZSAidXRmLTgiOmNhc2UgImFzY2lpIjpjYXNlICJsYXRpbjEiOmNhc2UgImJpbmFyeSI6Y2FzZSAiYmFzZTY0IjpjYXNlICJ1Y3MyIjpjYXNlICJ1Y3MtMiI6Y2FzZSAidXRmMTZsZSI6Y2FzZSAidXRmLTE2bGUiOnJldHVybiEwOwpkZWZhdWx0OnJldHVybiExfX07bC5jb25jYXQ9ZnVuY3Rpb24oYyxhKXtpZighRmQoYykpdGhyb3cgbmV3IFR5cGVFcnJvcignImxpc3QiIGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycycpO2lmKDA9PT1jLmxlbmd0aClyZXR1cm4gbC5hbGxvYygwKTt2YXIgYjtpZih2b2lkIDA9PT1hKWZvcihiPWE9MDtiPGMubGVuZ3RoOysrYilhKz1jW2JdLmxlbmd0aDthPWwuYWxsb2NVbnNhZmUoYSk7dmFyIGQ9MDtmb3IoYj0wO2I8Yy5sZW5ndGg7KytiKXt2YXIgZT1jW2JdO2lmKCFXKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoJyJsaXN0IiBhcmd1bWVudCBtdXN0IGJlIGFuIEFycmF5IG9mIEJ1ZmZlcnMnKTtlLmNvcHkoYSxkKTtkKz1lLmxlbmd0aH1yZXR1cm4gYX07bC5ieXRlTGVuZ3RoPURkO2wucHJvdG90eXBlLl9pc0J1ZmZlcj0hMDtsLnByb3RvdHlwZS5zd2FwMTY9ZnVuY3Rpb24oKXt2YXIgYz10aGlzLmxlbmd0aDtpZigwIT09YyUyKXRocm93IG5ldyBSYW5nZUVycm9yKCJCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgMTYtYml0cyIpOwpmb3IodmFyIGE9MDthPGM7YSs9MilHYSh0aGlzLGEsYSsxKTtyZXR1cm4gdGhpc307bC5wcm90b3R5cGUuc3dhcDMyPWZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5sZW5ndGg7aWYoMCE9PWMlNCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDMyLWJpdHMiKTtmb3IodmFyIGE9MDthPGM7YSs9NClHYSh0aGlzLGEsYSszKSxHYSh0aGlzLGErMSxhKzIpO3JldHVybiB0aGlzfTtsLnByb3RvdHlwZS5zd2FwNjQ9ZnVuY3Rpb24oKXt2YXIgYz10aGlzLmxlbmd0aDtpZigwIT09YyU4KXRocm93IG5ldyBSYW5nZUVycm9yKCJCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgNjQtYml0cyIpO2Zvcih2YXIgYT0wO2E8YzthKz04KUdhKHRoaXMsYSxhKzcpLEdhKHRoaXMsYSsxLGErNiksR2EodGhpcyxhKzIsYSs1KSxHYSh0aGlzLGErMyxhKzQpO3JldHVybiB0aGlzfTtsLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3ZhciBjPQp0aGlzLmxlbmd0aHwwO3JldHVybiAwPT09Yz8iIjowPT09YXJndW1lbnRzLmxlbmd0aD9IZCh0aGlzLDAsYyk6TWYuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtsLnByb3RvdHlwZS5lcXVhbHM9ZnVuY3Rpb24oYyl7aWYoIVcoYykpdGhyb3cgbmV3IFR5cGVFcnJvcigiQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlciIpO3JldHVybiB0aGlzPT09Yz8hMDowPT09bC5jb21wYXJlKHRoaXMsYyl9O2wucHJvdG90eXBlLmluc3BlY3Q9ZnVuY3Rpb24oKXt2YXIgYz0iIjswPHRoaXMubGVuZ3RoJiYoYz10aGlzLnRvU3RyaW5nKCJoZXgiLDAsNTApLm1hdGNoKC8uezJ9L2cpLmpvaW4oIiAiKSw1MDx0aGlzLmxlbmd0aCYmKGMrPSIgLi4uICIpKTtyZXR1cm4iPEJ1ZmZlciAiK2MrIj4ifTtsLnByb3RvdHlwZS5jb21wYXJlPWZ1bmN0aW9uKGMsYSxiLGQsZSl7aWYoIVcoYykpdGhyb3cgbmV3IFR5cGVFcnJvcigiQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlciIpO3ZvaWQgMD09PWEmJihhPTApO3ZvaWQgMD09PQpiJiYoYj1jP2MubGVuZ3RoOjApO3ZvaWQgMD09PWQmJihkPTApO3ZvaWQgMD09PWUmJihlPXRoaXMubGVuZ3RoKTtpZigwPmF8fGI+Yy5sZW5ndGh8fDA+ZHx8ZT50aGlzLmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigib3V0IG9mIHJhbmdlIGluZGV4Iik7aWYoZD49ZSYmYT49YilyZXR1cm4gMDtpZihkPj1lKXJldHVybi0xO2lmKGE+PWIpcmV0dXJuIDE7YT4+Pj0wO2I+Pj49MDtkPj4+PTA7ZT4+Pj0wO2lmKHRoaXM9PT1jKXJldHVybiAwO3ZhciBmPWUtZCxnPWItYSxoPU1hdGgubWluKGYsZyk7ZD10aGlzLnNsaWNlKGQsZSk7Yz1jLnNsaWNlKGEsYik7Zm9yKGE9MDthPGg7KythKWlmKGRbYV0hPT1jW2FdKXtmPWRbYV07Zz1jW2FdO2JyZWFrfXJldHVybiBmPGc/LTE6ZzxmPzE6MH07bC5wcm90b3R5cGUuaW5jbHVkZXM9ZnVuY3Rpb24oYyxhLGIpe3JldHVybi0xIT09dGhpcy5pbmRleE9mKGMsYSxiKX07bC5wcm90b3R5cGUuaW5kZXhPZj1mdW5jdGlvbihjLGEsYil7cmV0dXJuIElkKHRoaXMsCmMsYSxiLCEwKX07bC5wcm90b3R5cGUubGFzdEluZGV4T2Y9ZnVuY3Rpb24oYyxhLGIpe3JldHVybiBJZCh0aGlzLGMsYSxiLCExKX07bC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oYyxhLGIsZCl7aWYodm9pZCAwPT09YSlkPSJ1dGY4IixiPXRoaXMubGVuZ3RoLGE9MDtlbHNlIGlmKHZvaWQgMD09PWImJiJzdHJpbmciPT09dHlwZW9mIGEpZD1hLGI9dGhpcy5sZW5ndGgsYT0wO2Vsc2UgaWYoaXNGaW5pdGUoYSkpYXw9MCxpc0Zpbml0ZShiKT8oYnw9MCx2b2lkIDA9PT1kJiYoZD0idXRmOCIpKTooZD1iLGI9dm9pZCAwKTtlbHNlIHRocm93IEVycm9yKCJCdWZmZXIud3JpdGUoc3RyaW5nLCBlbmNvZGluZywgb2Zmc2V0WywgbGVuZ3RoXSkgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZCIpO3ZhciBlPXRoaXMubGVuZ3RoLWE7aWYodm9pZCAwPT09Ynx8Yj5lKWI9ZTtpZigwPGMubGVuZ3RoJiYoMD5ifHwwPmEpfHxhPnRoaXMubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKCJBdHRlbXB0IHRvIHdyaXRlIG91dHNpZGUgYnVmZmVyIGJvdW5kcyIpOwpkfHwoZD0idXRmOCIpO2ZvcihlPSExOzspc3dpdGNoKGQpe2Nhc2UgImhleCI6YTp7YT1OdW1iZXIoYSl8fDA7ZD10aGlzLmxlbmd0aC1hO2I/KGI9TnVtYmVyKGIpLGI+ZCYmKGI9ZCkpOmI9ZDtkPWMubGVuZ3RoO2lmKDAhPT1kJTIpdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBoZXggc3RyaW5nIik7Yj5kLzImJihiPWQvMik7Zm9yKGQ9MDtkPGI7KytkKXtlPXBhcnNlSW50KGMuc3Vic3RyKDIqZCwyKSwxNik7aWYoaXNOYU4oZSkpe2M9ZDticmVhayBhfXRoaXNbYStkXT1lfWM9ZH1yZXR1cm4gYztjYXNlICJ1dGY4IjpjYXNlICJ1dGYtOCI6cmV0dXJuIG5iKEliKGMsdGhpcy5sZW5ndGgtYSksdGhpcyxhLGIpO2Nhc2UgImFzY2lpIjpyZXR1cm4gbmIoTGQoYyksdGhpcyxhLGIpO2Nhc2UgImxhdGluMSI6Y2FzZSAiYmluYXJ5IjpyZXR1cm4gbmIoTGQoYyksdGhpcyxhLGIpO2Nhc2UgImJhc2U2NCI6cmV0dXJuIG5iKEdkKGMpLHRoaXMsYSxiKTtjYXNlICJ1Y3MyIjpjYXNlICJ1Y3MtMiI6Y2FzZSAidXRmMTZsZSI6Y2FzZSAidXRmLTE2bGUiOmQ9CmM7ZT10aGlzLmxlbmd0aC1hO2Zvcih2YXIgZj1bXSxnPTA7ZzxkLmxlbmd0aCYmISgwPihlLT0yKSk7KytnKXt2YXIgaD1kLmNoYXJDb2RlQXQoZyk7Yz1oPj44O2glPTI1NjtmLnB1c2goaCk7Zi5wdXNoKGMpfXJldHVybiBuYihmLHRoaXMsYSxiKTtkZWZhdWx0OmlmKGUpdGhyb3cgbmV3IFR5cGVFcnJvcigiVW5rbm93biBlbmNvZGluZzogIitkKTtkPSgiIitkKS50b0xvd2VyQ2FzZSgpO2U9ITB9fTtsLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm57dHlwZToiQnVmZmVyIixkYXRhOkFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMuX2Fycnx8dGhpcywwKX19O3ZhciBLZD00MDk2O2wucHJvdG90eXBlLnNsaWNlPWZ1bmN0aW9uKGMsYSl7dmFyIGI9dGhpcy5sZW5ndGg7Yz1+fmM7YT12b2lkIDA9PT1hP2I6fn5hOzA+Yz8oYys9YiwwPmMmJihjPTApKTpjPmImJihjPWIpOzA+YT8oYSs9YiwwPmEmJihhPTApKTphPmImJihhPWIpO2E8YyYmKGE9Yyk7aWYobC5UWVBFRF9BUlJBWV9TVVBQT1JUKWE9CnRoaXMuc3ViYXJyYXkoYyxhKSxhLl9fcHJvdG9fXz1sLnByb3RvdHlwZTtlbHNle2I9YS1jO2E9bmV3IGwoYix2b2lkIDApO2Zvcih2YXIgZD0wO2Q8YjsrK2QpYVtkXT10aGlzW2QrY119cmV0dXJuIGF9O2wucHJvdG90eXBlLnJlYWRVSW50TEU9ZnVuY3Rpb24oYyxhLGIpe2N8PTA7YXw9MDtifHxEKGMsYSx0aGlzLmxlbmd0aCk7Yj10aGlzW2NdO2Zvcih2YXIgZD0xLGU9MDsrK2U8YSYmKGQqPTI1Nik7KWIrPXRoaXNbYytlXSpkO3JldHVybiBifTtsLnByb3RvdHlwZS5yZWFkVUludEJFPWZ1bmN0aW9uKGMsYSxiKXtjfD0wO2F8PTA7Ynx8RChjLGEsdGhpcy5sZW5ndGgpO2I9dGhpc1tjKy0tYV07Zm9yKHZhciBkPTE7MDxhJiYoZCo9MjU2KTspYis9dGhpc1tjKy0tYV0qZDtyZXR1cm4gYn07bC5wcm90b3R5cGUucmVhZFVJbnQ4PWZ1bmN0aW9uKGMsYSl7YXx8RChjLDEsdGhpcy5sZW5ndGgpO3JldHVybiB0aGlzW2NdfTtsLnByb3RvdHlwZS5yZWFkVUludDE2TEU9ZnVuY3Rpb24oYywKYSl7YXx8RChjLDIsdGhpcy5sZW5ndGgpO3JldHVybiB0aGlzW2NdfHRoaXNbYysxXTw8OH07bC5wcm90b3R5cGUucmVhZFVJbnQxNkJFPWZ1bmN0aW9uKGMsYSl7YXx8RChjLDIsdGhpcy5sZW5ndGgpO3JldHVybiB0aGlzW2NdPDw4fHRoaXNbYysxXX07bC5wcm90b3R5cGUucmVhZFVJbnQzMkxFPWZ1bmN0aW9uKGMsYSl7YXx8RChjLDQsdGhpcy5sZW5ndGgpO3JldHVybih0aGlzW2NdfHRoaXNbYysxXTw8OHx0aGlzW2MrMl08PDE2KSsxNjc3NzIxNip0aGlzW2MrM119O2wucHJvdG90eXBlLnJlYWRVSW50MzJCRT1mdW5jdGlvbihjLGEpe2F8fEQoYyw0LHRoaXMubGVuZ3RoKTtyZXR1cm4gMTY3NzcyMTYqdGhpc1tjXSsodGhpc1tjKzFdPDwxNnx0aGlzW2MrMl08PDh8dGhpc1tjKzNdKX07bC5wcm90b3R5cGUucmVhZEludExFPWZ1bmN0aW9uKGMsYSxiKXtjfD0wO2F8PTA7Ynx8RChjLGEsdGhpcy5sZW5ndGgpO2I9dGhpc1tjXTtmb3IodmFyIGQ9MSxlPTA7KytlPGEmJihkKj0yNTYpOyliKz0KdGhpc1tjK2VdKmQ7Yj49MTI4KmQmJihiLT1NYXRoLnBvdygyLDgqYSkpO3JldHVybiBifTtsLnByb3RvdHlwZS5yZWFkSW50QkU9ZnVuY3Rpb24oYyxhLGIpe2N8PTA7YXw9MDtifHxEKGMsYSx0aGlzLmxlbmd0aCk7Yj1hO2Zvcih2YXIgZD0xLGU9dGhpc1tjKy0tYl07MDxiJiYoZCo9MjU2KTspZSs9dGhpc1tjKy0tYl0qZDtlPj0xMjgqZCYmKGUtPU1hdGgucG93KDIsOCphKSk7cmV0dXJuIGV9O2wucHJvdG90eXBlLnJlYWRJbnQ4PWZ1bmN0aW9uKGMsYSl7YXx8RChjLDEsdGhpcy5sZW5ndGgpO3JldHVybiB0aGlzW2NdJjEyOD8tMSooMjU1LXRoaXNbY10rMSk6dGhpc1tjXX07bC5wcm90b3R5cGUucmVhZEludDE2TEU9ZnVuY3Rpb24oYyxhKXthfHxEKGMsMix0aGlzLmxlbmd0aCk7Yz10aGlzW2NdfHRoaXNbYysxXTw8ODtyZXR1cm4gYyYzMjc2OD9jfDQyOTQ5MDE3NjA6Y307bC5wcm90b3R5cGUucmVhZEludDE2QkU9ZnVuY3Rpb24oYyxhKXthfHxEKGMsMix0aGlzLmxlbmd0aCk7CmM9dGhpc1tjKzFdfHRoaXNbY108PDg7cmV0dXJuIGMmMzI3Njg/Y3w0Mjk0OTAxNzYwOmN9O2wucHJvdG90eXBlLnJlYWRJbnQzMkxFPWZ1bmN0aW9uKGMsYSl7YXx8RChjLDQsdGhpcy5sZW5ndGgpO3JldHVybiB0aGlzW2NdfHRoaXNbYysxXTw8OHx0aGlzW2MrMl08PDE2fHRoaXNbYyszXTw8MjR9O2wucHJvdG90eXBlLnJlYWRJbnQzMkJFPWZ1bmN0aW9uKGMsYSl7YXx8RChjLDQsdGhpcy5sZW5ndGgpO3JldHVybiB0aGlzW2NdPDwyNHx0aGlzW2MrMV08PDE2fHRoaXNbYysyXTw8OHx0aGlzW2MrM119O2wucHJvdG90eXBlLnJlYWRGbG9hdExFPWZ1bmN0aW9uKGMsYSl7YXx8RChjLDQsdGhpcy5sZW5ndGgpO3JldHVybiBHYih0aGlzLGMsITAsMjMsNCl9O2wucHJvdG90eXBlLnJlYWRGbG9hdEJFPWZ1bmN0aW9uKGMsYSl7YXx8RChjLDQsdGhpcy5sZW5ndGgpO3JldHVybiBHYih0aGlzLGMsITEsMjMsNCl9O2wucHJvdG90eXBlLnJlYWREb3VibGVMRT1mdW5jdGlvbihjLGEpe2F8fApEKGMsOCx0aGlzLmxlbmd0aCk7cmV0dXJuIEdiKHRoaXMsYywhMCw1Miw4KX07bC5wcm90b3R5cGUucmVhZERvdWJsZUJFPWZ1bmN0aW9uKGMsYSl7YXx8RChjLDgsdGhpcy5sZW5ndGgpO3JldHVybiBHYih0aGlzLGMsITEsNTIsOCl9O2wucHJvdG90eXBlLndyaXRlVUludExFPWZ1bmN0aW9uKGMsYSxiLGQpe2M9K2M7YXw9MDtifD0wO2R8fFQodGhpcyxjLGEsYixNYXRoLnBvdygyLDgqYiktMSwwKTtkPTE7dmFyIGU9MDtmb3IodGhpc1thXT1jJjI1NTsrK2U8YiYmKGQqPTI1Nik7KXRoaXNbYStlXT1jL2QmMjU1O3JldHVybiBhK2J9O2wucHJvdG90eXBlLndyaXRlVUludEJFPWZ1bmN0aW9uKGMsYSxiLGQpe2M9K2M7YXw9MDtifD0wO2R8fFQodGhpcyxjLGEsYixNYXRoLnBvdygyLDgqYiktMSwwKTtkPWItMTt2YXIgZT0xO2Zvcih0aGlzW2ErZF09YyYyNTU7MDw9LS1kJiYoZSo9MjU2KTspdGhpc1thK2RdPWMvZSYyNTU7cmV0dXJuIGErYn07bC5wcm90b3R5cGUud3JpdGVVSW50OD0KZnVuY3Rpb24oYyxhLGIpe2M9K2M7YXw9MDtifHxUKHRoaXMsYyxhLDEsMjU1LDApO2wuVFlQRURfQVJSQVlfU1VQUE9SVHx8KGM9TWF0aC5mbG9vcihjKSk7dGhpc1thXT1jJjI1NTtyZXR1cm4gYSsxfTtsLnByb3RvdHlwZS53cml0ZVVJbnQxNkxFPWZ1bmN0aW9uKGMsYSxiKXtjPStjO2F8PTA7Ynx8VCh0aGlzLGMsYSwyLDY1NTM1LDApO2wuVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1thXT1jJjI1NSx0aGlzW2ErMV09Yz4+PjgpOkpiKHRoaXMsYyxhLCEwKTtyZXR1cm4gYSsyfTtsLnByb3RvdHlwZS53cml0ZVVJbnQxNkJFPWZ1bmN0aW9uKGMsYSxiKXtjPStjO2F8PTA7Ynx8VCh0aGlzLGMsYSwyLDY1NTM1LDApO2wuVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1thXT1jPj4+OCx0aGlzW2ErMV09YyYyNTUpOkpiKHRoaXMsYyxhLCExKTtyZXR1cm4gYSsyfTtsLnByb3RvdHlwZS53cml0ZVVJbnQzMkxFPWZ1bmN0aW9uKGMsYSxiKXtjPStjO2F8PTA7Ynx8VCh0aGlzLGMsYSw0LAo0Mjk0OTY3Mjk1LDApO2wuVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1thKzNdPWM+Pj4yNCx0aGlzW2ErMl09Yz4+PjE2LHRoaXNbYSsxXT1jPj4+OCx0aGlzW2FdPWMmMjU1KTpLYih0aGlzLGMsYSwhMCk7cmV0dXJuIGErNH07bC5wcm90b3R5cGUud3JpdGVVSW50MzJCRT1mdW5jdGlvbihjLGEsYil7Yz0rYzthfD0wO2J8fFQodGhpcyxjLGEsNCw0Mjk0OTY3Mjk1LDApO2wuVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1thXT1jPj4+MjQsdGhpc1thKzFdPWM+Pj4xNix0aGlzW2ErMl09Yz4+PjgsdGhpc1thKzNdPWMmMjU1KTpLYih0aGlzLGMsYSwhMSk7cmV0dXJuIGErNH07bC5wcm90b3R5cGUud3JpdGVJbnRMRT1mdW5jdGlvbihjLGEsYixkKXtjPStjO2F8PTA7ZHx8KGQ9TWF0aC5wb3coMiw4KmItMSksVCh0aGlzLGMsYSxiLGQtMSwtZCkpO2Q9MDt2YXIgZT0xLGY9MDtmb3IodGhpc1thXT1jJjI1NTsrK2Q8YiYmKGUqPTI1Nik7KTA+YyYmMD09PWYmJjAhPT10aGlzW2ErZC0KMV0mJihmPTEpLHRoaXNbYStkXT0oYy9lPj4wKS1mJjI1NTtyZXR1cm4gYStifTtsLnByb3RvdHlwZS53cml0ZUludEJFPWZ1bmN0aW9uKGMsYSxiLGQpe2M9K2M7YXw9MDtkfHwoZD1NYXRoLnBvdygyLDgqYi0xKSxUKHRoaXMsYyxhLGIsZC0xLC1kKSk7ZD1iLTE7dmFyIGU9MSxmPTA7Zm9yKHRoaXNbYStkXT1jJjI1NTswPD0tLWQmJihlKj0yNTYpOykwPmMmJjA9PT1mJiYwIT09dGhpc1thK2QrMV0mJihmPTEpLHRoaXNbYStkXT0oYy9lPj4wKS1mJjI1NTtyZXR1cm4gYStifTtsLnByb3RvdHlwZS53cml0ZUludDg9ZnVuY3Rpb24oYyxhLGIpe2M9K2M7YXw9MDtifHxUKHRoaXMsYyxhLDEsMTI3LC0xMjgpO2wuVFlQRURfQVJSQVlfU1VQUE9SVHx8KGM9TWF0aC5mbG9vcihjKSk7MD5jJiYoYz0yNTUrYysxKTt0aGlzW2FdPWMmMjU1O3JldHVybiBhKzF9O2wucHJvdG90eXBlLndyaXRlSW50MTZMRT1mdW5jdGlvbihjLGEsYil7Yz0rYzthfD0wO2J8fFQodGhpcyxjLGEsMiwzMjc2NywKLTMyNzY4KTtsLlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHRoaXNbYV09YyYyNTUsdGhpc1thKzFdPWM+Pj44KTpKYih0aGlzLGMsYSwhMCk7cmV0dXJuIGErMn07bC5wcm90b3R5cGUud3JpdGVJbnQxNkJFPWZ1bmN0aW9uKGMsYSxiKXtjPStjO2F8PTA7Ynx8VCh0aGlzLGMsYSwyLDMyNzY3LC0zMjc2OCk7bC5UWVBFRF9BUlJBWV9TVVBQT1JUPyh0aGlzW2FdPWM+Pj44LHRoaXNbYSsxXT1jJjI1NSk6SmIodGhpcyxjLGEsITEpO3JldHVybiBhKzJ9O2wucHJvdG90eXBlLndyaXRlSW50MzJMRT1mdW5jdGlvbihjLGEsYil7Yz0rYzthfD0wO2J8fFQodGhpcyxjLGEsNCwyMTQ3NDgzNjQ3LC0yMTQ3NDgzNjQ4KTtsLlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHRoaXNbYV09YyYyNTUsdGhpc1thKzFdPWM+Pj44LHRoaXNbYSsyXT1jPj4+MTYsdGhpc1thKzNdPWM+Pj4yNCk6S2IodGhpcyxjLGEsITApO3JldHVybiBhKzR9O2wucHJvdG90eXBlLndyaXRlSW50MzJCRT1mdW5jdGlvbihjLGEsYil7Yz0KK2M7YXw9MDtifHxUKHRoaXMsYyxhLDQsMjE0NzQ4MzY0NywtMjE0NzQ4MzY0OCk7MD5jJiYoYz00Mjk0OTY3Mjk1K2MrMSk7bC5UWVBFRF9BUlJBWV9TVVBQT1JUPyh0aGlzW2FdPWM+Pj4yNCx0aGlzW2ErMV09Yz4+PjE2LHRoaXNbYSsyXT1jPj4+OCx0aGlzW2ErM109YyYyNTUpOktiKHRoaXMsYyxhLCExKTtyZXR1cm4gYSs0fTtsLnByb3RvdHlwZS53cml0ZUZsb2F0TEU9ZnVuY3Rpb24oYyxhLGIpe2J8fExiKHRoaXMsYyxhLDQpO0hiKHRoaXMsYyxhLCEwLDIzLDQpO3JldHVybiBhKzR9O2wucHJvdG90eXBlLndyaXRlRmxvYXRCRT1mdW5jdGlvbihjLGEsYil7Ynx8TGIodGhpcyxjLGEsNCk7SGIodGhpcyxjLGEsITEsMjMsNCk7cmV0dXJuIGErNH07bC5wcm90b3R5cGUud3JpdGVEb3VibGVMRT1mdW5jdGlvbihjLGEsYil7Ynx8TGIodGhpcyxjLGEsOCk7SGIodGhpcyxjLGEsITAsNTIsOCk7cmV0dXJuIGErOH07bC5wcm90b3R5cGUud3JpdGVEb3VibGVCRT1mdW5jdGlvbihjLAphLGIpe2J8fExiKHRoaXMsYyxhLDgpO0hiKHRoaXMsYyxhLCExLDUyLDgpO3JldHVybiBhKzh9O2wucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oYyxhLGIsZCl7Ynx8KGI9MCk7ZHx8MD09PWR8fChkPXRoaXMubGVuZ3RoKTthPj1jLmxlbmd0aCYmKGE9Yy5sZW5ndGgpO2F8fChhPTApOzA8ZCYmZDxiJiYoZD1iKTtpZihkPT09Ynx8MD09PWMubGVuZ3RofHwwPT09dGhpcy5sZW5ndGgpcmV0dXJuIDA7aWYoMD5hKXRocm93IG5ldyBSYW5nZUVycm9yKCJ0YXJnZXRTdGFydCBvdXQgb2YgYm91bmRzIik7aWYoMD5ifHxiPj10aGlzLmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigic291cmNlU3RhcnQgb3V0IG9mIGJvdW5kcyIpO2lmKDA+ZCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigic291cmNlRW5kIG91dCBvZiBib3VuZHMiKTtkPnRoaXMubGVuZ3RoJiYoZD10aGlzLmxlbmd0aCk7Yy5sZW5ndGgtYTxkLWImJihkPWMubGVuZ3RoLWErYik7dmFyIGU9ZC1iO2lmKHRoaXM9PT1jJiZiPGEmJgphPGQpZm9yKGQ9ZS0xOzA8PWQ7LS1kKWNbZCthXT10aGlzW2QrYl07ZWxzZSBpZigxRTM+ZXx8IWwuVFlQRURfQVJSQVlfU1VQUE9SVClmb3IoZD0wO2Q8ZTsrK2QpY1tkK2FdPXRoaXNbZCtiXTtlbHNlIFVpbnQ4QXJyYXkucHJvdG90eXBlLnNldC5jYWxsKGMsdGhpcy5zdWJhcnJheShiLGIrZSksYSk7cmV0dXJuIGV9O2wucHJvdG90eXBlLmZpbGw9ZnVuY3Rpb24oYyxhLGIsZCl7aWYoInN0cmluZyI9PT10eXBlb2YgYyl7InN0cmluZyI9PT10eXBlb2YgYT8oZD1hLGE9MCxiPXRoaXMubGVuZ3RoKToic3RyaW5nIj09PXR5cGVvZiBiJiYoZD1iLGI9dGhpcy5sZW5ndGgpO2lmKDE9PT1jLmxlbmd0aCl7dmFyIGU9Yy5jaGFyQ29kZUF0KDApOzI1Nj5lJiYoYz1lKX1pZih2b2lkIDAhPT1kJiYic3RyaW5nIiE9PXR5cGVvZiBkKXRocm93IG5ldyBUeXBlRXJyb3IoImVuY29kaW5nIG11c3QgYmUgYSBzdHJpbmciKTtpZigic3RyaW5nIj09PXR5cGVvZiBkJiYhbC5pc0VuY29kaW5nKGQpKXRocm93IG5ldyBUeXBlRXJyb3IoIlVua25vd24gZW5jb2Rpbmc6ICIrCmQpO31lbHNlIm51bWJlciI9PT10eXBlb2YgYyYmKGMmPTI1NSk7aWYoMD5hfHx0aGlzLmxlbmd0aDxhfHx0aGlzLmxlbmd0aDxiKXRocm93IG5ldyBSYW5nZUVycm9yKCJPdXQgb2YgcmFuZ2UgaW5kZXgiKTtpZihiPD1hKXJldHVybiB0aGlzO2E+Pj49MDtiPXZvaWQgMD09PWI/dGhpcy5sZW5ndGg6Yj4+PjA7Y3x8KGM9MCk7aWYoIm51bWJlciI9PT10eXBlb2YgYylmb3IoZD1hO2Q8YjsrK2QpdGhpc1tkXT1jO2Vsc2UgZm9yKGM9VyhjKT9jOkliKChuZXcgbChjLGQpKS50b1N0cmluZygpKSxlPWMubGVuZ3RoLGQ9MDtkPGItYTsrK2QpdGhpc1tkK2FdPWNbZCVlXTtyZXR1cm4gdGhpc307dmFyIE5mPS9bXitcLzAtOUEtWmEtei1fXS9nLHZiPU9iamVjdC5mcmVlemUoe19fcHJvdG9fXzpudWxsLElOU1BFQ1RfTUFYX0JZVEVTOjUwLGtNYXhMZW5ndGg6U2csQnVmZmVyOmwsU2xvd0J1ZmZlcjpmdW5jdGlvbihjKXsrYyE9YyYmKGM9MCk7cmV0dXJuIGwuYWxsb2MoK2MpfSxpc0J1ZmZlcjpwYX0pLApKPUsoZnVuY3Rpb24oYyxhKXtmdW5jdGlvbiBiKGEpe2Zvcih2YXIgYz1bXSxiPTE7Yjxhcmd1bWVudHMubGVuZ3RoO2IrKyljW2ItMV09YXJndW1lbnRzW2JdO3JldHVybiBuZXcgKHZiLkJ1ZmZlci5iaW5kLmFwcGx5KHZiLkJ1ZmZlcixkKFt2b2lkIDAsYV0sYykpKX12YXIgZD1OJiZOLl9fc3ByZWFkQXJyYXlzfHxmdW5jdGlvbigpe2Zvcih2YXIgYT0wLGM9MCxiPWFyZ3VtZW50cy5sZW5ndGg7YzxiO2MrKylhKz1hcmd1bWVudHNbY10ubGVuZ3RoO2E9QXJyYXkoYSk7dmFyIGQ9MDtmb3IoYz0wO2M8YjtjKyspZm9yKHZhciBrPWFyZ3VtZW50c1tjXSx0PTAscT1rLmxlbmd0aDt0PHE7dCsrLGQrKylhW2RdPWtbdF07cmV0dXJuIGF9O09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTthLkJ1ZmZlcj12Yi5CdWZmZXI7YS5idWZmZXJBbGxvY1Vuc2FmZT12Yi5CdWZmZXIuYWxsb2NVbnNhZmV8fGI7YS5idWZmZXJGcm9tPXZiLkJ1ZmZlci5mcm9tfHwKYn0pO1EoSik7dmFyIHVhPU5kLHZhPU9kOyJmdW5jdGlvbiI9PT10eXBlb2YgS2Euc2V0VGltZW91dCYmKHVhPXNldFRpbWVvdXQpOyJmdW5jdGlvbiI9PT10eXBlb2YgS2EuY2xlYXJUaW1lb3V0JiYodmE9Y2xlYXJUaW1lb3V0KTt2YXIga2E9W10sVWE9ITEsSGEsTWI9LTE7UmQucHJvdG90eXBlLnJ1bj1mdW5jdGlvbigpe3RoaXMuZnVuLmFwcGx5KG51bGwsdGhpcy5hcnJheSl9O3ZhciBmYj1LYS5wZXJmb3JtYW5jZXx8e30sVGc9ZmIubm93fHxmYi5tb3pOb3d8fGZiLm1zTm93fHxmYi5vTm93fHxmYi53ZWJraXROb3d8fGZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBEYXRlKS5nZXRUaW1lKCl9LFVnPW5ldyBEYXRlLFZhPXtuZXh0VGljazpYLHRpdGxlOiJicm93c2VyIixicm93c2VyOiEwLGVudjp7fSxhcmd2OltdLHZlcnNpb246IiIsdmVyc2lvbnM6e30sb246SWEsYWRkTGlzdGVuZXI6SWEsb25jZTpJYSxvZmY6SWEscmVtb3ZlTGlzdGVuZXI6SWEscmVtb3ZlQWxsTGlzdGVuZXJzOklhLAplbWl0OklhLGJpbmRpbmc6ZnVuY3Rpb24oKXt0aHJvdyBFcnJvcigicHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQiKTt9LGN3ZDpmdW5jdGlvbigpe3JldHVybiIvIn0sY2hkaXI6ZnVuY3Rpb24oKXt0aHJvdyBFcnJvcigicHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkIik7fSx1bWFzazpmdW5jdGlvbigpe3JldHVybiAwfSxocnRpbWU6ZnVuY3Rpb24oYyl7dmFyIGE9LjAwMSpUZy5jYWxsKGZiKSxiPU1hdGguZmxvb3IoYSk7YT1NYXRoLmZsb29yKGElMSoxRTkpO2MmJihiLT1jWzBdLGEtPWNbMV0sMD5hJiYoYi0tLGErPTFFOSkpO3JldHVybltiLGFdfSxwbGF0Zm9ybToiYnJvd3NlciIscmVsZWFzZTp7fSxjb25maWc6e30sdXB0aW1lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBEYXRlLVVnKS8xRTN9fSx6YT0iZnVuY3Rpb24iPT09dHlwZW9mIE9iamVjdC5jcmVhdGU/ZnVuY3Rpb24oYyxhKXtjLnN1cGVyXz1hO2MucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYS5wcm90b3R5cGUsCntjb25zdHJ1Y3Rvcjp7dmFsdWU6YyxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KX06ZnVuY3Rpb24oYyxhKXtmdW5jdGlvbiBiKCl7fWMuc3VwZXJfPWE7Yi5wcm90b3R5cGU9YS5wcm90b3R5cGU7Yy5wcm90b3R5cGU9bmV3IGI7Yy5wcm90b3R5cGUuY29uc3RydWN0b3I9Y30sUmY9LyVbc2RqJV0vZyxOYj17fSx5YzthYS5jb2xvcnM9e2JvbGQ6WzEsMjJdLGl0YWxpYzpbMywyM10sdW5kZXJsaW5lOls0LDI0XSxpbnZlcnNlOls3LDI3XSx3aGl0ZTpbMzcsMzldLGdyZXk6WzkwLDM5XSxibGFjazpbMzAsMzldLGJsdWU6WzM0LDM5XSxjeWFuOlszNiwzOV0sZ3JlZW46WzMyLDM5XSxtYWdlbnRhOlszNSwzOV0scmVkOlszMSwzOV0seWVsbG93OlszMywzOV19O2FhLnN0eWxlcz17c3BlY2lhbDoiY3lhbiIsbnVtYmVyOiJ5ZWxsb3ciLCJib29sZWFuIjoieWVsbG93Iix1bmRlZmluZWQ6ImdyZXkiLCJudWxsIjoiYm9sZCIsc3RyaW5nOiJncmVlbiIsZGF0ZToibWFnZW50YSIsCnJlZ2V4cDoicmVkIn07dmFyIFpmPSJKYW4gRmViIE1hciBBcHIgTWF5IEp1biBKdWwgQXVnIFNlcCBPY3QgTm92IERlYyIuc3BsaXQoIiAiKSx3Yj17aW5oZXJpdHM6emEsX2V4dGVuZDpUZCxsb2c6ZnVuY3Rpb24oKXtjb25zb2xlLmxvZygiJXMgLSAlcyIsWWYoKSx3Yy5hcHBseShudWxsLGFyZ3VtZW50cykpfSxpc0J1ZmZlcjpmdW5jdGlvbihjKXtyZXR1cm4gcGEoYyl9LGlzUHJpbWl0aXZlOkNjLGlzRnVuY3Rpb246V2EsaXNFcnJvcjpvYixpc0RhdGU6cGIsaXNPYmplY3Q6d2EsaXNSZWdFeHA6WGEsaXNVbmRlZmluZWQ6bGEsaXNTeW1ib2w6ZnVuY3Rpb24oYyl7cmV0dXJuInN5bWJvbCI9PT10eXBlb2YgY30saXNTdHJpbmc6SmEsaXNOdW1iZXI6VmQsaXNOdWxsT3JVbmRlZmluZWQ6ZnVuY3Rpb24oYyl7cmV0dXJuIG51bGw9PWN9LGlzTnVsbDpmdW5jdGlvbihjKXtyZXR1cm4gbnVsbD09PWN9LGlzQm9vbGVhbjp6Yyxpc0FycmF5OlVkLGluc3BlY3Q6YWEsZGVwcmVjYXRlOnhjLApmb3JtYXQ6d2MsZGVidWdsb2c6U2R9LFZnPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksZ2U9T2JqZWN0LmtleXN8fGZ1bmN0aW9uKGMpe3ZhciBhPVtdLGI7Zm9yKGIgaW4gYylWZy5jYWxsKGMsYikmJmEucHVzaChiKTtyZXR1cm4gYX0sZmU9QXJyYXkucHJvdG90eXBlLnNsaWNlLEVjLCRmPS9ccypmdW5jdGlvblxzKyhbXlwoXHNdKilccyovO0UuQXNzZXJ0aW9uRXJyb3I9R2M7emEoR2MsRXJyb3IpO0UuZmFpbD1TO0Uub2s9RmM7RS5lcXVhbD1iZTtFLm5vdEVxdWFsPWNlO0UuZGVlcEVxdWFsPWRlO0UuZGVlcFN0cmljdEVxdWFsPWVlO0Uubm90RGVlcEVxdWFsPWhlO0Uubm90RGVlcFN0cmljdEVxdWFsPWllO0Uuc3RyaWN0RXF1YWw9amU7RS5ub3RTdHJpY3RFcXVhbD1rZTtFLnRocm93cz1mdW5jdGlvbihjLGEsYil7bWUoITAsYyxhLGIpfTtFLmRvZXNOb3RUaHJvdz1mdW5jdGlvbihjLGEsYil7bWUoITEsYyxhLGIpfTtFLmlmRXJyb3I9ZnVuY3Rpb24oYyl7aWYoYyl0aHJvdyBjOwp9O3ZhciB4Yj1LKGZ1bmN0aW9uKGMsYSl7ZnVuY3Rpb24gYihhKXtyZXR1cm4gZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYyhjKXtmb3IodmFyIGI9W10sZT0xO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspYltlLTFdPWFyZ3VtZW50c1tlXTtiPWEuY2FsbCh0aGlzLGQoYyxiKSl8fHRoaXM7Yi5jb2RlPWM7YltoXT1jO2IubmFtZT1hLnByb3RvdHlwZS5uYW1lKyIgWyIrYltoXSsiXSI7cmV0dXJuIGJ9ZyhjLGEpO3JldHVybiBjfShhKX1mdW5jdGlvbiBkKGEsYyl7RS5zdHJpY3RFcXVhbCh0eXBlb2YgYSwic3RyaW5nIik7dmFyIGI9a1thXTtFKGIsIkFuIGludmFsaWQgZXJyb3IgbWVzc2FnZSBrZXkgd2FzIHVzZWQ6ICIrYSsiLiIpO2lmKCJmdW5jdGlvbiI9PT10eXBlb2YgYilhPWI7ZWxzZXthPXdiLmZvcm1hdDtpZih2b2lkIDA9PT1jfHwwPT09Yy5sZW5ndGgpcmV0dXJuIGI7Yy51bnNoaWZ0KGIpfXJldHVybiBTdHJpbmcoYS5hcHBseShudWxsLGMpKX1mdW5jdGlvbiBlKGEsYyl7a1thXT0KImZ1bmN0aW9uIj09PXR5cGVvZiBjP2M6U3RyaW5nKGMpfWZ1bmN0aW9uIGYoYSxjKXtFKGEsImV4cGVjdGVkIGlzIHJlcXVpcmVkIik7RSgic3RyaW5nIj09PXR5cGVvZiBjLCJ0aGluZyBpcyByZXF1aXJlZCIpO2lmKEFycmF5LmlzQXJyYXkoYSkpe3ZhciBiPWEubGVuZ3RoO0UoMDxiLCJBdCBsZWFzdCBvbmUgZXhwZWN0ZWQgdmFsdWUgbmVlZHMgdG8gYmUgc3BlY2lmaWVkIik7YT1hLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gU3RyaW5nKGEpfSk7cmV0dXJuIDI8Yj8ib25lIG9mICIrYysiICIrYS5zbGljZSgwLGItMSkuam9pbigiLCAiKSsiLCBvciAiK2FbYi0xXToyPT09Yj8ib25lIG9mICIrYysiICIrYVswXSsiIG9yICIrYVsxXToib2YgIitjKyIgIithWzBdfXJldHVybiJvZiAiK2MrIiAiK1N0cmluZyhhKX12YXIgZz1OJiZOLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGMsYil7YT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZgpBcnJheSYmZnVuY3Rpb24oYSxjKXthLl9fcHJvdG9fXz1jfXx8ZnVuY3Rpb24oYSxjKXtmb3IodmFyIGIgaW4gYyljLmhhc093blByb3BlcnR5KGIpJiYoYVtiXT1jW2JdKX07cmV0dXJuIGEoYyxiKX1yZXR1cm4gZnVuY3Rpb24oYyxiKXtmdW5jdGlvbiBkKCl7dGhpcy5jb25zdHJ1Y3Rvcj1jfWEoYyxiKTtjLnByb3RvdHlwZT1udWxsPT09Yj9PYmplY3QuY3JlYXRlKGIpOihkLnByb3RvdHlwZT1iLnByb3RvdHlwZSxuZXcgZCl9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgaD0idW5kZWZpbmVkIj09PXR5cGVvZiBTeW1ib2w/Il9rQ29kZSI6U3ltYm9sKCJjb2RlIiksaz17fTtjPWZ1bmN0aW9uKGMpe2Z1bmN0aW9uIGIoYil7aWYoIm9iamVjdCIhPT10eXBlb2YgYnx8bnVsbD09PWIpdGhyb3cgbmV3IGEuVHlwZUVycm9yKCJFUlJfSU5WQUxJRF9BUkdfVFlQRSIsIm9wdGlvbnMiLCJvYmplY3QiKTt2YXIgZD1iLm1lc3NhZ2U/CmMuY2FsbCh0aGlzLGIubWVzc2FnZSl8fHRoaXM6Yy5jYWxsKHRoaXMsd2IuaW5zcGVjdChiLmFjdHVhbCkuc2xpY2UoMCwxMjgpKyIgIisoYi5vcGVyYXRvcisiICIrd2IuaW5zcGVjdChiLmV4cGVjdGVkKS5zbGljZSgwLDEyOCkpKXx8dGhpcztkLmdlbmVyYXRlZE1lc3NhZ2U9IWIubWVzc2FnZTtkLm5hbWU9IkFzc2VydGlvbkVycm9yIFtFUlJfQVNTRVJUSU9OXSI7ZC5jb2RlPSJFUlJfQVNTRVJUSU9OIjtkLmFjdHVhbD1iLmFjdHVhbDtkLmV4cGVjdGVkPWIuZXhwZWN0ZWQ7ZC5vcGVyYXRvcj1iLm9wZXJhdG9yO2EuRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UoZCxiLnN0YWNrU3RhcnRGdW5jdGlvbik7cmV0dXJuIGR9ZyhiLGMpO3JldHVybiBifShOLkVycm9yKTthLkFzc2VydGlvbkVycm9yPWM7YS5tZXNzYWdlPWQ7YS5FPWU7YS5FcnJvcj1iKE4uRXJyb3IpO2EuVHlwZUVycm9yPWIoTi5UeXBlRXJyb3IpO2EuUmFuZ2VFcnJvcj1iKE4uUmFuZ2VFcnJvcik7ZSgiRVJSX0FSR19OT1RfSVRFUkFCTEUiLAoiJXMgbXVzdCBiZSBpdGVyYWJsZSIpO2UoIkVSUl9BU1NFUlRJT04iLCIlcyIpO2UoIkVSUl9CVUZGRVJfT1VUX09GX0JPVU5EUyIsZnVuY3Rpb24oYSxjKXtyZXR1cm4gYz8iQXR0ZW1wdCB0byB3cml0ZSBvdXRzaWRlIGJ1ZmZlciBib3VuZHMiOiciJythKyciIGlzIG91dHNpZGUgb2YgYnVmZmVyIGJvdW5kcyd9KTtlKCJFUlJfQ0hJTERfQ0xPU0VEX0JFRk9SRV9SRVBMWSIsIkNoaWxkIGNsb3NlZCBiZWZvcmUgcmVwbHkgcmVjZWl2ZWQiKTtlKCJFUlJfQ09OU09MRV9XUklUQUJMRV9TVFJFQU0iLCJDb25zb2xlIGV4cGVjdHMgYSB3cml0YWJsZSBzdHJlYW0gaW5zdGFuY2UgZm9yICVzIik7ZSgiRVJSX0NQVV9VU0FHRSIsIlVuYWJsZSB0byBvYnRhaW4gY3B1IHVzYWdlICVzIik7ZSgiRVJSX0ROU19TRVRfU0VSVkVSU19GQUlMRUQiLGZ1bmN0aW9uKGEsYyl7cmV0dXJuJ2MtYXJlcyBmYWlsZWQgdG8gc2V0IHNlcnZlcnM6ICInK2ErJyIgWycrYysiXSJ9KTtlKCJFUlJfRkFMU1lfVkFMVUVfUkVKRUNUSU9OIiwKIlByb21pc2Ugd2FzIHJlamVjdGVkIHdpdGggZmFsc3kgdmFsdWUiKTtlKCJFUlJfRU5DT0RJTkdfTk9UX1NVUFBPUlRFRCIsZnVuY3Rpb24oYSl7cmV0dXJuJ1RoZSAiJythKyciIGVuY29kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnfSk7ZSgiRVJSX0VOQ09ESU5HX0lOVkFMSURfRU5DT0RFRF9EQVRBIixmdW5jdGlvbihhKXtyZXR1cm4iVGhlIGVuY29kZWQgZGF0YSB3YXMgbm90IHZhbGlkIGZvciBlbmNvZGluZyAiK2F9KTtlKCJFUlJfSFRUUF9IRUFERVJTX1NFTlQiLCJDYW5ub3QgcmVuZGVyIGhlYWRlcnMgYWZ0ZXIgdGhleSBhcmUgc2VudCB0byB0aGUgY2xpZW50Iik7ZSgiRVJSX0hUVFBfSU5WQUxJRF9TVEFUVVNfQ09ERSIsIkludmFsaWQgc3RhdHVzIGNvZGU6ICVzIik7ZSgiRVJSX0hUVFBfVFJBSUxFUl9JTlZBTElEIiwiVHJhaWxlcnMgYXJlIGludmFsaWQgd2l0aCB0aGlzIHRyYW5zZmVyIGVuY29kaW5nIik7ZSgiRVJSX0lOREVYX09VVF9PRl9SQU5HRSIsIkluZGV4IG91dCBvZiByYW5nZSIpOwplKCJFUlJfSU5WQUxJRF9BUkdfVFlQRSIsZnVuY3Rpb24oYSxjLGIpe0UoYSwibmFtZSBpcyByZXF1aXJlZCIpO2lmKGMuaW5jbHVkZXMoIm5vdCAiKSl7dmFyIGQ9Im11c3Qgbm90IGJlIjtjPWMuc3BsaXQoIm5vdCAiKVsxXX1lbHNlIGQ9Im11c3QgYmUiO2lmKEFycmF5LmlzQXJyYXkoYSkpZD0iVGhlICIrYS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuJyInK2ErJyInfSkuam9pbigiLCAiKSsiIGFyZ3VtZW50cyAiK2QrIiAiK2YoYywidHlwZSIpO2Vsc2UgaWYoYS5pbmNsdWRlcygiIGFyZ3VtZW50IikpZD0iVGhlICIrYSsiICIrZCsiICIrZihjLCJ0eXBlIik7ZWxzZXt2YXIgZT1hLmluY2x1ZGVzKCIuIik/InByb3BlcnR5IjoiYXJndW1lbnQiO2Q9J1RoZSAiJythKyciICcrZSsiICIrZCsiICIrZihjLCJ0eXBlIil9Mzw9YXJndW1lbnRzLmxlbmd0aCYmKGQrPSIuIFJlY2VpdmVkIHR5cGUgIisobnVsbCE9PWI/dHlwZW9mIGI6Im51bGwiKSk7cmV0dXJuIGR9KTtlKCJFUlJfSU5WQUxJRF9BUlJBWV9MRU5HVEgiLApmdW5jdGlvbihhLGMsYil7RS5zdHJpY3RFcXVhbCh0eXBlb2YgYiwibnVtYmVyIik7cmV0dXJuJ1RoZSBhcnJheSAiJythKyciIChsZW5ndGggJytiKyIpIG11c3QgYmUgb2YgbGVuZ3RoICIrYysiLiJ9KTtlKCJFUlJfSU5WQUxJRF9CVUZGRVJfU0laRSIsIkJ1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiAlcyIpO2UoIkVSUl9JTlZBTElEX0NBTExCQUNLIiwiQ2FsbGJhY2sgbXVzdCBiZSBhIGZ1bmN0aW9uIik7ZSgiRVJSX0lOVkFMSURfQ0hBUiIsIkludmFsaWQgY2hhcmFjdGVyIGluICVzIik7ZSgiRVJSX0lOVkFMSURfQ1VSU09SX1BPUyIsIkNhbm5vdCBzZXQgY3Vyc29yIHJvdyB3aXRob3V0IHNldHRpbmcgaXRzIGNvbHVtbiIpO2UoIkVSUl9JTlZBTElEX0ZEIiwnImZkIiBtdXN0IGJlIGEgcG9zaXRpdmUgaW50ZWdlcjogJXMnKTtlKCJFUlJfSU5WQUxJRF9GSUxFX1VSTF9IT1NUIiwnRmlsZSBVUkwgaG9zdCBtdXN0IGJlICJsb2NhbGhvc3QiIG9yIGVtcHR5IG9uICVzJyk7CmUoIkVSUl9JTlZBTElEX0ZJTEVfVVJMX1BBVEgiLCJGaWxlIFVSTCBwYXRoICVzIik7ZSgiRVJSX0lOVkFMSURfSEFORExFX1RZUEUiLCJUaGlzIGhhbmRsZSB0eXBlIGNhbm5vdCBiZSBzZW50Iik7ZSgiRVJSX0lOVkFMSURfSVBfQUREUkVTUyIsIkludmFsaWQgSVAgYWRkcmVzczogJXMiKTtlKCJFUlJfSU5WQUxJRF9PUFRfVkFMVUUiLGZ1bmN0aW9uKGEsYyl7cmV0dXJuJ1RoZSB2YWx1ZSAiJytTdHJpbmcoYykrJyIgaXMgaW52YWxpZCBmb3Igb3B0aW9uICInK2ErJyInfSk7ZSgiRVJSX0lOVkFMSURfT1BUX1ZBTFVFX0VOQ09ESU5HIixmdW5jdGlvbihhKXtyZXR1cm4nVGhlIHZhbHVlICInK1N0cmluZyhhKSsnIiBpcyBpbnZhbGlkIGZvciBvcHRpb24gImVuY29kaW5nIid9KTtlKCJFUlJfSU5WQUxJRF9SRVBMX0VWQUxfQ09ORklHIiwnQ2Fubm90IHNwZWNpZnkgYm90aCAiYnJlYWtFdmFsT25TaWdpbnQiIGFuZCAiZXZhbCIgZm9yIFJFUEwnKTtlKCJFUlJfSU5WQUxJRF9TWU5DX0ZPUktfSU5QVVQiLAoiQXN5bmNocm9ub3VzIGZvcmtzIGRvIG5vdCBzdXBwb3J0IEJ1ZmZlciwgVWludDhBcnJheSBvciBzdHJpbmcgaW5wdXQ6ICVzIik7ZSgiRVJSX0lOVkFMSURfVEhJUyIsJ1ZhbHVlIG9mICJ0aGlzIiBtdXN0IGJlIG9mIHR5cGUgJXMnKTtlKCJFUlJfSU5WQUxJRF9UVVBMRSIsIiVzIG11c3QgYmUgYW4gaXRlcmFibGUgJXMgdHVwbGUiKTtlKCJFUlJfSU5WQUxJRF9VUkwiLCJJbnZhbGlkIFVSTDogJXMiKTtlKCJFUlJfSU5WQUxJRF9VUkxfU0NIRU1FIixmdW5jdGlvbihhKXtyZXR1cm4iVGhlIFVSTCBtdXN0IGJlICIrZihhLCJzY2hlbWUiKX0pO2UoIkVSUl9JUENfQ0hBTk5FTF9DTE9TRUQiLCJDaGFubmVsIGNsb3NlZCIpO2UoIkVSUl9JUENfRElTQ09OTkVDVEVEIiwiSVBDIGNoYW5uZWwgaXMgYWxyZWFkeSBkaXNjb25uZWN0ZWQiKTtlKCJFUlJfSVBDX09ORV9QSVBFIiwiQ2hpbGQgcHJvY2VzcyBjYW4gaGF2ZSBvbmx5IG9uZSBJUEMgcGlwZSIpO2UoIkVSUl9JUENfU1lOQ19GT1JLIiwKIklQQyBjYW5ub3QgYmUgdXNlZCB3aXRoIHN5bmNocm9ub3VzIGZvcmtzIik7ZSgiRVJSX01JU1NJTkdfQVJHUyIsZnVuY3Rpb24oKXtmb3IodmFyIGE9W10sYz0wO2M8YXJndW1lbnRzLmxlbmd0aDtjKyspYVtjXT1hcmd1bWVudHNbY107RSgwPGEubGVuZ3RoLCJBdCBsZWFzdCBvbmUgYXJnIG5lZWRzIHRvIGJlIHNwZWNpZmllZCIpO2M9IlRoZSAiO3ZhciBiPWEubGVuZ3RoO2E9YS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuJyInK2ErJyInfSk7c3dpdGNoKGIpe2Nhc2UgMTpjKz1hWzBdKyIgYXJndW1lbnQiO2JyZWFrO2Nhc2UgMjpjKz1hWzBdKyIgYW5kICIrYVsxXSsiIGFyZ3VtZW50cyI7YnJlYWs7ZGVmYXVsdDpjKz1hLnNsaWNlKDAsYi0xKS5qb2luKCIsICIpLGMrPSIsIGFuZCAiK2FbYi0xXSsiIGFyZ3VtZW50cyJ9cmV0dXJuIGMrIiBtdXN0IGJlIHNwZWNpZmllZCJ9KTtlKCJFUlJfTVVMVElQTEVfQ0FMTEJBQ0siLCJDYWxsYmFjayBjYWxsZWQgbXVsdGlwbGUgdGltZXMiKTsKZSgiRVJSX05BUElfQ09OU19GVU5DVElPTiIsIkNvbnN0cnVjdG9yIG11c3QgYmUgYSBmdW5jdGlvbiIpO2UoIkVSUl9OQVBJX0NPTlNfUFJPVE9UWVBFX09CSkVDVCIsIkNvbnN0cnVjdG9yLnByb3RvdHlwZSBtdXN0IGJlIGFuIG9iamVjdCIpO2UoIkVSUl9OT19DUllQVE8iLCJOb2RlLmpzIGlzIG5vdCBjb21waWxlZCB3aXRoIE9wZW5TU0wgY3J5cHRvIHN1cHBvcnQiKTtlKCJFUlJfTk9fTE9OR0VSX1NVUFBPUlRFRCIsIiVzIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQiKTtlKCJFUlJfUEFSU0VfSElTVE9SWV9EQVRBIiwiQ291bGQgbm90IHBhcnNlIGhpc3RvcnkgZGF0YSBpbiAlcyIpO2UoIkVSUl9TT0NLRVRfQUxSRUFEWV9CT1VORCIsIlNvY2tldCBpcyBhbHJlYWR5IGJvdW5kIik7ZSgiRVJSX1NPQ0tFVF9CQURfUE9SVCIsIlBvcnQgc2hvdWxkIGJlID4gMCBhbmQgPCA2NTUzNiIpO2UoIkVSUl9TT0NLRVRfQkFEX1RZUEUiLCJCYWQgc29ja2V0IHR5cGUgc3BlY2lmaWVkLiBWYWxpZCB0eXBlcyBhcmU6IHVkcDQsIHVkcDYiKTsKZSgiRVJSX1NPQ0tFVF9DQU5OT1RfU0VORCIsIlVuYWJsZSB0byBzZW5kIGRhdGEiKTtlKCJFUlJfU09DS0VUX0NMT1NFRCIsIlNvY2tldCBpcyBjbG9zZWQiKTtlKCJFUlJfU09DS0VUX0RHUkFNX05PVF9SVU5OSU5HIiwiTm90IHJ1bm5pbmciKTtlKCJFUlJfU1RERVJSX0NMT1NFIiwicHJvY2Vzcy5zdGRlcnIgY2Fubm90IGJlIGNsb3NlZCIpO2UoIkVSUl9TVERPVVRfQ0xPU0UiLCJwcm9jZXNzLnN0ZG91dCBjYW5ub3QgYmUgY2xvc2VkIik7ZSgiRVJSX1NUUkVBTV9XUkFQIiwiU3RyZWFtIGhhcyBTdHJpbmdEZWNvZGVyIHNldCBvciBpcyBpbiBvYmplY3RNb2RlIik7ZSgiRVJSX1RMU19DRVJUX0FMVE5BTUVfSU5WQUxJRCIsIkhvc3RuYW1lL0lQIGRvZXMgbm90IG1hdGNoIGNlcnRpZmljYXRlJ3MgYWx0bmFtZXM6ICVzIik7ZSgiRVJSX1RMU19ESF9QQVJBTV9TSVpFIixmdW5jdGlvbihhKXtyZXR1cm4iREggcGFyYW1ldGVyIHNpemUgIithKyIgaXMgbGVzcyB0aGFuIDIwNDgifSk7CmUoIkVSUl9UTFNfSEFORFNIQUtFX1RJTUVPVVQiLCJUTFMgaGFuZHNoYWtlIHRpbWVvdXQiKTtlKCJFUlJfVExTX1JFTkVHT1RJQVRJT05fRkFJTEVEIiwiRmFpbGVkIHRvIHJlbmVnb3RpYXRlIik7ZSgiRVJSX1RMU19SRVFVSVJFRF9TRVJWRVJfTkFNRSIsJyJzZXJ2ZXJuYW1lIiBpcyByZXF1aXJlZCBwYXJhbWV0ZXIgZm9yIFNlcnZlci5hZGRDb250ZXh0Jyk7ZSgiRVJSX1RMU19TRVNTSU9OX0FUVEFDSyIsIlRTTCBzZXNzaW9uIHJlbmVnb3RpYXRpb24gYXR0YWNrIGRldGVjdGVkIik7ZSgiRVJSX1RSQU5TRk9STV9BTFJFQURZX1RSQU5TRk9STUlORyIsIkNhbGxpbmcgdHJhbnNmb3JtIGRvbmUgd2hlbiBzdGlsbCB0cmFuc2Zvcm1pbmciKTtlKCJFUlJfVFJBTlNGT1JNX1dJVEhfTEVOR1RIXzAiLCJDYWxsaW5nIHRyYW5zZm9ybSBkb25lIHdoZW4gd3JpdGFibGVTdGF0ZS5sZW5ndGggIT0gMCIpO2UoIkVSUl9VTktOT1dOX0VOQ09ESU5HIiwiVW5rbm93biBlbmNvZGluZzogJXMiKTsKZSgiRVJSX1VOS05PV05fU0lHTkFMIiwiVW5rbm93biBzaWduYWw6ICVzIik7ZSgiRVJSX1VOS05PV05fU1RESU5fVFlQRSIsIlVua25vd24gc3RkaW4gZmlsZSB0eXBlIik7ZSgiRVJSX1VOS05PV05fU1RSRUFNX1RZUEUiLCJVbmtub3duIHN0cmVhbSBmaWxlIHR5cGUiKTtlKCJFUlJfVjhCUkVBS0lURVJBVE9SIiwiRnVsbCBJQ1UgZGF0YSBub3QgaW5zdGFsbGVkLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL25vZGVqcy9ub2RlL3dpa2kvSW50bCIpfSk7USh4Yik7dmFyIG9hPUsoZnVuY3Rpb24oYyxhKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoYSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7YS5FTkNPRElOR19VVEY4PSJ1dGY4IjthLmFzc2VydEVuY29kaW5nPWZ1bmN0aW9uKGEpe2lmKGEmJiFKLkJ1ZmZlci5pc0VuY29kaW5nKGEpKXRocm93IG5ldyB4Yi5UeXBlRXJyb3IoIkVSUl9JTlZBTElEX09QVF9WQUxVRV9FTkNPRElORyIsYSk7fTthLnN0clRvRW5jb2Rpbmc9ZnVuY3Rpb24oYywKZCl7cmV0dXJuIGQmJmQhPT1hLkVOQ09ESU5HX1VURjg/ImJ1ZmZlciI9PT1kP25ldyBKLkJ1ZmZlcihjKToobmV3IEouQnVmZmVyKGMpKS50b1N0cmluZyhkKTpjfX0pO1Eob2EpO3ZhciAkYz1LKGZ1bmN0aW9uKGMsYSl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGEsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBiPXUuY29uc3RhbnRzLlNfSUZNVCxkPXUuY29uc3RhbnRzLlNfSUZESVIsZT11LmNvbnN0YW50cy5TX0lGUkVHLGY9dS5jb25zdGFudHMuU19JRkJMSyxnPXUuY29uc3RhbnRzLlNfSUZDSFIsaD11LmNvbnN0YW50cy5TX0lGTE5LLGs9dS5jb25zdGFudHMuU19JRklGTyx0PXUuY29uc3RhbnRzLlNfSUZTT0NLO2M9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7dGhpcy5uYW1lPSIiO3RoaXMubW9kZT0wfWEuYnVpbGQ9ZnVuY3Rpb24oYyxiKXt2YXIgZD1uZXcgYSxlPWMuZ2V0Tm9kZSgpLm1vZGU7ZC5uYW1lPW9hLnN0clRvRW5jb2RpbmcoYy5nZXROYW1lKCksYik7ZC5tb2RlPQplO3JldHVybiBkfTthLnByb3RvdHlwZS5fY2hlY2tNb2RlUHJvcGVydHk9ZnVuY3Rpb24oYSl7cmV0dXJuKHRoaXMubW9kZSZiKT09PWF9O2EucHJvdG90eXBlLmlzRGlyZWN0b3J5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoZWNrTW9kZVByb3BlcnR5KGQpfTthLnByb3RvdHlwZS5pc0ZpbGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hlY2tNb2RlUHJvcGVydHkoZSl9O2EucHJvdG90eXBlLmlzQmxvY2tEZXZpY2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hlY2tNb2RlUHJvcGVydHkoZil9O2EucHJvdG90eXBlLmlzQ2hhcmFjdGVyRGV2aWNlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoZWNrTW9kZVByb3BlcnR5KGcpfTthLnByb3RvdHlwZS5pc1N5bWJvbGljTGluaz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGVja01vZGVQcm9wZXJ0eShoKX07YS5wcm90b3R5cGUuaXNGSUZPPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoZWNrTW9kZVByb3BlcnR5KGspfTsKYS5wcm90b3R5cGUuaXNTb2NrZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hlY2tNb2RlUHJvcGVydHkodCl9O3JldHVybiBhfSgpO2EuRGlyZW50PWM7YS5kZWZhdWx0PWN9KTtRKCRjKTsiYWIiLnN1YnN0cigtMSk7dmFyIGdiPUsoZnVuY3Rpb24oYyxhKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoYSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7Yz0iZnVuY3Rpb24iPT09dHlwZW9mIHNldEltbWVkaWF0ZT9zZXRJbW1lZGlhdGUuYmluZChOKTpzZXRUaW1lb3V0LmJpbmQoTik7YS5kZWZhdWx0PWN9KTtRKGdiKTt2YXIgWT1LKGZ1bmN0aW9uKGMsYSl7ZnVuY3Rpb24gYigpe3ZhciBhPVZhfHx7fTthLmdldHVpZHx8KGEuZ2V0dWlkPWZ1bmN0aW9uKCl7cmV0dXJuIDB9KTthLmdldGdpZHx8KGEuZ2V0Z2lkPWZ1bmN0aW9uKCl7cmV0dXJuIDB9KTthLmN3ZHx8KGEuY3dkPWZ1bmN0aW9uKCl7cmV0dXJuIi8ifSk7YS5uZXh0VGlja3x8KGEubmV4dFRpY2s9Z2IuZGVmYXVsdCk7YS5lbWl0V2FybmluZ3x8CihhLmVtaXRXYXJuaW5nPWZ1bmN0aW9uKGEsYyl7Y29uc29sZS53YXJuKCIiK2MrKGM/IjogIjoiIikrYSl9KTthLmVudnx8KGEuZW52PXt9KTtyZXR1cm4gYX1PYmplY3QuZGVmaW5lUHJvcGVydHkoYSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7YS5jcmVhdGVQcm9jZXNzPWI7YS5kZWZhdWx0PWIoKX0pO1EoWSk7cWEucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobnVsbCk7eC5FdmVudEVtaXR0ZXI9eDt4LnVzaW5nRG9tYWlucz0hMTt4LnByb3RvdHlwZS5kb21haW49dm9pZCAwO3gucHJvdG90eXBlLl9ldmVudHM9dm9pZCAwO3gucHJvdG90eXBlLl9tYXhMaXN0ZW5lcnM9dm9pZCAwO3guZGVmYXVsdE1heExpc3RlbmVycz0xMDt4LmluaXQ9ZnVuY3Rpb24oKXt0aGlzLmRvbWFpbj1udWxsO3RoaXMuX2V2ZW50cyYmdGhpcy5fZXZlbnRzIT09T2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpLl9ldmVudHN8fCh0aGlzLl9ldmVudHM9bmV3IHFhLHRoaXMuX2V2ZW50c0NvdW50PTApOwp0aGlzLl9tYXhMaXN0ZW5lcnM9dGhpcy5fbWF4TGlzdGVuZXJzfHx2b2lkIDB9O3gucHJvdG90eXBlLnNldE1heExpc3RlbmVycz1mdW5jdGlvbihjKXtpZigibnVtYmVyIiE9PXR5cGVvZiBjfHwwPmN8fGlzTmFOKGMpKXRocm93IG5ldyBUeXBlRXJyb3IoJyJuIiBhcmd1bWVudCBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyJyk7dGhpcy5fbWF4TGlzdGVuZXJzPWM7cmV0dXJuIHRoaXN9O3gucHJvdG90eXBlLmdldE1heExpc3RlbmVycz1mdW5jdGlvbigpe3JldHVybiB2b2lkIDA9PT10aGlzLl9tYXhMaXN0ZW5lcnM/eC5kZWZhdWx0TWF4TGlzdGVuZXJzOnRoaXMuX21heExpc3RlbmVyc307eC5wcm90b3R5cGUuZW1pdD1mdW5jdGlvbihjKXt2YXIgYSxiLGQ9ImVycm9yIj09PWM7aWYoYT10aGlzLl9ldmVudHMpZD1kJiZudWxsPT1hLmVycm9yO2Vsc2UgaWYoIWQpcmV0dXJuITE7dmFyIGU9dGhpcy5kb21haW47aWYoZCl7YT1hcmd1bWVudHNbMV07aWYoZSlhfHwoYT1FcnJvcignVW5jYXVnaHQsIHVuc3BlY2lmaWVkICJlcnJvciIgZXZlbnQnKSksCmEuZG9tYWluRW1pdHRlcj10aGlzLGEuZG9tYWluPWUsYS5kb21haW5UaHJvd249ITEsZS5lbWl0KCJlcnJvciIsYSk7ZWxzZXtpZihhIGluc3RhbmNlb2YgRXJyb3IpdGhyb3cgYTtlPUVycm9yKCdVbmNhdWdodCwgdW5zcGVjaWZpZWQgImVycm9yIiBldmVudC4gKCcrYSsiKSIpO2UuY29udGV4dD1hO3Rocm93IGU7fXJldHVybiExfWU9YVtjXTtpZighZSlyZXR1cm4hMTthPSJmdW5jdGlvbiI9PT10eXBlb2YgZTt2YXIgZj1hcmd1bWVudHMubGVuZ3RoO3N3aXRjaChmKXtjYXNlIDE6aWYoYSllLmNhbGwodGhpcyk7ZWxzZSBmb3IoYT1lLmxlbmd0aCxlPXFiKGUsYSksZD0wO2Q8YTsrK2QpZVtkXS5jYWxsKHRoaXMpO2JyZWFrO2Nhc2UgMjpkPWFyZ3VtZW50c1sxXTtpZihhKWUuY2FsbCh0aGlzLGQpO2Vsc2UgZm9yKGE9ZS5sZW5ndGgsZT1xYihlLGEpLGY9MDtmPGE7KytmKWVbZl0uY2FsbCh0aGlzLGQpO2JyZWFrO2Nhc2UgMzpkPWFyZ3VtZW50c1sxXTtmPWFyZ3VtZW50c1syXTsKaWYoYSllLmNhbGwodGhpcyxkLGYpO2Vsc2UgZm9yKGE9ZS5sZW5ndGgsZT1xYihlLGEpLGI9MDtiPGE7KytiKWVbYl0uY2FsbCh0aGlzLGQsZik7YnJlYWs7Y2FzZSA0OmQ9YXJndW1lbnRzWzFdO2Y9YXJndW1lbnRzWzJdO2I9YXJndW1lbnRzWzNdO2lmKGEpZS5jYWxsKHRoaXMsZCxmLGIpO2Vsc2V7YT1lLmxlbmd0aDtlPXFiKGUsYSk7Zm9yKHZhciBnPTA7ZzxhOysrZyllW2ddLmNhbGwodGhpcyxkLGYsYil9YnJlYWs7ZGVmYXVsdDpkPUFycmF5KGYtMSk7Zm9yKGI9MTtiPGY7YisrKWRbYi0xXT1hcmd1bWVudHNbYl07aWYoYSllLmFwcGx5KHRoaXMsZCk7ZWxzZSBmb3IoYT1lLmxlbmd0aCxlPXFiKGUsYSksZj0wO2Y8YTsrK2YpZVtmXS5hcHBseSh0aGlzLGQpfXJldHVybiEwfTt4LnByb3RvdHlwZS5hZGRMaXN0ZW5lcj1mdW5jdGlvbihjLGEpe3JldHVybiBuZSh0aGlzLGMsYSwhMSl9O3gucHJvdG90eXBlLm9uPXgucHJvdG90eXBlLmFkZExpc3RlbmVyO3gucHJvdG90eXBlLnByZXBlbmRMaXN0ZW5lcj0KZnVuY3Rpb24oYyxhKXtyZXR1cm4gbmUodGhpcyxjLGEsITApfTt4LnByb3RvdHlwZS5vbmNlPWZ1bmN0aW9uKGMsYSl7aWYoImZ1bmN0aW9uIiE9PXR5cGVvZiBhKXRocm93IG5ldyBUeXBlRXJyb3IoJyJsaXN0ZW5lciIgYXJndW1lbnQgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7dGhpcy5vbihjLG9lKHRoaXMsYyxhKSk7cmV0dXJuIHRoaXN9O3gucHJvdG90eXBlLnByZXBlbmRPbmNlTGlzdGVuZXI9ZnVuY3Rpb24oYyxhKXtpZigiZnVuY3Rpb24iIT09dHlwZW9mIGEpdGhyb3cgbmV3IFR5cGVFcnJvcignImxpc3RlbmVyIiBhcmd1bWVudCBtdXN0IGJlIGEgZnVuY3Rpb24nKTt0aGlzLnByZXBlbmRMaXN0ZW5lcihjLG9lKHRoaXMsYyxhKSk7cmV0dXJuIHRoaXN9O3gucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyPWZ1bmN0aW9uKGMsYSl7dmFyIGI7aWYoImZ1bmN0aW9uIiE9PXR5cGVvZiBhKXRocm93IG5ldyBUeXBlRXJyb3IoJyJsaXN0ZW5lciIgYXJndW1lbnQgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7CnZhciBkPXRoaXMuX2V2ZW50cztpZighZClyZXR1cm4gdGhpczt2YXIgZT1kW2NdO2lmKCFlKXJldHVybiB0aGlzO2lmKGU9PT1hfHxlLmxpc3RlbmVyJiZlLmxpc3RlbmVyPT09YSkwPT09LS10aGlzLl9ldmVudHNDb3VudD90aGlzLl9ldmVudHM9bmV3IHFhOihkZWxldGUgZFtjXSxkLnJlbW92ZUxpc3RlbmVyJiZ0aGlzLmVtaXQoInJlbW92ZUxpc3RlbmVyIixjLGUubGlzdGVuZXJ8fGEpKTtlbHNlIGlmKCJmdW5jdGlvbiIhPT10eXBlb2YgZSl7dmFyIGY9LTE7Zm9yKGI9ZS5sZW5ndGg7MDxiLS07KWlmKGVbYl09PT1hfHxlW2JdLmxpc3RlbmVyJiZlW2JdLmxpc3RlbmVyPT09YSl7dmFyIGc9ZVtiXS5saXN0ZW5lcjtmPWI7YnJlYWt9aWYoMD5mKXJldHVybiB0aGlzO2lmKDE9PT1lLmxlbmd0aCl7ZVswXT12b2lkIDA7aWYoMD09PS0tdGhpcy5fZXZlbnRzQ291bnQpcmV0dXJuIHRoaXMuX2V2ZW50cz1uZXcgcWEsdGhpcztkZWxldGUgZFtjXX1lbHNle2I9ZisxO2Zvcih2YXIgaD0KZS5sZW5ndGg7YjxoO2YrPTEsYis9MSllW2ZdPWVbYl07ZS5wb3AoKX1kLnJlbW92ZUxpc3RlbmVyJiZ0aGlzLmVtaXQoInJlbW92ZUxpc3RlbmVyIixjLGd8fGEpfXJldHVybiB0aGlzfTt4LnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnM9ZnVuY3Rpb24oYyl7dmFyIGE9dGhpcy5fZXZlbnRzO2lmKCFhKXJldHVybiB0aGlzO2lmKCFhLnJlbW92ZUxpc3RlbmVyKXJldHVybiAwPT09YXJndW1lbnRzLmxlbmd0aD8odGhpcy5fZXZlbnRzPW5ldyBxYSx0aGlzLl9ldmVudHNDb3VudD0wKTphW2NdJiYoMD09PS0tdGhpcy5fZXZlbnRzQ291bnQ/dGhpcy5fZXZlbnRzPW5ldyBxYTpkZWxldGUgYVtjXSksdGhpcztpZigwPT09YXJndW1lbnRzLmxlbmd0aCl7YT1PYmplY3Qua2V5cyhhKTtmb3IodmFyIGI9MCxkO2I8YS5sZW5ndGg7KytiKWQ9YVtiXSwicmVtb3ZlTGlzdGVuZXIiIT09ZCYmdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoZCk7dGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoInJlbW92ZUxpc3RlbmVyIik7CnRoaXMuX2V2ZW50cz1uZXcgcWE7dGhpcy5fZXZlbnRzQ291bnQ9MDtyZXR1cm4gdGhpc31hPWFbY107aWYoImZ1bmN0aW9uIj09PXR5cGVvZiBhKXRoaXMucmVtb3ZlTGlzdGVuZXIoYyxhKTtlbHNlIGlmKGEpe2RvIHRoaXMucmVtb3ZlTGlzdGVuZXIoYyxhW2EubGVuZ3RoLTFdKTt3aGlsZShhWzBdKX1yZXR1cm4gdGhpc307eC5wcm90b3R5cGUubGlzdGVuZXJzPWZ1bmN0aW9uKGMpe3ZhciBhPXRoaXMuX2V2ZW50cztpZihhKWlmKGM9YVtjXSlpZigiZnVuY3Rpb24iPT09dHlwZW9mIGMpYz1bYy5saXN0ZW5lcnx8Y107ZWxzZXthPUFycmF5KGMubGVuZ3RoKTtmb3IodmFyIGI9MDtiPGEubGVuZ3RoOysrYilhW2JdPWNbYl0ubGlzdGVuZXJ8fGNbYl07Yz1hfWVsc2UgYz1bXTtlbHNlIGM9W107cmV0dXJuIGN9O3gubGlzdGVuZXJDb3VudD1mdW5jdGlvbihjLGEpe3JldHVybiJmdW5jdGlvbiI9PT10eXBlb2YgYy5saXN0ZW5lckNvdW50P2MubGlzdGVuZXJDb3VudChhKTpwZS5jYWxsKGMsCmEpfTt4LnByb3RvdHlwZS5saXN0ZW5lckNvdW50PXBlO3gucHJvdG90eXBlLmV2ZW50TmFtZXM9ZnVuY3Rpb24oKXtyZXR1cm4gMDx0aGlzLl9ldmVudHNDb3VudD9SZWZsZWN0Lm93bktleXModGhpcy5fZXZlbnRzKTpbXX07dmFyIHliPUsoZnVuY3Rpb24oYyxhKXt2YXIgYj1OJiZOLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGMsYil7YT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oYSxjKXthLl9fcHJvdG9fXz1jfXx8ZnVuY3Rpb24oYSxjKXtmb3IodmFyIGIgaW4gYyljLmhhc093blByb3BlcnR5KGIpJiYoYVtiXT1jW2JdKX07cmV0dXJuIGEoYyxiKX1yZXR1cm4gZnVuY3Rpb24oYyxiKXtmdW5jdGlvbiBkKCl7dGhpcy5jb25zdHJ1Y3Rvcj1jfWEoYyxiKTtjLnByb3RvdHlwZT1udWxsPT09Yj9PYmplY3QuY3JlYXRlKGIpOihkLnByb3RvdHlwZT1iLnByb3RvdHlwZSxuZXcgZCl9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLAoiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGQ9dS5jb25zdGFudHMuU19JRk1ULGU9dS5jb25zdGFudHMuU19JRkRJUixmPXUuY29uc3RhbnRzLlNfSUZSRUcsZz11LmNvbnN0YW50cy5TX0lGTE5LLGg9dS5jb25zdGFudHMuT19BUFBFTkQ7YS5TRVA9Ii8iO2M9ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYyhjLGIpe3ZvaWQgMD09PWImJihiPTQzOCk7dmFyIGQ9YS5jYWxsKHRoaXMpfHx0aGlzO2QudWlkPVkuZGVmYXVsdC5nZXR1aWQoKTtkLmdpZD1ZLmRlZmF1bHQuZ2V0Z2lkKCk7ZC5hdGltZT1uZXcgRGF0ZTtkLm10aW1lPW5ldyBEYXRlO2QuY3RpbWU9bmV3IERhdGU7ZC5wZXJtPTQzODtkLm1vZGU9ZjtkLm5saW5rPTE7ZC5wZXJtPWI7ZC5tb2RlfD1iO2QuaW5vPWM7cmV0dXJuIGR9YihjLGEpO2MucHJvdG90eXBlLmdldFN0cmluZz1mdW5jdGlvbihhKXt2b2lkIDA9PT1hJiYoYT0idXRmOCIpO3JldHVybiB0aGlzLmdldEJ1ZmZlcigpLnRvU3RyaW5nKGEpfTtjLnByb3RvdHlwZS5zZXRTdHJpbmc9CmZ1bmN0aW9uKGEpe3RoaXMuYnVmPUouYnVmZmVyRnJvbShhLCJ1dGY4Iik7dGhpcy50b3VjaCgpfTtjLnByb3RvdHlwZS5nZXRCdWZmZXI9ZnVuY3Rpb24oKXt0aGlzLmJ1Znx8dGhpcy5zZXRCdWZmZXIoSi5idWZmZXJBbGxvY1Vuc2FmZSgwKSk7cmV0dXJuIEouYnVmZmVyRnJvbSh0aGlzLmJ1Zil9O2MucHJvdG90eXBlLnNldEJ1ZmZlcj1mdW5jdGlvbihhKXt0aGlzLmJ1Zj1KLmJ1ZmZlckZyb20oYSk7dGhpcy50b3VjaCgpfTtjLnByb3RvdHlwZS5nZXRTaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYnVmP3RoaXMuYnVmLmxlbmd0aDowfTtjLnByb3RvdHlwZS5zZXRNb2RlUHJvcGVydHk9ZnVuY3Rpb24oYSl7dGhpcy5tb2RlPXRoaXMubW9kZSZ+ZHxhfTtjLnByb3RvdHlwZS5zZXRJc0ZpbGU9ZnVuY3Rpb24oKXt0aGlzLnNldE1vZGVQcm9wZXJ0eShmKX07Yy5wcm90b3R5cGUuc2V0SXNEaXJlY3Rvcnk9ZnVuY3Rpb24oKXt0aGlzLnNldE1vZGVQcm9wZXJ0eShlKX07Yy5wcm90b3R5cGUuc2V0SXNTeW1saW5rPQpmdW5jdGlvbigpe3RoaXMuc2V0TW9kZVByb3BlcnR5KGcpfTtjLnByb3RvdHlwZS5pc0ZpbGU9ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5tb2RlJmQpPT09Zn07Yy5wcm90b3R5cGUuaXNEaXJlY3Rvcnk9ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5tb2RlJmQpPT09ZX07Yy5wcm90b3R5cGUuaXNTeW1saW5rPWZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMubW9kZSZkKT09PWd9O2MucHJvdG90eXBlLm1ha2VTeW1saW5rPWZ1bmN0aW9uKGEpe3RoaXMuc3ltbGluaz1hO3RoaXMuc2V0SXNTeW1saW5rKCl9O2MucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGEsYyxiLGQpe3ZvaWQgMD09PWMmJihjPTApO3ZvaWQgMD09PWImJihiPWEubGVuZ3RoKTt2b2lkIDA9PT1kJiYoZD0wKTt0aGlzLmJ1Znx8KHRoaXMuYnVmPUouYnVmZmVyQWxsb2NVbnNhZmUoMCkpO2lmKGQrYj50aGlzLmJ1Zi5sZW5ndGgpe3ZhciBlPUouYnVmZmVyQWxsb2NVbnNhZmUoZCtiKTt0aGlzLmJ1Zi5jb3B5KGUsMCwwLHRoaXMuYnVmLmxlbmd0aCk7CnRoaXMuYnVmPWV9YS5jb3B5KHRoaXMuYnVmLGQsYyxjK2IpO3RoaXMudG91Y2goKTtyZXR1cm4gYn07Yy5wcm90b3R5cGUucmVhZD1mdW5jdGlvbihhLGMsYixkKXt2b2lkIDA9PT1jJiYoYz0wKTt2b2lkIDA9PT1iJiYoYj1hLmJ5dGVMZW5ndGgpO3ZvaWQgMD09PWQmJihkPTApO3RoaXMuYnVmfHwodGhpcy5idWY9Si5idWZmZXJBbGxvY1Vuc2FmZSgwKSk7Yj5hLmJ5dGVMZW5ndGgmJihiPWEuYnl0ZUxlbmd0aCk7YitkPnRoaXMuYnVmLmxlbmd0aCYmKGI9dGhpcy5idWYubGVuZ3RoLWQpO3RoaXMuYnVmLmNvcHkoYSxjLGQsZCtiKTtyZXR1cm4gYn07Yy5wcm90b3R5cGUudHJ1bmNhdGU9ZnVuY3Rpb24oYSl7dm9pZCAwPT09YSYmKGE9MCk7aWYoYSlpZih0aGlzLmJ1Znx8KHRoaXMuYnVmPUouYnVmZmVyQWxsb2NVbnNhZmUoMCkpLGE8PXRoaXMuYnVmLmxlbmd0aCl0aGlzLmJ1Zj10aGlzLmJ1Zi5zbGljZSgwLGEpO2Vsc2V7dmFyIGM9Si5idWZmZXJBbGxvY1Vuc2FmZSgwKTt0aGlzLmJ1Zi5jb3B5KGMpOwpjLmZpbGwoMCxhKX1lbHNlIHRoaXMuYnVmPUouYnVmZmVyQWxsb2NVbnNhZmUoMCk7dGhpcy50b3VjaCgpfTtjLnByb3RvdHlwZS5jaG1vZD1mdW5jdGlvbihhKXt0aGlzLnBlcm09YTt0aGlzLm1vZGU9dGhpcy5tb2RlJi01MTJ8YTt0aGlzLnRvdWNoKCl9O2MucHJvdG90eXBlLmNob3duPWZ1bmN0aW9uKGEsYyl7dGhpcy51aWQ9YTt0aGlzLmdpZD1jO3RoaXMudG91Y2goKX07Yy5wcm90b3R5cGUudG91Y2g9ZnVuY3Rpb24oKXt0aGlzLm10aW1lPW5ldyBEYXRlO3RoaXMuZW1pdCgiY2hhbmdlIix0aGlzKX07Yy5wcm90b3R5cGUuY2FuUmVhZD1mdW5jdGlvbihhLGMpe3ZvaWQgMD09PWEmJihhPVkuZGVmYXVsdC5nZXR1aWQoKSk7dm9pZCAwPT09YyYmKGM9WS5kZWZhdWx0LmdldGdpZCgpKTtyZXR1cm4gdGhpcy5wZXJtJjR8fGM9PT10aGlzLmdpZCYmdGhpcy5wZXJtJjMyfHxhPT09dGhpcy51aWQmJnRoaXMucGVybSYyNTY/ITA6ITF9O2MucHJvdG90eXBlLmNhbldyaXRlPWZ1bmN0aW9uKGEsCmMpe3ZvaWQgMD09PWEmJihhPVkuZGVmYXVsdC5nZXR1aWQoKSk7dm9pZCAwPT09YyYmKGM9WS5kZWZhdWx0LmdldGdpZCgpKTtyZXR1cm4gdGhpcy5wZXJtJjJ8fGM9PT10aGlzLmdpZCYmdGhpcy5wZXJtJjE2fHxhPT09dGhpcy51aWQmJnRoaXMucGVybSYxMjg/ITA6ITF9O2MucHJvdG90eXBlLmRlbD1mdW5jdGlvbigpe3RoaXMuZW1pdCgiZGVsZXRlIix0aGlzKX07Yy5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJue2lubzp0aGlzLmlubyx1aWQ6dGhpcy51aWQsZ2lkOnRoaXMuZ2lkLGF0aW1lOnRoaXMuYXRpbWUuZ2V0VGltZSgpLG10aW1lOnRoaXMubXRpbWUuZ2V0VGltZSgpLGN0aW1lOnRoaXMuY3RpbWUuZ2V0VGltZSgpLHBlcm06dGhpcy5wZXJtLG1vZGU6dGhpcy5tb2RlLG5saW5rOnRoaXMubmxpbmssc3ltbGluazp0aGlzLnN5bWxpbmssZGF0YTp0aGlzLmdldFN0cmluZygpfX07cmV0dXJuIGN9KHguRXZlbnRFbWl0dGVyKTthLk5vZGU9YztjPWZ1bmN0aW9uKGMpe2Z1bmN0aW9uIGQoYSwKYixkKXt2YXIgZT1jLmNhbGwodGhpcyl8fHRoaXM7ZS5jaGlsZHJlbj17fTtlLnN0ZXBzPVtdO2UuaW5vPTA7ZS5sZW5ndGg9MDtlLnZvbD1hO2UucGFyZW50PWI7ZS5zdGVwcz1iP2Iuc3RlcHMuY29uY2F0KFtkXSk6W2RdO3JldHVybiBlfWIoZCxjKTtkLnByb3RvdHlwZS5zZXROb2RlPWZ1bmN0aW9uKGEpe3RoaXMubm9kZT1hO3RoaXMuaW5vPWEuaW5vfTtkLnByb3RvdHlwZS5nZXROb2RlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZX07ZC5wcm90b3R5cGUuY3JlYXRlQ2hpbGQ9ZnVuY3Rpb24oYSxjKXt2b2lkIDA9PT1jJiYoYz10aGlzLnZvbC5jcmVhdGVOb2RlKCkpO3ZhciBiPW5ldyBkKHRoaXMudm9sLHRoaXMsYSk7Yi5zZXROb2RlKGMpO2MuaXNEaXJlY3RvcnkoKTt0aGlzLnNldENoaWxkKGEsYik7cmV0dXJuIGJ9O2QucHJvdG90eXBlLnNldENoaWxkPWZ1bmN0aW9uKGEsYyl7dm9pZCAwPT09YyYmKGM9bmV3IGQodGhpcy52b2wsdGhpcyxhKSk7dGhpcy5jaGlsZHJlblthXT0KYztjLnBhcmVudD10aGlzO3RoaXMubGVuZ3RoKys7dGhpcy5lbWl0KCJjaGlsZDphZGQiLGMsdGhpcyk7cmV0dXJuIGN9O2QucHJvdG90eXBlLmRlbGV0ZUNoaWxkPWZ1bmN0aW9uKGEpe2RlbGV0ZSB0aGlzLmNoaWxkcmVuW2EuZ2V0TmFtZSgpXTt0aGlzLmxlbmd0aC0tO3RoaXMuZW1pdCgiY2hpbGQ6ZGVsZXRlIixhLHRoaXMpfTtkLnByb3RvdHlwZS5nZXRDaGlsZD1mdW5jdGlvbihhKXtpZihPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLmNoaWxkcmVuLGEpKXJldHVybiB0aGlzLmNoaWxkcmVuW2FdfTtkLnByb3RvdHlwZS5nZXRQYXRoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RlcHMuam9pbihhLlNFUCl9O2QucHJvdG90eXBlLmdldE5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGVwc1t0aGlzLnN0ZXBzLmxlbmd0aC0xXX07ZC5wcm90b3R5cGUud2Fsaz1mdW5jdGlvbihhLGMsYil7dm9pZCAwPT09YyYmKGM9YS5sZW5ndGgpO3ZvaWQgMD09PWImJihiPTApOwppZihiPj1hLmxlbmd0aHx8Yj49YylyZXR1cm4gdGhpczt2YXIgZD10aGlzLmdldENoaWxkKGFbYl0pO3JldHVybiBkP2Qud2FsayhhLGMsYisxKTpudWxsfTtkLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm57c3RlcHM6dGhpcy5zdGVwcyxpbm86dGhpcy5pbm8sY2hpbGRyZW46T2JqZWN0LmtleXModGhpcy5jaGlsZHJlbil9fTtyZXR1cm4gZH0oeC5FdmVudEVtaXR0ZXIpO2EuTGluaz1jO2M9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsYyxiLGQpe3RoaXMucG9zaXRpb249MDt0aGlzLmxpbms9YTt0aGlzLm5vZGU9Yzt0aGlzLmZsYWdzPWI7dGhpcy5mZD1kfWEucHJvdG90eXBlLmdldFN0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGUuZ2V0U3RyaW5nKCl9O2EucHJvdG90eXBlLnNldFN0cmluZz1mdW5jdGlvbihhKXt0aGlzLm5vZGUuc2V0U3RyaW5nKGEpfTthLnByb3RvdHlwZS5nZXRCdWZmZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2RlLmdldEJ1ZmZlcigpfTsKYS5wcm90b3R5cGUuc2V0QnVmZmVyPWZ1bmN0aW9uKGEpe3RoaXMubm9kZS5zZXRCdWZmZXIoYSl9O2EucHJvdG90eXBlLmdldFNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2RlLmdldFNpemUoKX07YS5wcm90b3R5cGUudHJ1bmNhdGU9ZnVuY3Rpb24oYSl7dGhpcy5ub2RlLnRydW5jYXRlKGEpfTthLnByb3RvdHlwZS5zZWVrVG89ZnVuY3Rpb24oYSl7dGhpcy5wb3NpdGlvbj1hfTthLnByb3RvdHlwZS5zdGF0cz1mdW5jdGlvbigpe3JldHVybiBlYi5kZWZhdWx0LmJ1aWxkKHRoaXMubm9kZSl9O2EucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGEsYyxiLGQpe3ZvaWQgMD09PWMmJihjPTApO3ZvaWQgMD09PWImJihiPWEubGVuZ3RoKTsibnVtYmVyIiE9PXR5cGVvZiBkJiYoZD10aGlzLnBvc2l0aW9uKTt0aGlzLmZsYWdzJmgmJihkPXRoaXMuZ2V0U2l6ZSgpKTthPXRoaXMubm9kZS53cml0ZShhLGMsYixkKTt0aGlzLnBvc2l0aW9uPWQrYTtyZXR1cm4gYX07YS5wcm90b3R5cGUucmVhZD0KZnVuY3Rpb24oYSxjLGIsZCl7dm9pZCAwPT09YyYmKGM9MCk7dm9pZCAwPT09YiYmKGI9YS5ieXRlTGVuZ3RoKTsibnVtYmVyIiE9PXR5cGVvZiBkJiYoZD10aGlzLnBvc2l0aW9uKTthPXRoaXMubm9kZS5yZWFkKGEsYyxiLGQpO3RoaXMucG9zaXRpb249ZCthO3JldHVybiBhfTthLnByb3RvdHlwZS5jaG1vZD1mdW5jdGlvbihhKXt0aGlzLm5vZGUuY2htb2QoYSl9O2EucHJvdG90eXBlLmNob3duPWZ1bmN0aW9uKGEsYyl7dGhpcy5ub2RlLmNob3duKGEsYyl9O3JldHVybiBhfSgpO2EuRmlsZT1jfSk7USh5Yik7dmFyIFdnPXliLk5vZGUsbWY9SyhmdW5jdGlvbihjLGEpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTthLmRlZmF1bHQ9ZnVuY3Rpb24oYSxjLGUpe3ZhciBiPXNldFRpbWVvdXQuYXBwbHkobnVsbCxhcmd1bWVudHMpO2ImJiJvYmplY3QiPT09dHlwZW9mIGImJiJmdW5jdGlvbiI9PT10eXBlb2YgYi51bnJlZiYmYi51bnJlZigpOwpyZXR1cm4gYn19KTtRKG1mKTtMYS5wcm90b3R5cGUucHVzaD1mdW5jdGlvbihjKXtjPXtkYXRhOmMsbmV4dDpudWxsfTswPHRoaXMubGVuZ3RoP3RoaXMudGFpbC5uZXh0PWM6dGhpcy5oZWFkPWM7dGhpcy50YWlsPWM7Kyt0aGlzLmxlbmd0aH07TGEucHJvdG90eXBlLnVuc2hpZnQ9ZnVuY3Rpb24oYyl7Yz17ZGF0YTpjLG5leHQ6dGhpcy5oZWFkfTswPT09dGhpcy5sZW5ndGgmJih0aGlzLnRhaWw9Yyk7dGhpcy5oZWFkPWM7Kyt0aGlzLmxlbmd0aH07TGEucHJvdG90eXBlLnNoaWZ0PWZ1bmN0aW9uKCl7aWYoMCE9PXRoaXMubGVuZ3RoKXt2YXIgYz10aGlzLmhlYWQuZGF0YTt0aGlzLmhlYWQ9MT09PXRoaXMubGVuZ3RoP3RoaXMudGFpbD1udWxsOnRoaXMuaGVhZC5uZXh0Oy0tdGhpcy5sZW5ndGg7cmV0dXJuIGN9fTtMYS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLmhlYWQ9dGhpcy50YWlsPW51bGw7dGhpcy5sZW5ndGg9MH07TGEucHJvdG90eXBlLmpvaW49ZnVuY3Rpb24oYyl7aWYoMD09PQp0aGlzLmxlbmd0aClyZXR1cm4iIjtmb3IodmFyIGE9dGhpcy5oZWFkLGI9IiIrYS5kYXRhO2E9YS5uZXh0OyliKz1jK2EuZGF0YTtyZXR1cm4gYn07TGEucHJvdG90eXBlLmNvbmNhdD1mdW5jdGlvbihjKXtpZigwPT09dGhpcy5sZW5ndGgpcmV0dXJuIGwuYWxsb2MoMCk7aWYoMT09PXRoaXMubGVuZ3RoKXJldHVybiB0aGlzLmhlYWQuZGF0YTtjPWwuYWxsb2NVbnNhZmUoYz4+PjApO2Zvcih2YXIgYT10aGlzLmhlYWQsYj0wO2E7KWEuZGF0YS5jb3B5KGMsYiksYis9YS5kYXRhLmxlbmd0aCxhPWEubmV4dDtyZXR1cm4gY307dmFyIGRnPWwuaXNFbmNvZGluZ3x8ZnVuY3Rpb24oYyl7c3dpdGNoKGMmJmMudG9Mb3dlckNhc2UoKSl7Y2FzZSAiaGV4IjpjYXNlICJ1dGY4IjpjYXNlICJ1dGYtOCI6Y2FzZSAiYXNjaWkiOmNhc2UgImJpbmFyeSI6Y2FzZSAiYmFzZTY0IjpjYXNlICJ1Y3MyIjpjYXNlICJ1Y3MtMiI6Y2FzZSAidXRmMTZsZSI6Y2FzZSAidXRmLTE2bGUiOmNhc2UgInJhdyI6cmV0dXJuITA7CmRlZmF1bHQ6cmV0dXJuITF9fTtyYi5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oYyl7Zm9yKHZhciBhPSIiO3RoaXMuY2hhckxlbmd0aDspe2E9Yy5sZW5ndGg+PXRoaXMuY2hhckxlbmd0aC10aGlzLmNoYXJSZWNlaXZlZD90aGlzLmNoYXJMZW5ndGgtdGhpcy5jaGFyUmVjZWl2ZWQ6Yy5sZW5ndGg7Yy5jb3B5KHRoaXMuY2hhckJ1ZmZlcix0aGlzLmNoYXJSZWNlaXZlZCwwLGEpO3RoaXMuY2hhclJlY2VpdmVkKz1hO2lmKHRoaXMuY2hhclJlY2VpdmVkPHRoaXMuY2hhckxlbmd0aClyZXR1cm4iIjtjPWMuc2xpY2UoYSxjLmxlbmd0aCk7YT10aGlzLmNoYXJCdWZmZXIuc2xpY2UoMCx0aGlzLmNoYXJMZW5ndGgpLnRvU3RyaW5nKHRoaXMuZW5jb2RpbmcpO3ZhciBiPWEuY2hhckNvZGVBdChhLmxlbmd0aC0xKTtpZig1NTI5Njw9YiYmNTYzMTk+PWIpdGhpcy5jaGFyTGVuZ3RoKz10aGlzLnN1cnJvZ2F0ZVNpemUsYT0iIjtlbHNle3RoaXMuY2hhclJlY2VpdmVkPXRoaXMuY2hhckxlbmd0aD0KMDtpZigwPT09Yy5sZW5ndGgpcmV0dXJuIGE7YnJlYWt9fXRoaXMuZGV0ZWN0SW5jb21wbGV0ZUNoYXIoYyk7dmFyIGQ9Yy5sZW5ndGg7dGhpcy5jaGFyTGVuZ3RoJiYoYy5jb3B5KHRoaXMuY2hhckJ1ZmZlciwwLGMubGVuZ3RoLXRoaXMuY2hhclJlY2VpdmVkLGQpLGQtPXRoaXMuY2hhclJlY2VpdmVkKTthKz1jLnRvU3RyaW5nKHRoaXMuZW5jb2RpbmcsMCxkKTtkPWEubGVuZ3RoLTE7Yj1hLmNoYXJDb2RlQXQoZCk7cmV0dXJuIDU1Mjk2PD1iJiY1NjMxOT49Yj8oYj10aGlzLnN1cnJvZ2F0ZVNpemUsdGhpcy5jaGFyTGVuZ3RoKz1iLHRoaXMuY2hhclJlY2VpdmVkKz1iLHRoaXMuY2hhckJ1ZmZlci5jb3B5KHRoaXMuY2hhckJ1ZmZlcixiLDAsYiksYy5jb3B5KHRoaXMuY2hhckJ1ZmZlciwwLDAsYiksYS5zdWJzdHJpbmcoMCxkKSk6YX07cmIucHJvdG90eXBlLmRldGVjdEluY29tcGxldGVDaGFyPWZ1bmN0aW9uKGMpe2Zvcih2YXIgYT0zPD1jLmxlbmd0aD8zOmMubGVuZ3RoOzA8CmE7YS0tKXt2YXIgYj1jW2MubGVuZ3RoLWFdO2lmKDE9PWEmJjY9PWI+PjUpe3RoaXMuY2hhckxlbmd0aD0yO2JyZWFrfWlmKDI+PWEmJjE0PT1iPj40KXt0aGlzLmNoYXJMZW5ndGg9MzticmVha31pZigzPj1hJiYzMD09Yj4+Myl7dGhpcy5jaGFyTGVuZ3RoPTQ7YnJlYWt9fXRoaXMuY2hhclJlY2VpdmVkPWF9O3JiLnByb3RvdHlwZS5lbmQ9ZnVuY3Rpb24oYyl7dmFyIGE9IiI7YyYmYy5sZW5ndGgmJihhPXRoaXMud3JpdGUoYykpO3RoaXMuY2hhclJlY2VpdmVkJiYoYz10aGlzLmVuY29kaW5nLGErPXRoaXMuY2hhckJ1ZmZlci5zbGljZSgwLHRoaXMuY2hhclJlY2VpdmVkKS50b1N0cmluZyhjKSk7cmV0dXJuIGF9O3kuUmVhZGFibGVTdGF0ZT1xZTt2YXIgej1TZCgic3RyZWFtIik7emEoeSx4KTt5LnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKGMsYSl7dmFyIGI9dGhpcy5fcmVhZGFibGVTdGF0ZTtiLm9iamVjdE1vZGV8fCJzdHJpbmciIT09dHlwZW9mIGN8fChhPWF8fGIuZGVmYXVsdEVuY29kaW5nLAphIT09Yi5lbmNvZGluZyYmKGM9bC5mcm9tKGMsYSksYT0iIikpO3JldHVybiByZSh0aGlzLGIsYyxhLCExKX07eS5wcm90b3R5cGUudW5zaGlmdD1mdW5jdGlvbihjKXtyZXR1cm4gcmUodGhpcyx0aGlzLl9yZWFkYWJsZVN0YXRlLGMsIiIsITApfTt5LnByb3RvdHlwZS5pc1BhdXNlZD1mdW5jdGlvbigpe3JldHVybiExPT09dGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nfTt5LnByb3RvdHlwZS5zZXRFbmNvZGluZz1mdW5jdGlvbihjKXt0aGlzLl9yZWFkYWJsZVN0YXRlLmRlY29kZXI9bmV3IHJiKGMpO3RoaXMuX3JlYWRhYmxlU3RhdGUuZW5jb2Rpbmc9YztyZXR1cm4gdGhpc307eS5wcm90b3R5cGUucmVhZD1mdW5jdGlvbihjKXt6KCJyZWFkIixjKTtjPXBhcnNlSW50KGMsMTApO3ZhciBhPXRoaXMuX3JlYWRhYmxlU3RhdGUsYj1jOzAhPT1jJiYoYS5lbWl0dGVkUmVhZGFibGU9ITEpO2lmKDA9PT1jJiZhLm5lZWRSZWFkYWJsZSYmKGEubGVuZ3RoPj1hLmhpZ2hXYXRlck1hcmt8fAphLmVuZGVkKSlyZXR1cm4geigicmVhZDogZW1pdFJlYWRhYmxlIixhLmxlbmd0aCxhLmVuZGVkKSwwPT09YS5sZW5ndGgmJmEuZW5kZWQ/SmModGhpcyk6UWIodGhpcyksbnVsbDtjPXNlKGMsYSk7aWYoMD09PWMmJmEuZW5kZWQpcmV0dXJuIDA9PT1hLmxlbmd0aCYmSmModGhpcyksbnVsbDt2YXIgZD1hLm5lZWRSZWFkYWJsZTt6KCJuZWVkIHJlYWRhYmxlIixkKTtpZigwPT09YS5sZW5ndGh8fGEubGVuZ3RoLWM8YS5oaWdoV2F0ZXJNYXJrKWQ9ITAseigibGVuZ3RoIGxlc3MgdGhhbiB3YXRlcm1hcmsiLGQpO2EuZW5kZWR8fGEucmVhZGluZz96KCJyZWFkaW5nIG9yIGVuZGVkIiwhMSk6ZCYmKHooImRvIHJlYWQiKSxhLnJlYWRpbmc9ITAsYS5zeW5jPSEwLDA9PT1hLmxlbmd0aCYmKGEubmVlZFJlYWRhYmxlPSEwKSx0aGlzLl9yZWFkKGEuaGlnaFdhdGVyTWFyayksYS5zeW5jPSExLGEucmVhZGluZ3x8KGM9c2UoYixhKSkpO2Q9MDxjP3VlKGMsYSk6bnVsbDtudWxsPT09ZD8oYS5uZWVkUmVhZGFibGU9CiEwLGM9MCk6YS5sZW5ndGgtPWM7MD09PWEubGVuZ3RoJiYoYS5lbmRlZHx8KGEubmVlZFJlYWRhYmxlPSEwKSxiIT09YyYmYS5lbmRlZCYmSmModGhpcykpO251bGwhPT1kJiZ0aGlzLmVtaXQoImRhdGEiLGQpO3JldHVybiBkfTt5LnByb3RvdHlwZS5fcmVhZD1mdW5jdGlvbigpe3RoaXMuZW1pdCgiZXJyb3IiLEVycm9yKCJub3QgaW1wbGVtZW50ZWQiKSl9O3kucHJvdG90eXBlLnBpcGU9ZnVuY3Rpb24oYyxhKXtmdW5jdGlvbiBiKGEpe3ooIm9udW5waXBlIik7YT09PXEmJmUoKX1mdW5jdGlvbiBkKCl7eigib25lbmQiKTtjLmVuZCgpfWZ1bmN0aW9uIGUoKXt6KCJjbGVhbnVwIik7Yy5yZW1vdmVMaXN0ZW5lcigiY2xvc2UiLGgpO2MucmVtb3ZlTGlzdGVuZXIoImZpbmlzaCIsayk7Yy5yZW1vdmVMaXN0ZW5lcigiZHJhaW4iLHIpO2MucmVtb3ZlTGlzdGVuZXIoImVycm9yIixnKTtjLnJlbW92ZUxpc3RlbmVyKCJ1bnBpcGUiLGIpO3EucmVtb3ZlTGlzdGVuZXIoImVuZCIsZCk7cS5yZW1vdmVMaXN0ZW5lcigiZW5kIiwKZSk7cS5yZW1vdmVMaXN0ZW5lcigiZGF0YSIsZik7bT0hMDshbC5hd2FpdERyYWlufHxjLl93cml0YWJsZVN0YXRlJiYhYy5fd3JpdGFibGVTdGF0ZS5uZWVkRHJhaW58fHIoKX1mdW5jdGlvbiBmKGEpe3ooIm9uZGF0YSIpO3A9ITE7ITEhPT1jLndyaXRlKGEpfHxwfHwoKDE9PT1sLnBpcGVzQ291bnQmJmwucGlwZXM9PT1jfHwxPGwucGlwZXNDb3VudCYmLTEhPT12ZShsLnBpcGVzLGMpKSYmIW0mJih6KCJmYWxzZSB3cml0ZSByZXNwb25zZSwgcGF1c2UiLHEuX3JlYWRhYmxlU3RhdGUuYXdhaXREcmFpbikscS5fcmVhZGFibGVTdGF0ZS5hd2FpdERyYWluKysscD0hMCkscS5wYXVzZSgpKX1mdW5jdGlvbiBnKGEpe3ooIm9uZXJyb3IiLGEpO3QoKTtjLnJlbW92ZUxpc3RlbmVyKCJlcnJvciIsZyk7MD09PWMubGlzdGVuZXJzKCJlcnJvciIpLmxlbmd0aCYmYy5lbWl0KCJlcnJvciIsYSl9ZnVuY3Rpb24gaCgpe2MucmVtb3ZlTGlzdGVuZXIoImZpbmlzaCIsayk7dCgpfWZ1bmN0aW9uIGsoKXt6KCJvbmZpbmlzaCIpOwpjLnJlbW92ZUxpc3RlbmVyKCJjbG9zZSIsaCk7dCgpfWZ1bmN0aW9uIHQoKXt6KCJ1bnBpcGUiKTtxLnVucGlwZShjKX12YXIgcT10aGlzLGw9dGhpcy5fcmVhZGFibGVTdGF0ZTtzd2l0Y2gobC5waXBlc0NvdW50KXtjYXNlIDA6bC5waXBlcz1jO2JyZWFrO2Nhc2UgMTpsLnBpcGVzPVtsLnBpcGVzLGNdO2JyZWFrO2RlZmF1bHQ6bC5waXBlcy5wdXNoKGMpfWwucGlwZXNDb3VudCs9MTt6KCJwaXBlIGNvdW50PSVkIG9wdHM9JWoiLGwucGlwZXNDb3VudCxhKTthPWEmJiExPT09YS5lbmQ/ZTpkO2lmKGwuZW5kRW1pdHRlZClYKGEpO2Vsc2UgcS5vbmNlKCJlbmQiLGEpO2Mub24oInVucGlwZSIsYik7dmFyIHI9amcocSk7Yy5vbigiZHJhaW4iLHIpO3ZhciBtPSExLHA9ITE7cS5vbigiZGF0YSIsZik7aGcoYywiZXJyb3IiLGcpO2Mub25jZSgiY2xvc2UiLGgpO2Mub25jZSgiZmluaXNoIixrKTtjLmVtaXQoInBpcGUiLHEpO2wuZmxvd2luZ3x8KHooInBpcGUgcmVzdW1lIikscS5yZXN1bWUoKSk7CnJldHVybiBjfTt5LnByb3RvdHlwZS51bnBpcGU9ZnVuY3Rpb24oYyl7dmFyIGE9dGhpcy5fcmVhZGFibGVTdGF0ZTtpZigwPT09YS5waXBlc0NvdW50KXJldHVybiB0aGlzO2lmKDE9PT1hLnBpcGVzQ291bnQpe2lmKGMmJmMhPT1hLnBpcGVzKXJldHVybiB0aGlzO2N8fChjPWEucGlwZXMpO2EucGlwZXM9bnVsbDthLnBpcGVzQ291bnQ9MDthLmZsb3dpbmc9ITE7YyYmYy5lbWl0KCJ1bnBpcGUiLHRoaXMpO3JldHVybiB0aGlzfWlmKCFjKXtjPWEucGlwZXM7dmFyIGI9YS5waXBlc0NvdW50O2EucGlwZXM9bnVsbDthLnBpcGVzQ291bnQ9MDthLmZsb3dpbmc9ITE7Zm9yKGE9MDthPGI7YSsrKWNbYV0uZW1pdCgidW5waXBlIix0aGlzKTtyZXR1cm4gdGhpc31iPXZlKGEucGlwZXMsYyk7aWYoLTE9PT1iKXJldHVybiB0aGlzO2EucGlwZXMuc3BsaWNlKGIsMSk7LS1hLnBpcGVzQ291bnQ7MT09PWEucGlwZXNDb3VudCYmKGEucGlwZXM9YS5waXBlc1swXSk7Yy5lbWl0KCJ1bnBpcGUiLAp0aGlzKTtyZXR1cm4gdGhpc307eS5wcm90b3R5cGUub249ZnVuY3Rpb24oYyxhKXthPXgucHJvdG90eXBlLm9uLmNhbGwodGhpcyxjLGEpOyJkYXRhIj09PWM/ITEhPT10aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmcmJnRoaXMucmVzdW1lKCk6InJlYWRhYmxlIj09PWMmJihjPXRoaXMuX3JlYWRhYmxlU3RhdGUsYy5lbmRFbWl0dGVkfHxjLnJlYWRhYmxlTGlzdGVuaW5nfHwoYy5yZWFkYWJsZUxpc3RlbmluZz1jLm5lZWRSZWFkYWJsZT0hMCxjLmVtaXR0ZWRSZWFkYWJsZT0hMSxjLnJlYWRpbmc/Yy5sZW5ndGgmJlFiKHRoaXMpOlgoa2csdGhpcykpKTtyZXR1cm4gYX07eS5wcm90b3R5cGUuYWRkTGlzdGVuZXI9eS5wcm90b3R5cGUub247eS5wcm90b3R5cGUucmVzdW1lPWZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5fcmVhZGFibGVTdGF0ZTtjLmZsb3dpbmd8fCh6KCJyZXN1bWUiKSxjLmZsb3dpbmc9ITAsYy5yZXN1bWVTY2hlZHVsZWR8fChjLnJlc3VtZVNjaGVkdWxlZD0hMCxYKGxnLAp0aGlzLGMpKSk7cmV0dXJuIHRoaXN9O3kucHJvdG90eXBlLnBhdXNlPWZ1bmN0aW9uKCl7eigiY2FsbCBwYXVzZSBmbG93aW5nPSVqIix0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmcpOyExIT09dGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nJiYoeigicGF1c2UiKSx0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmc9ITEsdGhpcy5lbWl0KCJwYXVzZSIpKTtyZXR1cm4gdGhpc307eS5wcm90b3R5cGUud3JhcD1mdW5jdGlvbihjKXt2YXIgYT10aGlzLl9yZWFkYWJsZVN0YXRlLGI9ITEsZD10aGlzO2Mub24oImVuZCIsZnVuY3Rpb24oKXt6KCJ3cmFwcGVkIGVuZCIpO2lmKGEuZGVjb2RlciYmIWEuZW5kZWQpe3ZhciBjPWEuZGVjb2Rlci5lbmQoKTtjJiZjLmxlbmd0aCYmZC5wdXNoKGMpfWQucHVzaChudWxsKX0pO2Mub24oImRhdGEiLGZ1bmN0aW9uKGUpe3ooIndyYXBwZWQgZGF0YSIpO2EuZGVjb2RlciYmKGU9YS5kZWNvZGVyLndyaXRlKGUpKTthLm9iamVjdE1vZGUmJihudWxsPT09CmV8fHZvaWQgMD09PWUpfHwhKGEub2JqZWN0TW9kZXx8ZSYmZS5sZW5ndGgpfHxkLnB1c2goZSl8fChiPSEwLGMucGF1c2UoKSl9KTtmb3IodmFyIGUgaW4gYyl2b2lkIDA9PT10aGlzW2VdJiYiZnVuY3Rpb24iPT09dHlwZW9mIGNbZV0mJih0aGlzW2VdPWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBjW2FdLmFwcGx5KGMsYXJndW1lbnRzKX19KGUpKTtuZyhbImVycm9yIiwiY2xvc2UiLCJkZXN0cm95IiwicGF1c2UiLCJyZXN1bWUiXSxmdW5jdGlvbihhKXtjLm9uKGEsZC5lbWl0LmJpbmQoZCxhKSl9KTtkLl9yZWFkPWZ1bmN0aW9uKGEpe3ooIndyYXBwZWQgX3JlYWQiLGEpO2ImJihiPSExLGMucmVzdW1lKCkpfTtyZXR1cm4gZH07eS5fZnJvbUxpc3Q9dWU7TC5Xcml0YWJsZVN0YXRlPUtjO3phKEwseCk7S2MucHJvdG90eXBlLmdldEJ1ZmZlcj1mdW5jdGlvbigpe2Zvcih2YXIgYz10aGlzLmJ1ZmZlcmVkUmVxdWVzdCxhPVtdO2M7KWEucHVzaChjKSxjPWMubmV4dDsKcmV0dXJuIGF9O0wucHJvdG90eXBlLnBpcGU9ZnVuY3Rpb24oKXt0aGlzLmVtaXQoImVycm9yIixFcnJvcigiQ2Fubm90IHBpcGUsIG5vdCByZWFkYWJsZSIpKX07TC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oYyxhLGIpe3ZhciBkPXRoaXMuX3dyaXRhYmxlU3RhdGUsZT0hMTsiZnVuY3Rpb24iPT09dHlwZW9mIGEmJihiPWEsYT1udWxsKTtsLmlzQnVmZmVyKGMpP2E9ImJ1ZmZlciI6YXx8KGE9ZC5kZWZhdWx0RW5jb2RpbmcpOyJmdW5jdGlvbiIhPT10eXBlb2YgYiYmKGI9b2cpO2lmKGQuZW5kZWQpZD1iLGM9RXJyb3IoIndyaXRlIGFmdGVyIGVuZCIpLHRoaXMuZW1pdCgiZXJyb3IiLGMpLFgoZCxjKTtlbHNle3ZhciBmPWIsZz0hMCxoPSExO251bGw9PT1jP2g9bmV3IFR5cGVFcnJvcigiTWF5IG5vdCB3cml0ZSBudWxsIHZhbHVlcyB0byBzdHJlYW0iKTpsLmlzQnVmZmVyKGMpfHwic3RyaW5nIj09PXR5cGVvZiBjfHx2b2lkIDA9PT1jfHxkLm9iamVjdE1vZGV8fChoPW5ldyBUeXBlRXJyb3IoIkludmFsaWQgbm9uLXN0cmluZy9idWZmZXIgY2h1bmsiKSk7CmgmJih0aGlzLmVtaXQoImVycm9yIixoKSxYKGYsaCksZz0hMSk7ZyYmKGQucGVuZGluZ2NiKyssZT1hLGQub2JqZWN0TW9kZXx8ITE9PT1kLmRlY29kZVN0cmluZ3N8fCJzdHJpbmciIT09dHlwZW9mIGN8fChjPWwuZnJvbShjLGUpKSxsLmlzQnVmZmVyKGMpJiYoZT0iYnVmZmVyIiksZj1kLm9iamVjdE1vZGU/MTpjLmxlbmd0aCxkLmxlbmd0aCs9ZixhPWQubGVuZ3RoPGQuaGlnaFdhdGVyTWFyayxhfHwoZC5uZWVkRHJhaW49ITApLGQud3JpdGluZ3x8ZC5jb3JrZWQ/KGY9ZC5sYXN0QnVmZmVyZWRSZXF1ZXN0LGQubGFzdEJ1ZmZlcmVkUmVxdWVzdD1uZXcgcGcoYyxlLGIpLGY/Zi5uZXh0PWQubGFzdEJ1ZmZlcmVkUmVxdWVzdDpkLmJ1ZmZlcmVkUmVxdWVzdD1kLmxhc3RCdWZmZXJlZFJlcXVlc3QsZC5idWZmZXJlZFJlcXVlc3RDb3VudCs9MSk6TGModGhpcyxkLCExLGYsYyxlLGIpLGU9YSl9cmV0dXJuIGV9O0wucHJvdG90eXBlLmNvcms9ZnVuY3Rpb24oKXt0aGlzLl93cml0YWJsZVN0YXRlLmNvcmtlZCsrfTsKTC5wcm90b3R5cGUudW5jb3JrPWZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5fd3JpdGFibGVTdGF0ZTtjLmNvcmtlZCYmKGMuY29ya2VkLS0sYy53cml0aW5nfHxjLmNvcmtlZHx8Yy5maW5pc2hlZHx8Yy5idWZmZXJQcm9jZXNzaW5nfHwhYy5idWZmZXJlZFJlcXVlc3R8fHhlKHRoaXMsYykpfTtMLnByb3RvdHlwZS5zZXREZWZhdWx0RW5jb2Rpbmc9ZnVuY3Rpb24oYyl7InN0cmluZyI9PT10eXBlb2YgYyYmKGM9Yy50b0xvd2VyQ2FzZSgpKTtpZighKC0xPCJoZXggdXRmOCB1dGYtOCBhc2NpaSBiaW5hcnkgYmFzZTY0IHVjczIgdWNzLTIgdXRmMTZsZSB1dGYtMTZsZSByYXciLnNwbGl0KCIgIikuaW5kZXhPZigoYysiIikudG9Mb3dlckNhc2UoKSkpKXRocm93IG5ldyBUeXBlRXJyb3IoIlVua25vd24gZW5jb2Rpbmc6ICIrYyk7dGhpcy5fd3JpdGFibGVTdGF0ZS5kZWZhdWx0RW5jb2Rpbmc9YztyZXR1cm4gdGhpc307TC5wcm90b3R5cGUuX3dyaXRlPWZ1bmN0aW9uKGMsYSxiKXtiKEVycm9yKCJub3QgaW1wbGVtZW50ZWQiKSl9OwpMLnByb3RvdHlwZS5fd3JpdGV2PW51bGw7TC5wcm90b3R5cGUuZW5kPWZ1bmN0aW9uKGMsYSxiKXt2YXIgZD10aGlzLl93cml0YWJsZVN0YXRlOyJmdW5jdGlvbiI9PT10eXBlb2YgYz8oYj1jLGE9Yz1udWxsKToiZnVuY3Rpb24iPT09dHlwZW9mIGEmJihiPWEsYT1udWxsKTtudWxsIT09YyYmdm9pZCAwIT09YyYmdGhpcy53cml0ZShjLGEpO2QuY29ya2VkJiYoZC5jb3JrZWQ9MSx0aGlzLnVuY29yaygpKTtpZighZC5lbmRpbmcmJiFkLmZpbmlzaGVkKXtjPWI7ZC5lbmRpbmc9ITA7QWUodGhpcyxkKTtpZihjKWlmKGQuZmluaXNoZWQpWChjKTtlbHNlIHRoaXMub25jZSgiZmluaXNoIixjKTtkLmVuZGVkPSEwO3RoaXMud3JpdGFibGU9ITF9fTt6YShVLHkpO2Zvcih2YXIgbmY9T2JqZWN0LmtleXMoTC5wcm90b3R5cGUpLGFkPTA7YWQ8bmYubGVuZ3RoO2FkKyspe3ZhciBiZD1uZlthZF07VS5wcm90b3R5cGVbYmRdfHwoVS5wcm90b3R5cGVbYmRdPUwucHJvdG90eXBlW2JkXSl9emEoYmEsClUpO2JhLnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKGMsYSl7dGhpcy5fdHJhbnNmb3JtU3RhdGUubmVlZFRyYW5zZm9ybT0hMTtyZXR1cm4gVS5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMsYyxhKX07YmEucHJvdG90eXBlLl90cmFuc2Zvcm09ZnVuY3Rpb24oKXt0aHJvdyBFcnJvcigiTm90IGltcGxlbWVudGVkIik7fTtiYS5wcm90b3R5cGUuX3dyaXRlPWZ1bmN0aW9uKGMsYSxiKXt2YXIgZD10aGlzLl90cmFuc2Zvcm1TdGF0ZTtkLndyaXRlY2I9YjtkLndyaXRlY2h1bms9YztkLndyaXRlZW5jb2Rpbmc9YTtkLnRyYW5zZm9ybWluZ3x8KGM9dGhpcy5fcmVhZGFibGVTdGF0ZSwoZC5uZWVkVHJhbnNmb3JtfHxjLm5lZWRSZWFkYWJsZXx8Yy5sZW5ndGg8Yy5oaWdoV2F0ZXJNYXJrKSYmdGhpcy5fcmVhZChjLmhpZ2hXYXRlck1hcmspKX07YmEucHJvdG90eXBlLl9yZWFkPWZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5fdHJhbnNmb3JtU3RhdGU7bnVsbCE9PWMud3JpdGVjaHVuayYmYy53cml0ZWNiJiYKIWMudHJhbnNmb3JtaW5nPyhjLnRyYW5zZm9ybWluZz0hMCx0aGlzLl90cmFuc2Zvcm0oYy53cml0ZWNodW5rLGMud3JpdGVlbmNvZGluZyxjLmFmdGVyVHJhbnNmb3JtKSk6Yy5uZWVkVHJhbnNmb3JtPSEwfTt6YShzYixiYSk7c2IucHJvdG90eXBlLl90cmFuc2Zvcm09ZnVuY3Rpb24oYyxhLGIpe2IobnVsbCxjKX07emEoY2EseCk7Y2EuUmVhZGFibGU9eTtjYS5Xcml0YWJsZT1MO2NhLkR1cGxleD1VO2NhLlRyYW5zZm9ybT1iYTtjYS5QYXNzVGhyb3VnaD1zYjtjYS5TdHJlYW09Y2E7Y2EucHJvdG90eXBlLnBpcGU9ZnVuY3Rpb24oYyxhKXtmdW5jdGlvbiBiKGEpe2Mud3JpdGFibGUmJiExPT09Yy53cml0ZShhKSYmay5wYXVzZSYmay5wYXVzZSgpfWZ1bmN0aW9uIGQoKXtrLnJlYWRhYmxlJiZrLnJlc3VtZSYmay5yZXN1bWUoKX1mdW5jdGlvbiBlKCl7dHx8KHQ9ITAsYy5lbmQoKSl9ZnVuY3Rpb24gZigpe3R8fCh0PSEwLCJmdW5jdGlvbiI9PT10eXBlb2YgYy5kZXN0cm95JiZjLmRlc3Ryb3koKSl9CmZ1bmN0aW9uIGcoYSl7aCgpO2lmKDA9PT14Lmxpc3RlbmVyQ291bnQodGhpcywiZXJyb3IiKSl0aHJvdyBhO31mdW5jdGlvbiBoKCl7ay5yZW1vdmVMaXN0ZW5lcigiZGF0YSIsYik7Yy5yZW1vdmVMaXN0ZW5lcigiZHJhaW4iLGQpO2sucmVtb3ZlTGlzdGVuZXIoImVuZCIsZSk7ay5yZW1vdmVMaXN0ZW5lcigiY2xvc2UiLGYpO2sucmVtb3ZlTGlzdGVuZXIoImVycm9yIixnKTtjLnJlbW92ZUxpc3RlbmVyKCJlcnJvciIsZyk7ay5yZW1vdmVMaXN0ZW5lcigiZW5kIixoKTtrLnJlbW92ZUxpc3RlbmVyKCJjbG9zZSIsaCk7Yy5yZW1vdmVMaXN0ZW5lcigiY2xvc2UiLGgpfXZhciBrPXRoaXM7ay5vbigiZGF0YSIsYik7Yy5vbigiZHJhaW4iLGQpO2MuX2lzU3RkaW98fGEmJiExPT09YS5lbmR8fChrLm9uKCJlbmQiLGUpLGsub24oImNsb3NlIixmKSk7dmFyIHQ9ITE7ay5vbigiZXJyb3IiLGcpO2Mub24oImVycm9yIixnKTtrLm9uKCJlbmQiLGgpO2sub24oImNsb3NlIixoKTtjLm9uKCJjbG9zZSIsCmgpO2MuZW1pdCgicGlwZSIsayk7cmV0dXJuIGN9O3ZhciBYZz1BcnJheS5wcm90b3R5cGUuc2xpY2UsWWc9ZnVuY3Rpb24gZChhLGIpe2Zvcih2YXIgZSBpbiBiKWFbZV09YltlXTtyZXR1cm4gMz5hcmd1bWVudHMubGVuZ3RoP2E6ZC5hcHBseShudWxsLFthXS5jb25jYXQoWGcuY2FsbChhcmd1bWVudHMsMikpKX0sb2Y9SyhmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGQoYSxiLGQpe3ZvaWQgMD09PWQmJihkPWZ1bmN0aW9uKGEpe3JldHVybiBhfSk7cmV0dXJuIGZ1bmN0aW9uKCl7Zm9yKHZhciBmPVtdLGg9MDtoPGFyZ3VtZW50cy5sZW5ndGg7aCsrKWZbaF09YXJndW1lbnRzW2hdO3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihoLGcpe2FbYl0uYmluZChhKS5hcHBseSh2b2lkIDAsZShmLFtmdW5jdGlvbihhLGIpe3JldHVybiBhP2coYSk6aChkKGIpKX1dKSl9KX19dmFyIGU9TiYmTi5fX3NwcmVhZEFycmF5c3x8ZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiPTAsZD1hcmd1bWVudHMubGVuZ3RoO2I8CmQ7YisrKWErPWFyZ3VtZW50c1tiXS5sZW5ndGg7YT1BcnJheShhKTt2YXIgZT0wO2ZvcihiPTA7YjxkO2IrKylmb3IodmFyIGY9YXJndW1lbnRzW2JdLGw9MCxyPWYubGVuZ3RoO2w8cjtsKyssZSsrKWFbZV09ZltsXTtyZXR1cm4gYX07T2JqZWN0LmRlZmluZVByb3BlcnR5KGIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBmPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGIpe3RoaXMudm9sPWE7dGhpcy5mZD1ifWEucHJvdG90eXBlLmFwcGVuZEZpbGU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZCh0aGlzLnZvbCwiYXBwZW5kRmlsZSIpKHRoaXMuZmQsYSxiKX07YS5wcm90b3R5cGUuY2htb2Q9ZnVuY3Rpb24oYSl7cmV0dXJuIGQodGhpcy52b2wsImZjaG1vZCIpKHRoaXMuZmQsYSl9O2EucHJvdG90eXBlLmNob3duPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGQodGhpcy52b2wsImZjaG93biIpKHRoaXMuZmQsYSxiKX07YS5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gZCh0aGlzLnZvbCwKImNsb3NlIikodGhpcy5mZCl9O2EucHJvdG90eXBlLmRhdGFzeW5jPWZ1bmN0aW9uKCl7cmV0dXJuIGQodGhpcy52b2wsImZkYXRhc3luYyIpKHRoaXMuZmQpfTthLnByb3RvdHlwZS5yZWFkPWZ1bmN0aW9uKGEsYixlLGYpe3JldHVybiBkKHRoaXMudm9sLCJyZWFkIixmdW5jdGlvbihiKXtyZXR1cm57Ynl0ZXNSZWFkOmIsYnVmZmVyOmF9fSkodGhpcy5mZCxhLGIsZSxmKX07YS5wcm90b3R5cGUucmVhZEZpbGU9ZnVuY3Rpb24oYSl7cmV0dXJuIGQodGhpcy52b2wsInJlYWRGaWxlIikodGhpcy5mZCxhKX07YS5wcm90b3R5cGUuc3RhdD1mdW5jdGlvbihhKXtyZXR1cm4gZCh0aGlzLnZvbCwiZnN0YXQiKSh0aGlzLmZkLGEpfTthLnByb3RvdHlwZS5zeW5jPWZ1bmN0aW9uKCl7cmV0dXJuIGQodGhpcy52b2wsImZzeW5jIikodGhpcy5mZCl9O2EucHJvdG90eXBlLnRydW5jYXRlPWZ1bmN0aW9uKGEpe3JldHVybiBkKHRoaXMudm9sLCJmdHJ1bmNhdGUiKSh0aGlzLmZkLGEpfTthLnByb3RvdHlwZS51dGltZXM9CmZ1bmN0aW9uKGEsYil7cmV0dXJuIGQodGhpcy52b2wsImZ1dGltZXMiKSh0aGlzLmZkLGEsYil9O2EucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGEsYixlLGYpe3JldHVybiBkKHRoaXMudm9sLCJ3cml0ZSIsZnVuY3Rpb24oYil7cmV0dXJue2J5dGVzV3JpdHRlbjpiLGJ1ZmZlcjphfX0pKHRoaXMuZmQsYSxiLGUsZil9O2EucHJvdG90eXBlLndyaXRlRmlsZT1mdW5jdGlvbihhLGIpe3JldHVybiBkKHRoaXMudm9sLCJ3cml0ZUZpbGUiKSh0aGlzLmZkLGEsYil9O3JldHVybiBhfSgpO2IuRmlsZUhhbmRsZT1mO2IuZGVmYXVsdD1mdW5jdGlvbihhKXtyZXR1cm4idW5kZWZpbmVkIj09PXR5cGVvZiBQcm9taXNlP251bGw6e0ZpbGVIYW5kbGU6ZixhY2Nlc3M6ZnVuY3Rpb24oYixlKXtyZXR1cm4gZChhLCJhY2Nlc3MiKShiLGUpfSxhcHBlbmRGaWxlOmZ1bmN0aW9uKGIsZSxnKXtyZXR1cm4gZChhLCJhcHBlbmRGaWxlIikoYiBpbnN0YW5jZW9mIGY/Yi5mZDpiLGUsZyl9LGNobW9kOmZ1bmN0aW9uKGIsCmUpe3JldHVybiBkKGEsImNobW9kIikoYixlKX0sY2hvd246ZnVuY3Rpb24oYixlLGYpe3JldHVybiBkKGEsImNob3duIikoYixlLGYpfSxjb3B5RmlsZTpmdW5jdGlvbihiLGUsZil7cmV0dXJuIGQoYSwiY29weUZpbGUiKShiLGUsZil9LGxjaG1vZDpmdW5jdGlvbihiLGUpe3JldHVybiBkKGEsImxjaG1vZCIpKGIsZSl9LGxjaG93bjpmdW5jdGlvbihiLGUsZil7cmV0dXJuIGQoYSwibGNob3duIikoYixlLGYpfSxsaW5rOmZ1bmN0aW9uKGIsZSl7cmV0dXJuIGQoYSwibGluayIpKGIsZSl9LGxzdGF0OmZ1bmN0aW9uKGIsZSl7cmV0dXJuIGQoYSwibHN0YXQiKShiLGUpfSxta2RpcjpmdW5jdGlvbihiLGUpe3JldHVybiBkKGEsIm1rZGlyIikoYixlKX0sbWtkdGVtcDpmdW5jdGlvbihiLGUpe3JldHVybiBkKGEsIm1rZHRlbXAiKShiLGUpfSxvcGVuOmZ1bmN0aW9uKGIsZSxnKXtyZXR1cm4gZChhLCJvcGVuIixmdW5jdGlvbihiKXtyZXR1cm4gbmV3IGYoYSxiKX0pKGIsZSxnKX0scmVhZGRpcjpmdW5jdGlvbihiLAplKXtyZXR1cm4gZChhLCJyZWFkZGlyIikoYixlKX0scmVhZEZpbGU6ZnVuY3Rpb24oYixlKXtyZXR1cm4gZChhLCJyZWFkRmlsZSIpKGIgaW5zdGFuY2VvZiBmP2IuZmQ6YixlKX0scmVhZGxpbms6ZnVuY3Rpb24oYixlKXtyZXR1cm4gZChhLCJyZWFkbGluayIpKGIsZSl9LHJlYWxwYXRoOmZ1bmN0aW9uKGIsZSl7cmV0dXJuIGQoYSwicmVhbHBhdGgiKShiLGUpfSxyZW5hbWU6ZnVuY3Rpb24oYixlKXtyZXR1cm4gZChhLCJyZW5hbWUiKShiLGUpfSxybWRpcjpmdW5jdGlvbihiKXtyZXR1cm4gZChhLCJybWRpciIpKGIpfSxzdGF0OmZ1bmN0aW9uKGIsZSl7cmV0dXJuIGQoYSwic3RhdCIpKGIsZSl9LHN5bWxpbms6ZnVuY3Rpb24oYixlLGYpe3JldHVybiBkKGEsInN5bWxpbmsiKShiLGUsZil9LHRydW5jYXRlOmZ1bmN0aW9uKGIsZSl7cmV0dXJuIGQoYSwidHJ1bmNhdGUiKShiLGUpfSx1bmxpbms6ZnVuY3Rpb24oYil7cmV0dXJuIGQoYSwidW5saW5rIikoYil9LHV0aW1lczpmdW5jdGlvbihiLAplLGYpe3JldHVybiBkKGEsInV0aW1lcyIpKGIsZSxmKX0sd3JpdGVGaWxlOmZ1bmN0aW9uKGIsZSxnKXtyZXR1cm4gZChhLCJ3cml0ZUZpbGUiKShiIGluc3RhbmNlb2YgZj9iLmZkOmIsZSxnKX19fX0pO1Eob2YpO3ZhciB3Zz0vW15ceDIwLVx4N0VdLyx1Zz0vW1x4MkVcdTMwMDJcdUZGMEVcdUZGNjFdL2csRGU9e292ZXJmbG93OiJPdmVyZmxvdzogaW5wdXQgbmVlZHMgd2lkZXIgaW50ZWdlcnMgdG8gcHJvY2VzcyIsIm5vdC1iYXNpYyI6IklsbGVnYWwgaW5wdXQgPj0gMHg4MCAobm90IGEgYmFzaWMgY29kZSBwb2ludCkiLCJpbnZhbGlkLWlucHV0IjoiSW52YWxpZCBpbnB1dCJ9LFphPU1hdGguZmxvb3IsTWM9U3RyaW5nLmZyb21DaGFyQ29kZSxGZT1BcnJheS5pc0FycmF5fHxmdW5jdGlvbihhKXtyZXR1cm4iW29iamVjdCBBcnJheV0iPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpfSx5Zz1PYmplY3Qua2V5c3x8ZnVuY3Rpb24oYSl7dmFyIGI9W10sZDtmb3IoZCBpbiBhKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhLApkKSYmYi5wdXNoKGQpO3JldHVybiBifSxaZz17cGFyc2U6UmIscmVzb2x2ZTpmdW5jdGlvbihhLGIpe3JldHVybiBSYihhLCExLCEwKS5yZXNvbHZlKGIpfSxyZXNvbHZlT2JqZWN0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE/UmIoYSwhMSwhMCkucmVzb2x2ZU9iamVjdChiKTpifSxmb3JtYXQ6ZnVuY3Rpb24oYSl7SmEoYSkmJihhPUhlKHt9LGEpKTtyZXR1cm4gUGMoYSl9LFVybDpkYX0sQWc9L14oW2EtejAtOS4rLV0rOikvaSxFZz0vOlswLTldKiQvLHpnPS9eKFwvXC8/KD8hXC8pW15cP1xzXSopKFw/W15cc10qKT8kLywkZz0ie318XFxeYCIuc3BsaXQoIiIpLmNvbmNhdCgnPD4iYCBcclxuXHQnLnNwbGl0KCIiKSksT2M9WyInIl0uY29uY2F0KCRnKSxKZT1bIiUiLCIvIiwiPyIsIjsiLCIjIl0uY29uY2F0KE9jKSxJZT1bIi8iLCI/IiwiIyJdLENnPTI1NSxMZT0vXlsrYS16MC05QS1aXy1dezAsNjN9JC8sQmc9L14oWythLXowLTlBLVpfLV17MCw2M30pKC4qKSQvLERnPXtqYXZhc2NyaXB0OiEwLAoiamF2YXNjcmlwdDoiOiEwfSxOYz17amF2YXNjcmlwdDohMCwiamF2YXNjcmlwdDoiOiEwfSwkYT17aHR0cDohMCxodHRwczohMCxmdHA6ITAsZ29waGVyOiEwLGZpbGU6ITAsImh0dHA6IjohMCwiaHR0cHM6IjohMCwiZnRwOiI6ITAsImdvcGhlcjoiOiEwLCJmaWxlOiI6ITB9O2RhLnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbihhLGIsZCl7cmV0dXJuIEhlKHRoaXMsYSxiLGQpfTtkYS5wcm90b3R5cGUuZm9ybWF0PWZ1bmN0aW9uKCl7cmV0dXJuIFBjKHRoaXMpfTtkYS5wcm90b3R5cGUucmVzb2x2ZT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5yZXNvbHZlT2JqZWN0KFJiKGEsITEsITApKS5mb3JtYXQoKX07ZGEucHJvdG90eXBlLnJlc29sdmVPYmplY3Q9ZnVuY3Rpb24oYSl7aWYoSmEoYSkpe3ZhciBiPW5ldyBkYTtiLnBhcnNlKGEsITEsITApO2E9Yn1iPW5ldyBkYTtmb3IodmFyIGQ9T2JqZWN0LmtleXModGhpcyksZT0wO2U8ZC5sZW5ndGg7ZSsrKXt2YXIgZj1kW2VdO2JbZl09CnRoaXNbZl19Yi5oYXNoPWEuaGFzaDtpZigiIj09PWEuaHJlZilyZXR1cm4gYi5ocmVmPWIuZm9ybWF0KCksYjtpZihhLnNsYXNoZXMmJiFhLnByb3RvY29sKXtkPU9iamVjdC5rZXlzKGEpO2ZvcihlPTA7ZTxkLmxlbmd0aDtlKyspZj1kW2VdLCJwcm90b2NvbCIhPT1mJiYoYltmXT1hW2ZdKTskYVtiLnByb3RvY29sXSYmYi5ob3N0bmFtZSYmIWIucGF0aG5hbWUmJihiLnBhdGg9Yi5wYXRobmFtZT0iLyIpO2IuaHJlZj1iLmZvcm1hdCgpO3JldHVybiBifXZhciBnO2lmKGEucHJvdG9jb2wmJmEucHJvdG9jb2whPT1iLnByb3RvY29sKXtpZighJGFbYS5wcm90b2NvbF0pe2Q9T2JqZWN0LmtleXMoYSk7Zm9yKGU9MDtlPGQubGVuZ3RoO2UrKylmPWRbZV0sYltmXT1hW2ZdO2IuaHJlZj1iLmZvcm1hdCgpO3JldHVybiBifWIucHJvdG9jb2w9YS5wcm90b2NvbDtpZihhLmhvc3R8fE5jW2EucHJvdG9jb2xdKWIucGF0aG5hbWU9YS5wYXRobmFtZTtlbHNle2ZvcihnPShhLnBhdGhuYW1lfHwKIiIpLnNwbGl0KCIvIik7Zy5sZW5ndGgmJiEoYS5ob3N0PWcuc2hpZnQoKSk7KTthLmhvc3R8fChhLmhvc3Q9IiIpO2EuaG9zdG5hbWV8fChhLmhvc3RuYW1lPSIiKTsiIiE9PWdbMF0mJmcudW5zaGlmdCgiIik7Mj5nLmxlbmd0aCYmZy51bnNoaWZ0KCIiKTtiLnBhdGhuYW1lPWcuam9pbigiLyIpfWIuc2VhcmNoPWEuc2VhcmNoO2IucXVlcnk9YS5xdWVyeTtiLmhvc3Q9YS5ob3N0fHwiIjtiLmF1dGg9YS5hdXRoO2IuaG9zdG5hbWU9YS5ob3N0bmFtZXx8YS5ob3N0O2IucG9ydD1hLnBvcnQ7aWYoYi5wYXRobmFtZXx8Yi5zZWFyY2gpYi5wYXRoPShiLnBhdGhuYW1lfHwiIikrKGIuc2VhcmNofHwiIik7Yi5zbGFzaGVzPWIuc2xhc2hlc3x8YS5zbGFzaGVzO2IuaHJlZj1iLmZvcm1hdCgpO3JldHVybiBifWQ9Yi5wYXRobmFtZSYmIi8iPT09Yi5wYXRobmFtZS5jaGFyQXQoMCk7dmFyIGg9YS5ob3N0fHxhLnBhdGhuYW1lJiYiLyI9PT1hLnBhdGhuYW1lLmNoYXJBdCgwKSxrPWQ9aHx8CmR8fGIuaG9zdCYmYS5wYXRobmFtZTtlPWIucGF0aG5hbWUmJmIucGF0aG5hbWUuc3BsaXQoIi8iKXx8W107Zj1iLnByb3RvY29sJiYhJGFbYi5wcm90b2NvbF07Zz1hLnBhdGhuYW1lJiZhLnBhdGhuYW1lLnNwbGl0KCIvIil8fFtdO2YmJihiLmhvc3RuYW1lPSIiLGIucG9ydD1udWxsLGIuaG9zdCYmKCIiPT09ZVswXT9lWzBdPWIuaG9zdDplLnVuc2hpZnQoYi5ob3N0KSksYi5ob3N0PSIiLGEucHJvdG9jb2wmJihhLmhvc3RuYW1lPW51bGwsYS5wb3J0PW51bGwsYS5ob3N0JiYoIiI9PT1nWzBdP2dbMF09YS5ob3N0OmcudW5zaGlmdChhLmhvc3QpKSxhLmhvc3Q9bnVsbCksZD1kJiYoIiI9PT1nWzBdfHwiIj09PWVbMF0pKTtpZihoKWIuaG9zdD1hLmhvc3R8fCIiPT09YS5ob3N0P2EuaG9zdDpiLmhvc3QsYi5ob3N0bmFtZT1hLmhvc3RuYW1lfHwiIj09PWEuaG9zdG5hbWU/YS5ob3N0bmFtZTpiLmhvc3RuYW1lLGIuc2VhcmNoPWEuc2VhcmNoLGIucXVlcnk9YS5xdWVyeSxlPWc7ZWxzZSBpZihnLmxlbmd0aCllfHwKKGU9W10pLGUucG9wKCksZT1lLmNvbmNhdChnKSxiLnNlYXJjaD1hLnNlYXJjaCxiLnF1ZXJ5PWEucXVlcnk7ZWxzZSBpZihudWxsIT1hLnNlYXJjaCl7ZiYmKGIuaG9zdG5hbWU9Yi5ob3N0PWUuc2hpZnQoKSxmPWIuaG9zdCYmMDxiLmhvc3QuaW5kZXhPZigiQCIpP2IuaG9zdC5zcGxpdCgiQCIpOiExKSYmKGIuYXV0aD1mLnNoaWZ0KCksYi5ob3N0PWIuaG9zdG5hbWU9Zi5zaGlmdCgpKTtiLnNlYXJjaD1hLnNlYXJjaDtiLnF1ZXJ5PWEucXVlcnk7aWYobnVsbCE9PWIucGF0aG5hbWV8fG51bGwhPT1iLnNlYXJjaCliLnBhdGg9KGIucGF0aG5hbWU/Yi5wYXRobmFtZToiIikrKGIuc2VhcmNoP2Iuc2VhcmNoOiIiKTtiLmhyZWY9Yi5mb3JtYXQoKTtyZXR1cm4gYn1pZighZS5sZW5ndGgpcmV0dXJuIGIucGF0aG5hbWU9bnVsbCxiLnBhdGg9Yi5zZWFyY2g/Ii8iK2Iuc2VhcmNoOm51bGwsYi5ocmVmPWIuZm9ybWF0KCksYjtoPWUuc2xpY2UoLTEpWzBdO2c9KGIuaG9zdHx8YS5ob3N0fHwKMTxlLmxlbmd0aCkmJigiLiI9PT1ofHwiLi4iPT09aCl8fCIiPT09aDtmb3IodmFyIGw9MCxxPWUubGVuZ3RoOzA8PXE7cS0tKWg9ZVtxXSwiLiI9PT1oP2Uuc3BsaWNlKHEsMSk6Ii4uIj09PWg/KGUuc3BsaWNlKHEsMSksbCsrKTpsJiYoZS5zcGxpY2UocSwxKSxsLS0pO2lmKCFkJiYhaylmb3IoO2wtLTtsKWUudW5zaGlmdCgiLi4iKTshZHx8IiI9PT1lWzBdfHxlWzBdJiYiLyI9PT1lWzBdLmNoYXJBdCgwKXx8ZS51bnNoaWZ0KCIiKTtnJiYiLyIhPT1lLmpvaW4oIi8iKS5zdWJzdHIoLTEpJiZlLnB1c2goIiIpO2s9IiI9PT1lWzBdfHxlWzBdJiYiLyI9PT1lWzBdLmNoYXJBdCgwKTtmJiYoYi5ob3N0bmFtZT1iLmhvc3Q9az8iIjplLmxlbmd0aD9lLnNoaWZ0KCk6IiIsZj1iLmhvc3QmJjA8Yi5ob3N0LmluZGV4T2YoIkAiKT9iLmhvc3Quc3BsaXQoIkAiKTohMSkmJihiLmF1dGg9Zi5zaGlmdCgpLGIuaG9zdD1iLmhvc3RuYW1lPWYuc2hpZnQoKSk7KGR8fGIuaG9zdCYmZS5sZW5ndGgpJiYKIWsmJmUudW5zaGlmdCgiIik7ZS5sZW5ndGg/Yi5wYXRobmFtZT1lLmpvaW4oIi8iKTooYi5wYXRobmFtZT1udWxsLGIucGF0aD1udWxsKTtpZihudWxsIT09Yi5wYXRobmFtZXx8bnVsbCE9PWIuc2VhcmNoKWIucGF0aD0oYi5wYXRobmFtZT9iLnBhdGhuYW1lOiIiKSsoYi5zZWFyY2g/Yi5zZWFyY2g6IiIpO2IuYXV0aD1hLmF1dGh8fGIuYXV0aDtiLnNsYXNoZXM9Yi5zbGFzaGVzfHxhLnNsYXNoZXM7Yi5ocmVmPWIuZm9ybWF0KCk7cmV0dXJuIGJ9O2RhLnByb3RvdHlwZS5wYXJzZUhvc3Q9ZnVuY3Rpb24oKXtyZXR1cm4gS2UodGhpcyl9O3ZhciBwZj1LKGZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gZChhLGIpe2E9YVtiXTtyZXR1cm4gMDxiJiYoIi8iPT09YXx8ZiYmIlxcIj09PWEpfWZ1bmN0aW9uIGUoYSl7dmFyIGI9MTxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOiEwO2lmKGYpe3ZhciBlPWE7aWYoInN0cmluZyIhPT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKCJleHBlY3RlZCBhIHN0cmluZyIpOwplPWUucmVwbGFjZSgvW1xcXC9dKy9nLCIvIik7aWYoITEhPT1iKWlmKGI9ZSxlPWIubGVuZ3RoLTEsMj5lKWU9YjtlbHNle2Zvcig7ZChiLGUpOyllLS07ZT1iLnN1YnN0cigwLGUrMSl9cmV0dXJuIGUucmVwbGFjZSgvXihbYS16QS1aXSs6fFwuXC8pLywiIil9cmV0dXJuIGF9T2JqZWN0LmRlZmluZVByb3BlcnR5KGIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO2IudW5peGlmeT1lO2IuY29ycmVjdFBhdGg9ZnVuY3Rpb24oYSl7cmV0dXJuIGUoYS5yZXBsYWNlKC9eXFxcXFw/XFwuOlxcLywiXFwiKSl9O3ZhciBmPSJ3aW4zMiI9PT1WYS5wbGF0Zm9ybX0pO1EocGYpO3ZhciBRYT1LKGZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gZChhLGIpe3ZvaWQgMD09PWImJihiPVkuZGVmYXVsdC5jd2QoKSk7cmV0dXJuIGFoKGIsYSl9ZnVuY3Rpb24gZShhLGIpe3JldHVybiJmdW5jdGlvbiI9PT10eXBlb2YgYT9bZigpLGFdOltmKGEpLHIoYildfWZ1bmN0aW9uIGYoYSl7dm9pZCAwPT09YSYmKGE9Cnt9KTtyZXR1cm4geGEoe30sdWEsYSl9ZnVuY3Rpb24gZyhhKXtyZXR1cm4ibnVtYmVyIj09PXR5cGVvZiBhP3hhKHt9LGthLHttb2RlOmF9KTp4YSh7fSxrYSxhKX1mdW5jdGlvbiBoKGEsYixkLGUpe3ZvaWQgMD09PWImJihiPSIiKTt2b2lkIDA9PT1kJiYoZD0iIik7dm9pZCAwPT09ZSYmKGU9IiIpO3ZhciB2PSIiO2QmJih2PSIgJyIrZCsiJyIpO2UmJih2Kz0iIC0+ICciK2UrIiciKTtzd2l0Y2goYSl7Y2FzZSAiRU5PRU5UIjpyZXR1cm4iRU5PRU5UOiBubyBzdWNoIGZpbGUgb3IgZGlyZWN0b3J5LCAiK2IrdjtjYXNlICJFQkFERiI6cmV0dXJuIkVCQURGOiBiYWQgZmlsZSBkZXNjcmlwdG9yLCAiK2IrdjtjYXNlICJFSU5WQUwiOnJldHVybiJFSU5WQUw6IGludmFsaWQgYXJndW1lbnQsICIrYit2O2Nhc2UgIkVQRVJNIjpyZXR1cm4iRVBFUk06IG9wZXJhdGlvbiBub3QgcGVybWl0dGVkLCAiK2IrdjtjYXNlICJFUFJPVE8iOnJldHVybiJFUFJPVE86IHByb3RvY29sIGVycm9yLCAiKwpiK3Y7Y2FzZSAiRUVYSVNUIjpyZXR1cm4iRUVYSVNUOiBmaWxlIGFscmVhZHkgZXhpc3RzLCAiK2IrdjtjYXNlICJFTk9URElSIjpyZXR1cm4iRU5PVERJUjogbm90IGEgZGlyZWN0b3J5LCAiK2IrdjtjYXNlICJFSVNESVIiOnJldHVybiJFSVNESVI6IGlsbGVnYWwgb3BlcmF0aW9uIG9uIGEgZGlyZWN0b3J5LCAiK2IrdjtjYXNlICJFQUNDRVMiOnJldHVybiJFQUNDRVM6IHBlcm1pc3Npb24gZGVuaWVkLCAiK2IrdjtjYXNlICJFTk9URU1QVFkiOnJldHVybiJFTk9URU1QVFk6IGRpcmVjdG9yeSBub3QgZW1wdHksICIrYit2O2Nhc2UgIkVNRklMRSI6cmV0dXJuIkVNRklMRTogdG9vIG1hbnkgb3BlbiBmaWxlcywgIitiK3Y7Y2FzZSAiRU5PU1lTIjpyZXR1cm4iRU5PU1lTOiBmdW5jdGlvbiBub3QgaW1wbGVtZW50ZWQsICIrYit2O2RlZmF1bHQ6cmV0dXJuIGErIjogZXJyb3Igb2NjdXJyZWQsICIrYit2fX1mdW5jdGlvbiBrKGEsYixkLGUsZil7dm9pZCAwPT09YiYmKGI9IiIpO3ZvaWQgMD09PQpkJiYoZD0iIik7dm9pZCAwPT09ZSYmKGU9IiIpO3ZvaWQgMD09PWYmJihmPUVycm9yKTtiPW5ldyBmKGgoYSxiLGQsZSkpO2IuY29kZT1hO3JldHVybiBifWZ1bmN0aW9uIGwoYSl7aWYoIm51bWJlciI9PT10eXBlb2YgYSlyZXR1cm4gYTtpZigic3RyaW5nIj09PXR5cGVvZiBhKXt2YXIgYj1SW2FdO2lmKCJ1bmRlZmluZWQiIT09dHlwZW9mIGIpcmV0dXJuIGJ9dGhyb3cgbmV3IHhiLlR5cGVFcnJvcigiRVJSX0lOVkFMSURfT1BUX1ZBTFVFIiwiZmxhZ3MiLGEpO31mdW5jdGlvbiBxKGEsYil7aWYoYil7dmFyIGQ9dHlwZW9mIGI7c3dpdGNoKGQpe2Nhc2UgInN0cmluZyI6YT14YSh7fSxhLHtlbmNvZGluZzpifSk7YnJlYWs7Y2FzZSAib2JqZWN0IjphPXhhKHt9LGEsYik7YnJlYWs7ZGVmYXVsdDp0aHJvdyBUeXBlRXJyb3IoIkV4cGVjdGVkIG9wdGlvbnMgdG8gYmUgZWl0aGVyIGFuIG9iamVjdCBvciBhIHN0cmluZywgYnV0IGdvdCAiK2QrIiBpbnN0ZWFkIik7fX1lbHNlIHJldHVybiBhOwoiYnVmZmVyIiE9PWEuZW5jb2RpbmcmJm9hLmFzc2VydEVuY29kaW5nKGEuZW5jb2RpbmcpO3JldHVybiBhfWZ1bmN0aW9uIG0oYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBxKGEsYil9fWZ1bmN0aW9uIHIoYSl7aWYoImZ1bmN0aW9uIiE9PXR5cGVvZiBhKXRocm93IFR5cGVFcnJvcihNLkNCKTtyZXR1cm4gYX1mdW5jdGlvbiBQKGEpe3JldHVybiBmdW5jdGlvbihiLGQpe3JldHVybiJmdW5jdGlvbiI9PT10eXBlb2YgYj9bYSgpLGJdOlthKGIpLHIoZCldfX1mdW5jdGlvbiBwKGEpe2lmKCJzdHJpbmciIT09dHlwZW9mIGEmJiFKLkJ1ZmZlci5pc0J1ZmZlcihhKSl7dHJ5e2lmKCEoYSBpbnN0YW5jZW9mIFpnLlVSTCkpdGhyb3cgbmV3IFR5cGVFcnJvcihNLlBBVEhfU1RSKTt9Y2F0Y2goY2Qpe3Rocm93IG5ldyBUeXBlRXJyb3IoTS5QQVRIX1NUUik7fWlmKCIiIT09YS5ob3N0bmFtZSl0aHJvdyBuZXcgeGIuVHlwZUVycm9yKCJFUlJfSU5WQUxJRF9GSUxFX1VSTF9IT1NUIiwKWS5kZWZhdWx0LnBsYXRmb3JtKTthPWEucGF0aG5hbWU7Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspaWYoIiUiPT09YVtiXSl7dmFyIGQ9YS5jb2RlUG9pbnRBdChiKzIpfDMyO2lmKCIyIj09PWFbYisxXSYmMTAyPT09ZCl0aHJvdyBuZXcgeGIuVHlwZUVycm9yKCJFUlJfSU5WQUxJRF9GSUxFX1VSTF9QQVRIIiwibXVzdCBub3QgaW5jbHVkZSBlbmNvZGVkIC8gY2hhcmFjdGVycyIpO31hPWRlY29kZVVSSUNvbXBvbmVudChhKX1hPVN0cmluZyhhKTtFKGEpO3JldHVybiBhfWZ1bmN0aW9uIG4oYSxiKXtyZXR1cm4oYT1kKGEsYikuc3Vic3RyKDEpKT9hLnNwbGl0KEgpOltdfWZ1bmN0aW9uIEIoYSl7cmV0dXJuIG4ocChhKSl9ZnVuY3Rpb24geihhLGIpe3ZvaWQgMD09PWImJihiPW9hLkVOQ09ESU5HX1VURjgpO3JldHVybiBKLkJ1ZmZlci5pc0J1ZmZlcihhKT9hOmEgaW5zdGFuY2VvZiBVaW50OEFycmF5P0ouYnVmZmVyRnJvbShhKTpKLmJ1ZmZlckZyb20oU3RyaW5nKGEpLGIpfQpmdW5jdGlvbiBDKGEsYil7cmV0dXJuIGImJiJidWZmZXIiIT09Yj9hLnRvU3RyaW5nKGIpOmF9ZnVuY3Rpb24gRShhLGIpe2lmKC0xIT09KCIiK2EpLmluZGV4T2YoIlx4MDAiKSl7YT1FcnJvcigiUGF0aCBtdXN0IGJlIGEgc3RyaW5nIHdpdGhvdXQgbnVsbCBieXRlcyIpO2EuY29kZT0iRU5PRU5UIjtpZigiZnVuY3Rpb24iIT09dHlwZW9mIGIpdGhyb3cgYTtZLmRlZmF1bHQubmV4dFRpY2soYixhKTtyZXR1cm4hMX1yZXR1cm4hMH1mdW5jdGlvbiB5KGEsYil7YT0ibnVtYmVyIj09PXR5cGVvZiBhP2E6InN0cmluZyI9PT10eXBlb2YgYT9wYXJzZUludChhLDgpOmI/eShiKTp2b2lkIDA7aWYoIm51bWJlciIhPT10eXBlb2YgYXx8aXNOYU4oYSkpdGhyb3cgbmV3IFR5cGVFcnJvcihNLk1PREVfSU5UKTtyZXR1cm4gYX1mdW5jdGlvbiBHKGEpe2lmKGE+Pj4wIT09YSl0aHJvdyBUeXBlRXJyb3IoTS5GRCk7fWZ1bmN0aW9uIEQoYSl7aWYoInN0cmluZyI9PT10eXBlb2YgYSYmK2E9PWEpcmV0dXJuK2E7CmlmKGEgaW5zdGFuY2VvZiBEYXRlKXJldHVybiBhLmdldFRpbWUoKS8xRTM7aWYoaXNGaW5pdGUoYSkpcmV0dXJuIDA+YT9EYXRlLm5vdygpLzFFMzphO3Rocm93IEVycm9yKCJDYW5ub3QgcGFyc2UgdGltZTogIithKTt9ZnVuY3Rpb24gdyhhKXtpZigibnVtYmVyIiE9PXR5cGVvZiBhKXRocm93IFR5cGVFcnJvcihNLlVJRCk7fWZ1bmN0aW9uIEYoYSl7aWYoIm51bWJlciIhPT10eXBlb2YgYSl0aHJvdyBUeXBlRXJyb3IoTS5HSUQpO31mdW5jdGlvbiBiYyhhKXthLmVtaXQoInN0b3AiKX1mdW5jdGlvbiB0YShhLGIsZCl7aWYoISh0aGlzIGluc3RhbmNlb2YgdGEpKXJldHVybiBuZXcgdGEoYSxiLGQpO3RoaXMuX3ZvbD1hO2Q9eGEoe30scShkLHt9KSk7dm9pZCAwPT09ZC5oaWdoV2F0ZXJNYXJrJiYoZC5oaWdoV2F0ZXJNYXJrPTY1NTM2KTtjYS5SZWFkYWJsZS5jYWxsKHRoaXMsZCk7dGhpcy5wYXRoPXAoYik7dGhpcy5mZD12b2lkIDA9PT1kLmZkP251bGw6ZC5mZDt0aGlzLmZsYWdzPQp2b2lkIDA9PT1kLmZsYWdzPyJyIjpkLmZsYWdzO3RoaXMubW9kZT12b2lkIDA9PT1kLm1vZGU/NDM4OmQubW9kZTt0aGlzLnN0YXJ0PWQuc3RhcnQ7dGhpcy5lbmQ9ZC5lbmQ7dGhpcy5hdXRvQ2xvc2U9dm9pZCAwPT09ZC5hdXRvQ2xvc2U/ITA6ZC5hdXRvQ2xvc2U7dGhpcy5wb3M9dm9pZCAwO3RoaXMuYnl0ZXNSZWFkPTA7aWYodm9pZCAwIT09dGhpcy5zdGFydCl7aWYoIm51bWJlciIhPT10eXBlb2YgdGhpcy5zdGFydCl0aHJvdyBuZXcgVHlwZUVycm9yKCcic3RhcnQiIG9wdGlvbiBtdXN0IGJlIGEgTnVtYmVyJyk7aWYodm9pZCAwPT09dGhpcy5lbmQpdGhpcy5lbmQ9SW5maW5pdHk7ZWxzZSBpZigibnVtYmVyIiE9PXR5cGVvZiB0aGlzLmVuZCl0aHJvdyBuZXcgVHlwZUVycm9yKCciZW5kIiBvcHRpb24gbXVzdCBiZSBhIE51bWJlcicpO2lmKHRoaXMuc3RhcnQ+dGhpcy5lbmQpdGhyb3cgRXJyb3IoJyJzdGFydCIgb3B0aW9uIG11c3QgYmUgPD0gImVuZCIgb3B0aW9uJyk7dGhpcy5wb3M9CnRoaXMuc3RhcnR9Im51bWJlciIhPT10eXBlb2YgdGhpcy5mZCYmdGhpcy5vcGVuKCk7dGhpcy5vbigiZW5kIixmdW5jdGlvbigpe3RoaXMuYXV0b0Nsb3NlJiZ0aGlzLmRlc3Ryb3kmJnRoaXMuZGVzdHJveSgpfSl9ZnVuY3Rpb24gYmgoKXt0aGlzLmNsb3NlKCl9ZnVuY3Rpb24gWihhLGIsZCl7aWYoISh0aGlzIGluc3RhbmNlb2YgWikpcmV0dXJuIG5ldyBaKGEsYixkKTt0aGlzLl92b2w9YTtkPXhhKHt9LHEoZCx7fSkpO2NhLldyaXRhYmxlLmNhbGwodGhpcyxkKTt0aGlzLnBhdGg9cChiKTt0aGlzLmZkPXZvaWQgMD09PWQuZmQ/bnVsbDpkLmZkO3RoaXMuZmxhZ3M9dm9pZCAwPT09ZC5mbGFncz8idyI6ZC5mbGFnczt0aGlzLm1vZGU9dm9pZCAwPT09ZC5tb2RlPzQzODpkLm1vZGU7dGhpcy5zdGFydD1kLnN0YXJ0O3RoaXMuYXV0b0Nsb3NlPXZvaWQgMD09PWQuYXV0b0Nsb3NlPyEwOiEhZC5hdXRvQ2xvc2U7dGhpcy5wb3M9dm9pZCAwO3RoaXMuYnl0ZXNXcml0dGVuPTA7aWYodm9pZCAwIT09CnRoaXMuc3RhcnQpe2lmKCJudW1iZXIiIT09dHlwZW9mIHRoaXMuc3RhcnQpdGhyb3cgbmV3IFR5cGVFcnJvcignInN0YXJ0IiBvcHRpb24gbXVzdCBiZSBhIE51bWJlcicpO2lmKDA+dGhpcy5zdGFydCl0aHJvdyBFcnJvcignInN0YXJ0IiBtdXN0IGJlID49IHplcm8nKTt0aGlzLnBvcz10aGlzLnN0YXJ0fWQuZW5jb2RpbmcmJnRoaXMuc2V0RGVmYXVsdEVuY29kaW5nKGQuZW5jb2RpbmcpOyJudW1iZXIiIT09dHlwZW9mIHRoaXMuZmQmJnRoaXMub3BlbigpO3RoaXMub25jZSgiZmluaXNoIixmdW5jdGlvbigpe3RoaXMuYXV0b0Nsb3NlJiZ0aGlzLmNsb3NlKCl9KX12YXIgaGI9TiYmTi5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShiLGQpe2E9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGEsYil7YS5fX3Byb3RvX189Yn18fGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBkIGluIGIpYi5oYXNPd25Qcm9wZXJ0eShkKSYmCihhW2RdPWJbZF0pfTtyZXR1cm4gYShiLGQpfXJldHVybiBmdW5jdGlvbihiLGQpe2Z1bmN0aW9uIGUoKXt0aGlzLmNvbnN0cnVjdG9yPWJ9YShiLGQpO2IucHJvdG90eXBlPW51bGw9PT1kP09iamVjdC5jcmVhdGUoZCk6KGUucHJvdG90eXBlPWQucHJvdG90eXBlLG5ldyBlKX19KCksZmQ9TiYmTi5fX3NwcmVhZEFycmF5c3x8ZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiPTAsZD1hcmd1bWVudHMubGVuZ3RoO2I8ZDtiKyspYSs9YXJndW1lbnRzW2JdLmxlbmd0aDthPUFycmF5KGEpO3ZhciBlPTA7Zm9yKGI9MDtiPGQ7YisrKWZvcih2YXIgZj1hcmd1bWVudHNbYl0saD0wLGc9Zi5sZW5ndGg7aDxnO2grKyxlKyspYVtlXT1mW2hdO3JldHVybiBhfTtPYmplY3QuZGVmaW5lUHJvcGVydHkoYiwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIHhhPVlnLGFoPUhjLGNjPXUuY29uc3RhbnRzLk9fUkRPTkxZLGliPXUuY29uc3RhbnRzLk9fV1JPTkxZLEFhPXUuY29uc3RhbnRzLk9fUkRXUiwKTz11LmNvbnN0YW50cy5PX0NSRUFULEk9dS5jb25zdGFudHMuT19FWENMLEs9dS5jb25zdGFudHMuT19UUlVOQyxMPXUuY29uc3RhbnRzLk9fQVBQRU5ELFE9dS5jb25zdGFudHMuT19TWU5DLFQ9dS5jb25zdGFudHMuT19ESVJFQ1RPUlksUz11LmNvbnN0YW50cy5GX09LLFY9dS5jb25zdGFudHMuQ09QWUZJTEVfRVhDTCxYPXUuY29uc3RhbnRzLkNPUFlGSUxFX0ZJQ0xPTkVfRk9SQ0UsSD0iLyIsVT0id2luMzIiPT09WS5kZWZhdWx0LnBsYXRmb3JtLE09e1BBVEhfU1RSOiJwYXRoIG11c3QgYmUgYSBzdHJpbmcgb3IgQnVmZmVyIixGRDoiZmQgbXVzdCBiZSBhIGZpbGUgZGVzY3JpcHRvciIsTU9ERV9JTlQ6Im1vZGUgbXVzdCBiZSBhbiBpbnQiLENCOiJjYWxsYmFjayBtdXN0IGJlIGEgZnVuY3Rpb24iLFVJRDoidWlkIG11c3QgYmUgYW4gdW5zaWduZWQgaW50IixHSUQ6ImdpZCBtdXN0IGJlIGFuIHVuc2lnbmVkIGludCIsTEVOOiJsZW4gbXVzdCBiZSBhbiBpbnRlZ2VyIixBVElNRToiYXRpbWUgbXVzdCBiZSBhbiBpbnRlZ2VyIiwKTVRJTUU6Im10aW1lIG11c3QgYmUgYW4gaW50ZWdlciIsUFJFRklYOiJmaWxlbmFtZSBwcmVmaXggaXMgcmVxdWlyZWQiLEJVRkZFUjoiYnVmZmVyIG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgQnVmZmVyIG9yIFN0YXRpY0J1ZmZlciIsT0ZGU0VUOiJvZmZzZXQgbXVzdCBiZSBhbiBpbnRlZ2VyIixMRU5HVEg6Imxlbmd0aCBtdXN0IGJlIGFuIGludGVnZXIiLFBPU0lUSU9OOiJwb3NpdGlvbiBtdXN0IGJlIGFuIGludGVnZXIifSxSOyhmdW5jdGlvbihhKXthW2Eucj1jY109InIiO2FbYVsicisiXT1BYV09InIrIjthW2EucnM9Y2N8UV09InJzIjthW2Euc3I9YS5yc109InNyIjthW2FbInJzKyJdPUFhfFFdPSJycysiO2FbYVsic3IrIl09YVsicnMrIl1dPSJzcisiO2FbYS53PWlifE98S109InciO2FbYS53eD1pYnxPfEt8SV09Ind4IjthW2EueHc9YS53eF09Inh3IjthW2FbIncrIl09QWF8T3xLXT0idysiO2FbYVsid3grIl09QWF8T3xLfEldPSJ3eCsiO2FbYVsieHcrIl09YVsid3grIl1dPQoieHcrIjthW2EuYT1pYnxMfE9dPSJhIjthW2EuYXg9aWJ8THxPfEldPSJheCI7YVthLnhhPWEuYXhdPSJ4YSI7YVthWyJhKyJdPUFhfEx8T109ImErIjthW2FbImF4KyJdPUFhfEx8T3xJXT0iYXgrIjthW2FbInhhKyJdPWFbImF4KyJdXT0ieGErIn0pKFI9Yi5GTEFHU3x8KGIuRkxBR1M9e30pKTtiLmZsYWdzVG9OdW1iZXI9bDthPXtlbmNvZGluZzoidXRmOCJ9O3ZhciBXPW0oYSksYWE9UChXKSxiYT1tKHtmbGFnOiJyIn0pLGRhPXtlbmNvZGluZzoidXRmOCIsbW9kZTo0MzgsZmxhZzpSW1Iud119LGVhPW0oZGEpLGZhPXtlbmNvZGluZzoidXRmOCIsbW9kZTo0MzgsZmxhZzpSW1IuYV19LGhhPW0oZmEpLG5hPVAoaGEpLGphPW0oYSkscGE9UChqYSksa2E9e21vZGU6NTExLHJlY3Vyc2l2ZTohMX0sbGE9e3JlY3Vyc2l2ZTohMX0sbWE9bSh7ZW5jb2Rpbmc6InV0ZjgiLHdpdGhGaWxlVHlwZXM6ITF9KSxzYT1QKG1hKSx1YT17YmlnaW50OiExfTtiLnBhdGhUb0ZpbGVuYW1lPXA7aWYoVSl7dmFyIHZhPQpkLHdhPXBmLnVuaXhpZnk7ZD1mdW5jdGlvbihhLGIpe3JldHVybiB3YSh2YShhLGIpKX19Yi5maWxlbmFtZVRvU3RlcHM9bjtiLnBhdGhUb1N0ZXBzPUI7Yi5kYXRhVG9TdHI9ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1iJiYoYj1vYS5FTkNPRElOR19VVEY4KTtyZXR1cm4gSi5CdWZmZXIuaXNCdWZmZXIoYSk/YS50b1N0cmluZyhiKTphIGluc3RhbmNlb2YgVWludDhBcnJheT9KLmJ1ZmZlckZyb20oYSkudG9TdHJpbmcoYik6U3RyaW5nKGEpfTtiLmRhdGFUb0J1ZmZlcj16O2IuYnVmZmVyVG9FbmNvZGluZz1DO2IudG9Vbml4VGltZXN0YW1wPUQ7YT1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7dm9pZCAwPT09YSYmKGE9e30pO3RoaXMuaW5vPTA7dGhpcy5pbm9kZXM9e307dGhpcy5yZWxlYXNlZElub3M9W107dGhpcy5mZHM9e307dGhpcy5yZWxlYXNlZEZkcz1bXTt0aGlzLm1heEZpbGVzPTFFNDt0aGlzLm9wZW5GaWxlcz0wO3RoaXMucHJvbWlzZXNBcGk9b2YuZGVmYXVsdCh0aGlzKTsKdGhpcy5zdGF0V2F0Y2hlcnM9e307dGhpcy5wcm9wcz14YSh7Tm9kZTp5Yi5Ob2RlLExpbms6eWIuTGluayxGaWxlOnliLkZpbGV9LGEpO2E9dGhpcy5jcmVhdGVMaW5rKCk7YS5zZXROb2RlKHRoaXMuY3JlYXRlTm9kZSghMCkpO3ZhciBiPXRoaXM7dGhpcy5TdGF0V2F0Y2hlcj1mdW5jdGlvbihhKXtmdW5jdGlvbiBkKCl7cmV0dXJuIGEuY2FsbCh0aGlzLGIpfHx0aGlzfWhiKGQsYSk7cmV0dXJuIGR9KHFhKTt0aGlzLlJlYWRTdHJlYW09ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gZCgpe2Zvcih2YXIgZD1bXSxlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKylkW2VdPWFyZ3VtZW50c1tlXTtyZXR1cm4gYS5hcHBseSh0aGlzLGZkKFtiXSxkKSl8fHRoaXN9aGIoZCxhKTtyZXR1cm4gZH0odGEpO3RoaXMuV3JpdGVTdHJlYW09ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gZCgpe2Zvcih2YXIgZD1bXSxlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKylkW2VdPWFyZ3VtZW50c1tlXTtyZXR1cm4gYS5hcHBseSh0aGlzLApmZChbYl0sZCkpfHx0aGlzfWhiKGQsYSk7cmV0dXJuIGR9KFopO3RoaXMuRlNXYXRjaGVyPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGQoKXtyZXR1cm4gYS5jYWxsKHRoaXMsYil8fHRoaXN9aGIoZCxhKTtyZXR1cm4gZH0ocmEpO3RoaXMucm9vdD1hfWEuZnJvbUpTT049ZnVuY3Rpb24oYixkKXt2YXIgZT1uZXcgYTtlLmZyb21KU09OKGIsZCk7cmV0dXJuIGV9O09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLnByb3RvdHlwZSwicHJvbWlzZXMiLHtnZXQ6ZnVuY3Rpb24oKXtpZihudWxsPT09dGhpcy5wcm9taXNlc0FwaSl0aHJvdyBFcnJvcigiUHJvbWlzZSBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgZW52aXJvbm1lbnQuIik7cmV0dXJuIHRoaXMucHJvbWlzZXNBcGl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSk7YS5wcm90b3R5cGUuY3JlYXRlTGluaz1mdW5jdGlvbihhLGIsZCxlKXt2b2lkIDA9PT1kJiYoZD0hMSk7aWYoIWEpcmV0dXJuIG5ldyB0aGlzLnByb3BzLkxpbmsodGhpcywKbnVsbCwiIik7aWYoIWIpdGhyb3cgRXJyb3IoImNyZWF0ZUxpbms6IG5hbWUgY2Fubm90IGJlIGVtcHR5Iik7cmV0dXJuIGEuY3JlYXRlQ2hpbGQoYix0aGlzLmNyZWF0ZU5vZGUoZCxlKSl9O2EucHJvdG90eXBlLmRlbGV0ZUxpbms9ZnVuY3Rpb24oYSl7dmFyIGI9YS5wYXJlbnQ7cmV0dXJuIGI/KGIuZGVsZXRlQ2hpbGQoYSksITApOiExfTthLnByb3RvdHlwZS5uZXdJbm9OdW1iZXI9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnJlbGVhc2VkSW5vcy5wb3AoKTtyZXR1cm4gYT9hOnRoaXMuaW5vPSh0aGlzLmlubysxKSU0Mjk0OTY3Mjk1fTthLnByb3RvdHlwZS5uZXdGZE51bWJlcj1mdW5jdGlvbigpe3ZhciBiPXRoaXMucmVsZWFzZWRGZHMucG9wKCk7cmV0dXJuIm51bWJlciI9PT10eXBlb2YgYj9iOmEuZmQtLX07YS5wcm90b3R5cGUuY3JlYXRlTm9kZT1mdW5jdGlvbihhLGIpe3ZvaWQgMD09PWEmJihhPSExKTtiPW5ldyB0aGlzLnByb3BzLk5vZGUodGhpcy5uZXdJbm9OdW1iZXIoKSwKYik7YSYmYi5zZXRJc0RpcmVjdG9yeSgpO3JldHVybiB0aGlzLmlub2Rlc1tiLmlub109Yn07YS5wcm90b3R5cGUuZ2V0Tm9kZT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pbm9kZXNbYV19O2EucHJvdG90eXBlLmRlbGV0ZU5vZGU9ZnVuY3Rpb24oYSl7YS5kZWwoKTtkZWxldGUgdGhpcy5pbm9kZXNbYS5pbm9dO3RoaXMucmVsZWFzZWRJbm9zLnB1c2goYS5pbm8pfTthLnByb3RvdHlwZS5nZW5SbmRTdHI9ZnVuY3Rpb24oKXt2YXIgYT0oTWF0aC5yYW5kb20oKSsxKS50b1N0cmluZygzNikuc3Vic3RyKDIsNik7cmV0dXJuIDY9PT1hLmxlbmd0aD9hOnRoaXMuZ2VuUm5kU3RyKCl9O2EucHJvdG90eXBlLmdldExpbms9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucm9vdC53YWxrKGEpfTthLnByb3RvdHlwZS5nZXRMaW5rT3JUaHJvdz1mdW5jdGlvbihhLGIpe3ZhciBkPW4oYSk7ZD10aGlzLmdldExpbmsoZCk7aWYoIWQpdGhyb3cgaygiRU5PRU5UIixiLGEpO3JldHVybiBkfTthLnByb3RvdHlwZS5nZXRSZXNvbHZlZExpbms9CmZ1bmN0aW9uKGEpe2E9InN0cmluZyI9PT10eXBlb2YgYT9uKGEpOmE7Zm9yKHZhciBiPXRoaXMucm9vdCxkPTA7ZDxhLmxlbmd0aDspe2I9Yi5nZXRDaGlsZChhW2RdKTtpZighYilyZXR1cm4gbnVsbDt2YXIgZT1iLmdldE5vZGUoKTtlLmlzU3ltbGluaygpPyhhPWUuc3ltbGluay5jb25jYXQoYS5zbGljZShkKzEpKSxiPXRoaXMucm9vdCxkPTApOmQrK31yZXR1cm4gYn07YS5wcm90b3R5cGUuZ2V0UmVzb2x2ZWRMaW5rT3JUaHJvdz1mdW5jdGlvbihhLGIpe3ZhciBkPXRoaXMuZ2V0UmVzb2x2ZWRMaW5rKGEpO2lmKCFkKXRocm93IGsoIkVOT0VOVCIsYixhKTtyZXR1cm4gZH07YS5wcm90b3R5cGUucmVzb2x2ZVN5bWxpbmtzPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmdldFJlc29sdmVkTGluayhhLnN0ZXBzLnNsaWNlKDEpKX07YS5wcm90b3R5cGUuZ2V0TGlua0FzRGlyT3JUaHJvdz1mdW5jdGlvbihhLGIpe3ZhciBkPXRoaXMuZ2V0TGlua09yVGhyb3coYSxiKTtpZighZC5nZXROb2RlKCkuaXNEaXJlY3RvcnkoKSl0aHJvdyBrKCJFTk9URElSIiwKYixhKTtyZXR1cm4gZH07YS5wcm90b3R5cGUuZ2V0TGlua1BhcmVudD1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5yb290LndhbGsoYSxhLmxlbmd0aC0xKX07YS5wcm90b3R5cGUuZ2V0TGlua1BhcmVudEFzRGlyT3JUaHJvdz1mdW5jdGlvbihhLGIpe2E9YSBpbnN0YW5jZW9mIEFycmF5P2E6bihhKTt2YXIgZD10aGlzLmdldExpbmtQYXJlbnQoYSk7aWYoIWQpdGhyb3cgaygiRU5PRU5UIixiLEgrYS5qb2luKEgpKTtpZighZC5nZXROb2RlKCkuaXNEaXJlY3RvcnkoKSl0aHJvdyBrKCJFTk9URElSIixiLEgrYS5qb2luKEgpKTtyZXR1cm4gZH07YS5wcm90b3R5cGUuZ2V0RmlsZUJ5RmQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZmRzW1N0cmluZyhhKV19O2EucHJvdG90eXBlLmdldEZpbGVCeUZkT3JUaHJvdz1mdW5jdGlvbihhLGIpe2lmKGE+Pj4wIT09YSl0aHJvdyBUeXBlRXJyb3IoTS5GRCk7YT10aGlzLmdldEZpbGVCeUZkKGEpO2lmKCFhKXRocm93IGsoIkVCQURGIixiKTtyZXR1cm4gYX07CmEucHJvdG90eXBlLmdldE5vZGVCeUlkT3JDcmVhdGU9ZnVuY3Rpb24oYSxiLGQpe2lmKCJudW1iZXIiPT09dHlwZW9mIGEpe2E9dGhpcy5nZXRGaWxlQnlGZChhKTtpZighYSl0aHJvdyBFcnJvcigiRmlsZSBudG8gZm91bmQiKTtyZXR1cm4gYS5ub2RlfXZhciBlPUIoYSksZj10aGlzLmdldExpbmsoZSk7aWYoZilyZXR1cm4gZi5nZXROb2RlKCk7aWYoYiZPJiYoYj10aGlzLmdldExpbmtQYXJlbnQoZSkpKXJldHVybiBmPXRoaXMuY3JlYXRlTGluayhiLGVbZS5sZW5ndGgtMV0sITEsZCksZi5nZXROb2RlKCk7dGhyb3cgaygiRU5PRU5UIiwiZ2V0Tm9kZUJ5SWRPckNyZWF0ZSIscChhKSk7fTthLnByb3RvdHlwZS53cmFwQXN5bmM9ZnVuY3Rpb24oYSxiLGQpe3ZhciBlPXRoaXM7cihkKTtnYi5kZWZhdWx0KGZ1bmN0aW9uKCl7dHJ5e2QobnVsbCxhLmFwcGx5KGUsYikpfWNhdGNoKEFiKXtkKEFiKX19KX07YS5wcm90b3R5cGUuX3RvSlNPTj1mdW5jdGlvbihhLGIsZCl7dmFyIGU7dm9pZCAwPT09CmEmJihhPXRoaXMucm9vdCk7dm9pZCAwPT09YiYmKGI9e30pO3ZhciBmPSEwLHY9YS5jaGlsZHJlbjthLmdldE5vZGUoKS5pc0ZpbGUoKSYmKHY9KGU9e30sZVthLmdldE5hbWUoKV09YS5wYXJlbnQuZ2V0Q2hpbGQoYS5nZXROYW1lKCkpLGUpLGE9YS5wYXJlbnQpO2Zvcih2YXIgaCBpbiB2KXtmPSExO3Y9YS5nZXRDaGlsZChoKTtpZighdil0aHJvdyBFcnJvcigiX3RvSlNPTjogdW5leHBlY3RlZCB1bmRlZmluZWQiKTtlPXYuZ2V0Tm9kZSgpO2UuaXNGaWxlKCk/KHY9di5nZXRQYXRoKCksZCYmKHY9UGIoZCx2KSksYlt2XT1lLmdldFN0cmluZygpKTplLmlzRGlyZWN0b3J5KCkmJnRoaXMuX3RvSlNPTih2LGIsZCl9YT1hLmdldFBhdGgoKTtkJiYoYT1QYihkLGEpKTthJiZmJiYoYlthXT1udWxsKTtyZXR1cm4gYn07YS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKGEsYixkKXt2b2lkIDA9PT1iJiYoYj17fSk7dm9pZCAwPT09ZCYmKGQ9ITEpO3ZhciBlPVtdO2lmKGEpe2EgaW5zdGFuY2VvZgpBcnJheXx8KGE9W2FdKTtmb3IodmFyIGY9MDtmPGEubGVuZ3RoO2YrKyl7dmFyIHY9cChhW2ZdKTsodj10aGlzLmdldFJlc29sdmVkTGluayh2KSkmJmUucHVzaCh2KX19ZWxzZSBlLnB1c2godGhpcy5yb290KTtpZighZS5sZW5ndGgpcmV0dXJuIGI7Zm9yKGY9MDtmPGUubGVuZ3RoO2YrKyl2PWVbZl0sdGhpcy5fdG9KU09OKHYsYixkP3YuZ2V0UGF0aCgpOiIiKTtyZXR1cm4gYn07YS5wcm90b3R5cGUuZnJvbUpTT049ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1iJiYoYj1ZLmRlZmF1bHQuY3dkKCkpO2Zvcih2YXIgZSBpbiBhKXt2YXIgZj1hW2VdO2lmKCJzdHJpbmciPT09dHlwZW9mIGYpe2U9ZChlLGIpO3ZhciB2PW4oZSk7MTx2Lmxlbmd0aCYmKHY9SCt2LnNsaWNlKDAsdi5sZW5ndGgtMSkuam9pbihIKSx0aGlzLm1rZGlycEJhc2Uodiw1MTEpKTt0aGlzLndyaXRlRmlsZVN5bmMoZSxmKX1lbHNlIHRoaXMubWtkaXJwQmFzZShlLDUxMSl9fTthLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMuaW5vPQowO3RoaXMuaW5vZGVzPXt9O3RoaXMucmVsZWFzZWRJbm9zPVtdO3RoaXMuZmRzPXt9O3RoaXMucmVsZWFzZWRGZHM9W107dGhpcy5vcGVuRmlsZXM9MDt0aGlzLnJvb3Q9dGhpcy5jcmVhdGVMaW5rKCk7dGhpcy5yb290LnNldE5vZGUodGhpcy5jcmVhdGVOb2RlKCEwKSl9O2EucHJvdG90eXBlLm1vdW50U3luYz1mdW5jdGlvbihhLGIpe3RoaXMuZnJvbUpTT04oYixhKX07YS5wcm90b3R5cGUub3Blbkxpbms9ZnVuY3Rpb24oYSxiLGQpe3ZvaWQgMD09PWQmJihkPSEwKTtpZih0aGlzLm9wZW5GaWxlcz49dGhpcy5tYXhGaWxlcyl0aHJvdyBrKCJFTUZJTEUiLCJvcGVuIixhLmdldFBhdGgoKSk7dmFyIGU9YTtkJiYoZT10aGlzLnJlc29sdmVTeW1saW5rcyhhKSk7aWYoIWUpdGhyb3cgaygiRU5PRU5UIiwib3BlbiIsYS5nZXRQYXRoKCkpO2Q9ZS5nZXROb2RlKCk7aWYoZC5pc0RpcmVjdG9yeSgpKXtpZigoYiYoY2N8QWF8aWIpKSE9PWNjKXRocm93IGsoIkVJU0RJUiIsIm9wZW4iLGEuZ2V0UGF0aCgpKTsKfWVsc2UgaWYoYiZUKXRocm93IGsoIkVOT1RESVIiLCJvcGVuIixhLmdldFBhdGgoKSk7aWYoIShiJmlifHxkLmNhblJlYWQoKSkpdGhyb3cgaygiRUFDQ0VTIiwib3BlbiIsYS5nZXRQYXRoKCkpO2E9bmV3IHRoaXMucHJvcHMuRmlsZShhLGQsYix0aGlzLm5ld0ZkTnVtYmVyKCkpO3RoaXMuZmRzW2EuZmRdPWE7dGhpcy5vcGVuRmlsZXMrKztiJksmJmEudHJ1bmNhdGUoKTtyZXR1cm4gYX07YS5wcm90b3R5cGUub3BlbkZpbGU9ZnVuY3Rpb24oYSxiLGQsZSl7dm9pZCAwPT09ZSYmKGU9ITApO3ZhciBmPW4oYSksdj1lP3RoaXMuZ2V0UmVzb2x2ZWRMaW5rKGYpOnRoaXMuZ2V0TGluayhmKTtpZighdiYmYiZPKXt2YXIgaD10aGlzLmdldFJlc29sdmVkTGluayhmLnNsaWNlKDAsZi5sZW5ndGgtMSkpO2lmKCFoKXRocm93IGsoIkVOT0VOVCIsIm9wZW4iLEgrZi5qb2luKEgpKTtiJk8mJiJudW1iZXIiPT09dHlwZW9mIGQmJih2PXRoaXMuY3JlYXRlTGluayhoLGZbZi5sZW5ndGgtMV0sCiExLGQpKX1pZih2KXJldHVybiB0aGlzLm9wZW5MaW5rKHYsYixlKTt0aHJvdyBrKCJFTk9FTlQiLCJvcGVuIixhKTt9O2EucHJvdG90eXBlLm9wZW5CYXNlPWZ1bmN0aW9uKGEsYixkLGUpe3ZvaWQgMD09PWUmJihlPSEwKTtiPXRoaXMub3BlbkZpbGUoYSxiLGQsZSk7aWYoIWIpdGhyb3cgaygiRU5PRU5UIiwib3BlbiIsYSk7cmV0dXJuIGIuZmR9O2EucHJvdG90eXBlLm9wZW5TeW5jPWZ1bmN0aW9uKGEsYixkKXt2b2lkIDA9PT1kJiYoZD00MzgpO2Q9eShkKTthPXAoYSk7Yj1sKGIpO3JldHVybiB0aGlzLm9wZW5CYXNlKGEsYixkKX07YS5wcm90b3R5cGUub3Blbj1mdW5jdGlvbihhLGIsZCxlKXt2YXIgZj1kOyJmdW5jdGlvbiI9PT10eXBlb2YgZCYmKGY9NDM4LGU9ZCk7ZD15KGZ8fDQzOCk7YT1wKGEpO2I9bChiKTt0aGlzLndyYXBBc3luYyh0aGlzLm9wZW5CYXNlLFthLGIsZF0sZSl9O2EucHJvdG90eXBlLmNsb3NlRmlsZT1mdW5jdGlvbihhKXt0aGlzLmZkc1thLmZkXSYmKHRoaXMub3BlbkZpbGVzLS0sCmRlbGV0ZSB0aGlzLmZkc1thLmZkXSx0aGlzLnJlbGVhc2VkRmRzLnB1c2goYS5mZCkpfTthLnByb3RvdHlwZS5jbG9zZVN5bmM9ZnVuY3Rpb24oYSl7RyhhKTthPXRoaXMuZ2V0RmlsZUJ5RmRPclRocm93KGEsImNsb3NlIik7dGhpcy5jbG9zZUZpbGUoYSl9O2EucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKGEsYil7RyhhKTt0aGlzLndyYXBBc3luYyh0aGlzLmNsb3NlU3luYyxbYV0sYil9O2EucHJvdG90eXBlLm9wZW5GaWxlT3JHZXRCeUlkPWZ1bmN0aW9uKGEsYixkKXtpZigibnVtYmVyIj09PXR5cGVvZiBhKXthPXRoaXMuZmRzW2FdO2lmKCFhKXRocm93IGsoIkVOT0VOVCIpO3JldHVybiBhfXJldHVybiB0aGlzLm9wZW5GaWxlKHAoYSksYixkKX07YS5wcm90b3R5cGUucmVhZEJhc2U9ZnVuY3Rpb24oYSxiLGQsZSxmKXtyZXR1cm4gdGhpcy5nZXRGaWxlQnlGZE9yVGhyb3coYSkucmVhZChiLE51bWJlcihkKSxOdW1iZXIoZSksZil9O2EucHJvdG90eXBlLnJlYWRTeW5jPWZ1bmN0aW9uKGEsCmIsZCxlLGYpe0coYSk7cmV0dXJuIHRoaXMucmVhZEJhc2UoYSxiLGQsZSxmKX07YS5wcm90b3R5cGUucmVhZD1mdW5jdGlvbihhLGIsZCxlLGYsaCl7dmFyIGc9dGhpcztyKGgpO2lmKDA9PT1lKXJldHVybiBZLmRlZmF1bHQubmV4dFRpY2soZnVuY3Rpb24oKXtoJiZoKG51bGwsMCxiKX0pO2diLmRlZmF1bHQoZnVuY3Rpb24oKXt0cnl7dmFyIHY9Zy5yZWFkQmFzZShhLGIsZCxlLGYpO2gobnVsbCx2LGIpfWNhdGNoKGNoKXtoKGNoKX19KX07YS5wcm90b3R5cGUucmVhZEZpbGVCYXNlPWZ1bmN0aW9uKGEsYixkKXt2YXIgZT0ibnVtYmVyIj09PXR5cGVvZiBhJiZhPj4+MD09PWE7aWYoIWUpe3ZhciBmPXAoYSk7Zj1uKGYpO2lmKChmPXRoaXMuZ2V0UmVzb2x2ZWRMaW5rKGYpKSYmZi5nZXROb2RlKCkuaXNEaXJlY3RvcnkoKSl0aHJvdyBrKCJFSVNESVIiLCJvcGVuIixmLmdldFBhdGgoKSk7YT10aGlzLm9wZW5TeW5jKGEsYil9dHJ5e3ZhciBoPUModGhpcy5nZXRGaWxlQnlGZE9yVGhyb3coYSkuZ2V0QnVmZmVyKCksCmQpfWZpbmFsbHl7ZXx8dGhpcy5jbG9zZVN5bmMoYSl9cmV0dXJuIGh9O2EucHJvdG90eXBlLnJlYWRGaWxlU3luYz1mdW5jdGlvbihhLGIpe2I9YmEoYik7dmFyIGQ9bChiLmZsYWcpO3JldHVybiB0aGlzLnJlYWRGaWxlQmFzZShhLGQsYi5lbmNvZGluZyl9O2EucHJvdG90eXBlLnJlYWRGaWxlPWZ1bmN0aW9uKGEsYixkKXtkPVAoYmEpKGIsZCk7Yj1kWzBdO2Q9ZFsxXTt2YXIgZT1sKGIuZmxhZyk7dGhpcy53cmFwQXN5bmModGhpcy5yZWFkRmlsZUJhc2UsW2EsZSxiLmVuY29kaW5nXSxkKX07YS5wcm90b3R5cGUud3JpdGVCYXNlPWZ1bmN0aW9uKGEsYixkLGUsZil7cmV0dXJuIHRoaXMuZ2V0RmlsZUJ5RmRPclRocm93KGEsIndyaXRlIikud3JpdGUoYixkLGUsZil9O2EucHJvdG90eXBlLndyaXRlU3luYz1mdW5jdGlvbihhLGIsZCxlLGYpe0coYSk7dmFyIGg9InN0cmluZyIhPT10eXBlb2YgYjtpZihoKXt2YXIgZz0oZHx8MCl8MCx2PWU7ZD1mfWVsc2UgdmFyIHpiPWU7Yj16KGIsCnpiKTtoPyJ1bmRlZmluZWQiPT09dHlwZW9mIHYmJih2PWIubGVuZ3RoKTooZz0wLHY9Yi5sZW5ndGgpO3JldHVybiB0aGlzLndyaXRlQmFzZShhLGIsZyx2LGQpfTthLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbihhLGIsZCxlLGYsaCl7dmFyIGc9dGhpcztHKGEpO3ZhciB2PXR5cGVvZiBiLHpiPXR5cGVvZiBkLGNkPXR5cGVvZiBlLGs9dHlwZW9mIGY7aWYoInN0cmluZyIhPT12KWlmKCJmdW5jdGlvbiI9PT16Yil2YXIgdz1kO2Vsc2UgaWYoImZ1bmN0aW9uIj09PWNkKXt2YXIgRj1kfDA7dz1lfWVsc2UgaWYoImZ1bmN0aW9uIj09PWspe0Y9ZHwwO3ZhciBsPWU7dz1mfWVsc2V7Rj1kfDA7bD1lO3ZhciBkZD1mO3c9aH1lbHNlIGlmKCJmdW5jdGlvbiI9PT16Yil3PWQ7ZWxzZSBpZigiZnVuY3Rpb24iPT09Y2QpZGQ9ZCx3PWU7ZWxzZSBpZigiZnVuY3Rpb24iPT09ayl7ZGQ9ZDt2YXIgcT1lO3c9Zn12YXIgcD16KGIscSk7InN0cmluZyIhPT12PyJ1bmRlZmluZWQiPT09dHlwZW9mIGwmJgoobD1wLmxlbmd0aCk6KEY9MCxsPXAubGVuZ3RoKTt2YXIgbT1yKHcpO2diLmRlZmF1bHQoZnVuY3Rpb24oKXt0cnl7dmFyIGQ9Zy53cml0ZUJhc2UoYSxwLEYsbCxkZCk7InN0cmluZyIhPT12P20obnVsbCxkLHApOm0obnVsbCxkLGIpfWNhdGNoKGRoKXttKGRoKX19KX07YS5wcm90b3R5cGUud3JpdGVGaWxlQmFzZT1mdW5jdGlvbihhLGIsZCxlKXt2YXIgZj0ibnVtYmVyIj09PXR5cGVvZiBhO2E9Zj9hOnRoaXMub3BlbkJhc2UocChhKSxkLGUpO2U9MDt2YXIgaD1iLmxlbmd0aDtkPWQmTD92b2lkIDA6MDt0cnl7Zm9yKDswPGg7KXt2YXIgZz10aGlzLndyaXRlU3luYyhhLGIsZSxoLGQpO2UrPWc7aC09Zzt2b2lkIDAhPT1kJiYoZCs9Zyl9fWZpbmFsbHl7Znx8dGhpcy5jbG9zZVN5bmMoYSl9fTthLnByb3RvdHlwZS53cml0ZUZpbGVTeW5jPWZ1bmN0aW9uKGEsYixkKXt2YXIgZT1lYShkKTtkPWwoZS5mbGFnKTt2YXIgZj15KGUubW9kZSk7Yj16KGIsZS5lbmNvZGluZyk7dGhpcy53cml0ZUZpbGVCYXNlKGEsCmIsZCxmKX07YS5wcm90b3R5cGUud3JpdGVGaWxlPWZ1bmN0aW9uKGEsYixkLGUpe3ZhciBmPWQ7ImZ1bmN0aW9uIj09PXR5cGVvZiBkJiYoZj1kYSxlPWQpO2Q9cihlKTt2YXIgaD1lYShmKTtmPWwoaC5mbGFnKTtlPXkoaC5tb2RlKTtiPXooYixoLmVuY29kaW5nKTt0aGlzLndyYXBBc3luYyh0aGlzLndyaXRlRmlsZUJhc2UsW2EsYixmLGVdLGQpfTthLnByb3RvdHlwZS5saW5rQmFzZT1mdW5jdGlvbihhLGIpe3ZhciBkPW4oYSksZT10aGlzLmdldExpbmsoZCk7aWYoIWUpdGhyb3cgaygiRU5PRU5UIiwibGluayIsYSxiKTt2YXIgZj1uKGIpO2Q9dGhpcy5nZXRMaW5rUGFyZW50KGYpO2lmKCFkKXRocm93IGsoIkVOT0VOVCIsImxpbmsiLGEsYik7Zj1mW2YubGVuZ3RoLTFdO2lmKGQuZ2V0Q2hpbGQoZikpdGhyb3cgaygiRUVYSVNUIiwibGluayIsYSxiKTthPWUuZ2V0Tm9kZSgpO2EubmxpbmsrKztkLmNyZWF0ZUNoaWxkKGYsYSl9O2EucHJvdG90eXBlLmNvcHlGaWxlQmFzZT1mdW5jdGlvbihhLApiLGQpe3ZhciBlPXRoaXMucmVhZEZpbGVTeW5jKGEpO2lmKGQmViYmdGhpcy5leGlzdHNTeW5jKGIpKXRocm93IGsoIkVFWElTVCIsImNvcHlGaWxlIixhLGIpO2lmKGQmWCl0aHJvdyBrKCJFTk9TWVMiLCJjb3B5RmlsZSIsYSxiKTt0aGlzLndyaXRlRmlsZUJhc2UoYixlLFIudyw0MzgpfTthLnByb3RvdHlwZS5jb3B5RmlsZVN5bmM9ZnVuY3Rpb24oYSxiLGQpe2E9cChhKTtiPXAoYik7cmV0dXJuIHRoaXMuY29weUZpbGVCYXNlKGEsYiwoZHx8MCl8MCl9O2EucHJvdG90eXBlLmNvcHlGaWxlPWZ1bmN0aW9uKGEsYixkLGUpe2E9cChhKTtiPXAoYik7aWYoImZ1bmN0aW9uIj09PXR5cGVvZiBkKXZhciBmPTA7ZWxzZSBmPWQsZD1lO3IoZCk7dGhpcy53cmFwQXN5bmModGhpcy5jb3B5RmlsZUJhc2UsW2EsYixmXSxkKX07YS5wcm90b3R5cGUubGlua1N5bmM9ZnVuY3Rpb24oYSxiKXthPXAoYSk7Yj1wKGIpO3RoaXMubGlua0Jhc2UoYSxiKX07YS5wcm90b3R5cGUubGluaz1mdW5jdGlvbihhLApiLGQpe2E9cChhKTtiPXAoYik7dGhpcy53cmFwQXN5bmModGhpcy5saW5rQmFzZSxbYSxiXSxkKX07YS5wcm90b3R5cGUudW5saW5rQmFzZT1mdW5jdGlvbihhKXt2YXIgYj1uKGEpO2I9dGhpcy5nZXRMaW5rKGIpO2lmKCFiKXRocm93IGsoIkVOT0VOVCIsInVubGluayIsYSk7aWYoYi5sZW5ndGgpdGhyb3cgRXJyb3IoIkRpciBub3QgZW1wdHkuLi4iKTt0aGlzLmRlbGV0ZUxpbmsoYik7YT1iLmdldE5vZGUoKTthLm5saW5rLS07MD49YS5ubGluayYmdGhpcy5kZWxldGVOb2RlKGEpfTthLnByb3RvdHlwZS51bmxpbmtTeW5jPWZ1bmN0aW9uKGEpe2E9cChhKTt0aGlzLnVubGlua0Jhc2UoYSl9O2EucHJvdG90eXBlLnVubGluaz1mdW5jdGlvbihhLGIpe2E9cChhKTt0aGlzLndyYXBBc3luYyh0aGlzLnVubGlua0Jhc2UsW2FdLGIpfTthLnByb3RvdHlwZS5zeW1saW5rQmFzZT1mdW5jdGlvbihhLGIpe3ZhciBkPW4oYiksZT10aGlzLmdldExpbmtQYXJlbnQoZCk7aWYoIWUpdGhyb3cgaygiRU5PRU5UIiwKInN5bWxpbmsiLGEsYik7ZD1kW2QubGVuZ3RoLTFdO2lmKGUuZ2V0Q2hpbGQoZCkpdGhyb3cgaygiRUVYSVNUIiwic3ltbGluayIsYSxiKTtiPWUuY3JlYXRlQ2hpbGQoZCk7Yi5nZXROb2RlKCkubWFrZVN5bWxpbmsobihhKSk7cmV0dXJuIGJ9O2EucHJvdG90eXBlLnN5bWxpbmtTeW5jPWZ1bmN0aW9uKGEsYil7YT1wKGEpO2I9cChiKTt0aGlzLnN5bWxpbmtCYXNlKGEsYil9O2EucHJvdG90eXBlLnN5bWxpbms9ZnVuY3Rpb24oYSxiLGQsZSl7ZD1yKCJmdW5jdGlvbiI9PT10eXBlb2YgZD9kOmUpO2E9cChhKTtiPXAoYik7dGhpcy53cmFwQXN5bmModGhpcy5zeW1saW5rQmFzZSxbYSxiXSxkKX07YS5wcm90b3R5cGUucmVhbHBhdGhCYXNlPWZ1bmN0aW9uKGEsYil7dmFyIGQ9bihhKTtkPXRoaXMuZ2V0UmVzb2x2ZWRMaW5rKGQpO2lmKCFkKXRocm93IGsoIkVOT0VOVCIsInJlYWxwYXRoIixhKTtyZXR1cm4gb2Euc3RyVG9FbmNvZGluZyhkLmdldFBhdGgoKSxiKX07YS5wcm90b3R5cGUucmVhbHBhdGhTeW5jPQpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLnJlYWxwYXRoQmFzZShwKGEpLGphKGIpLmVuY29kaW5nKX07YS5wcm90b3R5cGUucmVhbHBhdGg9ZnVuY3Rpb24oYSxiLGQpe2Q9cGEoYixkKTtiPWRbMF07ZD1kWzFdO2E9cChhKTt0aGlzLndyYXBBc3luYyh0aGlzLnJlYWxwYXRoQmFzZSxbYSxiLmVuY29kaW5nXSxkKX07YS5wcm90b3R5cGUubHN0YXRCYXNlPWZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9ITEpO3ZhciBkPXRoaXMuZ2V0TGluayhuKGEpKTtpZighZCl0aHJvdyBrKCJFTk9FTlQiLCJsc3RhdCIsYSk7cmV0dXJuIGViLmRlZmF1bHQuYnVpbGQoZC5nZXROb2RlKCksYil9O2EucHJvdG90eXBlLmxzdGF0U3luYz1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmxzdGF0QmFzZShwKGEpLGYoYikuYmlnaW50KX07YS5wcm90b3R5cGUubHN0YXQ9ZnVuY3Rpb24oYSxiLGQpe2Q9ZShiLGQpO2I9ZFswXTtkPWRbMV07dGhpcy53cmFwQXN5bmModGhpcy5sc3RhdEJhc2UsW3AoYSksCmIuYmlnaW50XSxkKX07YS5wcm90b3R5cGUuc3RhdEJhc2U9ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1iJiYoYj0hMSk7dmFyIGQ9dGhpcy5nZXRSZXNvbHZlZExpbmsobihhKSk7aWYoIWQpdGhyb3cgaygiRU5PRU5UIiwic3RhdCIsYSk7cmV0dXJuIGViLmRlZmF1bHQuYnVpbGQoZC5nZXROb2RlKCksYil9O2EucHJvdG90eXBlLnN0YXRTeW5jPWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuc3RhdEJhc2UocChhKSxmKGIpLmJpZ2ludCl9O2EucHJvdG90eXBlLnN0YXQ9ZnVuY3Rpb24oYSxiLGQpe2Q9ZShiLGQpO2I9ZFswXTtkPWRbMV07dGhpcy53cmFwQXN5bmModGhpcy5zdGF0QmFzZSxbcChhKSxiLmJpZ2ludF0sZCl9O2EucHJvdG90eXBlLmZzdGF0QmFzZT1mdW5jdGlvbihhLGIpe3ZvaWQgMD09PWImJihiPSExKTthPXRoaXMuZ2V0RmlsZUJ5RmQoYSk7aWYoIWEpdGhyb3cgaygiRUJBREYiLCJmc3RhdCIpO3JldHVybiBlYi5kZWZhdWx0LmJ1aWxkKGEubm9kZSxiKX07YS5wcm90b3R5cGUuZnN0YXRTeW5jPQpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmZzdGF0QmFzZShhLGYoYikuYmlnaW50KX07YS5wcm90b3R5cGUuZnN0YXQ9ZnVuY3Rpb24oYSxiLGQpe2I9ZShiLGQpO3RoaXMud3JhcEFzeW5jKHRoaXMuZnN0YXRCYXNlLFthLGJbMF0uYmlnaW50XSxiWzFdKX07YS5wcm90b3R5cGUucmVuYW1lQmFzZT1mdW5jdGlvbihhLGIpe3ZhciBkPXRoaXMuZ2V0TGluayhuKGEpKTtpZighZCl0aHJvdyBrKCJFTk9FTlQiLCJyZW5hbWUiLGEsYik7dmFyIGU9bihiKSxmPXRoaXMuZ2V0TGlua1BhcmVudChlKTtpZighZil0aHJvdyBrKCJFTk9FTlQiLCJyZW5hbWUiLGEsYik7KGE9ZC5wYXJlbnQpJiZhLmRlbGV0ZUNoaWxkKGQpO2Quc3RlcHM9ZmQoZi5zdGVwcyxbZVtlLmxlbmd0aC0xXV0pO2Yuc2V0Q2hpbGQoZC5nZXROYW1lKCksZCl9O2EucHJvdG90eXBlLnJlbmFtZVN5bmM9ZnVuY3Rpb24oYSxiKXthPXAoYSk7Yj1wKGIpO3RoaXMucmVuYW1lQmFzZShhLGIpfTthLnByb3RvdHlwZS5yZW5hbWU9CmZ1bmN0aW9uKGEsYixkKXthPXAoYSk7Yj1wKGIpO3RoaXMud3JhcEFzeW5jKHRoaXMucmVuYW1lQmFzZSxbYSxiXSxkKX07YS5wcm90b3R5cGUuZXhpc3RzQmFzZT1mdW5jdGlvbihhKXtyZXR1cm4hIXRoaXMuc3RhdEJhc2UoYSl9O2EucHJvdG90eXBlLmV4aXN0c1N5bmM9ZnVuY3Rpb24oYSl7dHJ5e3JldHVybiB0aGlzLmV4aXN0c0Jhc2UocChhKSl9Y2F0Y2goemIpe3JldHVybiExfX07YS5wcm90b3R5cGUuZXhpc3RzPWZ1bmN0aW9uKGEsYil7dmFyIGQ9dGhpcyxlPXAoYSk7aWYoImZ1bmN0aW9uIiE9PXR5cGVvZiBiKXRocm93IEVycm9yKE0uQ0IpO2diLmRlZmF1bHQoZnVuY3Rpb24oKXt0cnl7YihkLmV4aXN0c0Jhc2UoZSkpfWNhdGNoKEFiKXtiKCExKX19KX07YS5wcm90b3R5cGUuYWNjZXNzQmFzZT1mdW5jdGlvbihhKXt0aGlzLmdldExpbmtPclRocm93KGEsImFjY2VzcyIpfTthLnByb3RvdHlwZS5hY2Nlc3NTeW5jPWZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9Uyk7CmE9cChhKTt0aGlzLmFjY2Vzc0Jhc2UoYSxifDApfTthLnByb3RvdHlwZS5hY2Nlc3M9ZnVuY3Rpb24oYSxiLGQpe3ZhciBlPVM7ImZ1bmN0aW9uIiE9PXR5cGVvZiBiJiYoZT1ifDAsYj1yKGQpKTthPXAoYSk7dGhpcy53cmFwQXN5bmModGhpcy5hY2Nlc3NCYXNlLFthLGVdLGIpfTthLnByb3RvdHlwZS5hcHBlbmRGaWxlU3luYz1mdW5jdGlvbihhLGIsZCl7dm9pZCAwPT09ZCYmKGQ9ZmEpO2Q9aGEoZCk7ZC5mbGFnJiZhPj4+MCE9PWF8fChkLmZsYWc9ImEiKTt0aGlzLndyaXRlRmlsZVN5bmMoYSxiLGQpfTthLnByb3RvdHlwZS5hcHBlbmRGaWxlPWZ1bmN0aW9uKGEsYixkLGUpe2U9bmEoZCxlKTtkPWVbMF07ZT1lWzFdO2QuZmxhZyYmYT4+PjAhPT1hfHwoZC5mbGFnPSJhIik7dGhpcy53cml0ZUZpbGUoYSxiLGQsZSl9O2EucHJvdG90eXBlLnJlYWRkaXJCYXNlPWZ1bmN0aW9uKGEsYil7dmFyIGQ9bihhKTtkPXRoaXMuZ2V0UmVzb2x2ZWRMaW5rKGQpO2lmKCFkKXRocm93IGsoIkVOT0VOVCIsCiJyZWFkZGlyIixhKTtpZighZC5nZXROb2RlKCkuaXNEaXJlY3RvcnkoKSl0aHJvdyBrKCJFTk9URElSIiwic2NhbmRpciIsYSk7aWYoYi53aXRoRmlsZVR5cGVzKXt2YXIgZT1bXTtmb3IoZiBpbiBkLmNoaWxkcmVuKShhPWQuZ2V0Q2hpbGQoZikpJiZlLnB1c2goJGMuZGVmYXVsdC5idWlsZChhLGIuZW5jb2RpbmcpKTtVfHwiYnVmZmVyIj09PWIuZW5jb2Rpbmd8fGUuc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBhLm5hbWU8Yi5uYW1lPy0xOmEubmFtZT5iLm5hbWU/MTowfSk7cmV0dXJuIGV9dmFyIGY9W107Zm9yKGUgaW4gZC5jaGlsZHJlbilmLnB1c2gob2Euc3RyVG9FbmNvZGluZyhlLGIuZW5jb2RpbmcpKTtVfHwiYnVmZmVyIj09PWIuZW5jb2Rpbmd8fGYuc29ydCgpO3JldHVybiBmfTthLnByb3RvdHlwZS5yZWFkZGlyU3luYz1mdW5jdGlvbihhLGIpe2I9bWEoYik7YT1wKGEpO3JldHVybiB0aGlzLnJlYWRkaXJCYXNlKGEsYil9O2EucHJvdG90eXBlLnJlYWRkaXI9ZnVuY3Rpb24oYSwKYixkKXtkPXNhKGIsZCk7Yj1kWzBdO2Q9ZFsxXTthPXAoYSk7dGhpcy53cmFwQXN5bmModGhpcy5yZWFkZGlyQmFzZSxbYSxiXSxkKX07YS5wcm90b3R5cGUucmVhZGxpbmtCYXNlPWZ1bmN0aW9uKGEsYil7dmFyIGQ9dGhpcy5nZXRMaW5rT3JUaHJvdyhhLCJyZWFkbGluayIpLmdldE5vZGUoKTtpZighZC5pc1N5bWxpbmsoKSl0aHJvdyBrKCJFSU5WQUwiLCJyZWFkbGluayIsYSk7YT1IK2Quc3ltbGluay5qb2luKEgpO3JldHVybiBvYS5zdHJUb0VuY29kaW5nKGEsYil9O2EucHJvdG90eXBlLnJlYWRsaW5rU3luYz1mdW5jdGlvbihhLGIpe2I9VyhiKTthPXAoYSk7cmV0dXJuIHRoaXMucmVhZGxpbmtCYXNlKGEsYi5lbmNvZGluZyl9O2EucHJvdG90eXBlLnJlYWRsaW5rPWZ1bmN0aW9uKGEsYixkKXtkPWFhKGIsZCk7Yj1kWzBdO2Q9ZFsxXTthPXAoYSk7dGhpcy53cmFwQXN5bmModGhpcy5yZWFkbGlua0Jhc2UsW2EsYi5lbmNvZGluZ10sZCl9O2EucHJvdG90eXBlLmZzeW5jQmFzZT0KZnVuY3Rpb24oYSl7dGhpcy5nZXRGaWxlQnlGZE9yVGhyb3coYSwiZnN5bmMiKX07YS5wcm90b3R5cGUuZnN5bmNTeW5jPWZ1bmN0aW9uKGEpe3RoaXMuZnN5bmNCYXNlKGEpfTthLnByb3RvdHlwZS5mc3luYz1mdW5jdGlvbihhLGIpe3RoaXMud3JhcEFzeW5jKHRoaXMuZnN5bmNCYXNlLFthXSxiKX07YS5wcm90b3R5cGUuZmRhdGFzeW5jQmFzZT1mdW5jdGlvbihhKXt0aGlzLmdldEZpbGVCeUZkT3JUaHJvdyhhLCJmZGF0YXN5bmMiKX07YS5wcm90b3R5cGUuZmRhdGFzeW5jU3luYz1mdW5jdGlvbihhKXt0aGlzLmZkYXRhc3luY0Jhc2UoYSl9O2EucHJvdG90eXBlLmZkYXRhc3luYz1mdW5jdGlvbihhLGIpe3RoaXMud3JhcEFzeW5jKHRoaXMuZmRhdGFzeW5jQmFzZSxbYV0sYil9O2EucHJvdG90eXBlLmZ0cnVuY2F0ZUJhc2U9ZnVuY3Rpb24oYSxiKXt0aGlzLmdldEZpbGVCeUZkT3JUaHJvdyhhLCJmdHJ1bmNhdGUiKS50cnVuY2F0ZShiKX07YS5wcm90b3R5cGUuZnRydW5jYXRlU3luYz0KZnVuY3Rpb24oYSxiKXt0aGlzLmZ0cnVuY2F0ZUJhc2UoYSxiKX07YS5wcm90b3R5cGUuZnRydW5jYXRlPWZ1bmN0aW9uKGEsYixkKXt2YXIgZT0ibnVtYmVyIj09PXR5cGVvZiBiP2I6MDtiPXIoIm51bWJlciI9PT10eXBlb2YgYj9kOmIpO3RoaXMud3JhcEFzeW5jKHRoaXMuZnRydW5jYXRlQmFzZSxbYSxlXSxiKX07YS5wcm90b3R5cGUudHJ1bmNhdGVCYXNlPWZ1bmN0aW9uKGEsYil7YT10aGlzLm9wZW5TeW5jKGEsInIrIik7dHJ5e3RoaXMuZnRydW5jYXRlU3luYyhhLGIpfWZpbmFsbHl7dGhpcy5jbG9zZVN5bmMoYSl9fTthLnByb3RvdHlwZS50cnVuY2F0ZVN5bmM9ZnVuY3Rpb24oYSxiKXtpZihhPj4+MD09PWEpcmV0dXJuIHRoaXMuZnRydW5jYXRlU3luYyhhLGIpO3RoaXMudHJ1bmNhdGVCYXNlKGEsYil9O2EucHJvdG90eXBlLnRydW5jYXRlPWZ1bmN0aW9uKGEsYixkKXt2YXIgZT0ibnVtYmVyIj09PXR5cGVvZiBiP2I6MDtiPXIoIm51bWJlciI9PT10eXBlb2YgYj9kOmIpOwppZihhPj4+MD09PWEpcmV0dXJuIHRoaXMuZnRydW5jYXRlKGEsZSxiKTt0aGlzLndyYXBBc3luYyh0aGlzLnRydW5jYXRlQmFzZSxbYSxlXSxiKX07YS5wcm90b3R5cGUuZnV0aW1lc0Jhc2U9ZnVuY3Rpb24oYSxiLGQpe2E9dGhpcy5nZXRGaWxlQnlGZE9yVGhyb3coYSwiZnV0aW1lcyIpLm5vZGU7YS5hdGltZT1uZXcgRGF0ZSgxRTMqYik7YS5tdGltZT1uZXcgRGF0ZSgxRTMqZCl9O2EucHJvdG90eXBlLmZ1dGltZXNTeW5jPWZ1bmN0aW9uKGEsYixkKXt0aGlzLmZ1dGltZXNCYXNlKGEsRChiKSxEKGQpKX07YS5wcm90b3R5cGUuZnV0aW1lcz1mdW5jdGlvbihhLGIsZCxlKXt0aGlzLndyYXBBc3luYyh0aGlzLmZ1dGltZXNCYXNlLFthLEQoYiksRChkKV0sZSl9O2EucHJvdG90eXBlLnV0aW1lc0Jhc2U9ZnVuY3Rpb24oYSxiLGQpe2E9dGhpcy5vcGVuU3luYyhhLCJyKyIpO3RyeXt0aGlzLmZ1dGltZXNCYXNlKGEsYixkKX1maW5hbGx5e3RoaXMuY2xvc2VTeW5jKGEpfX07YS5wcm90b3R5cGUudXRpbWVzU3luYz0KZnVuY3Rpb24oYSxiLGQpe3RoaXMudXRpbWVzQmFzZShwKGEpLEQoYiksRChkKSl9O2EucHJvdG90eXBlLnV0aW1lcz1mdW5jdGlvbihhLGIsZCxlKXt0aGlzLndyYXBBc3luYyh0aGlzLnV0aW1lc0Jhc2UsW3AoYSksRChiKSxEKGQpXSxlKX07YS5wcm90b3R5cGUubWtkaXJCYXNlPWZ1bmN0aW9uKGEsYil7dmFyIGQ9bihhKTtpZighZC5sZW5ndGgpdGhyb3cgaygiRUlTRElSIiwibWtkaXIiLGEpO3ZhciBlPXRoaXMuZ2V0TGlua1BhcmVudEFzRGlyT3JUaHJvdyhhLCJta2RpciIpO2Q9ZFtkLmxlbmd0aC0xXTtpZihlLmdldENoaWxkKGQpKXRocm93IGsoIkVFWElTVCIsIm1rZGlyIixhKTtlLmNyZWF0ZUNoaWxkKGQsdGhpcy5jcmVhdGVOb2RlKCEwLGIpKX07YS5wcm90b3R5cGUubWtkaXJwQmFzZT1mdW5jdGlvbihhLGIpe2E9bihhKTtmb3IodmFyIGQ9dGhpcy5yb290LGU9MDtlPGEubGVuZ3RoO2UrKyl7dmFyIGY9YVtlXTtpZighZC5nZXROb2RlKCkuaXNEaXJlY3RvcnkoKSl0aHJvdyBrKCJFTk9URElSIiwKIm1rZGlyIixkLmdldFBhdGgoKSk7dmFyIGg9ZC5nZXRDaGlsZChmKTtpZihoKWlmKGguZ2V0Tm9kZSgpLmlzRGlyZWN0b3J5KCkpZD1oO2Vsc2UgdGhyb3cgaygiRU5PVERJUiIsIm1rZGlyIixoLmdldFBhdGgoKSk7ZWxzZSBkPWQuY3JlYXRlQ2hpbGQoZix0aGlzLmNyZWF0ZU5vZGUoITAsYikpfX07YS5wcm90b3R5cGUubWtkaXJTeW5jPWZ1bmN0aW9uKGEsYil7Yj1nKGIpO3ZhciBkPXkoYi5tb2RlLDUxMSk7YT1wKGEpO2IucmVjdXJzaXZlP3RoaXMubWtkaXJwQmFzZShhLGQpOnRoaXMubWtkaXJCYXNlKGEsZCl9O2EucHJvdG90eXBlLm1rZGlyPWZ1bmN0aW9uKGEsYixkKXt2YXIgZT1nKGIpO2I9cigiZnVuY3Rpb24iPT09dHlwZW9mIGI/YjpkKTtkPXkoZS5tb2RlLDUxMSk7YT1wKGEpO2UucmVjdXJzaXZlP3RoaXMud3JhcEFzeW5jKHRoaXMubWtkaXJwQmFzZSxbYSxkXSxiKTp0aGlzLndyYXBBc3luYyh0aGlzLm1rZGlyQmFzZSxbYSxkXSxiKX07YS5wcm90b3R5cGUubWtkaXJwU3luYz0KZnVuY3Rpb24oYSxiKXt0aGlzLm1rZGlyU3luYyhhLHttb2RlOmIscmVjdXJzaXZlOiEwfSl9O2EucHJvdG90eXBlLm1rZGlycD1mdW5jdGlvbihhLGIsZCl7dmFyIGU9ImZ1bmN0aW9uIj09PXR5cGVvZiBiP3ZvaWQgMDpiO2I9cigiZnVuY3Rpb24iPT09dHlwZW9mIGI/YjpkKTt0aGlzLm1rZGlyKGEse21vZGU6ZSxyZWN1cnNpdmU6ITB9LGIpfTthLnByb3RvdHlwZS5ta2R0ZW1wQmFzZT1mdW5jdGlvbihhLGIsZCl7dm9pZCAwPT09ZCYmKGQ9NSk7dmFyIGU9YSt0aGlzLmdlblJuZFN0cigpO3RyeXtyZXR1cm4gdGhpcy5ta2RpckJhc2UoZSw1MTEpLG9hLnN0clRvRW5jb2RpbmcoZSxiKX1jYXRjaChBYil7aWYoIkVFWElTVCI9PT1BYi5jb2RlKXtpZigxPGQpcmV0dXJuIHRoaXMubWtkdGVtcEJhc2UoYSxiLGQtMSk7dGhyb3cgRXJyb3IoIkNvdWxkIG5vdCBjcmVhdGUgdGVtcCBkaXIuIik7fXRocm93IEFiO319O2EucHJvdG90eXBlLm1rZHRlbXBTeW5jPWZ1bmN0aW9uKGEsYil7Yj0KVyhiKS5lbmNvZGluZztpZighYXx8InN0cmluZyIhPT10eXBlb2YgYSl0aHJvdyBuZXcgVHlwZUVycm9yKCJmaWxlbmFtZSBwcmVmaXggaXMgcmVxdWlyZWQiKTtFKGEpO3JldHVybiB0aGlzLm1rZHRlbXBCYXNlKGEsYil9O2EucHJvdG90eXBlLm1rZHRlbXA9ZnVuY3Rpb24oYSxiLGQpe2Q9YWEoYixkKTtiPWRbMF0uZW5jb2Rpbmc7ZD1kWzFdO2lmKCFhfHwic3RyaW5nIiE9PXR5cGVvZiBhKXRocm93IG5ldyBUeXBlRXJyb3IoImZpbGVuYW1lIHByZWZpeCBpcyByZXF1aXJlZCIpO0UoYSkmJnRoaXMud3JhcEFzeW5jKHRoaXMubWtkdGVtcEJhc2UsW2EsYl0sZCl9O2EucHJvdG90eXBlLnJtZGlyQmFzZT1mdW5jdGlvbihhLGIpe2I9eGEoe30sbGEsYik7dmFyIGQ9dGhpcy5nZXRMaW5rQXNEaXJPclRocm93KGEsInJtZGlyIik7aWYoZC5sZW5ndGgmJiFiLnJlY3Vyc2l2ZSl0aHJvdyBrKCJFTk9URU1QVFkiLCJybWRpciIsYSk7dGhpcy5kZWxldGVMaW5rKGQpfTthLnByb3RvdHlwZS5ybWRpclN5bmM9CmZ1bmN0aW9uKGEsYil7dGhpcy5ybWRpckJhc2UocChhKSxiKX07YS5wcm90b3R5cGUucm1kaXI9ZnVuY3Rpb24oYSxiLGQpe3ZhciBlPXhhKHt9LGxhLGIpO2I9cigiZnVuY3Rpb24iPT09dHlwZW9mIGI/YjpkKTt0aGlzLndyYXBBc3luYyh0aGlzLnJtZGlyQmFzZSxbcChhKSxlXSxiKX07YS5wcm90b3R5cGUuZmNobW9kQmFzZT1mdW5jdGlvbihhLGIpe3RoaXMuZ2V0RmlsZUJ5RmRPclRocm93KGEsImZjaG1vZCIpLmNobW9kKGIpfTthLnByb3RvdHlwZS5mY2htb2RTeW5jPWZ1bmN0aW9uKGEsYil7dGhpcy5mY2htb2RCYXNlKGEseShiKSl9O2EucHJvdG90eXBlLmZjaG1vZD1mdW5jdGlvbihhLGIsZCl7dGhpcy53cmFwQXN5bmModGhpcy5mY2htb2RCYXNlLFthLHkoYildLGQpfTthLnByb3RvdHlwZS5jaG1vZEJhc2U9ZnVuY3Rpb24oYSxiKXthPXRoaXMub3BlblN5bmMoYSwicisiKTt0cnl7dGhpcy5mY2htb2RCYXNlKGEsYil9ZmluYWxseXt0aGlzLmNsb3NlU3luYyhhKX19OwphLnByb3RvdHlwZS5jaG1vZFN5bmM9ZnVuY3Rpb24oYSxiKXtiPXkoYik7YT1wKGEpO3RoaXMuY2htb2RCYXNlKGEsYil9O2EucHJvdG90eXBlLmNobW9kPWZ1bmN0aW9uKGEsYixkKXtiPXkoYik7YT1wKGEpO3RoaXMud3JhcEFzeW5jKHRoaXMuY2htb2RCYXNlLFthLGJdLGQpfTthLnByb3RvdHlwZS5sY2htb2RCYXNlPWZ1bmN0aW9uKGEsYil7YT10aGlzLm9wZW5CYXNlKGEsQWEsMCwhMSk7dHJ5e3RoaXMuZmNobW9kQmFzZShhLGIpfWZpbmFsbHl7dGhpcy5jbG9zZVN5bmMoYSl9fTthLnByb3RvdHlwZS5sY2htb2RTeW5jPWZ1bmN0aW9uKGEsYil7Yj15KGIpO2E9cChhKTt0aGlzLmxjaG1vZEJhc2UoYSxiKX07YS5wcm90b3R5cGUubGNobW9kPWZ1bmN0aW9uKGEsYixkKXtiPXkoYik7YT1wKGEpO3RoaXMud3JhcEFzeW5jKHRoaXMubGNobW9kQmFzZSxbYSxiXSxkKX07YS5wcm90b3R5cGUuZmNob3duQmFzZT1mdW5jdGlvbihhLGIsZCl7dGhpcy5nZXRGaWxlQnlGZE9yVGhyb3coYSwKImZjaG93biIpLmNob3duKGIsZCl9O2EucHJvdG90eXBlLmZjaG93blN5bmM9ZnVuY3Rpb24oYSxiLGQpe3coYik7RihkKTt0aGlzLmZjaG93bkJhc2UoYSxiLGQpfTthLnByb3RvdHlwZS5mY2hvd249ZnVuY3Rpb24oYSxiLGQsZSl7dyhiKTtGKGQpO3RoaXMud3JhcEFzeW5jKHRoaXMuZmNob3duQmFzZSxbYSxiLGRdLGUpfTthLnByb3RvdHlwZS5jaG93bkJhc2U9ZnVuY3Rpb24oYSxiLGQpe3RoaXMuZ2V0UmVzb2x2ZWRMaW5rT3JUaHJvdyhhLCJjaG93biIpLmdldE5vZGUoKS5jaG93bihiLGQpfTthLnByb3RvdHlwZS5jaG93blN5bmM9ZnVuY3Rpb24oYSxiLGQpe3coYik7RihkKTt0aGlzLmNob3duQmFzZShwKGEpLGIsZCl9O2EucHJvdG90eXBlLmNob3duPWZ1bmN0aW9uKGEsYixkLGUpe3coYik7RihkKTt0aGlzLndyYXBBc3luYyh0aGlzLmNob3duQmFzZSxbcChhKSxiLGRdLGUpfTthLnByb3RvdHlwZS5sY2hvd25CYXNlPWZ1bmN0aW9uKGEsYixkKXt0aGlzLmdldExpbmtPclRocm93KGEsCiJsY2hvd24iKS5nZXROb2RlKCkuY2hvd24oYixkKX07YS5wcm90b3R5cGUubGNob3duU3luYz1mdW5jdGlvbihhLGIsZCl7dyhiKTtGKGQpO3RoaXMubGNob3duQmFzZShwKGEpLGIsZCl9O2EucHJvdG90eXBlLmxjaG93bj1mdW5jdGlvbihhLGIsZCxlKXt3KGIpO0YoZCk7dGhpcy53cmFwQXN5bmModGhpcy5sY2hvd25CYXNlLFtwKGEpLGIsZF0sZSl9O2EucHJvdG90eXBlLndhdGNoRmlsZT1mdW5jdGlvbihhLGIsZCl7YT1wKGEpO3ZhciBlPWI7ImZ1bmN0aW9uIj09PXR5cGVvZiBlJiYoZD1iLGU9bnVsbCk7aWYoImZ1bmN0aW9uIiE9PXR5cGVvZiBkKXRocm93IEVycm9yKCcid2F0Y2hGaWxlKCkiIHJlcXVpcmVzIGEgbGlzdGVuZXIgZnVuY3Rpb24nKTtiPTUwMDc7dmFyIGY9ITA7ZSYmIm9iamVjdCI9PT10eXBlb2YgZSYmKCJudW1iZXIiPT09dHlwZW9mIGUuaW50ZXJ2YWwmJihiPWUuaW50ZXJ2YWwpLCJib29sZWFuIj09PXR5cGVvZiBlLnBlcnNpc3RlbnQmJihmPWUucGVyc2lzdGVudCkpOwooZT10aGlzLnN0YXRXYXRjaGVyc1thXSl8fChlPW5ldyB0aGlzLlN0YXRXYXRjaGVyLGUuc3RhcnQoYSxmLGIpLHRoaXMuc3RhdFdhdGNoZXJzW2FdPWUpO2UuYWRkTGlzdGVuZXIoImNoYW5nZSIsZCk7cmV0dXJuIGV9O2EucHJvdG90eXBlLnVud2F0Y2hGaWxlPWZ1bmN0aW9uKGEsYil7YT1wKGEpO3ZhciBkPXRoaXMuc3RhdFdhdGNoZXJzW2FdO2QmJigiZnVuY3Rpb24iPT09dHlwZW9mIGI/ZC5yZW1vdmVMaXN0ZW5lcigiY2hhbmdlIixiKTpkLnJlbW92ZUFsbExpc3RlbmVycygiY2hhbmdlIiksMD09PWQubGlzdGVuZXJDb3VudCgiY2hhbmdlIikmJihkLnN0b3AoKSxkZWxldGUgdGhpcy5zdGF0V2F0Y2hlcnNbYV0pKX07YS5wcm90b3R5cGUuY3JlYXRlUmVhZFN0cmVhbT1mdW5jdGlvbihhLGIpe3JldHVybiBuZXcgdGhpcy5SZWFkU3RyZWFtKGEsYil9O2EucHJvdG90eXBlLmNyZWF0ZVdyaXRlU3RyZWFtPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyB0aGlzLldyaXRlU3RyZWFtKGEsCmIpfTthLnByb3RvdHlwZS53YXRjaD1mdW5jdGlvbihhLGIsZCl7YT1wKGEpO3ZhciBlPWI7ImZ1bmN0aW9uIj09PXR5cGVvZiBiJiYoZD1iLGU9bnVsbCk7dmFyIGY9VyhlKTtiPWYucGVyc2lzdGVudDtlPWYucmVjdXJzaXZlO2Y9Zi5lbmNvZGluZzt2b2lkIDA9PT1iJiYoYj0hMCk7dm9pZCAwPT09ZSYmKGU9ITEpO3ZhciBoPW5ldyB0aGlzLkZTV2F0Y2hlcjtoLnN0YXJ0KGEsYixlLGYpO2QmJmguYWRkTGlzdGVuZXIoImNoYW5nZSIsZCk7cmV0dXJuIGh9O2EuZmQ9MjE0NzQ4MzY0NztyZXR1cm4gYX0oKTtiLlZvbHVtZT1hO3ZhciBxYT1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKGIpe3ZhciBkPWEuY2FsbCh0aGlzKXx8dGhpcztkLm9uSW50ZXJ2YWw9ZnVuY3Rpb24oKXt0cnl7dmFyIGE9ZC52b2wuc3RhdFN5bmMoZC5maWxlbmFtZSk7ZC5oYXNDaGFuZ2VkKGEpJiYoZC5lbWl0KCJjaGFuZ2UiLGEsZC5wcmV2KSxkLnByZXY9YSl9ZmluYWxseXtkLmxvb3AoKX19O2Qudm9sPWI7cmV0dXJuIGR9CmhiKGIsYSk7Yi5wcm90b3R5cGUubG9vcD1mdW5jdGlvbigpe3RoaXMudGltZW91dFJlZj10aGlzLnNldFRpbWVvdXQodGhpcy5vbkludGVydmFsLHRoaXMuaW50ZXJ2YWwpfTtiLnByb3RvdHlwZS5oYXNDaGFuZ2VkPWZ1bmN0aW9uKGEpe3JldHVybiBhLm10aW1lTXM+dGhpcy5wcmV2Lm10aW1lTXN8fGEubmxpbmshPT10aGlzLnByZXYubmxpbms/ITA6ITF9O2IucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKGEsYixkKXt2b2lkIDA9PT1iJiYoYj0hMCk7dm9pZCAwPT09ZCYmKGQ9NTAwNyk7dGhpcy5maWxlbmFtZT1wKGEpO3RoaXMuc2V0VGltZW91dD1iP3NldFRpbWVvdXQ6bWYuZGVmYXVsdDt0aGlzLmludGVydmFsPWQ7dGhpcy5wcmV2PXRoaXMudm9sLnN0YXRTeW5jKHRoaXMuZmlsZW5hbWUpO3RoaXMubG9vcCgpfTtiLnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHRoaXMudGltZW91dFJlZik7WS5kZWZhdWx0Lm5leHRUaWNrKGJjLHRoaXMpfTtyZXR1cm4gYn0oeC5FdmVudEVtaXR0ZXIpOwpiLlN0YXRXYXRjaGVyPXFhO3ZhciBpYTt3Yi5pbmhlcml0cyh0YSxjYS5SZWFkYWJsZSk7Yi5SZWFkU3RyZWFtPXRhO3RhLnByb3RvdHlwZS5vcGVuPWZ1bmN0aW9uKCl7dmFyIGE9dGhpczt0aGlzLl92b2wub3Blbih0aGlzLnBhdGgsdGhpcy5mbGFncyx0aGlzLm1vZGUsZnVuY3Rpb24oYixkKXtiPyhhLmF1dG9DbG9zZSYmYS5kZXN0cm95JiZhLmRlc3Ryb3koKSxhLmVtaXQoImVycm9yIixiKSk6KGEuZmQ9ZCxhLmVtaXQoIm9wZW4iLGQpLGEucmVhZCgpKX0pfTt0YS5wcm90b3R5cGUuX3JlYWQ9ZnVuY3Rpb24oYSl7aWYoIm51bWJlciIhPT10eXBlb2YgdGhpcy5mZClyZXR1cm4gdGhpcy5vbmNlKCJvcGVuIixmdW5jdGlvbigpe3RoaXMuX3JlYWQoYSl9KTtpZighdGhpcy5kZXN0cm95ZWQpe2lmKCFpYXx8MTI4PmlhLmxlbmd0aC1pYS51c2VkKWlhPUouYnVmZmVyQWxsb2NVbnNhZmUodGhpcy5fcmVhZGFibGVTdGF0ZS5oaWdoV2F0ZXJNYXJrKSxpYS51c2VkPTA7dmFyIGI9aWEsCmQ9TWF0aC5taW4oaWEubGVuZ3RoLWlhLnVzZWQsYSksZT1pYS51c2VkO3ZvaWQgMCE9PXRoaXMucG9zJiYoZD1NYXRoLm1pbih0aGlzLmVuZC10aGlzLnBvcysxLGQpKTtpZigwPj1kKXJldHVybiB0aGlzLnB1c2gobnVsbCk7dmFyIGY9dGhpczt0aGlzLl92b2wucmVhZCh0aGlzLmZkLGlhLGlhLnVzZWQsZCx0aGlzLnBvcyxmdW5jdGlvbihhLGQpe2E/KGYuYXV0b0Nsb3NlJiZmLmRlc3Ryb3kmJmYuZGVzdHJveSgpLGYuZW1pdCgiZXJyb3IiLGEpKTooYT1udWxsLDA8ZCYmKGYuYnl0ZXNSZWFkKz1kLGE9Yi5zbGljZShlLGUrZCkpLGYucHVzaChhKSl9KTt2b2lkIDAhPT10aGlzLnBvcyYmKHRoaXMucG9zKz1kKTtpYS51c2VkKz1kfX07dGEucHJvdG90eXBlLl9kZXN0cm95PWZ1bmN0aW9uKGEsYil7dGhpcy5jbG9zZShmdW5jdGlvbihkKXtiKGF8fGQpfSl9O3RhLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbihhKXt2YXIgYj10aGlzO2lmKGEpdGhpcy5vbmNlKCJjbG9zZSIsYSk7aWYodGhpcy5jbG9zZWR8fAoibnVtYmVyIiE9PXR5cGVvZiB0aGlzLmZkKXtpZigibnVtYmVyIiE9PXR5cGVvZiB0aGlzLmZkKXt0aGlzLm9uY2UoIm9wZW4iLGJoKTtyZXR1cm59cmV0dXJuIFkuZGVmYXVsdC5uZXh0VGljayhmdW5jdGlvbigpe3JldHVybiBiLmVtaXQoImNsb3NlIil9KX10aGlzLmNsb3NlZD0hMDt0aGlzLl92b2wuY2xvc2UodGhpcy5mZCxmdW5jdGlvbihhKXthP2IuZW1pdCgiZXJyb3IiLGEpOmIuZW1pdCgiY2xvc2UiKX0pO3RoaXMuZmQ9bnVsbH07d2IuaW5oZXJpdHMoWixjYS5Xcml0YWJsZSk7Yi5Xcml0ZVN0cmVhbT1aO1oucHJvdG90eXBlLm9wZW49ZnVuY3Rpb24oKXt0aGlzLl92b2wub3Blbih0aGlzLnBhdGgsdGhpcy5mbGFncyx0aGlzLm1vZGUsZnVuY3Rpb24oYSxiKXthPyh0aGlzLmF1dG9DbG9zZSYmdGhpcy5kZXN0cm95JiZ0aGlzLmRlc3Ryb3koKSx0aGlzLmVtaXQoImVycm9yIixhKSk6KHRoaXMuZmQ9Yix0aGlzLmVtaXQoIm9wZW4iLGIpKX0uYmluZCh0aGlzKSl9O1oucHJvdG90eXBlLl93cml0ZT0KZnVuY3Rpb24oYSxiLGQpe2lmKCEoYSBpbnN0YW5jZW9mIEouQnVmZmVyKSlyZXR1cm4gdGhpcy5lbWl0KCJlcnJvciIsRXJyb3IoIkludmFsaWQgZGF0YSIpKTtpZigibnVtYmVyIiE9PXR5cGVvZiB0aGlzLmZkKXJldHVybiB0aGlzLm9uY2UoIm9wZW4iLGZ1bmN0aW9uKCl7dGhpcy5fd3JpdGUoYSxiLGQpfSk7dmFyIGU9dGhpczt0aGlzLl92b2wud3JpdGUodGhpcy5mZCxhLDAsYS5sZW5ndGgsdGhpcy5wb3MsZnVuY3Rpb24oYSxiKXtpZihhKXJldHVybiBlLmF1dG9DbG9zZSYmZS5kZXN0cm95JiZlLmRlc3Ryb3koKSxkKGEpO2UuYnl0ZXNXcml0dGVuKz1iO2QoKX0pO3ZvaWQgMCE9PXRoaXMucG9zJiYodGhpcy5wb3MrPWEubGVuZ3RoKX07Wi5wcm90b3R5cGUuX3dyaXRldj1mdW5jdGlvbihhLGIpe2lmKCJudW1iZXIiIT09dHlwZW9mIHRoaXMuZmQpcmV0dXJuIHRoaXMub25jZSgib3BlbiIsZnVuY3Rpb24oKXt0aGlzLl93cml0ZXYoYSxiKX0pO2Zvcih2YXIgZD10aGlzLGU9CmEubGVuZ3RoLGY9QXJyYXkoZSksaD0wLGc9MDtnPGU7ZysrKXt2YXIgaz1hW2ddLmNodW5rO2ZbZ109aztoKz1rLmxlbmd0aH1lPUouQnVmZmVyLmNvbmNhdChmKTt0aGlzLl92b2wud3JpdGUodGhpcy5mZCxlLDAsZS5sZW5ndGgsdGhpcy5wb3MsZnVuY3Rpb24oYSxlKXtpZihhKXJldHVybiBkLmRlc3Ryb3kmJmQuZGVzdHJveSgpLGIoYSk7ZC5ieXRlc1dyaXR0ZW4rPWU7YigpfSk7dm9pZCAwIT09dGhpcy5wb3MmJih0aGlzLnBvcys9aCl9O1oucHJvdG90eXBlLl9kZXN0cm95PXRhLnByb3RvdHlwZS5fZGVzdHJveTtaLnByb3RvdHlwZS5jbG9zZT10YS5wcm90b3R5cGUuY2xvc2U7Wi5wcm90b3R5cGUuZGVzdHJveVNvb249Wi5wcm90b3R5cGUuZW5kO3ZhciByYT1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKGIpe3ZhciBkPWEuY2FsbCh0aGlzKXx8dGhpcztkLl9maWxlbmFtZT0iIjtkLl9maWxlbmFtZUVuY29kZWQ9IiI7ZC5fcmVjdXJzaXZlPSExO2QuX2VuY29kaW5nPW9hLkVOQ09ESU5HX1VURjg7CmQuX29uTm9kZUNoYW5nZT1mdW5jdGlvbigpe2QuX2VtaXQoImNoYW5nZSIpfTtkLl9vblBhcmVudENoaWxkPWZ1bmN0aW9uKGEpe2EuZ2V0TmFtZSgpPT09ZC5fZ2V0TmFtZSgpJiZkLl9lbWl0KCJyZW5hbWUiKX07ZC5fZW1pdD1mdW5jdGlvbihhKXtkLmVtaXQoImNoYW5nZSIsYSxkLl9maWxlbmFtZUVuY29kZWQpfTtkLl9wZXJzaXN0PWZ1bmN0aW9uKCl7ZC5fdGltZXI9c2V0VGltZW91dChkLl9wZXJzaXN0LDFFNil9O2QuX3ZvbD1iO3JldHVybiBkfWhiKGIsYSk7Yi5wcm90b3R5cGUuX2dldE5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RlcHNbdGhpcy5fc3RlcHMubGVuZ3RoLTFdfTtiLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbihhLGIsZCxlKXt2b2lkIDA9PT1iJiYoYj0hMCk7dm9pZCAwPT09ZCYmKGQ9ITEpO3ZvaWQgMD09PWUmJihlPW9hLkVOQ09ESU5HX1VURjgpO3RoaXMuX2ZpbGVuYW1lPXAoYSk7dGhpcy5fc3RlcHM9bih0aGlzLl9maWxlbmFtZSk7dGhpcy5fZmlsZW5hbWVFbmNvZGVkPQpvYS5zdHJUb0VuY29kaW5nKHRoaXMuX2ZpbGVuYW1lKTt0aGlzLl9yZWN1cnNpdmU9ZDt0aGlzLl9lbmNvZGluZz1lO3RyeXt0aGlzLl9saW5rPXRoaXMuX3ZvbC5nZXRMaW5rT3JUaHJvdyh0aGlzLl9maWxlbmFtZSwiRlNXYXRjaGVyIil9Y2F0Y2goZWQpe3Rocm93IGI9RXJyb3IoIndhdGNoICIrdGhpcy5fZmlsZW5hbWUrIiAiK2VkLmNvZGUpLGIuY29kZT1lZC5jb2RlLGIuZXJybm89ZWQuY29kZSxiO310aGlzLl9saW5rLmdldE5vZGUoKS5vbigiY2hhbmdlIix0aGlzLl9vbk5vZGVDaGFuZ2UpO3RoaXMuX2xpbmsub24oImNoaWxkOmFkZCIsdGhpcy5fb25Ob2RlQ2hhbmdlKTt0aGlzLl9saW5rLm9uKCJjaGlsZDpkZWxldGUiLHRoaXMuX29uTm9kZUNoYW5nZSk7aWYoYT10aGlzLl9saW5rLnBhcmVudClhLnNldE1heExpc3RlbmVycyhhLmdldE1heExpc3RlbmVycygpKzEpLGEub24oImNoaWxkOmRlbGV0ZSIsdGhpcy5fb25QYXJlbnRDaGlsZCk7YiYmdGhpcy5fcGVyc2lzdCgpfTsKYi5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQodGhpcy5fdGltZXIpO3RoaXMuX2xpbmsuZ2V0Tm9kZSgpLnJlbW92ZUxpc3RlbmVyKCJjaGFuZ2UiLHRoaXMuX29uTm9kZUNoYW5nZSk7dmFyIGE9dGhpcy5fbGluay5wYXJlbnQ7YSYmYS5yZW1vdmVMaXN0ZW5lcigiY2hpbGQ6ZGVsZXRlIix0aGlzLl9vblBhcmVudENoaWxkKX07cmV0dXJuIGJ9KHguRXZlbnRFbWl0dGVyKTtiLkZTV2F0Y2hlcj1yYX0pO1EoUWEpO3ZhciBlaD1RYS5wYXRoVG9GaWxlbmFtZSxmaD1RYS5maWxlbmFtZVRvU3RlcHMscWY9UWEuVm9sdW1lLGdkPUsoZnVuY3Rpb24oYSxiKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoYiwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7Yi5mc1Byb3BzPSJjb25zdGFudHMgRl9PSyBSX09LIFdfT0sgWF9PSyBTdGF0cyIuc3BsaXQoIiAiKTtiLmZzU3luY01ldGhvZHM9InJlbmFtZVN5bmMgZnRydW5jYXRlU3luYyB0cnVuY2F0ZVN5bmMgY2hvd25TeW5jIGZjaG93blN5bmMgbGNob3duU3luYyBjaG1vZFN5bmMgZmNobW9kU3luYyBsY2htb2RTeW5jIHN0YXRTeW5jIGxzdGF0U3luYyBmc3RhdFN5bmMgbGlua1N5bmMgc3ltbGlua1N5bmMgcmVhZGxpbmtTeW5jIHJlYWxwYXRoU3luYyB1bmxpbmtTeW5jIHJtZGlyU3luYyBta2RpclN5bmMgbWtkaXJwU3luYyByZWFkZGlyU3luYyBjbG9zZVN5bmMgb3BlblN5bmMgdXRpbWVzU3luYyBmdXRpbWVzU3luYyBmc3luY1N5bmMgd3JpdGVTeW5jIHJlYWRTeW5jIHJlYWRGaWxlU3luYyB3cml0ZUZpbGVTeW5jIGFwcGVuZEZpbGVTeW5jIGV4aXN0c1N5bmMgYWNjZXNzU3luYyBmZGF0YXN5bmNTeW5jIG1rZHRlbXBTeW5jIGNvcHlGaWxlU3luYyBjcmVhdGVSZWFkU3RyZWFtIGNyZWF0ZVdyaXRlU3RyZWFtIi5zcGxpdCgiICIpOwpiLmZzQXN5bmNNZXRob2RzPSJyZW5hbWUgZnRydW5jYXRlIHRydW5jYXRlIGNob3duIGZjaG93biBsY2hvd24gY2htb2QgZmNobW9kIGxjaG1vZCBzdGF0IGxzdGF0IGZzdGF0IGxpbmsgc3ltbGluayByZWFkbGluayByZWFscGF0aCB1bmxpbmsgcm1kaXIgbWtkaXIgbWtkaXJwIHJlYWRkaXIgY2xvc2Ugb3BlbiB1dGltZXMgZnV0aW1lcyBmc3luYyB3cml0ZSByZWFkIHJlYWRGaWxlIHdyaXRlRmlsZSBhcHBlbmRGaWxlIGV4aXN0cyBhY2Nlc3MgZmRhdGFzeW5jIG1rZHRlbXAgY29weUZpbGUgd2F0Y2hGaWxlIHVud2F0Y2hGaWxlIHdhdGNoIi5zcGxpdCgiICIpfSk7UShnZCk7dmFyIHJmPUsoZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBkKGEpe2Zvcih2YXIgYj17Rl9PSzpoLFJfT0s6ayxXX09LOmwsWF9PSzptLGNvbnN0YW50czp1LmNvbnN0YW50cyxTdGF0czplYi5kZWZhdWx0LERpcmVudDokYy5kZWZhdWx0fSxkPTAsZT1mO2Q8ZS5sZW5ndGg7ZCsrKXt2YXIgcT1lW2RdOyJmdW5jdGlvbiI9PT0KdHlwZW9mIGFbcV0mJihiW3FdPWFbcV0uYmluZChhKSl9ZD0wO2ZvcihlPWc7ZDxlLmxlbmd0aDtkKyspcT1lW2RdLCJmdW5jdGlvbiI9PT10eXBlb2YgYVtxXSYmKGJbcV09YVtxXS5iaW5kKGEpKTtiLlN0YXRXYXRjaGVyPWEuU3RhdFdhdGNoZXI7Yi5GU1dhdGNoZXI9YS5GU1dhdGNoZXI7Yi5Xcml0ZVN0cmVhbT1hLldyaXRlU3RyZWFtO2IuUmVhZFN0cmVhbT1hLlJlYWRTdHJlYW07Yi5wcm9taXNlcz1hLnByb21pc2VzO2IuX3RvVW5peFRpbWVzdGFtcD1RYS50b1VuaXhUaW1lc3RhbXA7cmV0dXJuIGJ9dmFyIGU9TiYmTi5fX2Fzc2lnbnx8ZnVuY3Rpb24oKXtlPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKGEpe2Zvcih2YXIgYixkPTEsZT1hcmd1bWVudHMubGVuZ3RoO2Q8ZTtkKyspe2I9YXJndW1lbnRzW2RdO2Zvcih2YXIgZiBpbiBiKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLGYpJiYoYVtmXT1iW2ZdKX1yZXR1cm4gYX07cmV0dXJuIGUuYXBwbHkodGhpcywKYXJndW1lbnRzKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KGIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBmPWdkLmZzU3luY01ldGhvZHMsZz1nZC5mc0FzeW5jTWV0aG9kcyxoPXUuY29uc3RhbnRzLkZfT0ssaz11LmNvbnN0YW50cy5SX09LLGw9dS5jb25zdGFudHMuV19PSyxtPXUuY29uc3RhbnRzLlhfT0s7Yi5Wb2x1bWU9UWEuVm9sdW1lO2Iudm9sPW5ldyBRYS5Wb2x1bWU7Yi5jcmVhdGVGc0Zyb21Wb2x1bWU9ZDtiLmZzPWQoYi52b2wpO2EuZXhwb3J0cz1lKGUoe30sYS5leHBvcnRzKSxiLmZzKTthLmV4cG9ydHMuc2VtYW50aWM9ITB9KTtRKHJmKTt2YXIgc2Y9cmYuY3JlYXRlRnNGcm9tVm9sdW1lO1dnLnByb3RvdHlwZS5lbWl0PWZ1bmN0aW9uKGEpe2Zvcih2YXIgYixkLGU9W10sZj0xO2Y8YXJndW1lbnRzLmxlbmd0aDtmKyspZVtmLTFdPWFyZ3VtZW50c1tmXTtmPXRoaXMubGlzdGVuZXJzKGEpO3RyeXtmb3IodmFyIGc9cmMoZiksaD1nLm5leHQoKTshaC5kb25lO2g9CmcubmV4dCgpKXt2YXIgaz1oLnZhbHVlO3RyeXtrLmFwcGx5KHZvaWQgMCxKZihlKSl9Y2F0Y2godCl7Y29uc29sZS5lcnJvcih0KX19fWNhdGNoKHQpe2I9e2Vycm9yOnR9fWZpbmFsbHl7dHJ5e2gmJiFoLmRvbmUmJihkPWcucmV0dXJuKSYmZC5jYWxsKGcpfWZpbmFsbHl7aWYoYil0aHJvdyBiLmVycm9yO319cmV0dXJuIDA8Zi5sZW5ndGh9O3ZhciBnaD1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXt0aGlzLnZvbHVtZT1uZXcgcWY7dGhpcy5mcz1zZih0aGlzLnZvbHVtZSk7dGhpcy5mcm9tSlNPTih7Ii9kZXYvc3RkaW4iOiIiLCIvZGV2L3N0ZG91dCI6IiIsIi9kZXYvc3RkZXJyIjoiIn0pfWEucHJvdG90eXBlLl90b0pTT049ZnVuY3Rpb24oYSxkLGUpe3ZvaWQgMD09PWQmJihkPXt9KTt2YXIgYj0hMCxnO2ZvcihnIGluIGEuY2hpbGRyZW4pe2I9ITE7dmFyIGg9YS5nZXRDaGlsZChnKTtpZihoKXt2YXIgaz1oLmdldE5vZGUoKTtrJiZrLmlzRmlsZSgpPyhoPWguZ2V0UGF0aCgpLAplJiYoaD1QYihlLGgpKSxkW2hdPWsuZ2V0QnVmZmVyKCkpOmsmJmsuaXNEaXJlY3RvcnkoKSYmdGhpcy5fdG9KU09OKGgsZCxlKX19YT1hLmdldFBhdGgoKTtlJiYoYT1QYihlLGEpKTthJiZiJiYoZFthXT1udWxsKTtyZXR1cm4gZH07YS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKGEsZCxlKXt2YXIgYixnO3ZvaWQgMD09PWQmJihkPXt9KTt2b2lkIDA9PT1lJiYoZT0hMSk7dmFyIGg9W107aWYoYSl7YSBpbnN0YW5jZW9mIEFycmF5fHwoYT1bYV0pO3RyeXtmb3IodmFyIGs9cmMoYSksbD1rLm5leHQoKTshbC5kb25lO2w9ay5uZXh0KCkpe3ZhciBxPWVoKGwudmFsdWUpLG09dGhpcy52b2x1bWUuZ2V0UmVzb2x2ZWRMaW5rKHEpO20mJmgucHVzaChtKX19Y2F0Y2goWmMpe3ZhciBuPXtlcnJvcjpaY319ZmluYWxseXt0cnl7bCYmIWwuZG9uZSYmKGI9ay5yZXR1cm4pJiZiLmNhbGwoayl9ZmluYWxseXtpZihuKXRocm93IG4uZXJyb3I7fX19ZWxzZSBoLnB1c2godGhpcy52b2x1bWUucm9vdCk7CmlmKCFoLmxlbmd0aClyZXR1cm4gZDt0cnl7Zm9yKHZhciBQPXJjKGgpLHA9UC5uZXh0KCk7IXAuZG9uZTtwPVAubmV4dCgpKW09cC52YWx1ZSx0aGlzLl90b0pTT04obSxkLGU/bS5nZXRQYXRoKCk6IiIpfWNhdGNoKFpjKXt2YXIgdT17ZXJyb3I6WmN9fWZpbmFsbHl7dHJ5e3AmJiFwLmRvbmUmJihnPVAucmV0dXJuKSYmZy5jYWxsKFApfWZpbmFsbHl7aWYodSl0aHJvdyB1LmVycm9yO319cmV0dXJuIGR9O2EucHJvdG90eXBlLmZyb21KU09ORml4ZWQ9ZnVuY3Rpb24oYSxkKXtmb3IodmFyIGIgaW4gZCl7dmFyIGY9ZFtiXTtpZihmP251bGwhPT1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZik6bnVsbCE9PWYpe3ZhciBnPWZoKGIpOzE8Zy5sZW5ndGgmJihnPSIvIitnLnNsaWNlKDAsZy5sZW5ndGgtMSkuam9pbigiLyIpLGEubWtkaXJwQmFzZShnLDUxMSkpO2Eud3JpdGVGaWxlU3luYyhiLGZ8fCIiKX1lbHNlIGEubWtkaXJwQmFzZShiLDUxMSl9fTthLnByb3RvdHlwZS5mcm9tSlNPTj0KZnVuY3Rpb24oYSl7dGhpcy52b2x1bWU9bmV3IHFmO3RoaXMuZnJvbUpTT05GaXhlZCh0aGlzLnZvbHVtZSxhKTt0aGlzLmZzPXNmKHRoaXMudm9sdW1lKTt0aGlzLnZvbHVtZS5yZWxlYXNlZEZkcz1bMCwxLDJdO2E9dGhpcy52b2x1bWUub3BlblN5bmMoIi9kZXYvc3RkZXJyIiwidyIpO3ZhciBiPXRoaXMudm9sdW1lLm9wZW5TeW5jKCIvZGV2L3N0ZG91dCIsInciKSxlPXRoaXMudm9sdW1lLm9wZW5TeW5jKCIvZGV2L3N0ZGluIiwiciIpO2lmKDIhPT1hKXRocm93IEVycm9yKCJpbnZhbGlkIGhhbmRsZSBmb3Igc3RkZXJyOiAiK2EpO2lmKDEhPT1iKXRocm93IEVycm9yKCJpbnZhbGlkIGhhbmRsZSBmb3Igc3Rkb3V0OiAiK2IpO2lmKDAhPT1lKXRocm93IEVycm9yKCJpbnZhbGlkIGhhbmRsZSBmb3Igc3RkaW46ICIrZSk7fTthLnByb3RvdHlwZS5nZXRTdGRPdXQ9ZnVuY3Rpb24oKXtyZXR1cm4gR2YodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGEsZD10aGlzO3JldHVybiBIZih0aGlzLApmdW5jdGlvbigpe2E9bmV3IFByb21pc2UoZnVuY3Rpb24oYSl7YShkLmZzLnJlYWRGaWxlU3luYygiL2Rldi9zdGRvdXQiLCJ1dGY4IikpfSk7cmV0dXJuWzIsYV19KX0pfTtyZXR1cm4gYX0oKSxkYz12b2lkIDA7Im9iamVjdCI9PT10eXBlb2Ygd2luZG93P2RjPXdpbmRvdy5UZXh0RGVjb2Rlcjoib2JqZWN0Ij09PXR5cGVvZiBzZWxmP2RjPXNlbGYuVGV4dERlY29kZXI6ImZ1bmN0aW9uIj09PXR5cGVvZiByZXF1aXJlJiYoZGM9cmVxdWlyZSgidXRpbCIpLlRleHREZWNvZGVyKTt2YXIgaGg9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe3RoaXMud2FzbUZzPWE7dGhpcy53YXNtRnMudm9sdW1lLm1rZGlyU3luYygiL193YXNtZXIvZGV2L2ZiMCIse3JlY3Vyc2l2ZTohMH0pO3RoaXMud2FzbUZzLnZvbHVtZS53cml0ZUZpbGVTeW5jKCIvX3dhc21lci9kZXYvZmIwL2ZiIiwiIik7dGhpcy53YXNtRnMudm9sdW1lLndyaXRlRmlsZVN5bmMoIi9fd2FzbWVyL2Rldi9mYjAvdmlydHVhbF9zaXplIiwKIiIpO3RoaXMud2FzbUZzLnZvbHVtZS53cml0ZUZpbGVTeW5jKCIvX3dhc21lci9kZXYvZmIwL2RyYXciLCIiKTt0aGlzLndhc21Gcy52b2x1bWUud3JpdGVGaWxlU3luYygiL193YXNtZXIvZGV2L2ZiMC9pbnB1dCIsIiIpO3RoaXMud2luZG93U2l6ZUNhbGxiYWNrPWZ1bmN0aW9uKCl7fTt0aGlzLmJ1ZmZlckluZGV4RGlzcGxheUNhbGxiYWNrPWZ1bmN0aW9uKCl7fTt0aGlzLmlucHV0Q2FsbGJhY2s9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFVpbnQ4QXJyYXl9O3RoaXMuZmRGcmFtZUJ1ZmZlcj10aGlzLndhc21Gcy52b2x1bWUub3BlblN5bmMoIi9fd2FzbWVyL2Rldi9mYjAvZmIiLCJ3KyIpO3RoaXMuZmRCdWZmZXJJbmRleERpc3BsYXk9dGhpcy53YXNtRnMudm9sdW1lLm9wZW5TeW5jKCIvX3dhc21lci9kZXYvZmIwL2RyYXciLCJ3KyIpO3RoaXMuZmRXaW5kb3dTaXplPXRoaXMud2FzbUZzLmZzLm9wZW5TeW5jKCIvX3dhc21lci9kZXYvZmIwL3ZpcnR1YWxfc2l6ZSIsIncrIik7CnRoaXMuZmRJbnB1dD10aGlzLndhc21Gcy52b2x1bWUub3BlblN5bmMoIi9fd2FzbWVyL2Rldi9mYjAvaW5wdXQiLCJ3KyIpO3ZhciBiPXRoaXMsZT10aGlzLndhc21Gcy52b2x1bWUuZmRzW3RoaXMuZmRJbnB1dF0ubm9kZS5yZWFkO3RoaXMud2FzbUZzLnZvbHVtZS5mZHNbdGhpcy5mZElucHV0XS5ub2RlLnJlYWQ9ZnVuY3Rpb24oKXt2YXIgYT1iLmlucHV0Q2FsbGJhY2soKTtiLndhc21Gcy52b2x1bWUud3JpdGVGaWxlU3luYygiL193YXNtZXIvZGV2L2ZiMC9pbnB1dCIsYSk7YT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO3JldHVybiBlLmFwcGx5KGIud2FzbUZzLnZvbHVtZS5mZHNbYi5mZElucHV0XS5ub2RlLGEpfTt2YXIgZj10aGlzLndhc21Gcy52b2x1bWUuZmRzW3RoaXMuZmRXaW5kb3dTaXplXS5ub2RlLndyaXRlO3RoaXMud2FzbUZzLnZvbHVtZS5mZHNbdGhpcy5mZFdpbmRvd1NpemVdLm5vZGUud3JpdGU9ZnVuY3Rpb24oKXt2YXIgYT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpOwphPWYuYXBwbHkoYi53YXNtRnMudm9sdW1lLmZkc1tiLmZkV2luZG93U2l6ZV0ubm9kZSxhKTtiLndpbmRvd1NpemVDYWxsYmFjaygpO3JldHVybiBhfTt2YXIgZz10aGlzLndhc21Gcy52b2x1bWUuZmRzW3RoaXMuZmRCdWZmZXJJbmRleERpc3BsYXldLm5vZGUud3JpdGU7dGhpcy53YXNtRnMudm9sdW1lLmZkc1t0aGlzLmZkQnVmZmVySW5kZXhEaXNwbGF5XS5ub2RlLndyaXRlPWZ1bmN0aW9uKCl7dmFyIGE9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTthPWcuYXBwbHkoYi53YXNtRnMudm9sdW1lLmZkc1tiLmZkQnVmZmVySW5kZXhEaXNwbGF5XS5ub2RlLGEpO2IuYnVmZmVySW5kZXhEaXNwbGF5Q2FsbGJhY2soKTtyZXR1cm4gYX19YS5wcm90b3R5cGUuZ2V0RnJhbWVCdWZmZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53YXNtRnMuZnMucmVhZEZpbGVTeW5jKCIvX3dhc21lci9kZXYvZmIwL2ZiIil9O2EucHJvdG90eXBlLmdldFdpbmRvd1NpemU9ZnVuY3Rpb24oKXt2YXIgYT0KdGhpcy53YXNtRnMuZnMucmVhZEZpbGVTeW5jKCIvX3dhc21lci9kZXYvZmIwL3ZpcnR1YWxfc2l6ZSIpO3JldHVybiAwPGEubGVuZ3RoPyhhPShuZXcgZGMoInV0Zi04IikpLmRlY29kZShhKS5zcGxpdCgieCIpLFtwYXJzZUludChhWzBdLDEwKSxwYXJzZUludChhWzFdLDEwKV0pOlswLDBdfTthLnByb3RvdHlwZS5zZXRXaW5kb3dTaXplQ2FsbGJhY2s9ZnVuY3Rpb24oYSl7dGhpcy53aW5kb3dTaXplQ2FsbGJhY2s9YX07YS5wcm90b3R5cGUuc2V0QnVmZmVySW5kZXhEaXNwbGF5Q2FsbGJhY2s9ZnVuY3Rpb24oYSl7dGhpcy5idWZmZXJJbmRleERpc3BsYXlDYWxsYmFjaz1hfTthLnByb3RvdHlwZS5zZXRJbnB1dENhbGxiYWNrPWZ1bmN0aW9uKGEpe3RoaXMuaW5wdXRDYWxsYmFjaz1hfTtyZXR1cm4gYX0oKSxpaD0idW5kZWZpbmVkIiE9PXR5cGVvZiBnbG9iYWxUaGlzP2dsb2JhbFRoaXM6InVuZGVmaW5lZCIhPT10eXBlb2YgbmE/bmE6e30sbj0idW5kZWZpbmVkIiE9PXR5cGVvZiBCaWdJbnQ/CkJpZ0ludDppaC5CaWdJbnR8fE51bWJlcixlYz1EYXRhVmlldztlYy5wcm90b3R5cGUuc2V0QmlnVWludDY0fHwoZWMucHJvdG90eXBlLnNldEJpZ1VpbnQ2ND1mdW5jdGlvbihhLGIsZCl7aWYoYjxNYXRoLnBvdygyLDMyKSl7Yj1OdW1iZXIoYik7dmFyIGU9MH1lbHNle2U9Yi50b1N0cmluZygyKTtiPSIiO2Zvcih2YXIgZj0wO2Y8NjQtZS5sZW5ndGg7ZisrKWIrPSIwIjtiKz1lO2U9cGFyc2VJbnQoYi5zdWJzdHJpbmcoMCwzMiksMik7Yj1wYXJzZUludChiLnN1YnN0cmluZygzMiksMil9dGhpcy5zZXRVaW50MzIoYSsoZD8wOjQpLGIsZCk7dGhpcy5zZXRVaW50MzIoYSsoZD80OjApLGUsZCl9LGVjLnByb3RvdHlwZS5nZXRCaWdVaW50NjQ9ZnVuY3Rpb24oYSxiKXt2YXIgZD10aGlzLmdldFVpbnQzMihhKyhiPzA6NCksYik7YT10aGlzLmdldFVpbnQzMihhKyhiPzQ6MCksYik7ZD1kLnRvU3RyaW5nKDIpO2E9YS50b1N0cmluZygyKTtiPSIiO2Zvcih2YXIgZT0wO2U8MzItZC5sZW5ndGg7ZSsrKWIrPQoiMCI7cmV0dXJuIG4oIjBiIithKyhiK2QpKX0pO3ZhciBCYj0idW5kZWZpbmVkIiE9PXR5cGVvZiBuYT9uYToidW5kZWZpbmVkIiE9PXR5cGVvZiBzZWxmP3NlbGY6InVuZGVmaW5lZCIhPT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fSxlYT1bXSxNPVtdLEpnPSJ1bmRlZmluZWQiIT09dHlwZW9mIFVpbnQ4QXJyYXk/VWludDhBcnJheTpBcnJheSxTYz0hMSxqaD17fS50b1N0cmluZyxSZT1BcnJheS5pc0FycmF5fHxmdW5jdGlvbihhKXtyZXR1cm4iW29iamVjdCBBcnJheV0iPT1qaC5jYWxsKGEpfTttLlRZUEVEX0FSUkFZX1NVUFBPUlQ9dm9pZCAwIT09QmIuVFlQRURfQVJSQVlfU1VQUE9SVD9CYi5UWVBFRF9BUlJBWV9TVVBQT1JUOiEwO3ZhciBraD1tLlRZUEVEX0FSUkFZX1NVUFBPUlQ/MjE0NzQ4MzY0NzoxMDczNzQxODIzO20ucG9vbFNpemU9ODE5MjttLl9hdWdtZW50PWZ1bmN0aW9uKGEpe2EuX19wcm90b19fPW0ucHJvdG90eXBlO3JldHVybiBhfTttLmZyb209ZnVuY3Rpb24oYSwKYixkKXtyZXR1cm4gT2UobnVsbCxhLGIsZCl9O20uVFlQRURfQVJSQVlfU1VQUE9SVCYmKG0ucHJvdG90eXBlLl9fcHJvdG9fXz1VaW50OEFycmF5LnByb3RvdHlwZSxtLl9fcHJvdG9fXz1VaW50OEFycmF5KTttLmFsbG9jPWZ1bmN0aW9uKGEsYixkKXtRZShhKTtyZXR1cm4gYT0wPj1hP21hKG51bGwsYSk6dm9pZCAwIT09Yj8ic3RyaW5nIj09PXR5cGVvZiBkP21hKG51bGwsYSkuZmlsbChiLGQpOm1hKG51bGwsYSkuZmlsbChiKTptYShudWxsLGEpfTttLmFsbG9jVW5zYWZlPWZ1bmN0aW9uKGEpe3JldHVybiBUYyhudWxsLGEpfTttLmFsbG9jVW5zYWZlU2xvdz1mdW5jdGlvbihhKXtyZXR1cm4gVGMobnVsbCxhKX07bS5pc0J1ZmZlcj1ZZTttLmNvbXBhcmU9ZnVuY3Rpb24oYSxiKXtpZighZmEoYSl8fCFmYShiKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJBcmd1bWVudHMgbXVzdCBiZSBCdWZmZXJzIik7aWYoYT09PWIpcmV0dXJuIDA7Zm9yKHZhciBkPWEubGVuZ3RoLGU9Yi5sZW5ndGgsCmY9MCxnPU1hdGgubWluKGQsZSk7ZjxnOysrZilpZihhW2ZdIT09YltmXSl7ZD1hW2ZdO2U9YltmXTticmVha31yZXR1cm4gZDxlPy0xOmU8ZD8xOjB9O20uaXNFbmNvZGluZz1mdW5jdGlvbihhKXtzd2l0Y2goU3RyaW5nKGEpLnRvTG93ZXJDYXNlKCkpe2Nhc2UgImhleCI6Y2FzZSAidXRmOCI6Y2FzZSAidXRmLTgiOmNhc2UgImFzY2lpIjpjYXNlICJsYXRpbjEiOmNhc2UgImJpbmFyeSI6Y2FzZSAiYmFzZTY0IjpjYXNlICJ1Y3MyIjpjYXNlICJ1Y3MtMiI6Y2FzZSAidXRmMTZsZSI6Y2FzZSAidXRmLTE2bGUiOnJldHVybiEwO2RlZmF1bHQ6cmV0dXJuITF9fTttLmNvbmNhdD1mdW5jdGlvbihhLGIpe2lmKCFSZShhKSl0aHJvdyBuZXcgVHlwZUVycm9yKCcibGlzdCIgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzJyk7aWYoMD09PWEubGVuZ3RoKXJldHVybiBtLmFsbG9jKDApO3ZhciBkO2lmKHZvaWQgMD09PWIpZm9yKGQ9Yj0wO2Q8YS5sZW5ndGg7KytkKWIrPQphW2RdLmxlbmd0aDtiPW0uYWxsb2NVbnNhZmUoYik7dmFyIGU9MDtmb3IoZD0wO2Q8YS5sZW5ndGg7KytkKXt2YXIgZj1hW2RdO2lmKCFmYShmKSl0aHJvdyBuZXcgVHlwZUVycm9yKCcibGlzdCIgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzJyk7Zi5jb3B5KGIsZSk7ZSs9Zi5sZW5ndGh9cmV0dXJuIGJ9O20uYnl0ZUxlbmd0aD1QZTttLnByb3RvdHlwZS5faXNCdWZmZXI9ITA7bS5wcm90b3R5cGUuc3dhcDE2PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5sZW5ndGg7aWYoMCE9PWElMil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDE2LWJpdHMiKTtmb3IodmFyIGI9MDtiPGE7Yis9MilNYSh0aGlzLGIsYisxKTtyZXR1cm4gdGhpc307bS5wcm90b3R5cGUuc3dhcDMyPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5sZW5ndGg7aWYoMCE9PWElNCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDMyLWJpdHMiKTsKZm9yKHZhciBiPTA7YjxhO2IrPTQpTWEodGhpcyxiLGIrMyksTWEodGhpcyxiKzEsYisyKTtyZXR1cm4gdGhpc307bS5wcm90b3R5cGUuc3dhcDY0PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5sZW5ndGg7aWYoMCE9PWElOCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDY0LWJpdHMiKTtmb3IodmFyIGI9MDtiPGE7Yis9OClNYSh0aGlzLGIsYis3KSxNYSh0aGlzLGIrMSxiKzYpLE1hKHRoaXMsYisyLGIrNSksTWEodGhpcyxiKzMsYis0KTtyZXR1cm4gdGhpc307bS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmxlbmd0aHwwO3JldHVybiAwPT09YT8iIjowPT09YXJndW1lbnRzLmxlbmd0aD9UZSh0aGlzLDAsYSk6SGcuYXBwbHkodGhpcyxhcmd1bWVudHMpfTttLnByb3RvdHlwZS5lcXVhbHM9ZnVuY3Rpb24oYSl7aWYoIWZhKGEpKXRocm93IG5ldyBUeXBlRXJyb3IoIkFyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXIiKTsKcmV0dXJuIHRoaXM9PT1hPyEwOjA9PT1tLmNvbXBhcmUodGhpcyxhKX07bS5wcm90b3R5cGUuaW5zcGVjdD1mdW5jdGlvbigpe3ZhciBhPSIiOzA8dGhpcy5sZW5ndGgmJihhPXRoaXMudG9TdHJpbmcoImhleCIsMCw1MCkubWF0Y2goLy57Mn0vZykuam9pbigiICIpLDUwPHRoaXMubGVuZ3RoJiYoYSs9IiAuLi4gIikpO3JldHVybiI8QnVmZmVyICIrYSsiPiJ9O20ucHJvdG90eXBlLmNvbXBhcmU9ZnVuY3Rpb24oYSxiLGQsZSxmKXtpZighZmEoYSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlciIpO3ZvaWQgMD09PWImJihiPTApO3ZvaWQgMD09PWQmJihkPWE/YS5sZW5ndGg6MCk7dm9pZCAwPT09ZSYmKGU9MCk7dm9pZCAwPT09ZiYmKGY9dGhpcy5sZW5ndGgpO2lmKDA+Ynx8ZD5hLmxlbmd0aHx8MD5lfHxmPnRoaXMubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKCJvdXQgb2YgcmFuZ2UgaW5kZXgiKTtpZihlPj1mJiZiPj1kKXJldHVybiAwOwppZihlPj1mKXJldHVybi0xO2lmKGI+PWQpcmV0dXJuIDE7Yj4+Pj0wO2Q+Pj49MDtlPj4+PTA7Zj4+Pj0wO2lmKHRoaXM9PT1hKXJldHVybiAwO3ZhciBnPWYtZSxoPWQtYixrPU1hdGgubWluKGcsaCk7ZT10aGlzLnNsaWNlKGUsZik7YT1hLnNsaWNlKGIsZCk7Zm9yKGI9MDtiPGs7KytiKWlmKGVbYl0hPT1hW2JdKXtnPWVbYl07aD1hW2JdO2JyZWFrfXJldHVybiBnPGg/LTE6aDxnPzE6MH07bS5wcm90b3R5cGUuaW5jbHVkZXM9ZnVuY3Rpb24oYSxiLGQpe3JldHVybi0xIT09dGhpcy5pbmRleE9mKGEsYixkKX07bS5wcm90b3R5cGUuaW5kZXhPZj1mdW5jdGlvbihhLGIsZCl7cmV0dXJuIFVlKHRoaXMsYSxiLGQsITApfTttLnByb3RvdHlwZS5sYXN0SW5kZXhPZj1mdW5jdGlvbihhLGIsZCl7cmV0dXJuIFVlKHRoaXMsYSxiLGQsITEpfTttLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbihhLGIsZCxlKXtpZih2b2lkIDA9PT1iKWU9InV0ZjgiLGQ9dGhpcy5sZW5ndGgsYj0wO2Vsc2UgaWYodm9pZCAwPT09CmQmJiJzdHJpbmciPT09dHlwZW9mIGIpZT1iLGQ9dGhpcy5sZW5ndGgsYj0wO2Vsc2UgaWYoaXNGaW5pdGUoYikpYnw9MCxpc0Zpbml0ZShkKT8oZHw9MCx2b2lkIDA9PT1lJiYoZT0idXRmOCIpKTooZT1kLGQ9dm9pZCAwKTtlbHNlIHRocm93IEVycm9yKCJCdWZmZXIud3JpdGUoc3RyaW5nLCBlbmNvZGluZywgb2Zmc2V0WywgbGVuZ3RoXSkgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZCIpO3ZhciBmPXRoaXMubGVuZ3RoLWI7aWYodm9pZCAwPT09ZHx8ZD5mKWQ9ZjtpZigwPGEubGVuZ3RoJiYoMD5kfHwwPmIpfHxiPnRoaXMubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKCJBdHRlbXB0IHRvIHdyaXRlIG91dHNpZGUgYnVmZmVyIGJvdW5kcyIpO2V8fChlPSJ1dGY4Iik7Zm9yKGY9ITE7Oylzd2l0Y2goZSl7Y2FzZSAiaGV4IjphOntiPU51bWJlcihiKXx8MDtlPXRoaXMubGVuZ3RoLWI7ZD8oZD1OdW1iZXIoZCksZD5lJiYoZD1lKSk6ZD1lO2U9YS5sZW5ndGg7aWYoMCE9PWUlMil0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGhleCBzdHJpbmciKTsKZD5lLzImJihkPWUvMik7Zm9yKGU9MDtlPGQ7KytlKXtmPXBhcnNlSW50KGEuc3Vic3RyKDIqZSwyKSwxNik7aWYoaXNOYU4oZikpe2E9ZTticmVhayBhfXRoaXNbYitlXT1mfWE9ZX1yZXR1cm4gYTtjYXNlICJ1dGY4IjpjYXNlICJ1dGYtOCI6cmV0dXJuIHViKFhiKGEsdGhpcy5sZW5ndGgtYiksdGhpcyxiLGQpO2Nhc2UgImFzY2lpIjpyZXR1cm4gdWIoWGUoYSksdGhpcyxiLGQpO2Nhc2UgImxhdGluMSI6Y2FzZSAiYmluYXJ5IjpyZXR1cm4gdWIoWGUoYSksdGhpcyxiLGQpO2Nhc2UgImJhc2U2NCI6cmV0dXJuIHViKFNlKGEpLHRoaXMsYixkKTtjYXNlICJ1Y3MyIjpjYXNlICJ1Y3MtMiI6Y2FzZSAidXRmMTZsZSI6Y2FzZSAidXRmLTE2bGUiOmU9YTtmPXRoaXMubGVuZ3RoLWI7Zm9yKHZhciBnPVtdLGg9MDtoPGUubGVuZ3RoJiYhKDA+KGYtPTIpKTsrK2gpe3ZhciBrPWUuY2hhckNvZGVBdChoKTthPWs+Pjg7ayU9MjU2O2cucHVzaChrKTtnLnB1c2goYSl9cmV0dXJuIHViKGcsCnRoaXMsYixkKTtkZWZhdWx0OmlmKGYpdGhyb3cgbmV3IFR5cGVFcnJvcigiVW5rbm93biBlbmNvZGluZzogIitlKTtlPSgiIitlKS50b0xvd2VyQ2FzZSgpO2Y9ITB9fTttLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm57dHlwZToiQnVmZmVyIixkYXRhOkFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMuX2Fycnx8dGhpcywwKX19O3ZhciBXZT00MDk2O20ucHJvdG90eXBlLnNsaWNlPWZ1bmN0aW9uKGEsYil7dmFyIGQ9dGhpcy5sZW5ndGg7YT1+fmE7Yj12b2lkIDA9PT1iP2Q6fn5iOzA+YT8oYSs9ZCwwPmEmJihhPTApKTphPmQmJihhPWQpOzA+Yj8oYis9ZCwwPmImJihiPTApKTpiPmQmJihiPWQpO2I8YSYmKGI9YSk7aWYobS5UWVBFRF9BUlJBWV9TVVBQT1JUKWI9dGhpcy5zdWJhcnJheShhLGIpLGIuX19wcm90b19fPW0ucHJvdG90eXBlO2Vsc2V7ZD1iLWE7Yj1uZXcgbShkLHZvaWQgMCk7Zm9yKHZhciBlPTA7ZTxkOysrZSliW2VdPXRoaXNbZSthXX1yZXR1cm4gYn07Cm0ucHJvdG90eXBlLnJlYWRVSW50TEU9ZnVuY3Rpb24oYSxiLGQpe2F8PTA7Ynw9MDtkfHxJKGEsYix0aGlzLmxlbmd0aCk7ZD10aGlzW2FdO2Zvcih2YXIgZT0xLGY9MDsrK2Y8YiYmKGUqPTI1Nik7KWQrPXRoaXNbYStmXSplO3JldHVybiBkfTttLnByb3RvdHlwZS5yZWFkVUludEJFPWZ1bmN0aW9uKGEsYixkKXthfD0wO2J8PTA7ZHx8SShhLGIsdGhpcy5sZW5ndGgpO2Q9dGhpc1thKy0tYl07Zm9yKHZhciBlPTE7MDxiJiYoZSo9MjU2KTspZCs9dGhpc1thKy0tYl0qZTtyZXR1cm4gZH07bS5wcm90b3R5cGUucmVhZFVJbnQ4PWZ1bmN0aW9uKGEsYil7Ynx8SShhLDEsdGhpcy5sZW5ndGgpO3JldHVybiB0aGlzW2FdfTttLnByb3RvdHlwZS5yZWFkVUludDE2TEU9ZnVuY3Rpb24oYSxiKXtifHxJKGEsMix0aGlzLmxlbmd0aCk7cmV0dXJuIHRoaXNbYV18dGhpc1thKzFdPDw4fTttLnByb3RvdHlwZS5yZWFkVUludDE2QkU9ZnVuY3Rpb24oYSxiKXtifHxJKGEsMix0aGlzLmxlbmd0aCk7CnJldHVybiB0aGlzW2FdPDw4fHRoaXNbYSsxXX07bS5wcm90b3R5cGUucmVhZFVJbnQzMkxFPWZ1bmN0aW9uKGEsYil7Ynx8SShhLDQsdGhpcy5sZW5ndGgpO3JldHVybih0aGlzW2FdfHRoaXNbYSsxXTw8OHx0aGlzW2ErMl08PDE2KSsxNjc3NzIxNip0aGlzW2ErM119O20ucHJvdG90eXBlLnJlYWRVSW50MzJCRT1mdW5jdGlvbihhLGIpe2J8fEkoYSw0LHRoaXMubGVuZ3RoKTtyZXR1cm4gMTY3NzcyMTYqdGhpc1thXSsodGhpc1thKzFdPDwxNnx0aGlzW2ErMl08PDh8dGhpc1thKzNdKX07bS5wcm90b3R5cGUucmVhZEludExFPWZ1bmN0aW9uKGEsYixkKXthfD0wO2J8PTA7ZHx8SShhLGIsdGhpcy5sZW5ndGgpO2Q9dGhpc1thXTtmb3IodmFyIGU9MSxmPTA7KytmPGImJihlKj0yNTYpOylkKz10aGlzW2ErZl0qZTtkPj0xMjgqZSYmKGQtPU1hdGgucG93KDIsOCpiKSk7cmV0dXJuIGR9O20ucHJvdG90eXBlLnJlYWRJbnRCRT1mdW5jdGlvbihhLGIsZCl7YXw9MDtifD0wO2R8fEkoYSwKYix0aGlzLmxlbmd0aCk7ZD1iO2Zvcih2YXIgZT0xLGY9dGhpc1thKy0tZF07MDxkJiYoZSo9MjU2KTspZis9dGhpc1thKy0tZF0qZTtmPj0xMjgqZSYmKGYtPU1hdGgucG93KDIsOCpiKSk7cmV0dXJuIGZ9O20ucHJvdG90eXBlLnJlYWRJbnQ4PWZ1bmN0aW9uKGEsYil7Ynx8SShhLDEsdGhpcy5sZW5ndGgpO3JldHVybiB0aGlzW2FdJjEyOD8tMSooMjU1LXRoaXNbYV0rMSk6dGhpc1thXX07bS5wcm90b3R5cGUucmVhZEludDE2TEU9ZnVuY3Rpb24oYSxiKXtifHxJKGEsMix0aGlzLmxlbmd0aCk7YT10aGlzW2FdfHRoaXNbYSsxXTw8ODtyZXR1cm4gYSYzMjc2OD9hfDQyOTQ5MDE3NjA6YX07bS5wcm90b3R5cGUucmVhZEludDE2QkU9ZnVuY3Rpb24oYSxiKXtifHxJKGEsMix0aGlzLmxlbmd0aCk7YT10aGlzW2ErMV18dGhpc1thXTw8ODtyZXR1cm4gYSYzMjc2OD9hfDQyOTQ5MDE3NjA6YX07bS5wcm90b3R5cGUucmVhZEludDMyTEU9ZnVuY3Rpb24oYSxiKXtifHxJKGEsNCx0aGlzLmxlbmd0aCk7CnJldHVybiB0aGlzW2FdfHRoaXNbYSsxXTw8OHx0aGlzW2ErMl08PDE2fHRoaXNbYSszXTw8MjR9O20ucHJvdG90eXBlLnJlYWRJbnQzMkJFPWZ1bmN0aW9uKGEsYil7Ynx8SShhLDQsdGhpcy5sZW5ndGgpO3JldHVybiB0aGlzW2FdPDwyNHx0aGlzW2ErMV08PDE2fHRoaXNbYSsyXTw8OHx0aGlzW2ErM119O20ucHJvdG90eXBlLnJlYWRGbG9hdExFPWZ1bmN0aW9uKGEsYil7Ynx8SShhLDQsdGhpcy5sZW5ndGgpO3JldHVybiBWYih0aGlzLGEsITAsMjMsNCl9O20ucHJvdG90eXBlLnJlYWRGbG9hdEJFPWZ1bmN0aW9uKGEsYil7Ynx8SShhLDQsdGhpcy5sZW5ndGgpO3JldHVybiBWYih0aGlzLGEsITEsMjMsNCl9O20ucHJvdG90eXBlLnJlYWREb3VibGVMRT1mdW5jdGlvbihhLGIpe2J8fEkoYSw4LHRoaXMubGVuZ3RoKTtyZXR1cm4gVmIodGhpcyxhLCEwLDUyLDgpfTttLnByb3RvdHlwZS5yZWFkRG91YmxlQkU9ZnVuY3Rpb24oYSxiKXtifHxJKGEsOCx0aGlzLmxlbmd0aCk7cmV0dXJuIFZiKHRoaXMsCmEsITEsNTIsOCl9O20ucHJvdG90eXBlLndyaXRlVUludExFPWZ1bmN0aW9uKGEsYixkLGUpe2E9K2E7Ynw9MDtkfD0wO2V8fFYodGhpcyxhLGIsZCxNYXRoLnBvdygyLDgqZCktMSwwKTtlPTE7dmFyIGY9MDtmb3IodGhpc1tiXT1hJjI1NTsrK2Y8ZCYmKGUqPTI1Nik7KXRoaXNbYitmXT1hL2UmMjU1O3JldHVybiBiK2R9O20ucHJvdG90eXBlLndyaXRlVUludEJFPWZ1bmN0aW9uKGEsYixkLGUpe2E9K2E7Ynw9MDtkfD0wO2V8fFYodGhpcyxhLGIsZCxNYXRoLnBvdygyLDgqZCktMSwwKTtlPWQtMTt2YXIgZj0xO2Zvcih0aGlzW2IrZV09YSYyNTU7MDw9LS1lJiYoZio9MjU2KTspdGhpc1tiK2VdPWEvZiYyNTU7cmV0dXJuIGIrZH07bS5wcm90b3R5cGUud3JpdGVVSW50OD1mdW5jdGlvbihhLGIsZCl7YT0rYTtifD0wO2R8fFYodGhpcyxhLGIsMSwyNTUsMCk7bS5UWVBFRF9BUlJBWV9TVVBQT1JUfHwoYT1NYXRoLmZsb29yKGEpKTt0aGlzW2JdPWEmMjU1O3JldHVybiBiKzF9O20ucHJvdG90eXBlLndyaXRlVUludDE2TEU9CmZ1bmN0aW9uKGEsYixkKXthPSthO2J8PTA7ZHx8Vih0aGlzLGEsYiwyLDY1NTM1LDApO20uVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1tiXT1hJjI1NSx0aGlzW2IrMV09YT4+PjgpOlliKHRoaXMsYSxiLCEwKTtyZXR1cm4gYisyfTttLnByb3RvdHlwZS53cml0ZVVJbnQxNkJFPWZ1bmN0aW9uKGEsYixkKXthPSthO2J8PTA7ZHx8Vih0aGlzLGEsYiwyLDY1NTM1LDApO20uVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1tiXT1hPj4+OCx0aGlzW2IrMV09YSYyNTUpOlliKHRoaXMsYSxiLCExKTtyZXR1cm4gYisyfTttLnByb3RvdHlwZS53cml0ZVVJbnQzMkxFPWZ1bmN0aW9uKGEsYixkKXthPSthO2J8PTA7ZHx8Vih0aGlzLGEsYiw0LDQyOTQ5NjcyOTUsMCk7bS5UWVBFRF9BUlJBWV9TVVBQT1JUPyh0aGlzW2IrM109YT4+PjI0LHRoaXNbYisyXT1hPj4+MTYsdGhpc1tiKzFdPWE+Pj44LHRoaXNbYl09YSYyNTUpOlpiKHRoaXMsYSxiLCEwKTtyZXR1cm4gYis0fTttLnByb3RvdHlwZS53cml0ZVVJbnQzMkJFPQpmdW5jdGlvbihhLGIsZCl7YT0rYTtifD0wO2R8fFYodGhpcyxhLGIsNCw0Mjk0OTY3Mjk1LDApO20uVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1tiXT1hPj4+MjQsdGhpc1tiKzFdPWE+Pj4xNix0aGlzW2IrMl09YT4+PjgsdGhpc1tiKzNdPWEmMjU1KTpaYih0aGlzLGEsYiwhMSk7cmV0dXJuIGIrNH07bS5wcm90b3R5cGUud3JpdGVJbnRMRT1mdW5jdGlvbihhLGIsZCxlKXthPSthO2J8PTA7ZXx8KGU9TWF0aC5wb3coMiw4KmQtMSksVih0aGlzLGEsYixkLGUtMSwtZSkpO2U9MDt2YXIgZj0xLGc9MDtmb3IodGhpc1tiXT1hJjI1NTsrK2U8ZCYmKGYqPTI1Nik7KTA+YSYmMD09PWcmJjAhPT10aGlzW2IrZS0xXSYmKGc9MSksdGhpc1tiK2VdPShhL2Y+PjApLWcmMjU1O3JldHVybiBiK2R9O20ucHJvdG90eXBlLndyaXRlSW50QkU9ZnVuY3Rpb24oYSxiLGQsZSl7YT0rYTtifD0wO2V8fChlPU1hdGgucG93KDIsOCpkLTEpLFYodGhpcyxhLGIsZCxlLTEsLWUpKTtlPWQtMTt2YXIgZj0KMSxnPTA7Zm9yKHRoaXNbYitlXT1hJjI1NTswPD0tLWUmJihmKj0yNTYpOykwPmEmJjA9PT1nJiYwIT09dGhpc1tiK2UrMV0mJihnPTEpLHRoaXNbYitlXT0oYS9mPj4wKS1nJjI1NTtyZXR1cm4gYitkfTttLnByb3RvdHlwZS53cml0ZUludDg9ZnVuY3Rpb24oYSxiLGQpe2E9K2E7Ynw9MDtkfHxWKHRoaXMsYSxiLDEsMTI3LC0xMjgpO20uVFlQRURfQVJSQVlfU1VQUE9SVHx8KGE9TWF0aC5mbG9vcihhKSk7MD5hJiYoYT0yNTUrYSsxKTt0aGlzW2JdPWEmMjU1O3JldHVybiBiKzF9O20ucHJvdG90eXBlLndyaXRlSW50MTZMRT1mdW5jdGlvbihhLGIsZCl7YT0rYTtifD0wO2R8fFYodGhpcyxhLGIsMiwzMjc2NywtMzI3NjgpO20uVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1tiXT1hJjI1NSx0aGlzW2IrMV09YT4+PjgpOlliKHRoaXMsYSxiLCEwKTtyZXR1cm4gYisyfTttLnByb3RvdHlwZS53cml0ZUludDE2QkU9ZnVuY3Rpb24oYSxiLGQpe2E9K2E7Ynw9MDtkfHxWKHRoaXMsYSxiLAoyLDMyNzY3LC0zMjc2OCk7bS5UWVBFRF9BUlJBWV9TVVBQT1JUPyh0aGlzW2JdPWE+Pj44LHRoaXNbYisxXT1hJjI1NSk6WWIodGhpcyxhLGIsITEpO3JldHVybiBiKzJ9O20ucHJvdG90eXBlLndyaXRlSW50MzJMRT1mdW5jdGlvbihhLGIsZCl7YT0rYTtifD0wO2R8fFYodGhpcyxhLGIsNCwyMTQ3NDgzNjQ3LC0yMTQ3NDgzNjQ4KTttLlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHRoaXNbYl09YSYyNTUsdGhpc1tiKzFdPWE+Pj44LHRoaXNbYisyXT1hPj4+MTYsdGhpc1tiKzNdPWE+Pj4yNCk6WmIodGhpcyxhLGIsITApO3JldHVybiBiKzR9O20ucHJvdG90eXBlLndyaXRlSW50MzJCRT1mdW5jdGlvbihhLGIsZCl7YT0rYTtifD0wO2R8fFYodGhpcyxhLGIsNCwyMTQ3NDgzNjQ3LC0yMTQ3NDgzNjQ4KTswPmEmJihhPTQyOTQ5NjcyOTUrYSsxKTttLlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHRoaXNbYl09YT4+PjI0LHRoaXNbYisxXT1hPj4+MTYsdGhpc1tiKzJdPWE+Pj44LHRoaXNbYiszXT0KYSYyNTUpOlpiKHRoaXMsYSxiLCExKTtyZXR1cm4gYis0fTttLnByb3RvdHlwZS53cml0ZUZsb2F0TEU9ZnVuY3Rpb24oYSxiLGQpe2R8fCRiKHRoaXMsYSxiLDQpO1diKHRoaXMsYSxiLCEwLDIzLDQpO3JldHVybiBiKzR9O20ucHJvdG90eXBlLndyaXRlRmxvYXRCRT1mdW5jdGlvbihhLGIsZCl7ZHx8JGIodGhpcyxhLGIsNCk7V2IodGhpcyxhLGIsITEsMjMsNCk7cmV0dXJuIGIrNH07bS5wcm90b3R5cGUud3JpdGVEb3VibGVMRT1mdW5jdGlvbihhLGIsZCl7ZHx8JGIodGhpcyxhLGIsOCk7V2IodGhpcyxhLGIsITAsNTIsOCk7cmV0dXJuIGIrOH07bS5wcm90b3R5cGUud3JpdGVEb3VibGVCRT1mdW5jdGlvbihhLGIsZCl7ZHx8JGIodGhpcyxhLGIsOCk7V2IodGhpcyxhLGIsITEsNTIsOCk7cmV0dXJuIGIrOH07bS5wcm90b3R5cGUuY29weT1mdW5jdGlvbihhLGIsZCxlKXtkfHwoZD0wKTtlfHwwPT09ZXx8KGU9dGhpcy5sZW5ndGgpO2I+PWEubGVuZ3RoJiYoYj1hLmxlbmd0aCk7CmJ8fChiPTApOzA8ZSYmZTxkJiYoZT1kKTtpZihlPT09ZHx8MD09PWEubGVuZ3RofHwwPT09dGhpcy5sZW5ndGgpcmV0dXJuIDA7aWYoMD5iKXRocm93IG5ldyBSYW5nZUVycm9yKCJ0YXJnZXRTdGFydCBvdXQgb2YgYm91bmRzIik7aWYoMD5kfHxkPj10aGlzLmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigic291cmNlU3RhcnQgb3V0IG9mIGJvdW5kcyIpO2lmKDA+ZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigic291cmNlRW5kIG91dCBvZiBib3VuZHMiKTtlPnRoaXMubGVuZ3RoJiYoZT10aGlzLmxlbmd0aCk7YS5sZW5ndGgtYjxlLWQmJihlPWEubGVuZ3RoLWIrZCk7dmFyIGY9ZS1kO2lmKHRoaXM9PT1hJiZkPGImJmI8ZSlmb3IoZT1mLTE7MDw9ZTstLWUpYVtlK2JdPXRoaXNbZStkXTtlbHNlIGlmKDFFMz5mfHwhbS5UWVBFRF9BUlJBWV9TVVBQT1JUKWZvcihlPTA7ZTxmOysrZSlhW2UrYl09dGhpc1tlK2RdO2Vsc2UgVWludDhBcnJheS5wcm90b3R5cGUuc2V0LmNhbGwoYSx0aGlzLnN1YmFycmF5KGQsCmQrZiksYik7cmV0dXJuIGZ9O20ucHJvdG90eXBlLmZpbGw9ZnVuY3Rpb24oYSxiLGQsZSl7aWYoInN0cmluZyI9PT10eXBlb2YgYSl7InN0cmluZyI9PT10eXBlb2YgYj8oZT1iLGI9MCxkPXRoaXMubGVuZ3RoKToic3RyaW5nIj09PXR5cGVvZiBkJiYoZT1kLGQ9dGhpcy5sZW5ndGgpO2lmKDE9PT1hLmxlbmd0aCl7dmFyIGY9YS5jaGFyQ29kZUF0KDApOzI1Nj5mJiYoYT1mKX1pZih2b2lkIDAhPT1lJiYic3RyaW5nIiE9PXR5cGVvZiBlKXRocm93IG5ldyBUeXBlRXJyb3IoImVuY29kaW5nIG11c3QgYmUgYSBzdHJpbmciKTtpZigic3RyaW5nIj09PXR5cGVvZiBlJiYhbS5pc0VuY29kaW5nKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoIlVua25vd24gZW5jb2Rpbmc6ICIrZSk7fWVsc2UibnVtYmVyIj09PXR5cGVvZiBhJiYoYSY9MjU1KTtpZigwPmJ8fHRoaXMubGVuZ3RoPGJ8fHRoaXMubGVuZ3RoPGQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIk91dCBvZiByYW5nZSBpbmRleCIpO2lmKGQ8PQpiKXJldHVybiB0aGlzO2I+Pj49MDtkPXZvaWQgMD09PWQ/dGhpcy5sZW5ndGg6ZD4+PjA7YXx8KGE9MCk7aWYoIm51bWJlciI9PT10eXBlb2YgYSlmb3IoZT1iO2U8ZDsrK2UpdGhpc1tlXT1hO2Vsc2UgZm9yKGE9ZmEoYSk/YTpYYigobmV3IG0oYSxlKSkudG9TdHJpbmcoKSksZj1hLmxlbmd0aCxlPTA7ZTxkLWI7KytlKXRoaXNbZStiXT1hW2UlZl07cmV0dXJuIHRoaXN9O3ZhciBJZz0vW14rXC8wLTlBLVphLXotX10vZyxmYz1PYmplY3QuZnJlZXplKHtfX3Byb3RvX186bnVsbCxJTlNQRUNUX01BWF9CWVRFUzo1MCxrTWF4TGVuZ3RoOmtoLEJ1ZmZlcjptLFNsb3dCdWZmZXI6ZnVuY3Rpb24oYSl7K2EhPWEmJihhPTApO3JldHVybiBtLmFsbG9jKCthKX0saXNCdWZmZXI6WWV9KSxHPW0sZ2M9InVuZGVmaW5lZCIhPT10eXBlb2YgZ2xvYmFsVGhpcz9nbG9iYWxUaGlzOiJ1bmRlZmluZWQiIT09dHlwZW9mIHdpbmRvdz93aW5kb3c6InVuZGVmaW5lZCIhPT10eXBlb2YgbmE/bmE6InVuZGVmaW5lZCIhPT0KdHlwZW9mIHNlbGY/c2VsZjp7fSxyYT0kZSx5YT1hZjsiZnVuY3Rpb24iPT09dHlwZW9mIEJiLnNldFRpbWVvdXQmJihyYT1zZXRUaW1lb3V0KTsiZnVuY3Rpb24iPT09dHlwZW9mIEJiLmNsZWFyVGltZW91dCYmKHlhPWNsZWFyVGltZW91dCk7dmFyIHNhPVtdLGFiPSExLE5hLGFjPS0xO2VmLnByb3RvdHlwZS5ydW49ZnVuY3Rpb24oKXt0aGlzLmZ1bi5hcHBseShudWxsLHRoaXMuYXJyYXkpfTt2YXIgamI9QmIucGVyZm9ybWFuY2V8fHt9LGxoPWpiLm5vd3x8amIubW96Tm93fHxqYi5tc05vd3x8amIub05vd3x8amIud2Via2l0Tm93fHxmdW5jdGlvbigpe3JldHVybihuZXcgRGF0ZSkuZ2V0VGltZSgpfSxtaD1uZXcgRGF0ZSxuaD17bmV4dFRpY2s6ZGYsdGl0bGU6ImJyb3dzZXIiLGJyb3dzZXI6ITAsZW52Ont9LGFyZ3Y6W10sdmVyc2lvbjoiIix2ZXJzaW9uczp7fSxvbjpPYSxhZGRMaXN0ZW5lcjpPYSxvbmNlOk9hLG9mZjpPYSxyZW1vdmVMaXN0ZW5lcjpPYSxyZW1vdmVBbGxMaXN0ZW5lcnM6T2EsCmVtaXQ6T2EsYmluZGluZzpmdW5jdGlvbigpe3Rocm93IEVycm9yKCJwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCIpO30sY3dkOmZ1bmN0aW9uKCl7cmV0dXJuIi8ifSxjaGRpcjpmdW5jdGlvbigpe3Rocm93IEVycm9yKCJwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQiKTt9LHVtYXNrOmZ1bmN0aW9uKCl7cmV0dXJuIDB9LGhydGltZTpmdW5jdGlvbihhKXt2YXIgYj0uMDAxKmxoLmNhbGwoamIpLGQ9TWF0aC5mbG9vcihiKTtiPU1hdGguZmxvb3IoYiUxKjFFOSk7YSYmKGQtPWFbMF0sYi09YVsxXSwwPmImJihkLS0sYis9MUU5KSk7cmV0dXJuW2QsYl19LHBsYXRmb3JtOiJicm93c2VyIixyZWxlYXNlOnt9LGNvbmZpZzp7fSx1cHRpbWU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IERhdGUtbWgpLzFFM319LHRmPVdjKGZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gZChhLGIpe2Zvcih2YXIgZCBpbiBhKWJbZF09YVtkXX1mdW5jdGlvbiBlKGEsYixkKXtyZXR1cm4gZihhLApiLGQpfXZhciBmPWZjLkJ1ZmZlcjtmLmZyb20mJmYuYWxsb2MmJmYuYWxsb2NVbnNhZmUmJmYuYWxsb2NVbnNhZmVTbG93P2EuZXhwb3J0cz1mYzooZChmYyxiKSxiLkJ1ZmZlcj1lKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGYucHJvdG90eXBlKTtkKGYsZSk7ZS5mcm9tPWZ1bmN0aW9uKGEsYixkKXtpZigibnVtYmVyIj09PXR5cGVvZiBhKXRocm93IG5ldyBUeXBlRXJyb3IoIkFyZ3VtZW50IG11c3Qgbm90IGJlIGEgbnVtYmVyIik7cmV0dXJuIGYoYSxiLGQpfTtlLmFsbG9jPWZ1bmN0aW9uKGEsYixkKXtpZigibnVtYmVyIiE9PXR5cGVvZiBhKXRocm93IG5ldyBUeXBlRXJyb3IoIkFyZ3VtZW50IG11c3QgYmUgYSBudW1iZXIiKTthPWYoYSk7dm9pZCAwIT09Yj8ic3RyaW5nIj09PXR5cGVvZiBkP2EuZmlsbChiLGQpOmEuZmlsbChiKTphLmZpbGwoMCk7cmV0dXJuIGF9O2UuYWxsb2NVbnNhZmU9ZnVuY3Rpb24oYSl7aWYoIm51bWJlciIhPT10eXBlb2YgYSl0aHJvdyBuZXcgVHlwZUVycm9yKCJBcmd1bWVudCBtdXN0IGJlIGEgbnVtYmVyIik7CnJldHVybiBmKGEpfTtlLmFsbG9jVW5zYWZlU2xvdz1mdW5jdGlvbihhKXtpZigibnVtYmVyIiE9PXR5cGVvZiBhKXRocm93IG5ldyBUeXBlRXJyb3IoIkFyZ3VtZW50IG11c3QgYmUgYSBudW1iZXIiKTtyZXR1cm4gZmMuU2xvd0J1ZmZlcihhKX19KSxvaD1XYyhmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGQoKXt0aHJvdyBFcnJvcigic2VjdXJlIHJhbmRvbSBudW1iZXIgZ2VuZXJhdGlvbiBub3Qgc3VwcG9ydGVkIGJ5IHRoaXMgYnJvd3NlclxudXNlIGNocm9tZSwgRmlyZUZveCBvciBJbnRlcm5ldCBFeHBsb3JlciAxMSIpO31mdW5jdGlvbiBlKGEsYil7aWYoIm51bWJlciIhPT10eXBlb2YgYXx8YSE9PWEpdGhyb3cgbmV3IFR5cGVFcnJvcigib2Zmc2V0IG11c3QgYmUgYSBudW1iZXIiKTtpZihhPnJ8fDA+YSl0aHJvdyBuZXcgVHlwZUVycm9yKCJvZmZzZXQgbXVzdCBiZSBhIHVpbnQzMiIpO2lmKGE+bXx8YT5iKXRocm93IG5ldyBSYW5nZUVycm9yKCJvZmZzZXQgb3V0IG9mIHJhbmdlIik7Cn1mdW5jdGlvbiBmKGEsYixkKXtpZigibnVtYmVyIiE9PXR5cGVvZiBhfHxhIT09YSl0aHJvdyBuZXcgVHlwZUVycm9yKCJzaXplIG11c3QgYmUgYSBudW1iZXIiKTtpZihhPnJ8fDA+YSl0aHJvdyBuZXcgVHlwZUVycm9yKCJzaXplIG11c3QgYmUgYSB1aW50MzIiKTtpZihhK2I+ZHx8YT5tKXRocm93IG5ldyBSYW5nZUVycm9yKCJidWZmZXIgdG9vIHNtYWxsIik7fWZ1bmN0aW9uIGcoYSxiLGQsZyl7aWYoIShsLmlzQnVmZmVyKGEpfHxhIGluc3RhbmNlb2YgZ2MuVWludDhBcnJheSkpdGhyb3cgbmV3IFR5cGVFcnJvcignImJ1ZiIgYXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlciBvciBVaW50OEFycmF5Jyk7aWYoImZ1bmN0aW9uIj09PXR5cGVvZiBiKWc9YixiPTAsZD1hLmxlbmd0aDtlbHNlIGlmKCJmdW5jdGlvbiI9PT10eXBlb2YgZClnPWQsZD1hLmxlbmd0aC1iO2Vsc2UgaWYoImZ1bmN0aW9uIiE9PXR5cGVvZiBnKXRocm93IG5ldyBUeXBlRXJyb3IoJyJjYiIgYXJndW1lbnQgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7CmUoYixhLmxlbmd0aCk7ZihkLGIsYS5sZW5ndGgpO3JldHVybiBoKGEsYixkLGcpfWZ1bmN0aW9uIGgoYSxiLGQsZSl7Yj1uZXcgVWludDhBcnJheShhLmJ1ZmZlcixiLGQpO24uZ2V0UmFuZG9tVmFsdWVzKGIpO2lmKGUpZGYoZnVuY3Rpb24oKXtlKG51bGwsYSl9KTtlbHNlIHJldHVybiBhfWZ1bmN0aW9uIGsoYSxiLGQpeyJ1bmRlZmluZWQiPT09dHlwZW9mIGImJihiPTApO2lmKCEobC5pc0J1ZmZlcihhKXx8YSBpbnN0YW5jZW9mIGdjLlVpbnQ4QXJyYXkpKXRocm93IG5ldyBUeXBlRXJyb3IoJyJidWYiIGFyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXIgb3IgVWludDhBcnJheScpO2UoYixhLmxlbmd0aCk7dm9pZCAwPT09ZCYmKGQ9YS5sZW5ndGgtYik7ZihkLGIsYS5sZW5ndGgpO3JldHVybiBoKGEsYixkKX12YXIgbD10Zi5CdWZmZXIsbT10Zi5rTWF4TGVuZ3RoLG49Z2MuY3J5cHRvfHxnYy5tc0NyeXB0byxyPU1hdGgucG93KDIsMzIpLTE7biYmbi5nZXRSYW5kb21WYWx1ZXM/KGIucmFuZG9tRmlsbD0KZyxiLnJhbmRvbUZpbGxTeW5jPWspOihiLnJhbmRvbUZpbGw9ZCxiLnJhbmRvbUZpbGxTeW5jPWQpfSkscGg9V2MoZnVuY3Rpb24oYSl7YS5leHBvcnRzPW9ofSkucmFuZG9tRmlsbFN5bmMscWg9TWF0aC5mbG9vciguMDAxKihEYXRlLm5vdygpLXBlcmZvcm1hbmNlLm5vdygpKSksQ2I9e3Jlc29sdmU6ZnVuY3Rpb24oKXtmb3IodmFyIGE9IiIsYj0hMSxkLGU9YXJndW1lbnRzLmxlbmd0aC0xOy0xPD1lJiYhYjtlLS0pe2lmKDA8PWUpdmFyIGY9YXJndW1lbnRzW2VdO2Vsc2Ugdm9pZCAwPT09ZCYmKGQ9bmguY3dkKCkpLGY9ZDtoYShmKTswIT09Zi5sZW5ndGgmJihhPWYrIi8iK2EsYj00Nz09PWYuY2hhckNvZGVBdCgwKSl9YT1mZihhLCFiKTtyZXR1cm4gYj8wPGEubGVuZ3RoPyIvIithOiIvIjowPGEubGVuZ3RoP2E6Ii4ifSxub3JtYWxpemU6ZnVuY3Rpb24oYSl7aGEoYSk7aWYoMD09PWEubGVuZ3RoKXJldHVybiIuIjt2YXIgYj00Nz09PWEuY2hhckNvZGVBdCgwKSxkPTQ3PT09CmEuY2hhckNvZGVBdChhLmxlbmd0aC0xKTthPWZmKGEsIWIpOzAhPT1hLmxlbmd0aHx8Ynx8KGE9Ii4iKTswPGEubGVuZ3RoJiZkJiYoYSs9Ii8iKTtyZXR1cm4gYj8iLyIrYTphfSxpc0Fic29sdXRlOmZ1bmN0aW9uKGEpe2hhKGEpO3JldHVybiAwPGEubGVuZ3RoJiY0Nz09PWEuY2hhckNvZGVBdCgwKX0sam9pbjpmdW5jdGlvbigpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiIuIjtmb3IodmFyIGEsYj0wO2I8YXJndW1lbnRzLmxlbmd0aDsrK2Ipe3ZhciBkPWFyZ3VtZW50c1tiXTtoYShkKTswPGQubGVuZ3RoJiYoYT12b2lkIDA9PT1hP2Q6YSsoIi8iK2QpKX1yZXR1cm4gdm9pZCAwPT09YT8iLiI6Q2Iubm9ybWFsaXplKGEpfSxyZWxhdGl2ZTpmdW5jdGlvbihhLGIpe2hhKGEpO2hhKGIpO2lmKGE9PT1iKXJldHVybiIiO2E9Q2IucmVzb2x2ZShhKTtiPUNiLnJlc29sdmUoYik7aWYoYT09PWIpcmV0dXJuIiI7Zm9yKHZhciBkPTE7ZDxhLmxlbmd0aCYmNDc9PT1hLmNoYXJDb2RlQXQoZCk7KytkKTsKZm9yKHZhciBlPWEubGVuZ3RoLGY9ZS1kLGc9MTtnPGIubGVuZ3RoJiY0Nz09PWIuY2hhckNvZGVBdChnKTsrK2cpO2Zvcih2YXIgaD1iLmxlbmd0aC1nLGs9ZjxoP2Y6aCxsPS0xLG09MDttPD1rOysrbSl7aWYobT09PWspe2lmKGg+ayl7aWYoNDc9PT1iLmNoYXJDb2RlQXQoZyttKSlyZXR1cm4gYi5zbGljZShnK20rMSk7aWYoMD09PW0pcmV0dXJuIGIuc2xpY2UoZyttKX1lbHNlIGY+ayYmKDQ3PT09YS5jaGFyQ29kZUF0KGQrbSk/bD1tOjA9PT1tJiYobD0wKSk7YnJlYWt9dmFyIG49YS5jaGFyQ29kZUF0KGQrbSkscj1iLmNoYXJDb2RlQXQoZyttKTtpZihuIT09cilicmVhaztlbHNlIDQ3PT09biYmKGw9bSl9Zj0iIjtmb3IobT1kK2wrMTttPD1lOysrbSlpZihtPT09ZXx8NDc9PT1hLmNoYXJDb2RlQXQobSkpZj0wPT09Zi5sZW5ndGg/ZisiLi4iOmYrIi8uLiI7aWYoMDxmLmxlbmd0aClyZXR1cm4gZitiLnNsaWNlKGcrbCk7Zys9bDs0Nz09PWIuY2hhckNvZGVBdChnKSYmKytnOwpyZXR1cm4gYi5zbGljZShnKX0sX21ha2VMb25nOmZ1bmN0aW9uKGEpe3JldHVybiBhfSxkaXJuYW1lOmZ1bmN0aW9uKGEpe2hhKGEpO2lmKDA9PT1hLmxlbmd0aClyZXR1cm4iLiI7Zm9yKHZhciBiPWEuY2hhckNvZGVBdCgwKSxkPTQ3PT09YixlPS0xLGY9ITAsZz1hLmxlbmd0aC0xOzE8PWc7LS1nKWlmKGI9YS5jaGFyQ29kZUF0KGcpLDQ3PT09Yil7aWYoIWYpe2U9ZzticmVha319ZWxzZSBmPSExO3JldHVybi0xPT09ZT9kPyIvIjoiLiI6ZCYmMT09PWU/Ii8vIjphLnNsaWNlKDAsZSl9LGJhc2VuYW1lOmZ1bmN0aW9uKGEsYil7aWYodm9pZCAwIT09YiYmInN0cmluZyIhPT10eXBlb2YgYil0aHJvdyBuZXcgVHlwZUVycm9yKCciZXh0IiBhcmd1bWVudCBtdXN0IGJlIGEgc3RyaW5nJyk7aGEoYSk7dmFyIGQ9MCxlPS0xLGY9ITAsZztpZih2b2lkIDAhPT1iJiYwPGIubGVuZ3RoJiZiLmxlbmd0aDw9YS5sZW5ndGgpe2lmKGIubGVuZ3RoPT09YS5sZW5ndGgmJmI9PT1hKXJldHVybiIiOwp2YXIgaD1iLmxlbmd0aC0xLGs9LTE7Zm9yKGc9YS5sZW5ndGgtMTswPD1nOy0tZyl7dmFyIGw9YS5jaGFyQ29kZUF0KGcpO2lmKDQ3PT09bCl7aWYoIWYpe2Q9ZysxO2JyZWFrfX1lbHNlLTE9PT1rJiYoZj0hMSxrPWcrMSksMDw9aCYmKGw9PT1iLmNoYXJDb2RlQXQoaCk/LTE9PT0tLWgmJihlPWcpOihoPS0xLGU9aykpfWQ9PT1lP2U9azotMT09PWUmJihlPWEubGVuZ3RoKTtyZXR1cm4gYS5zbGljZShkLGUpfWZvcihnPWEubGVuZ3RoLTE7MDw9ZzstLWcpaWYoNDc9PT1hLmNoYXJDb2RlQXQoZykpe2lmKCFmKXtkPWcrMTticmVha319ZWxzZS0xPT09ZSYmKGY9ITEsZT1nKzEpO3JldHVybi0xPT09ZT8iIjphLnNsaWNlKGQsZSl9LGV4dG5hbWU6ZnVuY3Rpb24oYSl7aGEoYSk7Zm9yKHZhciBiPS0xLGQ9MCxlPS0xLGY9ITAsZz0wLGg9YS5sZW5ndGgtMTswPD1oOy0taCl7dmFyIGs9YS5jaGFyQ29kZUF0KGgpO2lmKDQ3PT09ayl7aWYoIWYpe2Q9aCsxO2JyZWFrfX1lbHNlLTE9PT0KZSYmKGY9ITEsZT1oKzEpLDQ2PT09az8tMT09PWI/Yj1oOjEhPT1nJiYoZz0xKTotMSE9PWImJihnPS0xKX1yZXR1cm4tMT09PWJ8fC0xPT09ZXx8MD09PWd8fDE9PT1nJiZiPT09ZS0xJiZiPT09ZCsxPyIiOmEuc2xpY2UoYixlKX0sZm9ybWF0OmZ1bmN0aW9uKGEpe2lmKG51bGw9PT1hfHwib2JqZWN0IiE9PXR5cGVvZiBhKXRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSAicGF0aE9iamVjdCIgYXJndW1lbnQgbXVzdCBiZSBvZiB0eXBlIE9iamVjdC4gUmVjZWl2ZWQgdHlwZSAnK3R5cGVvZiBhKTt2YXIgYj1hLmRpcnx8YS5yb290LGQ9YS5iYXNlfHwoYS5uYW1lfHwiIikrKGEuZXh0fHwiIik7cmV0dXJuIGE9Yj9iPT09YS5yb290P2IrZDpiKyIvIitkOmR9LHBhcnNlOmZ1bmN0aW9uKGEpe2hhKGEpO3ZhciBiPXtyb290OiIiLGRpcjoiIixiYXNlOiIiLGV4dDoiIixuYW1lOiIifTtpZigwPT09YS5sZW5ndGgpcmV0dXJuIGI7dmFyIGQ9YS5jaGFyQ29kZUF0KDApLGU9NDc9PT1kO2lmKGUpe2Iucm9vdD0KIi8iO3ZhciBmPTF9ZWxzZSBmPTA7Zm9yKHZhciBnPS0xLGg9MCxrPS0xLGw9ITAsbT1hLmxlbmd0aC0xLG49MDttPj1mOy0tbSlpZihkPWEuY2hhckNvZGVBdChtKSw0Nz09PWQpe2lmKCFsKXtoPW0rMTticmVha319ZWxzZS0xPT09ayYmKGw9ITEsaz1tKzEpLDQ2PT09ZD8tMT09PWc/Zz1tOjEhPT1uJiYobj0xKTotMSE9PWcmJihuPS0xKTstMT09PWd8fC0xPT09a3x8MD09PW58fDE9PT1uJiZnPT09ay0xJiZnPT09aCsxPy0xIT09ayYmKGIuYmFzZT0wPT09aCYmZT9iLm5hbWU9YS5zbGljZSgxLGspOmIubmFtZT1hLnNsaWNlKGgsaykpOigwPT09aCYmZT8oYi5uYW1lPWEuc2xpY2UoMSxnKSxiLmJhc2U9YS5zbGljZSgxLGspKTooYi5uYW1lPWEuc2xpY2UoaCxnKSxiLmJhc2U9YS5zbGljZShoLGspKSxiLmV4dD1hLnNsaWNlKGcsaykpOzA8aD9iLmRpcj1hLnNsaWNlKDAsaC0xKTplJiYoYi5kaXI9Ii8iKTtyZXR1cm4gYn0sc2VwOiIvIixkZWxpbWl0ZXI6IjoiLHdpbjMyOm51bGwsCnBvc2l4Om51bGx9LHVmPUNiLnBvc2l4PUNiLHJoPU9iamVjdC5mcmVlemUoe19fcHJvdG9fXzpudWxsLCJkZWZhdWx0Ijp1ZixfX21vZHVsZUV4cG9ydHM6dWZ9KSx3Zj17aHJ0aW1lOmZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtiPWEoYik7cmV0dXJuIDFFOSpiWzBdK2JbMV19fShmdW5jdGlvbihhKXt2YXIgYj0uMDAxKnBlcmZvcm1hbmNlLm5vdygpLGQ9TWF0aC5mbG9vcihiKStxaDtiPU1hdGguZmxvb3IoYiUxKjFFOSk7YSYmKGQtPWFbMF0sYi09YVsxXSwwPmImJihkLS0sYis9MUU5KSk7cmV0dXJuW2QsYl19KSxleGl0OmZ1bmN0aW9uKGEpe3Rocm93IG5ldyB2ZihhKTt9LGtpbGw6ZnVuY3Rpb24oYSl7dGhyb3cgbmV3IHNoKGEpO30scmFuZG9tRmlsbFN5bmM6cGgsaXNUVFk6ZnVuY3Rpb24oKXtyZXR1cm4hMH0scGF0aDpyaCxmczpudWxsfSxDLFJhPW4oMSksQmE9bigyKSxrYj1uKDQpLGxiPW4oOCksQ2E9bigxNiksaGQ9bigzMiksRGE9big2NCksbWI9bigxMjgpLApoYz1uKDI1NiksaWQ9big1MTIpLGpkPW4oMTAyNCksa2Q9bigyMDQ4KSxsZD1uKDQwOTYpLGljPW4oODE5MiksamM9bigxNjM4NCksbWQ9bigzMjc2OCksbmQ9big2NTUzNiksb2Q9bigxMzEwNzIpLHBkPW4oMjYyMTQ0KSxxZD1uKDUyNDI4OCkscmQ9bigxMDQ4NTc2KSxFYT1uKDIwOTcxNTIpLGtjPW4oNDE5NDMwNCksbGM9big4Mzg4NjA4KSxzZD1uKDE2Nzc3MjE2KSx0ZD1uKDMzNTU0NDMyKSx1ZD1uKDY3MTA4ODY0KSxTYT1uKDEzNDIxNzcyOCkseGY9bigyNjg0MzU0NTYpLGNiPVJhfEJhfGtifGxifENhfGhkfERhfG1ifGhjfGlkfGpkfGtkfGxkfGljfGpjfG1kfG5kfG9kfHBkfHFkfHJkfEVhfGxjfGtjfHNkfHVkfHRkfFNhfHhmLGxmPVJhfEJhfGtifGxifENhfGhkfERhfG1ifGhjfEVhfGtjfGxjfFNhLFBnPW4oMCksWWM9bGJ8Q2F8bWJ8aWR8amR8a2R8bGR8aWN8amN8bWR8bmR8b2R8cGR8cWR8cmR8RWF8bGN8c2R8dWR8dGR8U2EsamY9WWN8bGYsa2Y9QmF8bGJ8RGF8RWF8ClNhfHhmLE5nPUJhfGxifERhfEVhfFNhLE9nPW4oMCksTWc9e0UyQklHOjEsRUFDQ0VTOjIsRUFERFJJTlVTRTozLEVBRERSTk9UQVZBSUw6NCxFQUZOT1NVUFBPUlQ6NSxFQUxSRUFEWTo3LEVBR0FJTjo2LEVCQURGOjgsRUJBRE1TRzo5LEVCVVNZOjEwLEVDQU5DRUxFRDoxMSxFQ0hJTEQ6MTIsRUNPTk5BQk9SVEVEOjEzLEVDT05OUkVGVVNFRDoxNCxFQ09OTlJFU0VUOjE1LEVERUFETE9DSzoxNixFREVTVEFERFJSRVE6MTcsRURPTToxOCxFRFFVT1Q6MTksRUVYSVNUOjIwLEVGQVVMVDoyMSxFRkJJRzoyMixFSE9TVERPV046MjMsRUhPU1RVTlJFQUNIOjIzLEVJRFJNOjI0LEVJTFNFUToyNSxFSU5QUk9HUkVTUzoyNixFSU5UUjoyNyxFSU5WQUw6MjgsRUlPOjI5LEVJU0NPTk46MzAsRUlTRElSOjMxLEVMT09QOjMyLEVNRklMRTozMyxFTUxJTks6MzQsRU1TR1NJWkU6MzUsRU1VTFRJSE9QOjM2LEVOQU1FVE9PTE9ORzozNyxFTkVURE9XTjozOCxFTkVUUkVTRVQ6MzksRU5FVFVOUkVBQ0g6NDAsCkVORklMRTo0MSxFTk9CVUZTOjQyLEVOT0RFVjo0MyxFTk9FTlQ6NDQsRU5PRVhFQzo0NSxFTk9MQ0s6NDYsRU5PTElOSzo0NyxFTk9NRU06NDgsRU5PTVNHOjQ5LEVOT1BST1RPT1BUOjUwLEVOT1NQQzo1MSxFTk9TWVM6NTIsRU5PVENPTk46NTMsRU5PVERJUjo1NCxFTk9URU1QVFk6NTUsRU5PVFJFQ09WRVJBQkxFOjU2LEVOT1RTT0NLOjU3LEVOT1RUWTo1OSxFTlhJTzo2MCxFT1ZFUkZMT1c6NjEsRU9XTkVSREVBRDo2MixFUEVSTTo2MyxFUElQRTo2NCxFUFJPVE86NjUsRVBST1RPTk9TVVBQT1JUOjY2LEVQUk9UT1RZUEU6NjcsRVJBTkdFOjY4LEVST0ZTOjY5LEVTUElQRTo3MCxFU1JDSDo3MSxFU1RBTEU6NzIsRVRJTUVET1VUOjczLEVUWFRCU1k6NzQsRVhERVY6NzV9LHlmPShDPXt9LENbNl09IlNJR0hVUCIsQ1s4XT0iU0lHSU5UIixDWzExXT0iU0lHUVVJVCIsQ1s3XT0iU0lHSUxMIixDWzE1XT0iU0lHVFJBUCIsQ1swXT0iU0lHQUJSVCIsQ1syXT0iU0lHQlVTIixDWzVdPQoiU0lHRlBFIixDWzldPSJTSUdLSUxMIixDWzIwXT0iU0lHVVNSMSIsQ1sxMl09IlNJR1NFR1YiLENbMjFdPSJTSUdVU1IyIixDWzEwXT0iU0lHUElQRSIsQ1sxXT0iU0lHQUxSTSIsQ1sxNF09IlNJR1RFUk0iLENbM109IlNJR0NITEQiLENbNF09IlNJR0NPTlQiLENbMTNdPSJTSUdTVE9QIixDWzE2XT0iU0lHVFNUUCIsQ1sxN109IlNJR1RUSU4iLENbMThdPSJTSUdUVE9VIixDWzE5XT0iU0lHVVJHIixDWzIzXT0iU0lHWENQVSIsQ1syNF09IlNJR1hGU1oiLENbMjJdPSJTSUdWVEFMUk0iLEMpLHRoPVJhfEJhfENhfG1ifEVhfFNhLHpmPVJhfERhfENhfG1ifEVhfFNhLFhjPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoZCl7dmFyIGU9YS5jYWxsKHRoaXMpfHx0aGlzO2UuZXJybm89ZDtPYmplY3Quc2V0UHJvdG90eXBlT2YoZSxiLnByb3RvdHlwZSk7cmV0dXJuIGV9UmMoYixhKTtyZXR1cm4gYn0oRXJyb3IpLHZmPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoZCl7dmFyIGU9YS5jYWxsKHRoaXMsCiJXQVNJIEV4aXQgZXJyb3I6ICIrZCl8fHRoaXM7ZS5jb2RlPWQ7T2JqZWN0LnNldFByb3RvdHlwZU9mKGUsYi5wcm90b3R5cGUpO3JldHVybiBlfVJjKGIsYSk7cmV0dXJuIGJ9KEVycm9yKSxzaD1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKGQpe3ZhciBlPWEuY2FsbCh0aGlzLCJXQVNJIEtpbGwgc2lnbmFsOiAiK2QpfHx0aGlzO2Uuc2lnbmFsPWQ7T2JqZWN0LnNldFByb3RvdHlwZU9mKGUsYi5wcm90b3R5cGUpO3JldHVybiBlfVJjKGIsYSk7cmV0dXJuIGJ9KEVycm9yKSxBZj1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7ZnVuY3Rpb24gYihhKXtzd2l0Y2goYSl7Y2FzZSAxOnJldHVybiBBLmhydGltZSgpO2Nhc2UgMDpyZXR1cm4gUGEoRGF0ZS5ub3coKSk7Y2FzZSAyOmNhc2UgMzpyZXR1cm4gQS5ocnRpbWUoKS1JO2RlZmF1bHQ6cmV0dXJuIG51bGx9fWZ1bmN0aW9uIGUoYSxiKXthPWdmKGgsYSk7aWYoYiE9PW4oMCkmJihhLnJpZ2h0cy5iYXNlJmIpPT09bigwKSl0aHJvdyBuZXcgWGMoNjMpOwpyZXR1cm4gYX1mdW5jdGlvbiBmKGEsYil7aC5yZWZyZXNoTWVtb3J5KCk7cmV0dXJuIEFycmF5LmZyb20oe2xlbmd0aDpifSxmdW5jdGlvbihiLGQpe2Q9YSs4KmQ7Yj1oLnZpZXcuZ2V0VWludDMyKGQsITApO2Q9aC52aWV3LmdldFVpbnQzMihkKzQsITApO3JldHVybiBuZXcgVWludDhBcnJheShoLm1lbW9yeS5idWZmZXIsYixkKX0pfXZhciBnLGg9dGhpcyxrPXt9O2EmJmEucHJlb3BlbnM/az1hLnByZW9wZW5zOmEmJmEucHJlb3BlbkRpcmVjdG9yaWVzJiYoaz1hLnByZW9wZW5EaXJlY3Rvcmllcyk7dmFyIGw9e307YSYmYS5lbnYmJihsPWEuZW52KTt2YXIgbT1bXTthJiZhLmFyZ3MmJihtPWEuYXJncyk7dmFyIEE9d2Y7YSYmYS5iaW5kaW5ncyYmKEE9YS5iaW5kaW5ncyk7dGhpcy52aWV3PXRoaXMubWVtb3J5PXZvaWQgMDt0aGlzLmJpbmRpbmdzPUE7dGhpcy5GRF9NQVA9bmV3IE1hcChbWzAse3JlYWw6MCxmaWxldHlwZToyLHJpZ2h0czp7YmFzZTp0aCxpbmhlcml0aW5nOm4oMCl9LApwYXRoOnZvaWQgMH1dLFsxLHtyZWFsOjEsZmlsZXR5cGU6MixyaWdodHM6e2Jhc2U6emYsaW5oZXJpdGluZzpuKDApfSxwYXRoOnZvaWQgMH1dLFsyLHtyZWFsOjIsZmlsZXR5cGU6MixyaWdodHM6e2Jhc2U6emYsaW5oZXJpdGluZzpuKDApfSxwYXRoOnZvaWQgMH1dXSk7dmFyIHI9dGhpcy5iaW5kaW5ncy5mcyx1PXRoaXMuYmluZGluZ3MucGF0aDt0cnl7Zm9yKHZhciBwPVNiKE9iamVjdC5lbnRyaWVzKGspKSx4PXAubmV4dCgpOyF4LmRvbmU7eD1wLm5leHQoKSl7dmFyIHk9VGIoeC52YWx1ZSwyKSx6PXlbMF0sQz15WzFdLEQ9ci5vcGVuU3luYyhDLHIuY29uc3RhbnRzLk9fUkRPTkxZKSxFPVViKHRoaXMuRkRfTUFQLmtleXMoKSkucmV2ZXJzZSgpWzBdKzE7dGhpcy5GRF9NQVAuc2V0KEUse3JlYWw6RCxmaWxldHlwZTozLHJpZ2h0czp7YmFzZTpZYyxpbmhlcml0aW5nOmpmfSxmYWtlUGF0aDp6LHBhdGg6Q30pfX1jYXRjaCh3KXt2YXIgSD17ZXJyb3I6d319ZmluYWxseXt0cnl7eCYmCiF4LmRvbmUmJihnPXAucmV0dXJuKSYmZy5jYWxsKHApfWZpbmFsbHl7aWYoSCl0aHJvdyBILmVycm9yO319dmFyIEk9QS5ocnRpbWUoKTt0aGlzLndhc2lJbXBvcnQ9e2FyZ3NfZ2V0OmZ1bmN0aW9uKGEsYil7aC5yZWZyZXNoTWVtb3J5KCk7dmFyIGQ9YSxlPWI7bS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2gudmlldy5zZXRVaW50MzIoZCxlLCEwKTtkKz00O2UrPUcuZnJvbShoLm1lbW9yeS5idWZmZXIpLndyaXRlKGErIlx4MDAiLGUpfSk7cmV0dXJuIDB9LGFyZ3Nfc2l6ZXNfZ2V0OmZ1bmN0aW9uKGEsYil7aC5yZWZyZXNoTWVtb3J5KCk7aC52aWV3LnNldFVpbnQzMihhLG0ubGVuZ3RoLCEwKTthPW0ucmVkdWNlKGZ1bmN0aW9uKGEsYil7cmV0dXJuIGErRy5ieXRlTGVuZ3RoKGIpKzF9LDApO2gudmlldy5zZXRVaW50MzIoYixhLCEwKTtyZXR1cm4gMH0sZW52aXJvbl9nZXQ6ZnVuY3Rpb24oYSxiKXtoLnJlZnJlc2hNZW1vcnkoKTt2YXIgZD1hLGU9YjtPYmplY3QuZW50cmllcyhsKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPQpUYihhLDIpO2E9YlswXTtiPWJbMV07aC52aWV3LnNldFVpbnQzMihkLGUsITApO2QrPTQ7ZSs9Ry5mcm9tKGgubWVtb3J5LmJ1ZmZlcikud3JpdGUoYSsiPSIrYisiXHgwMCIsZSl9KTtyZXR1cm4gMH0sZW52aXJvbl9zaXplc19nZXQ6ZnVuY3Rpb24oYSxiKXtoLnJlZnJlc2hNZW1vcnkoKTt2YXIgZD1PYmplY3QuZW50cmllcyhsKS5tYXAoZnVuY3Rpb24oYSl7YT1UYihhLDIpO3JldHVybiBhWzBdKyI9IithWzFdKyJceDAwIn0pLGU9ZC5yZWR1Y2UoZnVuY3Rpb24oYSxiKXtyZXR1cm4gYStHLmJ5dGVMZW5ndGgoYil9LDApO2gudmlldy5zZXRVaW50MzIoYSxkLmxlbmd0aCwhMCk7aC52aWV3LnNldFVpbnQzMihiLGUsITApO3JldHVybiAwfSxjbG9ja19yZXNfZ2V0OmZ1bmN0aW9uKGEsYil7c3dpdGNoKGEpe2Nhc2UgMTpjYXNlIDI6Y2FzZSAzOnZhciBkPW4oMSk7YnJlYWs7Y2FzZSAwOmQ9bigxRTMpfWgudmlldy5zZXRCaWdVaW50NjQoYixkKTtyZXR1cm4gMH0sY2xvY2tfdGltZV9nZXQ6ZnVuY3Rpb24oYSwKZCxlKXtoLnJlZnJlc2hNZW1vcnkoKTthPWIoYSk7aWYobnVsbD09PWEpcmV0dXJuIDI4O2gudmlldy5zZXRCaWdVaW50NjQoZSxuKGEpLCEwKTtyZXR1cm4gMH0sZmRfYWR2aXNlOkIoZnVuY3Rpb24oYSl7ZShhLG1iKTtyZXR1cm4gNTJ9KSxmZF9hbGxvY2F0ZTpCKGZ1bmN0aW9uKGEpe2UoYSxoYyk7cmV0dXJuIDUyfSksZmRfY2xvc2U6QihmdW5jdGlvbihhKXt2YXIgYj1lKGEsbigwKSk7ci5jbG9zZVN5bmMoYi5yZWFsKTtoLkZEX01BUC5kZWxldGUoYSk7cmV0dXJuIDB9KSxmZF9kYXRhc3luYzpCKGZ1bmN0aW9uKGEpe2E9ZShhLFJhKTtyLmZkYXRhc3luY1N5bmMoYS5yZWFsKTtyZXR1cm4gMH0pLGZkX2Zkc3RhdF9nZXQ6QihmdW5jdGlvbihhLGIpe2E9ZShhLG4oMCkpO2gucmVmcmVzaE1lbW9yeSgpO2gudmlldy5zZXRVaW50OChiLGEuZmlsZXR5cGUpO2gudmlldy5zZXRVaW50MTYoYisyLDAsITApO2gudmlldy5zZXRVaW50MTYoYis0LDAsITApO2gudmlldy5zZXRCaWdVaW50NjQoYisKOCxuKGEucmlnaHRzLmJhc2UpLCEwKTtoLnZpZXcuc2V0QmlnVWludDY0KGIrOCs4LG4oYS5yaWdodHMuaW5oZXJpdGluZyksITApO3JldHVybiAwfSksZmRfZmRzdGF0X3NldF9mbGFnczpCKGZ1bmN0aW9uKGEpe2UoYSxsYik7cmV0dXJuIDUyfSksZmRfZmRzdGF0X3NldF9yaWdodHM6QihmdW5jdGlvbihhLGIsZCl7YT1lKGEsbigwKSk7aWYoKGEucmlnaHRzLmJhc2V8Yik+YS5yaWdodHMuYmFzZXx8KGEucmlnaHRzLmluaGVyaXRpbmd8ZCk+YS5yaWdodHMuaW5oZXJpdGluZylyZXR1cm4gNjM7YS5yaWdodHMuYmFzZT1iO2EucmlnaHRzLmluaGVyaXRpbmc9ZDtyZXR1cm4gMH0pLGZkX2ZpbGVzdGF0X2dldDpCKGZ1bmN0aW9uKGEsYil7YT1lKGEsRWEpO3ZhciBkPXIuZnN0YXRTeW5jKGEucmVhbCk7aC5yZWZyZXNoTWVtb3J5KCk7aC52aWV3LnNldEJpZ1VpbnQ2NChiLG4oZC5kZXYpLCEwKTtiKz04O2gudmlldy5zZXRCaWdVaW50NjQoYixuKGQuaW5vKSwhMCk7Yis9ODtoLnZpZXcuc2V0VWludDgoYiwKYS5maWxldHlwZSk7Yis9ODtoLnZpZXcuc2V0QmlnVWludDY0KGIsbihkLm5saW5rKSwhMCk7Yis9ODtoLnZpZXcuc2V0QmlnVWludDY0KGIsbihkLnNpemUpLCEwKTtiKz04O2gudmlldy5zZXRCaWdVaW50NjQoYixQYShkLmF0aW1lTXMpLCEwKTtiKz04O2gudmlldy5zZXRCaWdVaW50NjQoYixQYShkLm10aW1lTXMpLCEwKTtoLnZpZXcuc2V0QmlnVWludDY0KGIrOCxQYShkLmN0aW1lTXMpLCEwKTtyZXR1cm4gMH0pLGZkX2ZpbGVzdGF0X3NldF9zaXplOkIoZnVuY3Rpb24oYSxiKXthPWUoYSxrYyk7ci5mdHJ1bmNhdGVTeW5jKGEucmVhbCxOdW1iZXIoYikpO3JldHVybiAwfSksZmRfZmlsZXN0YXRfc2V0X3RpbWVzOkIoZnVuY3Rpb24oYSxkLGYsaCl7YT1lKGEsbGMpO3ZhciBnPXIuZnN0YXRTeW5jKGEucmVhbCksaz1nLmF0aW1lO2c9Zy5tdGltZTt2YXIgbD1iYihiKDApKTtpZigzPT09KGgmMyl8fDEyPT09KGgmMTIpKXJldHVybiAyODsxPT09KGgmMSk/az1iYihkKToyPT09CihoJjIpJiYoaz1sKTs0PT09KGgmNCk/Zz1iYihmKTo4PT09KGgmOCkmJihnPWwpO3IuZnV0aW1lc1N5bmMoYS5yZWFsLG5ldyBEYXRlKGspLG5ldyBEYXRlKGcpKTtyZXR1cm4gMH0pLGZkX3ByZXN0YXRfZ2V0OkIoZnVuY3Rpb24oYSxiKXthPWUoYSxuKDApKTtpZighYS5wYXRoKXJldHVybiAyODtoLnJlZnJlc2hNZW1vcnkoKTtoLnZpZXcuc2V0VWludDgoYiwwKTtoLnZpZXcuc2V0VWludDMyKGIrNCxHLmJ5dGVMZW5ndGgoYS5mYWtlUGF0aCksITApO3JldHVybiAwfSksZmRfcHJlc3RhdF9kaXJfbmFtZTpCKGZ1bmN0aW9uKGEsYixkKXthPWUoYSxuKDApKTtpZighYS5wYXRoKXJldHVybiAyODtoLnJlZnJlc2hNZW1vcnkoKTtHLmZyb20oaC5tZW1vcnkuYnVmZmVyKS53cml0ZShhLmZha2VQYXRoLGIsZCwidXRmOCIpO3JldHVybiAwfSksZmRfcHdyaXRlOkIoZnVuY3Rpb24oYSxiLGQsZyxrKXt2YXIgbD1lKGEsRGF8a2IpLG09MDtmKGIsZCkuZm9yRWFjaChmdW5jdGlvbihhKXtmb3IodmFyIGI9CjA7YjxhLmJ5dGVMZW5ndGg7KWIrPXIud3JpdGVTeW5jKGwucmVhbCxhLGIsYS5ieXRlTGVuZ3RoLWIsTnVtYmVyKGcpK20rYik7bSs9Yn0pO2gudmlldy5zZXRVaW50MzIoayxtLCEwKTtyZXR1cm4gMH0pLGZkX3dyaXRlOkIoZnVuY3Rpb24oYSxiLGQsZyl7dmFyIGs9ZShhLERhKSxsPTA7ZihiLGQpLmZvckVhY2goZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTA7YjxhLmJ5dGVMZW5ndGg7KXt2YXIgZD1yLndyaXRlU3luYyhrLnJlYWwsYSxiLGEuYnl0ZUxlbmd0aC1iLGsub2Zmc2V0P051bWJlcihrLm9mZnNldCk6bnVsbCk7ay5vZmZzZXQmJihrLm9mZnNldCs9bihkKSk7Yis9ZH1sKz1ifSk7aC52aWV3LnNldFVpbnQzMihnLGwsITApO3JldHVybiAwfSksZmRfcHJlYWQ6QihmdW5jdGlvbihhLGIsZCxnLGspe3ZhciBsO2E9ZShhLEJhfGtiKTt2YXIgbT0wO3RyeXt2YXIgdz1TYihmKGIsZCkpLG49dy5uZXh0KCk7YTpmb3IoOyFuLmRvbmU7bj13Lm5leHQoKSl7dmFyIEY9bi52YWx1ZTsKZm9yKGI9MDtiPEYuYnl0ZUxlbmd0aDspe3ZhciBxPUYuYnl0ZUxlbmd0aC1iLHA9ci5yZWFkU3luYyhhLnJlYWwsRixiLEYuYnl0ZUxlbmd0aC1iLE51bWJlcihnKSttK2IpO2IrPXA7bSs9cDtpZigwPT09cHx8cDxxKWJyZWFrIGF9bSs9Yn19Y2F0Y2goTyl7dmFyIHQ9e2Vycm9yOk99fWZpbmFsbHl7dHJ5e24mJiFuLmRvbmUmJihsPXcucmV0dXJuKSYmbC5jYWxsKHcpfWZpbmFsbHl7aWYodCl0aHJvdyB0LmVycm9yO319aC52aWV3LnNldFVpbnQzMihrLG0sITApO3JldHVybiAwfSksZmRfcmVhZDpCKGZ1bmN0aW9uKGEsYixkLGcpe3ZhciBrO2E9ZShhLEJhKTt2YXIgbD0wPT09YS5yZWFsLG09MDt0cnl7dmFyIHc9U2IoZihiLGQpKSxGPXcubmV4dCgpO2E6Zm9yKDshRi5kb25lO0Y9dy5uZXh0KCkpe3ZhciBwPUYudmFsdWU7Zm9yKGI9MDtiPHAuYnl0ZUxlbmd0aDspe3ZhciBxPXAuYnl0ZUxlbmd0aC1iLHQ9ci5yZWFkU3luYyhhLnJlYWwscCxiLHEsbHx8dm9pZCAwPT09YS5vZmZzZXQ/Cm51bGw6TnVtYmVyKGEub2Zmc2V0KSk7bHx8KGEub2Zmc2V0PShhLm9mZnNldD9hLm9mZnNldDpuKDApKStuKHQpKTtiKz10O20rPXQ7aWYoMD09PXR8fHQ8cSlicmVhayBhfX19Y2F0Y2goTyl7dmFyIGJjPXtlcnJvcjpPfX1maW5hbGx5e3RyeXtGJiYhRi5kb25lJiYoaz13LnJldHVybikmJmsuY2FsbCh3KX1maW5hbGx5e2lmKGJjKXRocm93IGJjLmVycm9yO319aC52aWV3LnNldFVpbnQzMihnLG0sITApO3JldHVybiAwfSksZmRfcmVhZGRpcjpCKGZ1bmN0aW9uKGEsYixkLGYsZyl7YT1lKGEsamMpO2gucmVmcmVzaE1lbW9yeSgpO3ZhciBrPXIucmVhZGRpclN5bmMoYS5wYXRoLHt3aXRoRmlsZVR5cGVzOiEwfSksbD1iO2ZvcihmPU51bWJlcihmKTtmPGsubGVuZ3RoO2YrPTEpe3ZhciBtPWtbZl0sdz1HLmJ5dGVMZW5ndGgobS5uYW1lKTtpZihiLWw+ZClicmVhaztoLnZpZXcuc2V0QmlnVWludDY0KGIsbihmKzEpLCEwKTtiKz04O2lmKGItbD5kKWJyZWFrO3ZhciBwPXIuc3RhdFN5bmModS5yZXNvbHZlKGEucGF0aCwKbS5uYW1lKSk7aC52aWV3LnNldEJpZ1VpbnQ2NChiLG4ocC5pbm8pLCEwKTtiKz04O2lmKGItbD5kKWJyZWFrO2gudmlldy5zZXRVaW50MzIoYix3LCEwKTtiKz00O2lmKGItbD5kKWJyZWFrO3N3aXRjaCghMCl7Y2FzZSBwLmlzQmxvY2tEZXZpY2UoKTpwPTE7YnJlYWs7Y2FzZSBwLmlzQ2hhcmFjdGVyRGV2aWNlKCk6cD0yO2JyZWFrO2Nhc2UgcC5pc0RpcmVjdG9yeSgpOnA9MzticmVhaztjYXNlIHAuaXNGSUZPKCk6cD02O2JyZWFrO2Nhc2UgcC5pc0ZpbGUoKTpwPTQ7YnJlYWs7Y2FzZSBwLmlzU29ja2V0KCk6cD02O2JyZWFrO2Nhc2UgcC5pc1N5bWJvbGljTGluaygpOnA9NzticmVhaztkZWZhdWx0OnA9MH1oLnZpZXcuc2V0VWludDgoYixwKTtiKz0xO2IrPTM7aWYoYit3Pj1sK2QpYnJlYWs7Ry5mcm9tKGgubWVtb3J5LmJ1ZmZlcikud3JpdGUobS5uYW1lLGIpO2IrPXd9aC52aWV3LnNldFVpbnQzMihnLE1hdGgubWluKGItbCxkKSwhMCk7cmV0dXJuIDB9KSxmZF9yZW51bWJlcjpCKGZ1bmN0aW9uKGEsCmIpe2UoYSxuKDApKTtlKGIsbigwKSk7ci5jbG9zZVN5bmMoaC5GRF9NQVAuZ2V0KGEpLnJlYWwpO2guRkRfTUFQLnNldChhLGguRkRfTUFQLmdldChiKSk7aC5GRF9NQVAuZGVsZXRlKGIpO3JldHVybiAwfSksZmRfc2VlazpCKGZ1bmN0aW9uKGEsYixkLGYpe2E9ZShhLGtiKTtoLnJlZnJlc2hNZW1vcnkoKTtzd2l0Y2goZCl7Y2FzZSAxOmEub2Zmc2V0PShhLm9mZnNldD9hLm9mZnNldDpuKDApKStuKGIpO2JyZWFrO2Nhc2UgMjpkPXIuZnN0YXRTeW5jKGEucmVhbCkuc2l6ZTthLm9mZnNldD1uKGQpK24oYik7YnJlYWs7Y2FzZSAwOmEub2Zmc2V0PW4oYil9aC52aWV3LnNldEJpZ1VpbnQ2NChmLGEub2Zmc2V0LCEwKTtyZXR1cm4gMH0pLGZkX3RlbGw6QihmdW5jdGlvbihhLGIpe2E9ZShhLGhkKTtoLnJlZnJlc2hNZW1vcnkoKTthLm9mZnNldHx8KGEub2Zmc2V0PW4oMCkpO2gudmlldy5zZXRCaWdVaW50NjQoYixhLm9mZnNldCwhMCk7cmV0dXJuIDB9KSxmZF9zeW5jOkIoZnVuY3Rpb24oYSl7YT0KZShhLENhKTtyLmZzeW5jU3luYyhhLnJlYWwpO3JldHVybiAwfSkscGF0aF9jcmVhdGVfZGlyZWN0b3J5OkIoZnVuY3Rpb24oYSxiLGQpe2E9ZShhLGlkKTtpZighYS5wYXRoKXJldHVybiAyODtoLnJlZnJlc2hNZW1vcnkoKTtiPUcuZnJvbShoLm1lbW9yeS5idWZmZXIsYixkKS50b1N0cmluZygpO3IubWtkaXJTeW5jKHUucmVzb2x2ZShhLnBhdGgsYikpO3JldHVybiAwfSkscGF0aF9maWxlc3RhdF9nZXQ6QihmdW5jdGlvbihhLGIsZCxmLGcpe2E9ZShhLHBkKTtpZighYS5wYXRoKXJldHVybiAyODtoLnJlZnJlc2hNZW1vcnkoKTtkPUcuZnJvbShoLm1lbW9yeS5idWZmZXIsZCxmKS50b1N0cmluZygpO2Q9ci5zdGF0U3luYyh1LnJlc29sdmUoYS5wYXRoLGQpKTtoLnZpZXcuc2V0QmlnVWludDY0KGcsbihkLmRldiksITApO2crPTg7aC52aWV3LnNldEJpZ1VpbnQ2NChnLG4oZC5pbm8pLCEwKTtnKz04O2gudmlldy5zZXRVaW50OChnLGhmKGgsdm9pZCAwLGQpLmZpbGV0eXBlKTtnKz0KODtoLnZpZXcuc2V0QmlnVWludDY0KGcsbihkLm5saW5rKSwhMCk7Zys9ODtoLnZpZXcuc2V0QmlnVWludDY0KGcsbihkLnNpemUpLCEwKTtnKz04O2gudmlldy5zZXRCaWdVaW50NjQoZyxQYShkLmF0aW1lTXMpLCEwKTtnKz04O2gudmlldy5zZXRCaWdVaW50NjQoZyxQYShkLm10aW1lTXMpLCEwKTtoLnZpZXcuc2V0QmlnVWludDY0KGcrOCxQYShkLmN0aW1lTXMpLCEwKTtyZXR1cm4gMH0pLHBhdGhfZmlsZXN0YXRfc2V0X3RpbWVzOkIoZnVuY3Rpb24oYSxkLGYsZyxrLGwsbSl7YT1lKGEscmQpO2lmKCFhLnBhdGgpcmV0dXJuIDI4O2gucmVmcmVzaE1lbW9yeSgpO3ZhciBuPXIuZnN0YXRTeW5jKGEucmVhbCk7ZD1uLmF0aW1lO249bi5tdGltZTt2YXIgcD1iYihiKDApKTtpZigzPT09KG0mMyl8fDEyPT09KG0mMTIpKXJldHVybiAyODsxPT09KG0mMSk/ZD1iYihrKToyPT09KG0mMikmJihkPXApOzQ9PT0obSY0KT9uPWJiKGwpOjg9PT0obSY4KSYmKG49cCk7Zj1HLmZyb20oaC5tZW1vcnkuYnVmZmVyLApmLGcpLnRvU3RyaW5nKCk7ci51dGltZXNTeW5jKHUucmVzb2x2ZShhLnBhdGgsZiksbmV3IERhdGUoZCksbmV3IERhdGUobikpO3JldHVybiAwfSkscGF0aF9saW5rOkIoZnVuY3Rpb24oYSxiLGQsZixnLGssbCl7YT1lKGEsa2QpO2c9ZShnLGxkKTtpZighYS5wYXRofHwhZy5wYXRoKXJldHVybiAyODtoLnJlZnJlc2hNZW1vcnkoKTtkPUcuZnJvbShoLm1lbW9yeS5idWZmZXIsZCxmKS50b1N0cmluZygpO2s9Ry5mcm9tKGgubWVtb3J5LmJ1ZmZlcixrLGwpLnRvU3RyaW5nKCk7ci5saW5rU3luYyh1LnJlc29sdmUoYS5wYXRoLGQpLHUucmVzb2x2ZShnLnBhdGgsaykpO3JldHVybiAwfSkscGF0aF9vcGVuOkIoZnVuY3Rpb24oYSxiLGQsZixnLGssbCxtLHApe2I9ZShhLGljKTtrPW4oayk7bD1uKGwpO2E9KGsmKEJhfGpjKSkhPT1uKDApO3ZhciBxPShrJihSYXxEYXxoY3xrYykpIT09bigwKTtpZihxJiZhKXZhciB3PXIuY29uc3RhbnRzLk9fUkRXUjtlbHNlIGE/dz1yLmNvbnN0YW50cy5PX1JET05MWToKcSYmKHc9ci5jb25zdGFudHMuT19XUk9OTFkpO2E9a3xpYztrfD1sOzAhPT0oZyYxKSYmKHd8PXIuY29uc3RhbnRzLk9fQ1JFQVQsYXw9amQpOzAhPT0oZyYyKSYmKHd8PXIuY29uc3RhbnRzLk9fRElSRUNUT1JZKTswIT09KGcmNCkmJih3fD1yLmNvbnN0YW50cy5PX0VYQ0wpOzAhPT0oZyY4KSYmKHd8PXIuY29uc3RhbnRzLk9fVFJVTkMsYXw9cWQpOzAhPT0obSYxKSYmKHd8PXIuY29uc3RhbnRzLk9fQVBQRU5EKTswIT09KG0mMikmJih3PXIuY29uc3RhbnRzLk9fRFNZTkM/d3xyLmNvbnN0YW50cy5PX0RTWU5DOnd8ci5jb25zdGFudHMuT19TWU5DLGt8PVJhKTswIT09KG0mNCkmJih3fD1yLmNvbnN0YW50cy5PX05PTkJMT0NLKTswIT09KG0mOCkmJih3PXIuY29uc3RhbnRzLk9fUlNZTkM/d3xyLmNvbnN0YW50cy5PX1JTWU5DOnd8ci5jb25zdGFudHMuT19TWU5DLGt8PUNhKTswIT09KG0mMTYpJiYod3w9ci5jb25zdGFudHMuT19TWU5DLGt8PUNhKTtxJiYwPT09KHcmKHIuY29uc3RhbnRzLk9fQVBQRU5EfApyLmNvbnN0YW50cy5PX1RSVU5DKSkmJihrfD1rYik7aC5yZWZyZXNoTWVtb3J5KCk7ZD1HLmZyb20oaC5tZW1vcnkuYnVmZmVyLGQsZikudG9TdHJpbmcoKTtkPXUucmVzb2x2ZShiLnBhdGgsZCk7aWYodS5yZWxhdGl2ZShiLnBhdGgsZCkuc3RhcnRzV2l0aCgiLi4iKSlyZXR1cm4gNzY7dHJ5e3ZhciB0PXIucmVhbHBhdGhTeW5jKGQpO2lmKHUucmVsYXRpdmUoYi5wYXRoLHQpLnN0YXJ0c1dpdGgoIi4uIikpcmV0dXJuIDc2fWNhdGNoKE8pe2lmKCJFTk9FTlQiPT09Ty5jb2RlKXQ9ZDtlbHNlIHRocm93IE87fXRyeXt2YXIgRj1yLnN0YXRTeW5jKHQpLmlzRGlyZWN0b3J5KCl9Y2F0Y2goTyl7fXc9IXEmJkY/ci5vcGVuU3luYyh0LHIuY29uc3RhbnRzLk9fUkRPTkxZKTpyLm9wZW5TeW5jKHQsdyk7Rj1VYihoLkZEX01BUC5rZXlzKCkpLnJldmVyc2UoKVswXSsxO2guRkRfTUFQLnNldChGLHtyZWFsOncsZmlsZXR5cGU6dm9pZCAwLHJpZ2h0czp7YmFzZTphLGluaGVyaXRpbmc6a30sCnBhdGg6dH0pO2dmKGgsRik7aC52aWV3LnNldFVpbnQzMihwLEYsITApO3JldHVybiAwfSkscGF0aF9yZWFkbGluazpCKGZ1bmN0aW9uKGEsYixkLGYsZyxrKXthPWUoYSxtZCk7aWYoIWEucGF0aClyZXR1cm4gMjg7aC5yZWZyZXNoTWVtb3J5KCk7Yj1HLmZyb20oaC5tZW1vcnkuYnVmZmVyLGIsZCkudG9TdHJpbmcoKTtiPXUucmVzb2x2ZShhLnBhdGgsYik7Yj1yLnJlYWRsaW5rU3luYyhiKTtmPUcuZnJvbShoLm1lbW9yeS5idWZmZXIpLndyaXRlKGIsZixnKTtoLnZpZXcuc2V0VWludDMyKGssZiwhMCk7cmV0dXJuIDB9KSxwYXRoX3JlbW92ZV9kaXJlY3Rvcnk6QihmdW5jdGlvbihhLGIsZCl7YT1lKGEsdGQpO2lmKCFhLnBhdGgpcmV0dXJuIDI4O2gucmVmcmVzaE1lbW9yeSgpO2I9Ry5mcm9tKGgubWVtb3J5LmJ1ZmZlcixiLGQpLnRvU3RyaW5nKCk7ci5ybWRpclN5bmModS5yZXNvbHZlKGEucGF0aCxiKSk7cmV0dXJuIDB9KSxwYXRoX3JlbmFtZTpCKGZ1bmN0aW9uKGEsYixkLApmLGcsayl7YT1lKGEsbmQpO2Y9ZShmLG9kKTtpZighYS5wYXRofHwhZi5wYXRoKXJldHVybiAyODtoLnJlZnJlc2hNZW1vcnkoKTtiPUcuZnJvbShoLm1lbW9yeS5idWZmZXIsYixkKS50b1N0cmluZygpO2c9Ry5mcm9tKGgubWVtb3J5LmJ1ZmZlcixnLGspLnRvU3RyaW5nKCk7ci5yZW5hbWVTeW5jKHUucmVzb2x2ZShhLnBhdGgsYiksdS5yZXNvbHZlKGYucGF0aCxnKSk7cmV0dXJuIDB9KSxwYXRoX3N5bWxpbms6QihmdW5jdGlvbihhLGIsZCxmLGcpe2Q9ZShkLHNkKTtpZighZC5wYXRoKXJldHVybiAyODtoLnJlZnJlc2hNZW1vcnkoKTthPUcuZnJvbShoLm1lbW9yeS5idWZmZXIsYSxiKS50b1N0cmluZygpO2Y9Ry5mcm9tKGgubWVtb3J5LmJ1ZmZlcixmLGcpLnRvU3RyaW5nKCk7ci5zeW1saW5rU3luYyhhLHUucmVzb2x2ZShkLnBhdGgsZikpO3JldHVybiAwfSkscGF0aF91bmxpbmtfZmlsZTpCKGZ1bmN0aW9uKGEsYixkKXthPWUoYSx1ZCk7aWYoIWEucGF0aClyZXR1cm4gMjg7CmgucmVmcmVzaE1lbW9yeSgpO2I9Ry5mcm9tKGgubWVtb3J5LmJ1ZmZlcixiLGQpLnRvU3RyaW5nKCk7ci51bmxpbmtTeW5jKHUucmVzb2x2ZShhLnBhdGgsYikpO3JldHVybiAwfSkscG9sbF9vbmVvZmY6ZnVuY3Rpb24oYSxkLGUsZil7dmFyIGc9MCxrPTA7aC5yZWZyZXNoTWVtb3J5KCk7Zm9yKHZhciBsPTA7bDxlO2wrPTEpe3ZhciBtPWgudmlldy5nZXRCaWdVaW50NjQoYSwhMCk7YSs9ODt2YXIgcD1oLnZpZXcuZ2V0VWludDgoYSk7YSs9MTtzd2l0Y2gocCl7Y2FzZSAwOmErPTc7aC52aWV3LmdldEJpZ1VpbnQ2NChhLCEwKTthKz04O3ZhciBxPWgudmlldy5nZXRVaW50MzIoYSwhMCk7YSs9NDthKz00O3A9aC52aWV3LmdldEJpZ1VpbnQ2NChhLCEwKTthKz04O2gudmlldy5nZXRCaWdVaW50NjQoYSwhMCk7YSs9ODt2YXIgcj1oLnZpZXcuZ2V0VWludDE2KGEsITApO2ErPTI7YSs9Njt2YXIgdD0xPT09cjtyPTA7cT1uKGIocSkpO251bGw9PT1xP3I9Mjg6KHA9dD9wOnErcCxrPQpwPms/cDprKTtoLnZpZXcuc2V0QmlnVWludDY0KGQsbSwhMCk7ZCs9ODtoLnZpZXcuc2V0VWludDE2KGQsciwhMCk7ZCs9MjtoLnZpZXcuc2V0VWludDgoZCwwKTtkKz0xO2QrPTU7Zys9MTticmVhaztjYXNlIDE6Y2FzZSAyOmErPTM7aC52aWV3LmdldFVpbnQzMihhLCEwKTthKz00O2gudmlldy5zZXRCaWdVaW50NjQoZCxtLCEwKTtkKz04O2gudmlldy5zZXRVaW50MTYoZCw1MiwhMCk7ZCs9MjtoLnZpZXcuc2V0VWludDgoZCxwKTtkKz0xO2QrPTU7Zys9MTticmVhaztkZWZhdWx0OnJldHVybiAyOH19Zm9yKGgudmlldy5zZXRVaW50MzIoZixnLCEwKTtBLmhydGltZSgpPGs7KTtyZXR1cm4gMH0scHJvY19leGl0OmZ1bmN0aW9uKGEpe0EuZXhpdChhKTtyZXR1cm4gMH0scHJvY19yYWlzZTpmdW5jdGlvbihhKXtpZighKGEgaW4geWYpKXJldHVybiAyODtBLmtpbGwoeWZbYV0pO3JldHVybiAwfSxyYW5kb21fZ2V0OmZ1bmN0aW9uKGEsYil7aC5yZWZyZXNoTWVtb3J5KCk7QS5yYW5kb21GaWxsU3luYyhuZXcgVWludDhBcnJheShoLm1lbW9yeS5idWZmZXIpLAphLGIpO3JldHVybiAwfSxzY2hlZF95aWVsZDpmdW5jdGlvbigpe3JldHVybiAwfSxzb2NrX3JlY3Y6ZnVuY3Rpb24oKXtyZXR1cm4gNTJ9LHNvY2tfc2VuZDpmdW5jdGlvbigpe3JldHVybiA1Mn0sc29ja19zaHV0ZG93bjpmdW5jdGlvbigpe3JldHVybiA1Mn19O2EudHJhY2VTeXNjYWxscyYmT2JqZWN0LmtleXModGhpcy53YXNpSW1wb3J0KS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPWgud2FzaUltcG9ydFthXTtoLndhc2lJbXBvcnRbYV09ZnVuY3Rpb24oKXtmb3IodmFyIGQ9W10sZT0wO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspZFtlXT1hcmd1bWVudHNbZV07Y29uc29sZS5sb2coIldBU0k6IHdhc2lJbXBvcnQgY2FsbGVkOiAiK2ErIiAoIitkKyIpIik7dHJ5e3ZhciBmPWIuYXBwbHkodm9pZCAwLFViKGQpKTtjb25zb2xlLmxvZygiV0FTSTogID0+ICIrZik7cmV0dXJuIGZ9Y2F0Y2goWil7dGhyb3cgY29uc29sZS5sb2coIkNhdGNoZWQgZXJyb3I6ICIrWiksWjt9fX0pfWEucHJvdG90eXBlLnJlZnJlc2hNZW1vcnk9CmZ1bmN0aW9uKCl7dGhpcy52aWV3JiYwIT09dGhpcy52aWV3LmJ1ZmZlci5ieXRlTGVuZ3RofHwodGhpcy52aWV3PW5ldyBlYyh0aGlzLm1lbW9yeS5idWZmZXIpKX07YS5wcm90b3R5cGUuc2V0TWVtb3J5PWZ1bmN0aW9uKGEpe3RoaXMubWVtb3J5PWF9O2EucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKGEpe2E9YS5leHBvcnRzO2lmKG51bGw9PT1hfHwib2JqZWN0IiE9PXR5cGVvZiBhKXRocm93IEVycm9yKCJpbnN0YW5jZS5leHBvcnRzIG11c3QgYmUgYW4gT2JqZWN0LiBSZWNlaXZlZCAiK2ErIi4iKTt2YXIgYj1hLm1lbW9yeTtpZighKGIgaW5zdGFuY2VvZiBXZWJBc3NlbWJseS5NZW1vcnkpKXRocm93IEVycm9yKCJpbnN0YW5jZS5leHBvcnRzLm1lbW9yeSBtdXN0IGJlIGEgV2ViQXNzZW1ibHkuTWVtb3J5LiBSZWNjZWl2ZWQgIitiKyIuIik7dGhpcy5zZXRNZW1vcnkoYik7YS5fc3RhcnQmJmEuX3N0YXJ0KCl9O2EucHJvdG90eXBlLmdldEltcG9ydE5hbWVzcGFjZT1mdW5jdGlvbihhKXt2YXIgYiwKZT1udWxsO3RyeXtmb3IodmFyIGY9U2IoV2ViQXNzZW1ibHkuTW9kdWxlLmltcG9ydHMoYSkpLGc9Zi5uZXh0KCk7IWcuZG9uZTtnPWYubmV4dCgpKXt2YXIgaD1nLnZhbHVlO2lmKCJmdW5jdGlvbiI9PT1oLmtpbmQmJmgubW9kdWxlLnN0YXJ0c1dpdGgoIndhc2lfIikpaWYoIWUpZT1oLm1vZHVsZTtlbHNlIGlmKGUhPT1oLm1vZHVsZSl0aHJvdyBFcnJvcigiTXVsdGlwbGUgbmFtZXNwYWNlcyBkZXRlY3RlZC4iKTt9fWNhdGNoKHQpe3ZhciBrPXtlcnJvcjp0fX1maW5hbGx5e3RyeXtnJiYhZy5kb25lJiYoYj1mLnJldHVybikmJmIuY2FsbChmKX1maW5hbGx5e2lmKGspdGhyb3cgay5lcnJvcjt9fXJldHVybiBlfTthLnByb3RvdHlwZS5nZXRJbXBvcnRzPWZ1bmN0aW9uKGEpe3N3aXRjaCh0aGlzLmdldEltcG9ydE5hbWVzcGFjZShhKSl7Y2FzZSAid2FzaV91bnN0YWJsZSI6cmV0dXJue3dhc2lfdW5zdGFibGU6dGhpcy53YXNpSW1wb3J0fTtjYXNlICJ3YXNpX3NuYXBzaG90X3ByZXZpZXcxIjpyZXR1cm57d2FzaV9zbmFwc2hvdF9wcmV2aWV3MTp0aGlzLndhc2lJbXBvcnR9OwpkZWZhdWx0OnRocm93IEVycm9yKCJDYW4ndCBkZXRlY3QgYSBXQVNJIG5hbWVzcGFjZSBmb3IgdGhlIFdlYkFzc2VtYmx5IE1vZHVsZSIpO319O2EuZGVmYXVsdEJpbmRpbmdzPXdmO3JldHVybiBhfSgpLEJmPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXt0aGlzLm9wdGlvbnM9YX1hLnByb3RvdHlwZS5ydW49ZnVuY3Rpb24oYSl7cmV0dXJuIEViKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3JldHVybiBGYih0aGlzLGZ1bmN0aW9uKGEpe3Rocm93IEVycm9yKCJydW4gbm90IGltcGxlbWVudGVkIGJ5IHRoZSBDb21tYW5kIHN1YmNsYXNzIik7fSl9KX07cmV0dXJuIGF9KCksdWg9ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihiKXt2YXIgZD1hLmNhbGwodGhpcyxiKXx8dGhpcztpZighYi5tb2R1bGUpdGhyb3cgRXJyb3IoIkRpZCBub3QgZmluZCBhIFdlYkFzc2VtYmx5Lk1vZHVsZSBmb3IgdGhlIFdBU0kgQ29tbWFuZCIpO3JldHVybiBkfXpkKGIsYSk7Yi5wcm90b3R5cGUucnVuPQpmdW5jdGlvbihhKXtyZXR1cm4gRWIodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGIsZCxnLGg7cmV0dXJuIEZiKHRoaXMsZnVuY3Rpb24oZSl7c3dpdGNoKGUubGFiZWwpe2Nhc2UgMDpyZXR1cm4gYj17cHJlb3BlbnM6ZGIoeyIuIjoiLiIsIi8iOiIvIn0sdGhpcy5vcHRpb25zLnByZW9wZW5zfHx7fSksZW52OnRoaXMub3B0aW9ucy5lbnYsYXJnczp0aGlzLm9wdGlvbnMuYXJncyxiaW5kaW5nczpkYihkYih7fSxBZi5kZWZhdWx0QmluZGluZ3MpLHtmczphLmZzfSl9LGQ9bmV3IEFmKGIpLGc9dGhpcy5vcHRpb25zLm1vZHVsZSxbNCxXZWJBc3NlbWJseS5pbnN0YW50aWF0ZShnLGRiKHt9LGQuZ2V0SW1wb3J0cyhnKSkpXTtjYXNlIDE6cmV0dXJuIGg9ZS5zZW50KCksZC5zdGFydChoKSxbMl19fSl9KX07cmV0dXJuIGJ9KEJmKSx2aD1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKGIpe3ZhciBkPWEuY2FsbCh0aGlzLGIpfHx0aGlzO2lmKCFiLmNhbGxiYWNrKXRocm93IEVycm9yKCJUaGUgQ29tbWFuZCBPcHRpb25zIHByb3ZpZGVkIGFyZSBub3QgZm9yIGEgQ2FsbGJhY2sgQ29tbWFuZCIpOwpkLmNhbGxiYWNrPWIuY2FsbGJhY2s7cmV0dXJuIGR9emQoYixhKTtiLnByb3RvdHlwZS5ydW49ZnVuY3Rpb24oYSl7cmV0dXJuIEViKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBiO3JldHVybiBGYih0aGlzLGZ1bmN0aW9uKGQpe3N3aXRjaChkLmxhYmVsKXtjYXNlIDA6cmV0dXJuWzQsUHJvbWlzZS5yZXNvbHZlKHRoaXMuY2FsbGJhY2sodGhpcy5vcHRpb25zLGEpKV07Y2FzZSAxOnJldHVybiBiPWQuc2VudCgpLCJzdHJpbmciPT10eXBlb2YgYiYmYS5mcy53cml0ZUZpbGVTeW5jKCIvZGV2L3N0ZG91dCIsKG5ldyBUZXh0RW5jb2RlcikuZW5jb2RlKGIrIlxuIikpLFsyXX19KX0pfTtyZXR1cm4gYn0oQmYpLHdoPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGQsZSxmLGcsaCxrLGwsbSl7dmFyIGI9dGhpczt0aGlzLnN0ZGluUHJvbXB0PSIiO3RoaXMuY29tbWFuZE9wdGlvbnM9YTt0aGlzLndhc21Gcz1uZXcgZ2g7dGhpcy53YXNtRnMuZnJvbUpTT04oZCk7dGhpcy5vcmlnaW5hbFdhc21Gc0pzb249CmQ7dGhpcy5pb0RldmljZXM9bmV3IGhoKHRoaXMud2FzbUZzKTt0aGlzLmlvRGV2aWNlV2luZG93PWg7dGhpcy5pb0RldmljZXMuc2V0V2luZG93U2l6ZUNhbGxiYWNrKGZ1bmN0aW9uKCl7dmFyIGE9Yi5pb0RldmljZXMuZ2V0V2luZG93U2l6ZSgpO2IuaW9EZXZpY2VXaW5kb3cucmVzaXplKGFbMF0sYVsxXSl9KTt0aGlzLmlvRGV2aWNlcy5zZXRCdWZmZXJJbmRleERpc3BsYXlDYWxsYmFjayhmdW5jdGlvbigpe3ZhciBhPWIuaW9EZXZpY2VzLmdldEZyYW1lQnVmZmVyKCk7Yi5pb0RldmljZVdpbmRvdy5kcmF3UmdiYUFycmF5VG9GcmFtZUJ1ZmZlcihhKX0pO3RoaXMuaW9EZXZpY2VzLnNldElucHV0Q2FsbGJhY2soZnVuY3Rpb24oKXtpZihiLnNoYXJlZElvRGV2aWNlSW5wdXQpe2IuaW9EZXZpY2VXaW5kb3cuZ2V0SW5wdXRCdWZmZXIoKTtBdG9taWNzLndhaXQoYi5zaGFyZWRJb0RldmljZUlucHV0LDAsLTEpO3ZhciBhPWIuc2hhcmVkSW9EZXZpY2VJbnB1dFswXTtiLnNoYXJlZElvRGV2aWNlSW5wdXRbMF09Ci0xO2lmKDA8YSl7Zm9yKHZhciBkPW5ldyBVaW50OEFycmF5KGEpLGU9MDtlPGE7ZSsrKWRbZV09Yi5zaGFyZWRJb0RldmljZUlucHV0W2UrMV07cmV0dXJuIGR9cmV0dXJuIG5ldyBVaW50OEFycmF5fXJldHVybiBiLmlvRGV2aWNlV2luZG93LmdldElucHV0QnVmZmVyKCl9KTt0aGlzLmRhdGFDYWxsYmFjaz1lO3RoaXMuZW5kQ2FsbGJhY2s9Zjt0aGlzLmVycm9yQ2FsbGJhY2s9ZztkPXZvaWQgMDtrJiYoZD1uZXcgSW50MzJBcnJheShrKSk7dGhpcy5zaGFyZWRJb0RldmljZUlucHV0PWQ7az12b2lkIDA7bCYmKGs9bmV3IEludDMyQXJyYXkobCkpO3RoaXMuY29tbWFuZD1hLm1vZHVsZT9uZXcgdWgoYSk6bmV3IHZoKGEpO3RoaXMud2FzbUZzLnZvbHVtZS5mZHNbMF0ubm9kZS5yZWFkPXRoaXMuc3RkaW5SZWFkLmJpbmQodGhpcyk7dGhpcy53YXNtRnMudm9sdW1lLmZkc1sxXS5ub2RlLndyaXRlPXRoaXMuc3Rkb3V0V3JpdGUuYmluZCh0aGlzKTt0aGlzLndhc21Gcy52b2x1bWUuZmRzWzJdLm5vZGUud3JpdGU9CnRoaXMuc3Rkb3V0V3JpdGUuYmluZCh0aGlzKTthPXRoaXMud2FzbUZzLnZvbHVtZS5vcGVuU3luYygiL2Rldi90dHkiLCJ3KyIpO3RoaXMud2FzbUZzLnZvbHVtZS5mZHNbYV0ubm9kZS5yZWFkPXRoaXMuc3RkaW5SZWFkLmJpbmQodGhpcyk7dGhpcy53YXNtRnMudm9sdW1lLmZkc1thXS5ub2RlLndyaXRlPXRoaXMuc3Rkb3V0V3JpdGUuYmluZCh0aGlzKTt0aGlzLnNoYXJlZFN0ZGluPWs7dGhpcy5zdGFydFN0ZGluUmVhZENhbGxiYWNrPW07dGhpcy5yZWFkU3RkaW5Db3VudGVyPTA7dGhpcy5waXBlZFN0ZGluPSIifWEucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKGEpe3JldHVybiBFYih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgYixlLGYsZz10aGlzO3JldHVybiBGYih0aGlzLGZ1bmN0aW9uKGQpe3N3aXRjaChkLmxhYmVsKXtjYXNlIDA6Yj1mdW5jdGlvbigpe2cuaW9EZXZpY2VXaW5kb3cucmVzaXplKDAsMCk7c2V0VGltZW91dChmdW5jdGlvbigpe2cuZW5kQ2FsbGJhY2soZy53YXNtRnMudG9KU09OKCkpfSwKNTApfSxkLmxhYmVsPTE7Y2FzZSAxOnJldHVybiBkLnRyeXMucHVzaChbMSwzLCw0XSksYSYmKHRoaXMucGlwZWRTdGRpbj0obmV3IFRleHREZWNvZGVyKCJ1dGYtOCIpKS5kZWNvZGUoYSkpLFs0LHRoaXMuY29tbWFuZC5ydW4odGhpcy53YXNtRnMpXTtjYXNlIDI6cmV0dXJuIGQuc2VudCgpLGIoKSxbMyw0XTtjYXNlIDM6ZT1kLnNlbnQoKTtpZihlIGluc3RhbmNlb2YgdmYpcmV0dXJuIGIoKSxbMl07Zj0iVW5rbm93biBFcnJvciI7aWYodm9pZCAwIT09ZS5jb2RlKWY9ImV4aXRlZCB3aXRoIGNvZGU6ICIrZS5jb2RlO2Vsc2UgaWYodm9pZCAwIT09ZS5zaWduYWwpZj0ia2lsbGVkIHdpdGggc2lnbmFsOiAiK2Uuc2lnbmFsO2Vsc2UgaWYodm9pZCAwIT09ZS51c2VyKXJldHVybiBiKCksWzJdO2NvbnNvbGUuZXJyb3IoZSk7dGhpcy5lcnJvckNhbGxiYWNrKGYsdGhpcy53YXNtRnMudG9KU09OKCksdm9pZCAwIT09ZS51c2VyKTtyZXR1cm5bMyw0XTtjYXNlIDQ6cmV0dXJuWzJdfX0pfSl9OwphLnByb3RvdHlwZS5zdGRvdXRXcml0ZT1mdW5jdGlvbihhLGQsZSxmKXt0aGlzLmRhdGFDYWxsYmFjayYmdGhpcy5kYXRhQ2FsbGJhY2soYSk7ZD0obmV3IFRleHREZWNvZGVyKCJ1dGYtOCIpKS5kZWNvZGUoYSkuc3BsaXQoIlxuIik7dGhpcy5zdGRpblByb21wdD0wPGQubGVuZ3RoP2RbZC5sZW5ndGgtMV0ucmVwbGFjZSgvW1x1MDAxQlx1MDA5Ql1bW1xdKCkjOz9dKig/Oig/Oig/OlthLXpBLVpcZF0qKD86O1stYS16QS1aXGRcLyMmLjo9PyVAfl9dKikqKT9cdTAwMDcpfCg/Oig/OlxkezEsNH0oPzo7XGR7MCw0fSkqKT9bXGRBLVBSLVRaY2YtbnRxcnk9Pjx+XSkpL2csIiIpOiIiO3JldHVybiBhLmxlbmd0aH07YS5wcm90b3R5cGUuc3RkaW5SZWFkPWZ1bmN0aW9uKGEsZCxlLGYpe2lmKDAhPT10aGlzLnJlYWRTdGRpbkNvdW50ZXIlMilyZXR1cm4gdGhpcy5yZWFkU3RkaW5Db3VudGVyKyssMDtpZih0aGlzLnBpcGVkU3RkaW4pZD10aGlzLnBpcGVkU3RkaW4sdGhpcy5waXBlZFN0ZGluPQoiIix0aGlzLnJlYWRTdGRpbkNvdW50ZXIrKztlbHNlIGlmKHRoaXMuc2hhcmVkU3RkaW4mJnRoaXMuc3RhcnRTdGRpblJlYWRDYWxsYmFjayl7dGhpcy5zdGFydFN0ZGluUmVhZENhbGxiYWNrKCk7QXRvbWljcy53YWl0KHRoaXMuc2hhcmVkU3RkaW4sMCwtMSk7ZD10aGlzLnNoYXJlZFN0ZGluWzBdO3RoaXMuc2hhcmVkU3RkaW5bMF09LTE7ZT1uZXcgVWludDhBcnJheShkKTtmb3IoZj0wO2Y8ZDtmKyspZVtmXT10aGlzLnNoYXJlZFN0ZGluWzErZl07ZD0obmV3IFRleHREZWNvZGVyKCJ1dGYtOCIpKS5kZWNvZGUoZSl9ZWxzZXtkPXByb21wdCgiUGxlYXNlIGVudGVyIHRleHQgZm9yIHN0ZGluOlxuIit0aGlzLnN0ZGluUHJvbXB0KTtpZihudWxsPT09ZCl0aHJvdyB0aGlzLmRhdGFDYWxsYmFjayYmdGhpcy5kYXRhQ2FsbGJhY2soKG5ldyBUZXh0RW5jb2RlcikuZW5jb2RlKCJcbiIpKSxhPUVycm9yKCJQcm9jZXNzIGtpbGxlZCBieSB1c2VyIiksYS51c2VyPSEwLGE7ZCs9IlxuIjsKdGhpcy5kYXRhQ2FsbGJhY2smJnRoaXMuZGF0YUNhbGxiYWNrKChuZXcgVGV4dEVuY29kZXIpLmVuY29kZShkKSl9aWYoIWQpcmV0dXJuIDA7ZD0obmV3IFRleHRFbmNvZGVyKS5lbmNvZGUoZCk7Zm9yKGU9MDtlPGQubGVuZ3RoOysrZSlhW2VdPWRbZV07cmV0dXJuIGQubGVuZ3RofTtyZXR1cm4gYX0oKTttYyh3aCl9KSgpCg==",this.wasmTty)];case 1:return e=h.sent(),i=new Worker(e),n=xn(i,[],void 0),r=new SharedArrayBuffer(8192),o=this.wasmTerminalConfig.wasmFs.toJSON(),s=new SharedArrayBuffer(8192),l=new Ss(s),[4,new n(this.commandOptionsForProcessesToRun[t],o,Mn(this._processDataCallback.bind(this,{commandOptionIndex:t,sync:!1})),Mn(this._processEndCallback.bind(this,{commandOptionIndex:t,processWorker:i})),Mn(this._processErrorCallback.bind(this,{commandOptionIndex:t})),Mn(l),s,r,Mn(this._processStartStdinReadCallback.bind(this)))];case 2:return c=h.sent(),(a=new Int32Array(r))[0]=-1,[2,{process:c,commandOptionIndex:t,ioDeviceWindow:l,worker:i,sharedStdin:a}]}}))}))},t.prototype._spawnProcessAsService=function(t){return Zn(this,void 0,void 0,(function(){var e,i;return Gn(this,(function(){return e=this.wasmTerminalConfig.wasmFs.toJSON(),i=new Ss,[2,{process:new Ws(this.commandOptionsForProcessesToRun[t],e,this._processDataCallback.bind(this,{commandOptionIndex:t,sync:!0}),this._processEndCallback.bind(this,{commandOptionIndex:t}),this._processErrorCallback.bind(this,{commandOptionIndex:t}),i),commandOptionIndex:t,ioDeviceWindow:i}]}))}))},t.prototype._processDataCallback=function(t,e){var i=t.commandOptionIndex;t=t.sync,this.isRunning&&(i<this.commandOptionsForProcessesToRun.length-1?this.supportsSharedArrayBuffer&&1<this.spawnedProcessObjects.length&&this.spawnedProcessObjects[this.spawnedProcessObjects.length-1].commandOptionIndex>i?this._addStdinToSharedStdin(e,1):((i=new Uint8Array(e.length+this.pipedStdinDataForNextProcess.length)).set(this.pipedStdinDataForNextProcess),i.set(e,this.pipedStdinDataForNextProcess.length),this.pipedStdinDataForNextProcess=i):(e=new TextDecoder("utf-8").decode(e),this.wasmTty&&this.wasmTty.print(e,t)))},t.prototype._processEndCallback=function(t,e){var i=t.commandOptionIndex;(t=t.processWorker)&&t.terminate(),e&&this.wasmTerminalConfig.wasmFs.fromJSON(e),i<this.commandOptionsForProcessesToRun.length-1?this._tryToSpawnProcess(i+1):(this.isRunning=!1,this.commandEndCallback()),this.spawnedProcessObjects.shift()},t.prototype._processErrorCallback=function(t,e,i){console.error(this.commandOptionsForProcessesToRun[t.commandOptionIndex].args[0]+": "+e),i&&this.wasmTerminalConfig.wasmFs.fromJSON(i),this.kill(),this.commandEndCallback()},t.prototype._processStartStdinReadCallback=function(){var t=this;this.commandStartReadCallback().then((function(e){e=(new TextEncoder).encode(e+"\n"),t._addStdinToSharedStdin(e,0)}))},t.prototype._getBlobUrlForProcessWorker=function(t,e){return Zn(this,void 0,void 0,(function(){var i,n;return Gn(this,(function(r){switch(r.label){case 0:return ps?[2,ps]:(e&&e.printStatus("[INFO] Downloading the process Web Worker (This happens once)..."),[4,Promise.all([fetch(t).then((function(t){return t.text()})),new Promise((function(t){return setTimeout(t,500)}))]).then((function(t){return t[0]}))]);case 1:return i=r.sent(),e&&e.clearStatus(),n=new Blob([i]),[2,ps=window.URL.createObjectURL(n)]}}))}))},t.prototype._getCommandOptionsFromAST=function(t,e,i){return Zn(this,void 0,void 0,(function(){var n,r,o,s,l,c,a,h,u,d,m,p,f=this;return Gn(this,(function(b){switch(b.label){case 0:return n=[],r=t.command.value,o=t.args.map((function(t){return t.value})),s=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Yn(arguments[e]));return t}([r],o),l=Object.entries(t.env).map((function(t){return[(t=Yn(t,2))[0],t[1].value]})),c={},l.forEach((function(t){t=Yn(t,2),c[t[0]]=t[1]})),i&&(a=i.getTermSize(),h=a.rows,u=a.cols,c.LINES=h,c.COLUMNS=u),d=function(){return Zn(f,void 0,void 0,(function(){var r,o;return Gn(this,(function(s){switch(s.label){case 0:return t.redirects&&(r=t.redirects[0])&&"pipe"===r.type?[4,this._getCommandOptionsFromAST(r.command,e,i)]:[3,2];case 1:o=s.sent(),n=n.concat(o),s.label=2;case 2:return[2]}}))}))},[4,d()];case 1:return b.sent(),i&&i.printStatus("[INFO] Fetching the command "+r+" ..."),[4,e.fetchCommand({args:s,env:c})];case 2:return m=b.sent(),i&&i.clearStatus(),m instanceof Uint8Array?[4,WebAssembly.compile(m)]:[3,4];case 3:return p=b.sent(),n.unshift({args:s,env:c,module:p}),[3,5];case 4:!function(t){return t&&("[object Function]"===Object.prototype.toString.call(t)||"function"==typeof t||t instanceof Function)}(m)?n.unshift(m):n.unshift({args:s,env:c,callback:m}),b.label=5;case 5:return[2,n]}}))}))},t}(),vs=function(){function t(t,e,i){var n=this;void 0===i&&(i={historySize:10,maxAutocompleteEntries:100}),this.handleCursorMove=function(t){0<t?(t=Math.min(t,n.wasmTty.getInput().length-n.wasmTty.getCursor()),n.wasmTty.setCursorDirectly(n.wasmTty.getCursor()+t)):0>t&&(t=Math.max(t,-n.wasmTty.getCursor()),n.wasmTty.setCursorDirectly(n.wasmTty.getCursor()+t))},this.handleCursorErase=function(t){t?0>=n.wasmTty.getCursor()||(t=n.wasmTty.getInput().substr(0,n.wasmTty.getCursor()-1)+n.wasmTty.getInput().substr(n.wasmTty.getCursor()),n.wasmTty.clearInput(),n.wasmTty.setCursorDirectly(n.wasmTty.getCursor()-1),n.wasmTty.setInput(t,!0)):(t=n.wasmTty.getInput().substr(0,n.wasmTty.getCursor())+n.wasmTty.getInput().substr(n.wasmTty.getCursor()+1),n.wasmTty.setInput(t))},this.handleCursorInsert=function(t){var e=n.wasmTty.getInput().substr(0,n.wasmTty.getCursor())+t+n.wasmTty.getInput().substr(n.wasmTty.getCursor());n.wasmTty.setCursorDirectly(n.wasmTty.getCursor()+t.length),n.wasmTty.setInput(e)},this.handleReadComplete=function(){n._activePrompt&&n._activePrompt.resolve&&(n._activePrompt.resolve(n.wasmTty.getInput()),n._activePrompt=void 0),n.wasmTty.print("\r\n"),n._active=!1},this.handleTermData=function(t){if(n._active||""===t){if(n.wasmTty.getFirstInit()&&n._activePrompt){var e=n.wasmTty.getBuffer().getLine(n.wasmTty.getBuffer().cursorY+n.wasmTty.getBuffer().baseY).translateToString(!1,0,n.wasmTty.getBuffer().cursorX);n._activePrompt.promptPrefix=e,n.wasmTty.setPromptPrefix(e),n.wasmTty.setFirstInit(!1)}n._activeCharPrompt&&n._activeCharPrompt.resolve?(n._activeCharPrompt.resolve(t),n._activeCharPrompt=void 0,n.wasmTty.print("\r\n")):3<t.length&&27!==t.charCodeAt(0)?(t=t.replace(/[\r\n]+/g,"\r"),Array.from(t).forEach((function(t){return n.handleData(t)}))):n.handleData(t)}},this.handleData=function(t){if(n._active||""===t){var e=t.charCodeAt(0);if(27===e)switch(t.substr(1)){case"[A":n.history&&(t=n.history.getPrevious())&&(n.wasmTty.setInput(t),n.wasmTty.setCursor(t.length));break;case"[B":n.history&&((t=n.history.getNext())||(t=""),n.wasmTty.setInput(t),n.wasmTty.setCursor(t.length));break;case"[D":n.handleCursorMove(-1);break;case"[C":n.handleCursorMove(1);break;case"[3~":n.handleCursorErase(!1);break;case"[F":n.wasmTty.setCursor(n.wasmTty.getInput().length);break;case"[H":n.wasmTty.setCursor(0);break;case"b":(t=Xn(n.wasmTty.getInput(),n.wasmTty.getCursor()))&&n.wasmTty.setCursor(t);break;case"f":(t=function(t,e){var i=Rn(t,!1).find((function(t){return t>e}));return void 0===i?t.length:i}(n.wasmTty.getInput(),n.wasmTty.getCursor()))&&n.wasmTty.setCursor(t);break;case"":(t=Xn(n.wasmTty.getInput(),n.wasmTty.getCursor()))&&(n.wasmTty.setInput(n.wasmTty.getInput().substr(0,t)+n.wasmTty.getInput().substr(n.wasmTty.getCursor())),n.wasmTty.setCursor(t))}else if(32>e||127===e)switch(t){case"\r":case"\n":case"\r":!function(t){return""!==t.trim()&&!(0==(t.match(/'/g)||[]).length%2&&0==(t.match(/"/g)||[]).length%2&&""!==t.split(/(\|\||\||&&)/g).pop().trim()&&(!t.endsWith("\\")||t.endsWith("\\\\")))}(n.wasmTty.getInput())?n.handleReadComplete():n.handleCursorInsert("\n");break;case"":case"\b":case"":n.handleCursorErase(!0);break;case"\t":if(0<n._autocompleteHandlers.length){e=Vn(t=n.wasmTty.getInput().substr(0,n.wasmTty.getCursor()));var i=function(t,e){var i=vn(e),n=i.length-1,r=i[n]||"";return""===e.trim()?(n=0,r=""):Vn(e)&&(n+=1,r=""),t.reduce((function(t,e){try{var r=e(n,i);return t.concat(r)}catch(e){return console.error("Auto-complete error:",e),t}}),[]).filter((function(t){return t.startsWith(r)}))}(n._autocompleteHandlers,t);i.sort(),0===i.length?e||n.handleCursorInsert(" "):1===i.length?(t=function(t){return""===t.trim()||Vn(t)?"":vn(t).pop()||""}(t),n.handleCursorInsert(i[0].substr(t.length)+" ")):i.length<=n.maxAutocompleteEntries?n.printAndRestartPrompt((function(){n.wasmTty.printWide(i)})):n.printAndRestartPrompt((function(){return n.wasmTty.readChar("Display all "+i.length+" possibilities? (y or n)").promise.then((function(t){"y"!==t&&"Y"!==t||n.wasmTty.printWide(i)}))}))}else n.handleCursorInsert("    ");break;case"":n.wasmTty.setCursor(0);break;case"":n.handleCursorMove(-1);break;case"":case"":t=n.wasmTty.getInput(),n.wasmTty.setCursor(t.length),n.wasmTty.setInput(""),n.wasmTty.setCursorDirectly(0),n.wasmTty.print(t+"^C\r\n"),n.history&&n.history.rewind(),n.commandRunner&&(n.commandRunner.kill(),n.commandRunner=void 0),n.resolveActiveRead();break;case"":n.wasmTty.setCursor(n.wasmTty.getInput().length);break;case"":n.handleCursorMove(1);break;case"":n.history&&n.history.rewind(),n.wasmTty.setInput("");break;case"\v":n.wasmTty.setInput(n.wasmTty.getInput().substring(0,n.wasmTty.getCursor())),n.wasmTty.setCursor(n.wasmTty.getInput().length);break;case"\f":n.wasmTty.clearTty(),n.wasmTty.print("$ "+n.wasmTty.getInput());break;case"":n.history&&((t=n.history.getNext())||(t=""),n.wasmTty.setInput(t),n.wasmTty.setCursor(t.length));break;case"":n.history&&(t=n.history.getPrevious())&&(n.wasmTty.setInput(t),n.wasmTty.setCursor(t.length));break;case"":n.wasmTty.setInput(n.wasmTty.getInput().substring(n.wasmTty.getCursor())),n.wasmTty.setCursor(0)}else n.handleCursorInsert(t)}},this.wasmTerminalConfig=t,this.wasmTty=e,this.history=new Cn(i.historySize),this.commandRunner=void 0,this.maxAutocompleteEntries=i.maxAutocompleteEntries,this._autocompleteHandlers=[function(){return n.history.entries}],this._active=!1}return t.prototype.prompt=function(){return Zn(this,void 0,void 0,(function(){var t,e;return Gn(this,(function(i){switch(i.label){case 0:if(this._activePrompt)return[2];i.label=1;case 1:return i.trys.push([1,4,,5]),this._activePrompt=this.wasmTty.read("$ "),this._active=!0,[4,this._activePrompt.promise];case 2:if(t=i.sent(),this.commandRunner&&this.commandRunner.kill(),""===t)return this.prompt(),[2];if("!!"===t){if(!(this.history&&0<this.history.entries.length))throw Error("No Previous command in History");t=this.history.entries[this.history.entries.length-1]}else this.history&&this.history.push(this.wasmTty.getInput());return this.commandRunner=this.getCommandRunner(t),[4,this.commandRunner.runCommand()];case 3:return i.sent(),[3,5];case 4:return e=i.sent(),this.wasmTty.println(""+e.toString()),this.prompt(),[3,5];case 5:return[2]}}))}))},t.prototype.isPrompting=function(){return this._active},t.prototype.getCommandRunner=function(t){var e=this;return new Is(this.wasmTerminalConfig,t,(function(){return Zn(e,void 0,void 0,(function(){return Gn(this,(function(){return this._activePrompt=this.wasmTty.read(""),this._active=!0,[2,this._activePrompt.promise]}))}))}),(function(){setTimeout((function(){e.prompt()}))}),this.wasmTty)},t.prototype.printAndRestartPrompt=function(t){function e(){i.wasmTty.setCursor(i.wasmTty.getCursor()),i.wasmTty.setInput(i.wasmTty.getInput())}var i=this;this.wasmTty.getCursor(),this.wasmTty.setCursor(this.wasmTty.getInput().length),this.wasmTty.print("\r\n"),(t=t())?t.then(e):e()},t.prototype.resolveActiveRead=function(){this._activePrompt&&this._activePrompt.resolve&&(this._activePrompt.resolve(""),this._activePrompt=void 0),this._activeCharPrompt&&this._activeCharPrompt.resolve&&(this._activeCharPrompt.resolve(""),this._activeCharPrompt=void 0),this._active=!1},t.prototype.rejectActiveRead=function(t){void 0===t&&(t="aborted"),(this._activePrompt||this._activeCharPrompt)&&this.wasmTty.print("\r\n"),this._activePrompt&&this._activePrompt.reject&&(this._activePrompt.reject(Error(t)),this._activePrompt=void 0),this._activeCharPrompt&&this._activeCharPrompt.reject&&(this._activeCharPrompt.reject(Error(t)),this._activeCharPrompt=void 0),this._active=!1},t}(),Rs=l||s.Terminal,Xs=["click","tap"],Vs=function(){function t(t){var e=this;this.handleTermResize=function(t){var i=t.rows;t=t.cols,e.wasmTty.clearInput(),e.wasmTty.setTermSize(t,i),e.wasmTty.setInput(e.wasmTty.getInput(),!0)},this.wasmTerminalConfig=new pn(t),this.xterm=new Rs({}),this.resizeEvent=this.xterm.onResize(this.handleTermResize),this.xterm.onKey((function(t){if(" "===t.key)return t.domEvent.preventDefault(),!1})),this.container=void 0,this.webLinksAddon=new u,this.fitAddon=new a,this.xterm.loadAddon(this.fitAddon),this.xterm.loadAddon(this.webLinksAddon),this.wasmTerminalConfig=new pn(t),this.wasmTty=new Wn(this.xterm),this.wasmShell=new vs(this.wasmTerminalConfig,this.wasmTty),this.dataEvent=this.xterm.onData(this.wasmShell.handleTermData),this.isOpen=!1,this.pendingPrintOnOpen=""}return t.prototype.open=function(t){var e=this,i=this.focus.bind(this);void 0!==this.container&&Xs.forEach((function(t){e.container.removeEventListener(t,i)})),this.container=t,this.xterm.open(t),this.isOpen=!0,setTimeout((function(){void 0!==e.container&&Xs.forEach((function(t){e.container.addEventListener(t,i)})),e.pendingPrintOnOpen&&(e.wasmTty.print(e.pendingPrintOnOpen+"\n"),e.pendingPrintOnOpen=""),e.wasmShell.prompt()}))},t.prototype.fit=function(){this.fitAddon.fit()},t.prototype.focus=function(){this.xterm.focus(),this.scrollToCursor()},t.prototype.scrollToCursor=function(){if(this.container){var t=this.wasmTty.getBuffer().cursorY,e=this.wasmTty.getSize(),i=this.container.getBoundingClientRect(),n=i.left;0>n&&(n=0),(t=i.top+t/e.rows*i.height+10)>document.body.scrollHeight&&(t=document.body.scrollHeight),window.scrollTo(n,t)}},t.prototype.print=function(t,e){var i=this;t=t.replace(/\n\n/g,"\n \n"),this.isOpen?this.wasmShell.isPrompting?this.wasmShell.printAndRestartPrompt((function(){i.wasmTty.print(t+"\n",e)})):this.wasmTty.print(t,e):this.pendingPrintOnOpen=this.pendingPrintOnOpen?this.pendingPrintOnOpen+t:t},t.prototype.runCommand=function(t){this.wasmShell.isPrompting()&&(this.wasmTty.setInput(t),this.wasmShell.handleReadComplete())},t.prototype.destroy=function(){this.xterm.dispose(),delete this.xterm},t.prototype.onPaste=function(t){this.wasmTty.print(t)},t}();function Cs(t){return Zn(void 0,void 0,void 0,(function(){var e,i,n;return Gn(this,(function(r){switch(r.label){case 0:return[4,fetch("https://registry.wapm.io/graphql",{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({operationName:"shellGetCommandQuery",query:"query shellGetCommandQuery($command: String!) {\n  command: getCommand(name: $command) {\n    command\n    module {\n      abi\n      publicUrl\n    }\n    packageVersion {\n      package {\n        displayName\n      }\n    }\n  }\n}",variables:{command:t}})})];case 1:return[4,r.sent().json()];case 2:if(e=r.sent(),i=function(t,e){return t=t[e[0]],e.shift(),!!t&&(!(1<e.length)||i(t,e))},i(e,["data","command","module","publicUrl"])){if("wasi"!==(n=e.data.command.module).abi)throw Error(t+" does not use the wasi abi. Currently, only the wasi abi is supported on the wapm shell.");return[2,n.publicUrl]}throw Error("command not found "+t)}}))}))}function Ts(t){return Zn(void 0,void 0,void 0,(function(){var e;return Gn(this,(function(i){switch(i.label){case 0:return[4,fetch(t)];case 1:return[4,i.sent().arrayBuffer()];case 2:return e=i.sent(),[2,new Uint8Array(e)]}}))}))}function _s(t){var e=t.args;return Zn(void 0,void 0,void 0,(function(){return Gn(this,(function(t){switch(t.label){case 0:return[4,Cs(e[0])];case 1:return[4,Ts(t.sent())];case 2:return[2,t.sent()]}}))}))}e.default=Vs}}]);