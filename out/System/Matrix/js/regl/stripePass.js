import colorToRGB from"../colorToRGB.js";import{loadText,make1DTexture,makePass,makePassFBO}from"./utils.js";export default({regl:o,config:r},e)=>{const l=makePassFBO(o,r.useHalfFloat),{backgroundColor:a,cursorColor:t,glintColor:s,ditherMagnitude:m,bloomStrength:i}=r,g=make1DTexture(o,r.stripeColors.map((o=>[...colorToRGB(o),1]))),u=loadText("shaders/glsl/stripePass.frag.glsl"),f=o({frag:o.prop("frag"),uniforms:{backgroundColor:colorToRGB(a),cursorColor:colorToRGB(t),glintColor:colorToRGB(s),ditherMagnitude:m,bloomStrength:i,tex:e.primary,bloomTex:e.bloom,stripeTex:g},framebuffer:l});return makePass({primary:l},u.loaded,((o,r)=>l.resize(o,r)),(()=>f({frag:u.text()})))};