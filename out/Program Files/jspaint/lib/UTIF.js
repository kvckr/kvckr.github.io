!function(){var r={};function e(){"undefined"!=typeof process&&"development"!=process.env.NODE_ENV||console.log.apply(console,arguments)}"object"==typeof module?module.exports=r:self.UTIF=r,function(r,t){var n,i,a,f,o,s,u,l,d,c,h,v,g,w;!function(){"use strict";var e=function(){function r(r){this.message="JPEG error: "+r}return r.prototype=new Error,r.prototype.name="JpegError",r.constructor=r,r}(),t=function(){var r=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),t=4017,i=799,a=3406,f=2276,o=1567,s=3784,u=5793,l=2896;function d(r){null==r&&(r={}),null==r.w&&(r.w=-1),this.V=r.n,this.N=r.w}function c(r,e){for(var t,n,i,a=0,f=[],o=16;o>0&&!r[o-1];)o--;f.push({children:[],index:0});var s=f[0];for(t=0;t<o;t++){for(n=0;n<r[t];n++){for((s=f.pop()).children[s.index]=e[a];s.index>0;)s=f.pop();for(s.index++,f.push(s);f.length<=t;)f.push(i={children:[],index:0}),s.children[s.index]=i.children,s=i;a++}t+1<o&&(f.push(i={children:[],index:0}),s.children[s.index]=i.children,s=i)}return f[0].children}function h(r,e,t){return 64*((r.P+1)*e+t)}function v(t,i,a,f,o,s,u,l,d,c){null==c&&(c=!1);var v,g,w,p,b,m,I,E,U,y,A,D=a.m,M=a.Z,B=i,k=0,F=0,x=0,P=0,S=0,G=0;function L(){if(F>0)return F--,k>>F&1;if(255===(k=t[i++])){var r=t[i++];if(r){if(220===r&&c){var f=n(t,i+=2);if(i+=2,f>0&&f!==a.s)throw new DNLMarkerError("Found DNL marker (0xFFDC) while parsing scan data",f)}else if(217===r){if(c){var o=8*S;if(o>0&&o<a.s/10)throw new DNLMarkerError("Found EOI marker (0xFFD9) while parsing scan data, possibly caused by incorrect `scanLines` parameter",o)}throw new EOIMarkerError("Found EOI marker (0xFFD9) while parsing scan data")}throw new e("unexpected marker")}}return F=7,k>>>7}function N(r){for(var t=r;;){switch(typeof(t=t[L()])){case"number":return t;case"object":continue}throw new e("invalid huffman sequence")}}function C(r){for(var e=0;r>0;)e=e<<1|L(),r--;return e}function J(r){if(1===r)return 1===L()?1:-1;var e=C(r);return e>=1<<r-1?e:e+(-1<<r)+1}function O(r,e,t,n,i){var a=t%D;S=(t/D|0)*r.A+n;var f=a*r.h+i;e(r,h(r,S,f))}function j(r,e,t){S=t/r.P|0;var n=t%r.P;e(r,h(r,S,n))}var W=f.length;for(I=M?0===s?0===l?function(r,e){var t=N(r.J),n=0===t?0:J(t)<<d;r.D[e]=r.Q+=n}:function(r,e){r.D[e]|=L()<<d}:0===l?function(e,t){if(x>0)x--;else for(var n=s,i=u;n<=i;){var a=N(e.i),f=15&a,o=a>>4;if(0!==f){var l=r[n+=o];e.D[t+l]=J(f)*(1<<d),n++}else{if(o<15){x=C(o)+(1<<o)-1;break}n+=16}}}:function(t,n){for(var i,a,f=s,o=u,l=0;f<=o;){var c=n+r[f],h=t.D[c]<0?-1:1;switch(P){case 0:if(l=(a=N(t.i))>>4,0==(i=15&a))l<15?(x=C(l)+(1<<l),P=4):(l=16,P=1);else{if(1!==i)throw new e("invalid ACn encoding");v=J(i),P=l?2:3}continue;case 1:case 2:t.D[c]?t.D[c]+=h*(L()<<d):0==--l&&(P=2===P?3:0);break;case 3:t.D[c]?t.D[c]+=h*(L()<<d):(t.D[c]=v<<d,P=0);break;case 4:t.D[c]&&(t.D[c]+=h*(L()<<d))}f++}4===P&&0==--x&&(P=0)}:function(e,t){var n=N(e.J),i=0===n?0:J(n),a=1;for(e.D[t]=e.Q+=i;a<64;){var f=N(e.i),o=15&f,s=f>>4;if(0!==o){var u=r[a+=s];e.D[t+u]=J(o),a++}else{if(s<15)break;a+=16}}},U=1===W?f[0].P*f[0].c:D*a.R;G<=U;){var T=o?Math.min(U-G,o):U;if(T>0){for(w=0;w<W;w++)f[w].Q=0;if(x=0,1===W)for(g=f[0],m=0;m<T;m++)j(g,I,G),G++;else for(m=0;m<T;m++){for(w=0;w<W;w++)for(y=(g=f[w]).h,A=g.A,p=0;p<A;p++)for(b=0;b<y;b++)O(g,I,G,p,b);G++}}if(F=0,!(E=_(t,i)))break;if(E.u){i=E.offset}if(!(E.M>=65488&&E.M<=65495))break;i+=2}return i-B}function g(r,n,d){var c,h,v,g,w,_,p,b,m,I,E,U,y,A,D,M,B,k=r.$,F=r.D;if(!k)throw new e("missing required Quantization Table.");for(var x=0;x<64;x+=8)m=F[n+x],I=F[n+x+1],E=F[n+x+2],U=F[n+x+3],y=F[n+x+4],A=F[n+x+5],D=F[n+x+6],M=F[n+x+7],m*=k[x],0!=(I|E|U|y|A|D|M)?(I*=k[x+1],E*=k[x+2],U*=k[x+3],y*=k[x+4],A*=k[x+5],D*=k[x+6],M*=k[x+7],h=(c=(c=u*m+128>>8)+(h=u*y+128>>8)+1>>1)-h,B=(v=E)*s+(g=D)*o+128>>8,v=v*o-g*s+128>>8,p=(w=(w=l*(I-M)+128>>8)+(p=A<<4)+1>>1)-p,_=(b=(b=l*(I+M)+128>>8)+(_=U<<4)+1>>1)-_,g=(c=c+(g=B)+1>>1)-g,v=(h=h+v+1>>1)-v,B=w*f+b*a+2048>>12,w=w*a-b*f+2048>>12,b=B,B=_*i+p*t+2048>>12,_=_*t-p*i+2048>>12,p=B,d[x]=c+b,d[x+7]=c-b,d[x+1]=h+p,d[x+6]=h-p,d[x+2]=v+_,d[x+5]=v-_,d[x+3]=g+w,d[x+4]=g-w):(B=u*m+512>>10,d[x]=B,d[x+1]=B,d[x+2]=B,d[x+3]=B,d[x+4]=B,d[x+5]=B,d[x+6]=B,d[x+7]=B);for(var P=0;P<8;++P)m=d[P],0!=((I=d[P+8])|(E=d[P+16])|(U=d[P+24])|(y=d[P+32])|(A=d[P+40])|(D=d[P+48])|(M=d[P+56]))?(h=(c=4112+((c=u*m+2048>>12)+(h=u*y+2048>>12)+1>>1))-h,B=(v=E)*s+(g=D)*o+2048>>12,v=v*o-g*s+2048>>12,g=B,p=(w=(w=l*(I-M)+2048>>12)+(p=A)+1>>1)-p,_=(b=(b=l*(I+M)+2048>>12)+(_=U)+1>>1)-_,B=w*f+b*a+2048>>12,w=w*a-b*f+2048>>12,b=B,B=_*i+p*t+2048>>12,_=_*t-p*i+2048>>12,(m=(c=c+g+1>>1)+b)<16?m=0:m>=4080?m=255:m>>=4,(I=(h=h+v+1>>1)+(p=B))<16?I=0:I>=4080?I=255:I>>=4,(E=(v=h-v)+_)<16?E=0:E>=4080?E=255:E>>=4,(U=(g=c-g)+w)<16?U=0:U>=4080?U=255:U>>=4,(y=g-w)<16?y=0:y>=4080?y=255:y>>=4,(A=v-_)<16?A=0:A>=4080?A=255:A>>=4,(D=h-p)<16?D=0:D>=4080?D=255:D>>=4,(M=c-b)<16?M=0:M>=4080?M=255:M>>=4,F[n+P]=m,F[n+P+8]=I,F[n+P+16]=E,F[n+P+24]=U,F[n+P+32]=y,F[n+P+40]=A,F[n+P+48]=D,F[n+P+56]=M):(B=(B=u*m+8192>>14)<-2040?0:B>=2024?255:B+2056>>4,F[n+P]=B,F[n+P+8]=B,F[n+P+16]=B,F[n+P+24]=B,F[n+P+32]=B,F[n+P+40]=B,F[n+P+48]=B,F[n+P+56]=B)}function w(r,e){for(var t=e.P,n=e.c,i=new Int16Array(64),a=0;a<n;a++)for(var f=0;f<t;f++){g(e,h(e,a,f),i)}return e.D}function _(r,e,t){null==t&&(t=e);var i=r.length-1,a=t<e?t:e;if(e>=i)return null;var f=n(r,e);if(f>=65472&&f<=65534)return{u:null,M:f,offset:e};for(var o=n(r,a);!(o>=65472&&o<=65534);){if(++a>=i)return null;o=n(r,a)}return{u:f.toString(16),M:o,offset:a}}return d.prototype={parse(t,i){null==i&&(i={});var a,f,o=i.F,s=0,u=null,l=null,d=0;function h(){var r=n(t,s),e=(s+=2)+r-2,i=_(t,e,s);i&&i.u&&(e=i.offset);var a=t.subarray(s,e);return s+=a.length,a}function g(r){for(var e=Math.ceil(r.o/8/r.X),t=Math.ceil(r.s/8/r.B),n=0;n<r.W.length;n++){T=r.W[n];var i=Math.ceil(Math.ceil(r.o/8)*T.h/r.X),a=Math.ceil(Math.ceil(r.s/8)*T.A/r.B),f=e*T.h,o=64*(t*T.A)*(f+1);T.D=new Int16Array(o),T.P=i,T.c=a}r.m=e,r.R=t}var p=[],b=[],m=[],I=n(t,s);if(s+=2,65496!==I)throw new e("SOI not found");I=n(t,s),s+=2;r:for(;65497!==I;){var E,U,y;switch(I){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var A=h();65504===I&&74===A[0]&&70===A[1]&&73===A[2]&&70===A[3]&&0===A[4]&&(u={version:{d:A[5],T:A[6]},K:A[7],j:A[8]<<8|A[9],H:A[10]<<8|A[11],S:A[12],I:A[13],C:A.subarray(14,14+3*A[12]*A[13])}),65518===I&&65===A[0]&&100===A[1]&&111===A[2]&&98===A[3]&&101===A[4]&&(l={version:A[5]<<8|A[6],k:A[7]<<8|A[8],q:A[9]<<8|A[10],a:A[11]});break;case 65499:for(var D=n(t,s)+(s+=2)-2;s<D;){var M=t[s++],B=new Uint16Array(64);if(M>>4==0)for(U=0;U<64;U++)B[r[U]]=t[s++];else{if(M>>4!=1)throw new e("DQT - invalid table spec");for(U=0;U<64;U++)B[r[U]]=n(t,s),s+=2}p[15&M]=B}break;case 65472:case 65473:case 65474:if(a)throw new e("Only single frame JPEGs supported");s+=2,(a={}).G=65473===I,a.Z=65474===I,a.precision=t[s++];var k,F=n(t,s),x=0,P=0;s+=2,a.s=o||F,a.o=n(t,s),s+=2,a.W=[],a._={};var S=t[s++];for(E=0;E<S;E++){k=t[s];var G=t[s+1]>>4,L=15&t[s+1];x<G&&(x=G),P<L&&(P=L);var N=t[s+2];y=a.W.push({h:G,A:L,L:N,$:null}),a._[k]=y-1,s+=3}a.X=x,a.B=P,g(a);break;case 65476:var C=n(t,s);for(s+=2,E=2;E<C;){var J=t[s++],O=new Uint8Array(16),j=0;for(U=0;U<16;U++,s++)j+=O[U]=t[s];var W=new Uint8Array(j);for(U=0;U<j;U++,s++)W[U]=t[s];E+=17+j,(J>>4==0?m:b)[15&J]=c(O,W)}break;case 65501:f=n(t,s+=2),s+=2;break;case 65498:var T,R=1==++d&&!o;s+=2;var q=t[s++],Z=[];for(E=0;E<q;E++){var H=t[s++],Q=a._[H];(T=a.W[Q]).index=H;var V=t[s++];T.J=m[V>>4],T.i=b[15&V],Z.push(T)}var X=t[s++],z=t[s++],$=t[s++];try{var Y=v(t,s,a,Z,f,X,z,$>>4,15&$,R);s+=Y}catch(r){if(r instanceof DNLMarkerError)return this.parse(t,{F:r.s});if(r instanceof EOIMarkerError)break r;throw r}break;case 65500:s+=4;break;case 65535:255!==t[s]&&s--;break;default:var K=_(t,s-2,s-3);if(K&&K.u){s=K.offset;break}if(s>=t.length-1)break r;throw new e("JpegImage.parse - unknown marker: "+I.toString(16))}I=n(t,s),s+=2}for(this.width=a.o,this.height=a.s,this.g=u,this.b=l,this.W=[],E=0;E<a.W.length;E++){var rr=p[(T=a.W[E]).L];rr&&(T.$=rr),this.W.push({index:T.index,e:w(0,T),l:T.h/a.X,t:T.A/a.B,P:T.P,c:T.c})}this.p=this.W.length},Y(r,e,t){null==t&&(t=!1);var n,i,a,f,o,s,u,l,d,c,h,v,g=this.width/r,w=this.height/e,_=0,p=this.W.length,b=r*e*p,m=new Uint8ClampedArray(b),I=new Uint32Array(r),E=4294967288;for(u=0;u<p;u++){if(i=(n=this.W[u]).l*g,a=n.t*w,_=u,h=n.e,f=n.P+1<<3,i!==v){for(o=0;o<r;o++)l=0|o*i,I[o]=(l&E)<<3|7&l;v=i}for(s=0;s<e;s++)for(c=f*((l=0|s*a)&E)|(7&l)<<3,o=0;o<r;o++)m[_]=h[c+I[o]],_+=p}var U=this.V;if(t||4!==p||U||(U=new Int32Array([-256,255,-256,255,-256,255,-256,255])),U)for(u=0;u<b;)for(l=0,d=0;l<p;l++,u++,d+=2)m[u]=(m[u]*U[d]>>8)+U[d+1];return m},get f(){return this.b?!!this.b.a:3===this.p?0!==this.N&&(82!==this.W[0].index||71!==this.W[1].index||66!==this.W[2].index):1===this.N},z:function(r){for(var e,t,n,i=0,a=r.length;i<a;i+=3)e=r[i],t=r[i+1],n=r[i+2],r[i]=e-179.456+1.402*n,r[i+1]=e+135.459-.344*t-.714*n,r[i+2]=e-226.816+1.772*t;return r},O:function(r){for(var e,t,n,i,a=0,f=0,o=r.length;f<o;f+=4)e=r[f],t=r[f+1],n=r[f+2],i=r[f+3],r[a++]=t*(-660635669420364e-19*t+.000437130475926232*n-54080610064599e-18*e+.00048449797120281*i-.154362151871126)-122.67195406894+n*(-.000957964378445773*n+.000817076911346625*e-.00477271405408747*i+1.53380253221734)+e*(.000961250184130688*e-.00266257332283933*i+.48357088451265)+i*(-.000336197177618394*i+.484791561490776),r[a++]=107.268039397724+t*(219927104525741e-19*t-.000640992018297945*n+.000659397001245577*e+.000426105652938837*i-.176491792462875)+n*(-.000778269941513683*n+.00130872261408275*e+.000770482631801132*i-.151051492775562)+e*(.00126935368114843*e-.00265090189010898*i+.25802910206845)+i*(-.000318913117588328*i-.213742400323665),r[a++]=t*(-.000570115196973677*t-263409051004589e-19*n+.0020741088115012*e-.00288260236853442*i+.814272968359295)-20.810012546947+n*(-153496057440975e-19*n-.000132689043961446*e+.000560833691242812*i-.195152027534049)+e*(.00174418132927582*e-.00255243321439347*i+.116935020465145)+i*(-.000343531996510555*i+.24165260232407);return r.subarray(0,a)},r:function(r){for(var e,t,n,i=0,a=r.length;i<a;i+=4)e=r[i],t=r[i+1],n=r[i+2],r[i]=434.456-e-1.402*n,r[i+1]=119.541-e+.344*t+.714*n,r[i+2]=481.816-e-1.772*t;return r},U:function(r){for(var e,t,n,i,a=0,f=0,o=r.length;f<o;f+=4)e=r[f],t=r[f+1],n=r[f+2],i=r[f+3],r[a++]=255+e*(-6747147073602441e-20*e+.0008379262121013727*t+.0002894718188643294*n+.003264231057537806*i-1.1185611867203937)+t*(26374107616089405e-21*t-8626949158638572e-20*n-.0002748769067499491*i-.02155688794978967)+n*(-3878099212869363e-20*n-.0003267808279485286*i+.0686742238595345)-i*(.0003361971776183937*i+.7430659151342254),r[a++]=255+e*(.00013596372813588848*e+.000924537132573585*t+.00010567359618683593*n+.0004791864687436512*i-.3109689587515875)+t*(-.00023545346108370344*t+.0002702845253534714*n+.0020200308977307156*i-.7488052167015494)+n*(6834815998235662e-20*n+.00015168452363460973*i-.09751927774728933)-i*(.0003189131175883281*i+.7364883807733168),r[a++]=255+e*(13598650411385307e-21*e+.00012423956175490851*t+.0004751985097583589*n-36729317476630422e-22*i-.05562186980264034)+t*(.00016141380598724676*t+.0009692239130725186*n+.0007782692450036253*i-.44015232367526463)+n*(5.068882914068769e-7*n+.0017778369011375071*i-.7591454649749609)-i*(.0003435319965105553*i+.7063770186160144);return r.subarray(0,a)},getData:function(r){var t=r.width,n=r.height,i=r.forceRGB,a=r.isSourcePDF;if(this.p>4)throw new e("Unsupported color mode");var f=this.Y(t,n,a);if(1===this.p&&i){for(var o=f.length,s=new Uint8ClampedArray(3*o),u=0,l=0;l<o;l++){var d=f[l];s[u++]=d,s[u++]=d,s[u++]=d}return s}if(3===this.p&&this.f)return this.z(f);if(4===this.p){if(this.f)return i?this.O(f):this.r(f);if(i)return this.U(f)}return f}},d}();function n(r,e){return r[e]<<8|r[e+1]}r.JpegDecoder=t}(),r.encodeImage=function(e,t,n,i){var a={t256:[t],t257:[n],t258:[8,8,8,8],t259:[1],t262:[2],t273:[1e3],t277:[4],t278:[n],t279:[t*n*4],t282:[[72,1]],t283:[[72,1]],t284:[1],t286:[[0,1]],t287:[[0,1]],t296:[1],t305:["Photopea (UTIF.js)"],t338:[1]};if(i)for(var f in i)a[f]=i[f];var o=new Uint8Array(r.encode([a])),s=new Uint8Array(e),u=new Uint8Array(1e3+t*n*4);for(f=0;f<o.length;f++)u[f]=o[f];for(f=0;f<s.length;f++)u[1e3+f]=s[f];return u.buffer},r.encode=function(e){var t=new Uint8Array(2e4),n=4,i=r._binBE;t[0]=t[1]=77,i.writeUshort(t,2,42);var a=8;i.writeUint(t,n,a),n+=4;for(var f=0;f<e.length;f++){var o=r._writeIFD(i,r._types.basic,t,a,e[f]);a=o[1],f<e.length-1&&(0!=(3&a)&&(a+=4-(3&a)),i.writeUint(t,o[0],a))}return t.slice(0,a).buffer},r.decode=function(t,n){null==n&&(n={parseMN:!0,debug:!1});var i=new Uint8Array(t),a=0,f=r._binBE.readASCII(i,a,2);a+=2;var o="II"==f?r._binLE:r._binBE;o.readUshort(i,a);a+=2;var s=o.readUint(i,a);a+=4;for(var u=[];;){var l=o.readUshort(i,s),d=o.readUshort(i,s+4);if(0!=l&&(d<1||13<d)){e("error in TIFF");break}if(r._readIFD(o,i,s,u,0,n),0==(s=o.readUint(i,s+2+12*l)))break}return u},r.decodeImage=function(t,n,i){if(!n.data){var a=new Uint8Array(t),f=r._binBE.readASCII(a,0,2);if(null!=n.t256){n.isLE="II"==f,n.width=n.t256[0],n.height=n.t257[0];var o,s=n.t259?n.t259[0]:1,u=n.t266?n.t266[0]:1;n.t284&&2==n.t284[0]&&e("PlanarConfiguration 2 should not be used!"),o=n.t258?Math.min(32,n.t258[0])*n.t258.length:n.t277?n.t277[0]:1,1==s&&null!=n.t279&&n.t278&&32803==n.t262[0]&&(o=Math.round(8*n.t279[0]/(n.width*n.t278[0])));var l=8*Math.ceil(n.width*o/8),d=n.t273;null==d&&(d=n.t324);var c=n.t279;1==s&&1==d.length&&(c=[n.height*(l>>>3)]),null==c&&(c=n.t325);var h=new Uint8Array(n.height*(l>>>3)),v=0;if(null!=n.t322){for(var g=n.t322[0],w=n.t323[0],_=Math.floor((n.width+g-1)/g),p=Math.floor((n.height+w-1)/w),b=new Uint8Array(0|Math.ceil(g*w*o/8)),m=0;m<p;m++)for(var I=0;I<_;I++){for(var E=m*_+I,U=0;U<b.length;U++)b[U]=0;r.decode._decompress(n,i,a,d[E],c[E],s,b,0,u),6==s?h=b:r._copyTile(b,0|Math.ceil(g*o/8),w,h,0|Math.ceil(n.width*o/8),n.height,0|Math.ceil(I*g*o/8),m*w)}v=8*h.length}else{var y=n.t278?n.t278[0]:n.height;y=Math.min(y,n.height);for(E=0;E<d.length;E++)r.decode._decompress(n,i,a,d[E],c[E],s,h,0|Math.ceil(v/8),u),v+=l*y;v=Math.min(v,8*h.length)}n.data=new Uint8Array(h.buffer,0,0|Math.ceil(v/8))}}},r.decode._decompress=function(n,i,a,f,o,s,u,l,d){if(1==s)for(var c=0;c<o;c++)u[l+c]=a[f+c];else if(3==s)r.decode._decodeG3(a,f,o,u,l,n.width,d,!!n.t292&&1==(1&n.t292[0]));else if(4==s)r.decode._decodeG4(a,f,o,u,l,n.width,d);else if(5==s)r.decode._decodeLZW(a,f,o,u,l,8);else if(6==s)r.decode._decodeOldJPEG(n,a,f,o,u,l);else if(7==s||34892==s)r.decode._decodeNewJPEG(n,a,f,o,u,l);else if(8==s||32946==s)for(var h=new Uint8Array(a.buffer,f,o),v=t.inflate(h),g=0;g<v.length;g++)u[l+g]=v[g];else 9==s?r.decode._decodeVC5(a,f,o,u,l):32767==s?r.decode._decodeARW(n,a,f,o,u,l):32773==s?r.decode._decodePackBits(a,f,o,u,l):32809==s?r.decode._decodeThunder(a,f,o,u,l):34713==s?r.decode._decodeNikon(n,i,a,f,o,u,l):e("Unknown compression",s);var w=n.t258?Math.min(32,n.t258[0]):1,_=n.t277?n.t277[0]:1,p=w*_>>>3,b=n.t278?n.t278[0]:n.height,m=Math.ceil(w*_*n.width/8);if(16==w&&!n.isLE&&null==n.t33422)for(var I=0;I<b;I++)for(var E=l+I*m,U=1;U<m;U+=2){var y=u[E+U];u[E+U]=u[E+U-1],u[E+U-1]=y}if(n.t317&&2==n.t317[0])for(I=0;I<b;I++){var A=l+I*m;if(16==w)for(c=p;c<m;c+=2){var D=(u[A+c+1]<<8|u[A+c])+(u[A+c-p+1]<<8|u[A+c-p]);u[A+c]=255&D,u[A+c+1]=D>>>8&255}else if(3==_)for(c=3;c<m;c+=3)u[A+c]=u[A+c]+u[A+c-3]&255,u[A+c+1]=u[A+c+1]+u[A+c-2]&255,u[A+c+2]=u[A+c+2]+u[A+c-1]&255;else for(c=p;c<m;c++)u[A+c]=u[A+c]+u[A+c-p]&255}},r.decode._decodeVC5=r.decode._decodeVC5=function(){var e,t,n,i=[1,0,1,0,2,2,1,1,3,7,1,2,5,25,1,3,6,48,1,4,6,54,1,5,7,111,1,8,7,99,1,6,7,105,12,0,7,107,1,7,8,209,20,0,8,212,1,9,8,220,1,10,9,393,1,11,9,394,32,0,9,416,1,12,9,427,1,13,10,887,1,18,10,784,1,14,10,790,1,15,10,835,60,0,10,852,1,16,10,885,1,17,11,1571,1,19,11,1668,1,20,11,1669,100,0,11,1707,1,21,11,1772,1,22,12,3547,1,29,12,3164,1,24,12,3166,1,25,12,3140,1,23,12,3413,1,26,12,3537,1,27,12,3539,1,28,13,7093,1,35,13,6283,1,30,13,6331,1,31,13,6335,180,0,13,6824,1,32,13,7072,1,33,13,7077,320,0,13,7076,1,34,14,12565,1,36,14,12661,1,37,14,12669,1,38,14,13651,1,39,14,14184,1,40,15,28295,1,46,15,28371,1,47,15,25320,1,42,15,25336,1,43,15,25128,1,41,15,27300,1,44,15,28293,1,45,16,50259,1,48,16,50643,1,49,16,50675,1,50,16,56740,1,53,16,56584,1,51,16,56588,1,52,17,113483,1,61,17,113482,1,60,17,101285,1,55,17,101349,1,56,17,109205,1,57,17,109207,1,58,17,100516,1,54,17,113171,1,59,18,202568,1,62,18,202696,1,63,18,218408,1,64,18,218412,1,65,18,226340,1,66,18,226356,1,67,18,226358,1,68,19,402068,1,69,19,405138,1,70,19,405394,1,71,19,436818,1,72,19,436826,1,73,19,452714,1,75,19,452718,1,76,19,452682,1,74,20,804138,1,77,20,810279,1,78,20,810790,1,79,20,873638,1,80,20,873654,1,81,20,905366,1,82,20,905430,1,83,20,905438,1,84,21,1608278,1,85,21,1620557,1,86,21,1621582,1,87,21,1621583,1,88,21,1747310,1,89,21,1810734,1,90,21,1810735,1,91,21,1810863,1,92,21,1810879,1,93,22,3621725,1,99,22,3621757,1,100,22,3241112,1,94,22,3494556,1,95,22,3494557,1,96,22,3494622,1,97,22,3494623,1,98,23,6482227,1,102,23,6433117,1,101,23,6989117,1,103,23,6989119,1,105,23,6989118,1,104,23,7243449,1,106,23,7243512,1,107,24,13978233,1,111,24,12964453,1,109,24,12866232,1,108,24,14486897,1,113,24,13978232,1,110,24,14486896,1,112,24,14487026,1,114,24,14487027,1,115,25,25732598,1,225,25,25732597,1,189,25,25732596,1,188,25,25732595,1,203,25,25732594,1,202,25,25732593,1,197,25,25732592,1,207,25,25732591,1,169,25,25732590,1,223,25,25732589,1,159,25,25732522,1,235,25,25732579,1,152,25,25732575,1,192,25,25732489,1,179,25,25732573,1,201,25,25732472,1,172,25,25732576,1,149,25,25732488,1,178,25,25732566,1,120,25,25732571,1,219,25,25732577,1,150,25,25732487,1,127,25,25732506,1,211,25,25732548,1,125,25,25732588,1,158,25,25732486,1,247,25,25732467,1,238,25,25732508,1,163,25,25732552,1,228,25,25732603,1,183,25,25732513,1,217,25,25732587,1,168,25,25732520,1,122,25,25732484,1,128,25,25732562,1,249,25,25732505,1,187,25,25732504,1,186,25,25732483,1,136,25,25928905,1,181,25,25732560,1,255,25,25732500,1,230,25,25732482,1,135,25,25732555,1,233,25,25732568,1,222,25,25732583,1,145,25,25732481,1,134,25,25732586,1,167,25,25732521,1,248,25,25732518,1,209,25,25732480,1,243,25,25732512,1,216,25,25732509,1,164,25,25732547,1,140,25,25732479,1,157,25,25732544,1,239,25,25732574,1,191,25,25732564,1,251,25,25732478,1,156,25,25732546,1,139,25,25732498,1,242,25,25732557,1,133,25,25732477,1,162,25,25732515,1,213,25,25732584,1,165,25,25732514,1,212,25,25732476,1,227,25,25732494,1,198,25,25732531,1,236,25,25732530,1,234,25,25732529,1,117,25,25732528,1,215,25,25732527,1,124,25,25732526,1,123,25,25732525,1,254,25,25732524,1,253,25,25732523,1,148,25,25732570,1,218,25,25732580,1,146,25,25732581,1,147,25,25732569,1,224,25,25732533,1,143,25,25732540,1,184,25,25732541,1,185,25,25732585,1,166,25,25732556,1,132,25,25732485,1,129,25,25732563,1,250,25,25732578,1,151,25,25732501,1,119,25,25732502,1,193,25,25732536,1,176,25,25732496,1,245,25,25732553,1,229,25,25732516,1,206,25,25732582,1,144,25,25732517,1,208,25,25732558,1,137,25,25732543,1,241,25,25732466,1,237,25,25732507,1,190,25,25732542,1,240,25,25732551,1,131,25,25732554,1,232,25,25732565,1,252,25,25732475,1,171,25,25732493,1,205,25,25732492,1,204,25,25732491,1,118,25,25732490,1,214,25,25928904,1,180,25,25732549,1,126,25,25732602,1,182,25,25732539,1,175,25,25732545,1,141,25,25732559,1,138,25,25732537,1,177,25,25732534,1,153,25,25732503,1,194,25,25732606,1,160,25,25732567,1,121,25,25732538,1,174,25,25732497,1,246,25,25732550,1,130,25,25732572,1,200,25,25732474,1,170,25,25732511,1,221,25,25732601,1,196,25,25732532,1,142,25,25732519,1,210,25,25732495,1,199,25,25732605,1,155,25,25732535,1,154,25,25732499,1,244,25,25732510,1,220,25,25732600,1,195,25,25732607,1,161,25,25732604,1,231,25,25732473,1,173,25,25732599,1,226,26,51465122,1,116,26,51465123,0,1],a=[3,3,3,3,2,2,2,1,1,1],f=24576,o=8192,s=16384|o;function u(r){var e=r[1],t=r[0][e>>>3]>>>7-(7&e)&1;return r[1]++,t}function l(r,t){if(null==e){e={};for(var n=0;n<i.length;n+=4)e[i[n+1]]=i.slice(n,n+4)}for(var a=u(r),f=e[a];null==f;)a=a<<1|u(r),f=e[a];var o=f[3];0!=o&&(o=0==u(r)?o:-o),t[0]=f[2],t[1]=o}function d(r,e){for(var t=0;t<e;t++)1==(1&r)&&r++,r>>>=1;return r}function c(r,e){return r>>e}function h(r,e,t,n,i,a){e[t]=c(c(11*r[i]-4*r[i+a]+r[i+a+a]+4,3)+r[n],1),e[t+a]=c(c(5*r[i]+4*r[i+a]-r[i+a+a]+4,3)-r[n],1)}function v(r,e,t,n,i,a){var f=r[i-a]-r[i+a],o=r[i],s=r[n];e[t]=c(c(f+4,3)+o+s,1),e[t+a]=c(c(4-f,3)+o-s,1)}function g(r,e,t,n,i,a){e[t]=c(c(5*r[i]+4*r[i-a]-r[i-a-a]+4,3)+r[n],1),e[t+a]=c(c(11*r[i]-4*r[i-a]+r[i-a-a]+4,3)-r[n],1)}function w(r){return r=n[r=r<0?0:r>4095?4095:r]>>>2}return function(e,i,u,c,_){c=new Uint16Array(c.buffer);var p,b,m,I,E,U,y,A,D=Date.now(),M=r._binBE,B=i+u;for(i+=4;i<B;){var k=M.readShort(e,i),F=M.readUshort(e,i+2);if(i+=4,12==k)C=F;else if(20==k)p=F;else if(21==k)b=F;else if(48==k)m=F;else if(53==k)I=F;else if(35==k)F;else if(62==k)E=F;else if(101==k)F;else if(109==k)U=F;else if(84==k)F;else if(106==k)F;else if(107==k)F;else if(108==k)F;else if(102==k)F;else if(104==k)nr=F;else if(105==k)F;else{var x=k<0?-k:k,P=65280&x,S=0;if(x&s&&(x&o?(S=65535&F,S+=(255&x)<<16):S=65535&F),(x&f)==f){if(null==y){y=[];for(var G=0;G<4;G++)y[G]=new Int16Array((p>>>1)*(b>>>1));A=new Int16Array((p>>>1)*(b>>>1)),t=new Int16Array(1024);for(G=0;G<1024;G++){var L=G-512,N=Math.abs(L),C=Math.floor(768*N*N*N/16581375)+N;t[G]=Math.sign(L)*C}n=new Uint16Array(4096);for(G=0;G<4096;G++){var J=G,O=65535*(Math.pow(113,J/4095)-1)/112;n[G]=Math.min(O,65535)}}var j=y[E],W=d(p,1+a[m]),T=d(b,1+a[m]);if(0==m)for(var R=0;R<T;R++)for(var q=0;q<W;q++){var Z=i+2*(R*W+q);j[R*(p>>>1)+q]=e[Z]<<8|e[Z+1]}else{var H=[e,8*i],Q=[],V=0,X=W*T,z=[0,0],$=0;for(F=0;V<X;)for(l(H,z),$=z[0],F=z[1];$>0;)Q[V++]=F,$--;var Y=(m-1)%3,K=1!=Y?W:0,rr=0!=Y?T:0;for(R=0;R<T;R++){var er=(R+rr)*(p>>>1)+K,tr=R*W;for(q=0;q<W;q++)j[er+q]=t[Q[tr+q]+512]*I}if(2==Y){var nr=p>>>1,ir=2*W,ar=2*T;for(R=0;R<T;R++)for(q=0;q<ir;q++){G=2*R*nr+q;var fr=T*nr+(sr=R*nr+q);0==R?h(j,A,G,fr,sr,nr):R==T-1?g(j,A,G,fr,sr,nr):v(j,A,G,fr,sr,nr)}var or=j;j=A,A=or;for(R=0;R<ar;R++)for(q=0;q<W;q++){var sr;G=R*nr+2*q,fr=W+(sr=R*nr+q);0==q?h(j,A,G,fr,sr,1):q==W-1?g(j,A,G,fr,sr,1):v(j,A,G,fr,sr,1)}or=j;j=A,A=or;for(var ur=[],lr=2-~~((m-1)/3),dr=0;dr<3;dr++)ur[dr]=U>>14-2*dr&3;var cr=ur[lr];if(0!=cr)for(R=0;R<ar;R++)for(q=0;q<ir;q++){j[G=R*nr+q]=j[G]<<cr}}}if(9==m&&3==E){var hr=y[0],vr=y[1],gr=y[2],wr=y[3];for(R=0;R<b;R+=2)for(q=0;q<p;q+=2){var _r=R*p+q,pr=hr[Z=(R>>>1)*(p>>>1)+(q>>>1)],br=vr[Z]-2048,mr=gr[Z]-2048,Ir=wr[Z]-2048,Er=(br<<1)+pr,Ur=(mr<<1)+pr,yr=pr+Ir,Ar=pr-Ir;c[_r]=w(Er),c[_r+1]=w(yr),c[_r+p]=w(Ar),c[_r+p+1]=w(Ur)}}i+=4*S}else if(16388==x)i+=4*S;else if(8192!=P&&8448!=P&&9216!=P)throw x.toString(16)}}console.log(Date.now()-D)}}(),r.decode._ljpeg_diff=function(e,t,n){var i,a,f=r.decode._getbithuff;return i=f(e,t,n[0],n),0==((a=f(e,t,i,0))&1<<i-1)&&(a-=(1<<i)-1),a},r.decode._decodeARW=function(e,t,n,i,a,f){var o=e.t256[0],s=e.t257[0],u=e.t258[0],l=e.isLE?r._binLE:r._binBE;if(o*s==i||o*s*1.5==i)if(o*s*1.5!=i){var d,c,h,v,g,w,_,p,b=new Uint16Array(16),m=new Uint8Array(o+1);for(B=0;B<s;B++){for(var I=0;I<o;I++)m[I]=t[n++];for(p=0,M=0;M<o-30;p+=16){for(c=2047&(d=l.readUint(m,p)),h=2047&d>>>11,v=15&d>>>22,g=15&d>>>26,w=0;w<4&&128<<w<=c-h;w++);for(_=30,E=0;E<16;E++)E==v?b[E]=c:E==g?b[E]=h:(b[E]=((l.readUshort(m,p+(_>>3))>>>(7&_)&127)<<w)+h,b[E]>2047&&(b[E]=2047),_+=7);for(E=0;E<16;E++,M+=2){N=b[E]<<1;r.decode._putsF(a,(B*o+M)*u,N<<16-u)}M-=1&M?1:31}}}else for(var E=0;E<i;E+=3){var U=t[n+E+0],y=t[n+E+1],A=t[n+E+2];a[f+E]=y<<4|U>>>4,a[f+E+1]=U<<4|A>>>4,a[f+E+2]=A<<4|y>>>4}else{s+=8;var D,M,B,k=[n,0,0,0],F=new Uint16Array(32770),x=[3857,3856,3599,3342,3085,2828,2571,2314,2057,1800,1543,1286,1029,772,771,768,514,513],P=0,S=r.decode._ljpeg_diff;for(F[0]=15,D=E=0;E<18;E++)for(var G=32768>>>(x[E]>>>8),L=0;L<G;L++)F[++D]=x[E];for(M=o;M--;)for(B=0;B<s+1;B+=2)if(B==s&&(B=1),P+=S(t,k,F),B<s){var N=4095&P;r.decode._putsF(a,(B*o+M)*u,N<<16-u)}}},r.decode._decodeNikon=function(e,t,n,i,a,f,o){var s=[[0,0,1,5,1,1,1,1,1,1,2,0,0,0,0,0,0,5,4,3,6,2,7,1,0,8,9,11,10,12],[0,0,1,5,1,1,1,1,1,1,2,0,0,0,0,0,0,57,90,56,39,22,5,4,3,2,1,0,11,12,12],[0,0,1,4,2,3,1,2,0,0,0,0,0,0,0,0,0,5,4,6,3,7,2,8,1,9,0,10,11,12],[0,0,1,4,3,1,1,1,1,1,2,0,0,0,0,0,0,5,6,4,7,8,3,9,2,1,0,10,11,12,13,14],[0,0,1,5,1,1,1,1,1,1,1,2,0,0,0,0,0,8,92,75,58,41,7,6,5,4,3,2,1,0,13,14],[0,0,1,4,2,2,3,1,2,0,0,0,0,0,0,0,0,7,6,8,5,9,4,10,3,11,12,2,0,1,13,14]],u=e.t256[0],l=e.t257[0],d=e.t258[0],c=0,h=0,v=r.decode._make_decoder,g=r.decode._getbithuff,w=t[0].exifIFD.makerNote,_=w.t150?w.t150:w.t140,p=0,b=_[p++],m=_[p++];73!=b&&88!=m||(p+=2110),70==b&&(c=2),14==d&&(c+=3);for(var I=[[0,0],[0,0]],E=e.isLE?r._binLE:r._binBE,U=0;U<2;U++)for(var y=0;y<2;y++)I[U][y]=E.readShort(_,p),p+=2;var A,D,M,B,k,F=1<<d&32767,x=0,P=E.readShort(_,p);p+=2,P>1&&(x=Math.floor(F/(P-1))),68==b&&32==m&&x>0&&(h=E.readShort(_,562));var S=[0,0],G=v(s[c]),L=[i,0,0,0];for(A=0;A<l;A++)for(h&&A==h&&(G=v(s[c+1])),D=0;D<u;D++){U=g(n,L,G[0],G),0==((k=1+(g(n,L,(M=15&U)-(B=U>>>4),0)<<1)<<B>>>1)&1<<M-1)&&(k-=(1<<M)-(0==B?1:0)),D<2?S[D]=I[1&A][D]+=k:S[1&D]+=k;var N=Math.min(Math.max(S[1&D],0),(1<<d)-1),C=(A*u+D)*d;r.decode._putsF(f,C,N<<16-d)}},r.decode._putsF=function(r,e,t){t<<=8-(7&e);var n=e>>>3;r[n]|=t>>>16,r[n+1]|=t>>>8,r[n+2]|=t},r.decode._getbithuff=function(e,t,n,i){r.decode._get_byte;var a,f=t[0],o=t[1],s=t[2],u=t[3];if(0==n||s<0)return 0;for(;!u&&s<n&&-1!=(a=e[f++])&&!(u=0);)o=(o<<8)+a,s+=8;if(a=o<<32-s>>>32-n,i?(s-=i[a+1]>>>8,a=255&i[a+1]):s-=n,s<0)throw"e";return t[0]=f,t[1]=o,t[2]=s,t[3]=u,a},r.decode._make_decoder=function(r){var e,t,n,i,a,f=[];for(e=16;0!=e&&!r[e];e--);var o=17;for(f[0]=e,n=t=1;t<=e;t++)for(i=0;i<r[t];i++,++o)for(a=0;a<1<<e-t;a++)n<=1<<e&&(f[n++]=t<<8|r[o]);return f},r.decode._decodeNewJPEG=function(e,t,n,i,a,f){i=Math.min(i,t.length-n);var o=e.t347,s=o?o.length:0,u=new Uint8Array(s+i);if(o){for(var l=0,d=0;d<s-1&&(255!=o[d]||217!=o[d+1]);d++)u[l++]=o[d];var c=t[n],h=t[n+1];255==c&&216==h||(u[l++]=c,u[l++]=h);for(d=2;d<i;d++)u[l++]=t[n+d]}else for(d=0;d<i;d++)u[d]=t[n+d];if(32803==e.t262[0]||7==e.t259[0]&&34892==e.t262[0]){var v=e.t258[0],g=r.LosslessJpegDecode(u),w=g.length;if(16==v)if(e.isLE)for(d=0;d<w;d++)a[f+(d<<1)]=255&g[d],a[f+(d<<1)+1]=g[d]>>>8;else for(d=0;d<w;d++)a[f+(d<<1)]=g[d]>>>8,a[f+(d<<1)+1]=255&g[d];else if(14==v||12==v){var _=16-v;for(d=0;d<w;d++)r.decode._putsF(a,d*v,g[d]<<_)}else{if(8!=v)throw new Error("unsupported bit depth "+v);for(d=0;d<w;d++)a[f+d]=g[d]}}else{var p=new r.JpegDecoder;p.parse(u);var b=p.getData({width:p.width,height:p.height,forceRGB:!0,isSourcePDF:!1});for(d=0;d<b.length;d++)a[f+d]=b[d]}6==e.t262[0]&&(e.t262[0]=2)},r.decode._decodeOldJPEGInit=function(r,t,n,i){var a,f,o,s,u,l=216,d=0,c=0,h=!1,v=r.t513,g=v?v[0]:0,w=r.t514,_=w?w[0]:0,p=r.t324||r.t273||v,b=r.t530,m=0,I=0,E=r.t277?r.t277[0]:1,U=r.t515;if(p&&(c=p[0],h=p.length>1),!h){if(255==t[n]&&t[n+1]==l)return{jpegOffset:n};if(null!=v&&(255==t[n+g]&&t[n+g+1]==l?d=n+g:e("JPEGInterchangeFormat does not point to SOI"),null==w?e("JPEGInterchangeFormatLength field is missing"):(g>=c||g+_<=c)&&e("JPEGInterchangeFormatLength field value is invalid"),null!=d))return{jpegOffset:d}}if(null!=b&&(m=b[0],I=b[1]),null!=v&&null!=w)if(_>=2&&g+_<=c){for(a=255==t[n+g+_-2]&&t[n+g+_-1]==l?new Uint8Array(_-2):new Uint8Array(_),o=0;o<a.length;o++)a[o]=t[n+g+o];e("Incorrect JPEG interchange format: using JPEGInterchangeFormat offset to derive tables")}else e("JPEGInterchangeFormat+JPEGInterchangeFormatLength > offset to first strip or tile");if(null==a){var y=0,A=[];A[y++]=255,A[y++]=l;var D=r.t519;if(null==D)throw new Error("JPEGQTables tag is missing");for(o=0;o<D.length;o++)for(A[y++]=255,A[y++]=219,A[y++]=0,A[y++]=67,A[y++]=o,s=0;s<64;s++)A[y++]=t[n+D[o]+s];for(u=0;u<2;u++){var M=r[0==u?"t520":"t521"];if(null==M)throw new Error((0==u?"JPEGDCTables":"JPEGACTables")+" tag is missing");for(o=0;o<M.length;o++){A[y++]=255,A[y++]=196;var B=19;for(s=0;s<16;s++)B+=t[n+M[o]+s];for(A[y++]=B>>>8,A[y++]=255&B,A[y++]=o|u<<4,s=0;s<16;s++)A[y++]=t[n+M[o]+s];for(s=0;s<B;s++)A[y++]=t[n+M[o]+16+s]}}if(A[y++]=255,A[y++]=192,A[y++]=0,A[y++]=8+3*E,A[y++]=8,A[y++]=r.height>>>8&255,A[y++]=255&r.height,A[y++]=r.width>>>8&255,A[y++]=255&r.width,A[y++]=E,1==E)A[y++]=1,A[y++]=17,A[y++]=0;else for(o=0;o<3;o++)A[y++]=o+1,A[y++]=0!=o?17:(15&m)<<4|15&I,A[y++]=o;null!=U&&0!=U[0]&&(A[y++]=255,A[y++]=221,A[y++]=0,A[y++]=4,A[y++]=U[0]>>>8&255,A[y++]=255&U[0]),a=new Uint8Array(A)}var k=-1;for(o=0;o<a.length-1;){if(255==a[o]&&192==a[o+1]){k=o;break}o++}if(-1==k){var F=new Uint8Array(a.length+10+3*E);F.set(a);var x=a.length;if(k=a.length,(a=F)[x++]=255,a[x++]=192,a[x++]=0,a[x++]=8+3*E,a[x++]=8,a[x++]=r.height>>>8&255,a[x++]=255&r.height,a[x++]=r.width>>>8&255,a[x++]=255&r.width,a[x++]=E,1==E)a[x++]=1,a[x++]=17,a[x++]=0;else for(o=0;o<3;o++)a[x++]=o+1,a[x++]=0!=o?17:(15&m)<<4|15&I,a[x++]=o}if(255==t[c]&&218==t[c+1]){var P=t[c+2]<<8|t[c+3];for((f=new Uint8Array(P+2))[0]=t[c],f[1]=t[c+1],f[2]=t[c+2],f[3]=t[c+3],o=0;o<P-2;o++)f[o+4]=t[c+o+4]}else{var S=0;if((f=new Uint8Array(8+2*E))[S++]=255,f[S++]=218,f[S++]=0,f[S++]=6+2*E,f[S++]=E,1==E)f[S++]=1,f[S++]=0;else for(o=0;o<3;o++)f[S++]=o+1,f[S++]=o<<4|o;f[S++]=0,f[S++]=63,f[S++]=0}return{jpegOffset:n,tables:a,sosMarker:f,sofPosition:k}},r.decode._decodeOldJPEG=function(e,t,n,i,a,f){var o,s,u,l,d=r.decode._decodeOldJPEGInit(e,t,n,i);if(null!=d.jpegOffset)for(o=n+i-d.jpegOffset,u=new Uint8Array(o),v=0;v<o;v++)u[v]=t[d.jpegOffset+v];else{for(s=d.tables.length,(u=new Uint8Array(s+d.sosMarker.length+i+2)).set(d.tables),l=s,u[d.sofPosition+5]=e.height>>>8&255,u[d.sofPosition+6]=255&e.height,u[d.sofPosition+7]=e.width>>>8&255,u[d.sofPosition+8]=255&e.width,255==t[n]&&t[n+1]==SOS||(u.set(d.sosMarker,l),l+=sosMarker.length),v=0;v<i;v++)u[l++]=t[n+v];u[l++]=255,u[l++]=EOI}var c=new r.JpegDecoder;c.parse(u);for(var h=c.getData({width:c.width,height:c.height,forceRGB:!0,isSourcePDF:!1}),v=0;v<h.length;v++)a[f+v]=h[v];e.t262&&6==e.t262[0]&&(e.t262[0]=2)},r.decode._decodePackBits=function(r,e,t,n,i){for(var a=new Int8Array(r.buffer),f=new Int8Array(n.buffer),o=e+t;e<o;){var s=a[e];if(e++,s>=0&&s<128)for(var u=0;u<s+1;u++)f[i]=a[e],i++,e++;if(s>=-127&&s<0){for(u=0;u<1-s;u++)f[i]=a[e],i++;e++}}},r.decode._decodeThunder=function(r,e,t,n,i){for(var a=[0,1,0,-1],f=[0,1,2,3,0,-3,-2,-1],o=e+t,s=2*i,u=0;e<o;){var l=r[e],d=l>>>6,c=63&l;if(e++,3==d&&(u=15&c,n[s>>>1]|=u<<4*(1-s&1),s++),0==d)for(var h=0;h<c;h++)n[s>>>1]|=u<<4*(1-s&1),s++;if(2==d)for(h=0;h<2;h++){4!=(v=c>>>3*(1-h)&7)&&(u+=f[v],n[s>>>1]|=u<<4*(1-s&1),s++)}if(1==d)for(h=0;h<3;h++){var v;2!=(v=c>>>2*(2-h)&3)&&(u+=a[v],n[s>>>1]|=u<<4*(1-s&1),s++)}}},r.decode._dmap={1:0,"011":1,"000011":2,"0000011":3,"010":-1,"000010":-2,"0000010":-3},r.decode._lens=function(){var r=function(r,e,t,n){for(var i=0;i<e.length;i++)r[e[i]]=t+i*n},e="00110101,000111,0111,1000,1011,1100,1110,1111,10011,10100,00111,01000,001000,000011,110100,110101,101010,101011,0100111,0001100,0001000,0010111,0000011,0000100,0101000,0101011,0010011,0100100,0011000,00000010,00000011,00011010,00011011,00010010,00010011,00010100,00010101,00010110,00010111,00101000,00101001,00101010,00101011,00101100,00101101,00000100,00000101,00001010,00001011,01010010,01010011,01010100,01010101,00100100,00100101,01011000,01011001,01011010,01011011,01001010,01001011,00110010,00110011,00110100",t="0000110111,010,11,10,011,0011,0010,00011,000101,000100,0000100,0000101,0000111,00000100,00000111,000011000,0000010111,0000011000,0000001000,00001100111,00001101000,00001101100,00000110111,00000101000,00000010111,00000011000,000011001010,000011001011,000011001100,000011001101,000001101000,000001101001,000001101010,000001101011,000011010010,000011010011,000011010100,000011010101,000011010110,000011010111,000001101100,000001101101,000011011010,000011011011,000001010100,000001010101,000001010110,000001010111,000001100100,000001100101,000001010010,000001010011,000000100100,000000110111,000000111000,000000100111,000000101000,000001011000,000001011001,000000101011,000000101100,000001011010,000001100110,000001100111",n="11011,10010,010111,0110111,00110110,00110111,01100100,01100101,01101000,01100111,011001100,011001101,011010010,011010011,011010100,011010101,011010110,011010111,011011000,011011001,011011010,011011011,010011000,010011001,010011010,011000,010011011",i="0000001111,000011001000,000011001001,000001011011,000000110011,000000110100,000000110101,0000001101100,0000001101101,0000001001010,0000001001011,0000001001100,0000001001101,0000001110010,0000001110011,0000001110100,0000001110101,0000001110110,0000001110111,0000001010010,0000001010011,0000001010100,0000001010101,0000001011010,0000001011011,0000001100100,0000001100101",a="00000001000,00000001100,00000001101,000000010010,000000010011,000000010100,000000010101,000000010110,000000010111,000000011100,000000011101,000000011110,000000011111";e=e.split(","),t=t.split(","),n=n.split(","),i=i.split(","),a=a.split(",");var f={},o={};return r(f,e,0,1),r(f,n,64,64),r(f,a,1792,64),r(o,t,0,1),r(o,i,64,64),r(o,a,1792,64),[f,o]}(),r.decode._decodeG4=function(e,t,n,i,a,f,o){for(var s=r.decode,u=t<<3,l=0,d="",c=[],h=[],v=0;v<f;v++)h.push(0);h=s._makeDiff(h);for(var g=0,w=0,_=0,p=0,b=0,m=0,I="",E=0,U=8*Math.ceil(f/8);u>>>3<t+n;){_=s._findDiff(h,g+(0==g?0:1),1-b),p=s._findDiff(h,_,b);var y=0;if(1==o&&(y=e[u>>>3]>>>7-(7&u)&1),2==o&&(y=e[u>>>3]>>>(7&u)&1),u++,d+=y,"H"==I){if(null!=s._lens[b][d]){var A=s._lens[b][d];d="",l+=A,A<64&&(s._addNtimes(c,l,b),g+=l,b=1-b,l=0,0==--E&&(I=""))}}else"0001"==d&&(d="",s._addNtimes(c,p-g,b),g=p),"001"==d&&(d="",I="H",E=2),null!=s._dmap[d]&&(w=_+s._dmap[d],s._addNtimes(c,w-g,b),g=w,d="",b=1-b);c.length==f&&""==I&&(s._writeBits(c,i,8*a+m*U),b=0,m++,g=0,h=s._makeDiff(c),c=[])}},r.decode._findDiff=function(r,e,t){for(var n=0;n<r.length;n+=2)if(r[n]>=e&&r[n+1]==t)return r[n]},r.decode._makeDiff=function(r){var e=[];1==r[0]&&e.push(0,1);for(var t=1;t<r.length;t++)r[t-1]!=r[t]&&e.push(t,r[t]);return e.push(r.length,0,r.length,1),e},r.decode._decodeG3=function(e,t,n,i,a,f,o,s){for(var u=r.decode,l=t<<3,d=0,c="",h=[],v=[],g=0;g<f;g++)h.push(0);for(var w=0,_=0,p=0,b=0,m=0,I=-1,E="",U=0,y=!0,A=8*Math.ceil(f/8);l>>>3<t+n;){p=u._findDiff(v,w+(0==w?0:1),1-m),b=u._findDiff(v,p,m);var D=0;if(1==o&&(D=e[l>>>3]>>>7-(7&l)&1),2==o&&(D=e[l>>>3]>>>(7&l)&1),l++,c+=D,y){if(null!=u._lens[m][c]){var M=u._lens[m][c];c="",d+=M,M<64&&(u._addNtimes(h,d,m),m=1-m,d=0)}}else if("H"==E){if(null!=u._lens[m][c]){M=u._lens[m][c];c="",d+=M,M<64&&(u._addNtimes(h,d,m),w+=d,m=1-m,d=0,0==--U&&(E=""))}}else"0001"==c&&(c="",u._addNtimes(h,b-w,m),w=b),"001"==c&&(c="",E="H",U=2),null!=u._dmap[c]&&(_=p+u._dmap[c],u._addNtimes(h,_-w,m),w=_,c="",m=1-m);c.endsWith("000000000001")&&(I>=0&&u._writeBits(h,i,8*a+I*A),s&&(1==o&&(y=1==(e[l>>>3]>>>7-(7&l)&1)),2==o&&(y=1==(e[l>>>3]>>>(7&l)&1)),l++),c="",m=0,I++,w=0,v=u._makeDiff(h),h=[])}h.length==f&&u._writeBits(h,i,8*a+I*A)},r.decode._addNtimes=function(r,e,t){for(var n=0;n<e;n++)r.push(t)},r.decode._writeBits=function(r,e,t){for(var n=0;n<r.length;n++)e[t+n>>>3]|=r[n]<<7-(t+n&7)},r.decode._decodeLZW=r.decode._decodeLZW=(o=0,s=0,u=0,l=0,d=function(){var r=n>>>3,e=(i[r]<<16|i[r+1]<<8|i[r+2])>>>24-(7&n)-s&(1<<s)-1;return n+=s,e},c=new Uint32Array(16384),h=0,v=function(r){s=r+1,o=l+1},g=function(r){for(var e=r<<2,t=c[e+2],n=f+t-1;65535!=e;)a[n--]=c[e],e=c[e+1];f+=t},w=function(r,e){var t=o<<2,n=r<<2;c[t]=c[3+(e<<2)],c[t+1]=n,c[t+2]=c[n+2]+1,c[t+3]=c[n+3],1+ ++o==1<<s&&12!=s&&s++},function(r,e,t,s,_,p){n=e<<3,i=r,a=s,f=_;var b=e+t<<3,m=0,I=0;for(function(r){if(r!=h){h=r,l=1+(u=1<<r);for(var e=0;e<l+1;e++)c[4*e]=c[4*e+3]=e,c[4*e+1]=65535,c[4*e+2]=1}}(p),v(p);n<b&&(m=d())!=l;){if(m==u){if(v(p),(m=d())==l)break;g(m)}else m<o?(g(m),w(I,m)):(w(I,I),g(o-1));I=m}return f}),r.tags={},r._types=function(){var r=new Array(250);r.fill(0);return{basic:{main:r=r.concat([0,0,0,0,4,3,3,3,3,3,0,0,3,0,0,0,3,0,0,2,2,2,2,4,3,0,0,3,4,4,3,3,5,5,3,2,5,5,0,0,0,0,4,4,0,0,3,3,0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,0,0,2,2,3,5,5,3,0,3,3,4,4,4,3,4,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),rest:{33432:2,33434:5,33437:5,34665:4,34850:3,34853:4,34855:3,34864:3,34866:4,36864:7,36867:2,36868:2,37121:7,37377:10,37378:5,37380:10,37381:5,37383:3,37384:3,37385:3,37386:5,37510:7,37520:2,37521:2,37522:2,40960:7,40961:3,40962:4,40963:4,40965:4,41486:5,41487:5,41488:3,41985:3,41986:3,41987:3,41988:5,41989:3,41990:3,41993:3,41994:3,41995:7,41996:3,42032:2,42033:2,42034:5,42036:2,42037:2,59932:7}},gps:{main:[1,2,5,2,5,1,5,5,0,9],rest:{18:2,29:2}}}}(),r._readIFD=function(t,n,i,a,f,o){var s=t.readUshort(n,i);i+=2;var u={};o.debug&&e("   ".repeat(f),a.length-1,">>>----------------");for(var l=0;l<s;l++){var d=t.readUshort(n,i);i+=2;var c=t.readUshort(n,i);i+=2;var h=t.readUint(n,i);i+=4;var v=t.readUint(n,i);i+=4;var g=[];if(1!=c&&7!=c||(g=new Uint8Array(n.buffer,h<5?i-4:v,h)),2==c){var w=h<5?i-4:v,_=n[w],p=Math.max(0,Math.min(h-1,n.length-w));_<128||0==p?g.push(t.readASCII(n,w,p)):g=new Uint8Array(n.buffer,w,p)}if(3==c)for(var b=0;b<h;b++)g.push(t.readUshort(n,(h<3?i-4:v)+2*b));if(4==c||13==c)for(b=0;b<h;b++)g.push(t.readUint(n,(h<2?i-4:v)+4*b));if(5==c||10==c){var m=5==c?t.readUint:t.readInt;for(b=0;b<h;b++)g.push([m(n,v+8*b),m(n,v+8*b+4)])}if(8==c)for(b=0;b<h;b++)g.push(t.readShort(n,(h<3?i-4:v)+2*b));if(9==c)for(b=0;b<h;b++)g.push(t.readInt(n,(h<2?i-4:v)+4*b));if(11==c)for(b=0;b<h;b++)g.push(t.readFloat(n,v+4*b));if(12==c)for(b=0;b<h;b++)g.push(t.readDouble(n,v+8*b));if(0==h||0!=g.length){if(o.debug&&e("   ".repeat(f),d,c,r.tags[d],g),u["t"+d]=g,330==d&&u.t272&&"DSLR-A100"==u.t272[0]);else if(330==d||34665==d||34853==d||50740==d&&t.readUshort(n,t.readUint(g,0))<300||61440==d){var I=50740==d?[t.readUint(g,0)]:g,E=[];for(b=0;b<I.length;b++)r._readIFD(t,n,I[b],E,f+1,o);330==d&&(u.subIFD=E),34665==d&&(u.exifIFD=E[0]),34853==d&&(u.gpsiIFD=E[0]),50740==d&&(u.dngPrvt=E[0]),61440==d&&(u.fujiIFD=E[0])}if(37500==d&&o.parseMN){var U=g;if("Nikon"==t.readASCII(U,0,5))u.makerNote=r.decode(U.slice(10).buffer)[0];else if(t.readUshort(n,v)<300&&t.readUshort(n,v+4)<=12){var y=[];r._readIFD(t,n,v,y,f+1,o),u.makerNote=y[0]}}}else if(e(d,"unknown TIFF tag type: ",c,"num:",h),0==l)return}return a.push(u),o.debug&&e("   ".repeat(f),"<<<---------------"),i},r._writeIFD=function(e,t,n,i,a){var f=Object.keys(a),o=f.length;a.exifIFD&&o--,a.gpsiIFD&&o--,e.writeUshort(n,i,o);for(var s=(i+=2)+12*o+4,u=0;u<f.length;u++){var l=f[u];if("t34665"!=l&&"t34853"!=l){"exifIFD"==l&&(l="t34665"),"gpsiIFD"==l&&(l="t34853");var d=parseInt(l.slice(1)),c=t.main[d];if(null==c&&(c=t.rest[d]),null==c||0==c)throw new Error("unknown type of tag: "+d);var h=a[l];if(34665==d)h=[s],s=r._writeIFD(e,t,n,s,a.exifIFD)[1];if(34853==d)h=[s],s=r._writeIFD(e,r._types.gps,n,s,a.gpsiIFD)[1];2==c&&(h=h[0]+"\0");var v=h.length;e.writeUshort(n,i,d),i+=2,e.writeUshort(n,i,c),i+=2,e.writeUint(n,i,v);var g=[-1,1,1,2,4,8,0,1,0,4,8,0,8][c]*v,w=i+=4;if(g>4&&(e.writeUint(n,i,s),w=s),1==c||7==c)for(var _=0;_<v;_++)n[w+_]=h[_];else if(2==c)e.writeASCII(n,w,h);else if(3==c)for(_=0;_<v;_++)e.writeUshort(n,w+2*_,h[_]);else if(4==c)for(_=0;_<v;_++)e.writeUint(n,w+4*_,h[_]);else if(5==c||10==c){var p=5==c?e.writeUint:e.writeInt;for(_=0;_<v;_++){var b=h[_],m=b[0],I=b[1];if(null==m)throw"e";p(n,w+8*_,m),p(n,w+8*_+4,I)}}else if(9==c)for(_=0;_<v;_++)e.writeInt(n,w+4*_,h[_]);else{if(12!=c)throw c;for(_=0;_<v;_++)e.writeDouble(n,w+8*_,h[_])}g>4&&(s+=g+=1&g),i+=4}}return[i,s]},r.toRGBA8=function(r,t){var n=r.width,i=r.height,a=n*i,f=4*a,o=r.data,s=new Uint8Array(4*a),u=r.t262?r.t262[0]:2,l=r.t258?Math.min(32,r.t258[0]):1;if(null==r.t262&&1==l&&(u=0),0==u)for(var d=Math.ceil(l*n/8),c=0;c<i;c++){var h=c*d,v=c*n;if(1==l)for(var g=0;g<n;g++){var w=v+g<<2,_=o[h+(g>>3)]>>7-(7&g)&1;s[w]=s[w+1]=s[w+2]=255*(1-_),s[w+3]=255}if(4==l)for(g=0;g<n;g++){w=v+g<<2,_=o[h+(g>>1)]>>4-4*(1&g)&15;s[w]=s[w+1]=s[w+2]=17*(15-_),s[w+3]=255}if(8==l)for(g=0;g<n;g++){w=v+g<<2,_=o[h+g];s[w]=s[w+1]=s[w+2]=255-_,s[w+3]=255}}else if(1==u){var p=r.t258?r.t258.length:1;d=Math.ceil(p*l*n/8);null==t&&(t=1/256);for(c=0;c<i;c++){h=c*d,v=c*n;if(1==l)for(g=0;g<n;g++){w=v+g<<2,_=o[h+(g>>3)]>>7-(7&g)&1;s[w]=s[w+1]=s[w+2]=255*_,s[w+3]=255}if(2==l)for(g=0;g<n;g++){w=v+g<<2,_=o[h+(g>>2)]>>6-2*(3&g)&3;s[w]=s[w+1]=s[w+2]=85*_,s[w+3]=255}if(8==l)for(g=0;g<n;g++){w=v+g<<2,_=o[h+g*p];s[w]=s[w+1]=s[w+2]=_,s[w+3]=255}if(16==l)for(g=0;g<n;g++){w=v+g<<2;var b=h+2*g;_=o[b+1]<<8|o[b];s[w]=s[w+1]=s[w+2]=Math.min(255,~~(_*t)),s[w+3]=255}}}else if(2==u){p=r.t258?r.t258.length:3;if(8==l){if(4==p)for(g=0;g<f;g++)s[g]=o[g];if(3==p)for(g=0;g<a;g++){var m=3*g;s[w=g<<2]=o[m],s[w+1]=o[m+1],s[w+2]=o[m+2],s[w+3]=255}if(5==p)for(g=0;g<a;g++){m=5*g;s[w=g<<2]=o[m],s[w+1]=o[m+1],s[w+2]=o[m+2],s[w+3]=o[m+3]}}else{if(4==p)for(g=0;g<a;g++){m=8*g+1;s[w=g<<2]=o[m],s[w+1]=o[m+2],s[w+2]=o[m+4],s[w+3]=o[m+6]}if(3==p)for(g=0;g<a;g++){m=6*g+1;s[w=g<<2]=o[m],s[w+1]=o[m+2],s[w+2]=o[m+4],s[w+3]=255}}}else if(3==u){var I=r.t320,E=(p=r.t258?r.t258.length:1,d=Math.ceil(p*l*n/8),1<<l);for(c=0;c<i;c++)for(var U=0;U<n;U++){w=(g=c*n+U)<<2;var y=0,A=c*d;if(1==l)y=o[A+(U>>>3)]>>>7-(7&U)&1;else if(2==l)y=o[A+(U>>>2)]>>>6-2*(3&U)&3;else if(4==l)y=o[A+(U>>>1)]>>>4-4*(1&U)&15;else{if(8!=l)throw l;y=o[A+U*p]}s[w]=I[y]>>8,s[w+1]=I[E+y]>>8,s[w+2]=I[E+E+y]>>8,s[w+3]=255}}else if(5==u){var D=(p=r.t258?r.t258.length:4)>4?1:0;for(g=0;g<a;g++){w=g<<2;var M=255-o[G=g*p],B=255-o[G+1],k=255-o[G+2],F=(255-o[G+3])*(1/255);s[w]=~~(M*F+.5),s[w+1]=~~(B*F+.5),s[w+2]=~~(k*F+.5),s[w+3]=255*(1-D)+o[G+4]*D}}else if(6==u&&r.t278){var x=r.t278[0];for(c=0;c<i;c+=x){g=c*n;for(var P=x*n,S=0;S<P;S++){w=4*(g+S),k=o[(G=3*g+4*(S>>>1))+(1&S)];var G,L=o[G+2]-128,N=o[G+3]-128,C=k+((N>>2)+(N>>3)+(N>>5)),J=k-((L>>2)+(L>>4)+(L>>5))-((N>>1)+(N>>3)+(N>>4)+(N>>5)),O=k+(L+(L>>1)+(L>>2)+(L>>6));s[w]=Math.max(0,Math.min(255,C)),s[w+1]=Math.max(0,Math.min(255,J)),s[w+2]=Math.max(0,Math.min(255,O)),s[w+3]=255}}}else e("Unknown Photometric interpretation: "+u);return s},r.replaceIMG=function(e){null==e&&(e=document.getElementsByTagName("img"));for(var t=["tif","tiff","dng","cr2","nef"],n=0;n<e.length;n++){var i=e[n],a=i.getAttribute("src");if(null!=a){var f=a.split(".").pop().toLowerCase();if(-1!=t.indexOf(f)){var o=new XMLHttpRequest;r._xhrs.push(o),r._imgs.push(i),o.open("GET",a),o.responseType="arraybuffer",o.onload=r._imgLoaded,o.send()}}}},r._xhrs=[],r._imgs=[],r._imgLoaded=function(e){var t=r._xhrs.indexOf(e.target),n=r._imgs[t];r._xhrs.splice(t,1),r._imgs.splice(t,1),n.setAttribute("src",r.bufferToURI(e.target.response))},r.bufferToURI=function(e){var t=r.decode(e),n=t,i=0,a=n[0];t[0].subIFD&&(n=n.concat(t[0].subIFD));for(var f=0;f<n.length;f++){var o=n[f];if(!(null==o.t258||o.t258.length<3)){var s=o.t256*o.t257;s>i&&(i=s,a=o)}}r.decodeImage(e,a,t);var u=r.toRGBA8(a),l=a.width,d=a.height,c=document.createElement("canvas");c.width=l,c.height=d;var h=c.getContext("2d"),v=new ImageData(new Uint8ClampedArray(u.buffer),l,d);return h.putImageData(v,0,0),c.toDataURL()},r._binBE={nextZero:function(r,e){for(;0!=r[e];)e++;return e},readUshort:function(r,e){return r[e]<<8|r[e+1]},readShort:function(e,t){var n=r._binBE.ui8;return n[0]=e[t+1],n[1]=e[t+0],r._binBE.i16[0]},readInt:function(e,t){var n=r._binBE.ui8;return n[0]=e[t+3],n[1]=e[t+2],n[2]=e[t+1],n[3]=e[t+0],r._binBE.i32[0]},readUint:function(e,t){var n=r._binBE.ui8;return n[0]=e[t+3],n[1]=e[t+2],n[2]=e[t+1],n[3]=e[t+0],r._binBE.ui32[0]},readASCII:function(r,e,t){for(var n="",i=0;i<t;i++)n+=String.fromCharCode(r[e+i]);return n},readFloat:function(e,t){for(var n=r._binBE.ui8,i=0;i<4;i++)n[i]=e[t+3-i];return r._binBE.fl32[0]},readDouble:function(e,t){for(var n=r._binBE.ui8,i=0;i<8;i++)n[i]=e[t+7-i];return r._binBE.fl64[0]},writeUshort:function(r,e,t){r[e]=t>>8&255,r[e+1]=255&t},writeInt:function(e,t,n){var i=r._binBE.ui8;r._binBE.i32[0]=n,e[t+3]=i[0],e[t+2]=i[1],e[t+1]=i[2],e[t+0]=i[3]},writeUint:function(r,e,t){r[e]=t>>24&255,r[e+1]=t>>16&255,r[e+2]=t>>8&255,r[e+3]=t>>0&255},writeASCII:function(r,e,t){for(var n=0;n<t.length;n++)r[e+n]=t.charCodeAt(n)},writeDouble:function(e,t,n){r._binBE.fl64[0]=n;for(var i=0;i<8;i++)e[t+i]=r._binBE.ui8[7-i]}},r._binBE.ui8=new Uint8Array(8),r._binBE.i16=new Int16Array(r._binBE.ui8.buffer),r._binBE.i32=new Int32Array(r._binBE.ui8.buffer),r._binBE.ui32=new Uint32Array(r._binBE.ui8.buffer),r._binBE.fl32=new Float32Array(r._binBE.ui8.buffer),r._binBE.fl64=new Float64Array(r._binBE.ui8.buffer),r._binLE={nextZero:r._binBE.nextZero,readUshort:function(r,e){return r[e+1]<<8|r[e]},readShort:function(e,t){var n=r._binBE.ui8;return n[0]=e[t+0],n[1]=e[t+1],r._binBE.i16[0]},readInt:function(e,t){var n=r._binBE.ui8;return n[0]=e[t+0],n[1]=e[t+1],n[2]=e[t+2],n[3]=e[t+3],r._binBE.i32[0]},readUint:function(e,t){var n=r._binBE.ui8;return n[0]=e[t+0],n[1]=e[t+1],n[2]=e[t+2],n[3]=e[t+3],r._binBE.ui32[0]},readASCII:r._binBE.readASCII,readFloat:function(e,t){for(var n=r._binBE.ui8,i=0;i<4;i++)n[i]=e[t+i];return r._binBE.fl32[0]},readDouble:function(e,t){for(var n=r._binBE.ui8,i=0;i<8;i++)n[i]=e[t+i];return r._binBE.fl64[0]},writeUshort:function(r,e,t){r[e]=255&t,r[e+1]=t>>8&255},writeInt:function(e,t,n){var i=r._binBE.ui8;r._binBE.i32[0]=n,e[t+0]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3]},writeUint:function(r,e,t){r[e]=t>>>0&255,r[e+1]=t>>>8&255,r[e+2]=t>>>16&255,r[e+3]=t>>>24&255},writeASCII:r._binBE.writeASCII},r._copyTile=function(r,e,t,n,i,a,f,o){for(var s=Math.min(e,i-f),u=Math.min(t,a-o),l=0;l<u;l++)for(var d=(o+l)*i+f,c=l*e,h=0;h<s;h++)n[d+h]=r[c+h]},r.LosslessJpegDecode=function(){var r,e,t,n,i,a,f,o,s,u;function l(){return r[e++]}function d(){return r[e++]<<8|r[e++]}function c(){for(var r=l(),e=[0,0,0,255],t=[],n=0;n<16;n++)t[n]=l();for(n=0;n<16;n++)for(var i=0;i<t[n];i++){e[h(e,0,n+1,1)+3]=l()}var a=new Uint8Array(256);s[r]=[new Uint8Array(e),a];for(n=0;n<256;n++){for(var f=8,o=n,u=0;255==e[u+3]&&0!=f;)u=e[u+(o>>--f&1)];a[n]=u}}function h(r,e,t,n){if(255!=r[e+3])return 0;if(0==t)return e;for(var i=0;i<2;i++){0==r[e+i]&&(r[e+i]=r.length,r.push(0,0,n,255));var a=h(r,r[e+i],t-1,n+1);if(0!=a)return a}return 0}function v(r){for(var e=r.e,t=r.c;e<25&&r.a<r.d;){var n=r.data[r.a++];r.b||(r.a+=n+1>>>8),t=t<<8|n,e+=8}r.e=e,r.c=t}function g(r,e){return e.e<r&&v(e),e.c>>(e.e-=r)&65535>>16-r}function w(r,e){var t=r[0],n=0,i=255;e.e<16&&v(e);var a=e.c>>e.e-8&255;for(i=t[(n=r[1][a])+3],e.e-=t[n+2];255==i;)i=t[(n=t[n+(e.c>>--e.e&1)])+3];return i}function _(r,e){return r<32768>>16-e&&(r+=1-(1<<e)),r}function p(r,e){var t=w(r,e);return 0==t?0:16==t?-32768:_(g(t,e),t)}function b(r,e){return _(g(r,e),r)}return function(h){if(r=h,e=0,s=[],u=[],65496!=d())throw"e";for(;;){var v=d();if(65535!=v){var g=d();if(65475==v){t=l(),n=d(),i=d(),a=l(),o=[];for(var _=0;_<a;_++){var m=l();if(17!=l())throw"e";if(0!=l())throw"e";o[m]=_}}else if(65476==v)for(var I=e+g-2;e<I;)c();else{if(65498==v){e++;for(_=0;_<a;_++){var E=l();u[o[E]]=s[l()>>>4]}f=l(),e+=2;break}e+=g-2}}else e--}var U=t>8?Uint16Array:Uint8Array,y=i*a,A=new U(n*y),D={e:0,c:0,b:8==f,a:e,data:r,d:r.length};return D.b?function(t,i,a){for(var f=r.length-e,o=0;o<f;o+=4){var s=r[e+o];r[e+o]=r[e+o+3],r[e+o+3]=s,s=r[e+o+1],r[e+o+1]=r[e+o+2],r[e+o+2]=s}for(var l=u[0],d=0;d<n;d++)for(var c=32768,h=32768,v=0;v<i;v+=2){var g=w(l,a),_=w(l,a);0!=g&&(c+=b(g,a)),0!=_&&(h+=b(_,a)),t[d*i+v]=65535&c,t[d*i+v+1]=65535&h}}(A,y,D):function(r,e,i){for(var o=a,s=n,l=f,d=u,c=0;c<o;c++)r[c]=p(d[c],i)+(1<<t-1);for(var h=o;h<e;h+=o)for(c=0;c<o;c++)r[h+c]=p(d[c],i)+r[h+c-o];for(var v=e,g=1;g<s;g++){for(c=0;c<o;c++)r[v+c]=p(d[c],i)+r[v+c-e];for(h=o;h<e;h+=o)for(c=0;c<o;c++){var w=v+h+c,_=r[w-o],b=0;if(0==l)b=0;else if(1==l)b=_;else if(2==l)b=r[w-e];else if(3==l)b=r[w-e-o];else if(4==l)b=_+(r[w-e]-r[w-e-o]);else if(5==l)b=_+(r[w-e]-r[w-e-o]>>>1);else if(6==l)b=r[w-e]+(_-r[w-e-o]>>>1);else{if(7!=l)throw l;b=_+r[w-e]>>>1}r[w]=b+p(d[c],i)}v+=e}}(A,y,D),A}}(),function(){var e=2,t=3,n=4,i=5,a=6,f=7,o=8,s=9,u=10,l=11,d=12,c=13,h=14,v=15,g=16,w=17;function _(r){var e={u:new Int8Array(2<<r.a)};return function(r,e,t){var n=[e,3*e+18,5*e+67,7*e+276,t];r.k=e,r.i=(n[4]+2*e)/(2*e+1)+1|0,r.b=Math.ceil(Math.log2(r.i)),r.e=9,function(r,e){for(var t=-e[4],n=0;t<=e[4];n++,t++)r[n]=t<=-e[3]?-4:t<=-e[2]?-3:t<=-e[1]?-2:t<-e[0]?-1:t<=e[0]?0:t<e[1]?1:t<e[2]?2:t<e[3]?3:4}(r.u,n)}(e,0,r.j),e}function p(r){for(var e=[[],[],[]],t=Math.max(2,r.i+32>>>6),n=0;n<3;n++)for(var i=0;i<41;i++)e[n][i]=[t,1];return e}function b(r,e){var t=0,n=8-r.s;r.l,r.s;if(e){if(e>=n)do{t<<=n,e-=n,t|=r[r.l]&(1<<n)-1,r.l++,n=8}while(e>=8);e&&(t<<=e,n-=e,t|=r[r.l]>>>n&(1<<e)-1),r.s=8-n}return t}function m(r,e,t,n,i,a,f,o){null==o&&(o=0);var s,u,l,d,c,h,v=a+1,g=v%2,w=0,_=n[i],p=n[i-1],m=n[i-2][v],I=p[v-1],E=p[v],U=p[v+1],y=_[v-1],A=_[v+1],D=Math.abs;if(g&&(l=D(U-E),d=D(m-E),c=D(I-E)),g){if(h=(h=l>c&&d<l?m+I:l<c&&d<c?m+U:U+I)+2*E>>>2,o)return void(_[v]=h);s=e.e*e.u[r.j+E-m]+e.u[r.j+I-E]}else h=E>I&&E>U||E<I&&E<U?A+y+2*E>>>2:y+A>>>1,s=e.e*e.u[r.j+E-I]+e.u[r.j+I-y];u=D(s);var M=function(r){for(var e=-1,t=0;!t;e++)t=r[r.l]>>>7-r.s&1,r.s++,r.s&=7,r.s||r.l++;return e}(t);if(M<r.w-e.b-1){var B=function(r,e){var t=0;if(e<r)for(;t<=14&&e<<++t<r;);return t}(f[u][0],f[u][1]);w=b(t,B)+(M<<B)}else w=b(t,e.b)+1;w=1&w?-1-(w>>>1):w>>>1,f[u][0]+=D(w),f[u][1]==r.q&&(f[u][0]>>>=1,f[u][1]>>>=1),f[u][1]++,h=s<0?h-w:h+w,r.f&&(h<0?h+=e.i:h>r.j&&(h-=e.i)),_[v]=h>=0?Math.min(h,r.j):0}function I(r,e,t){for(var n=r[0].length,i=e;i<=t;i++)r[i][0]=r[i-1][1],r[i][n-1]=r[i-1][n-2]}function E(r){I(r,f,d),I(r,e,n),I(r,v,w)}function U(r,e,t,i,a,f,o,s,u,l,d,h,v){for(var g=0,w=1,_=a<c&&a>n;w<r.c;)g<r.c&&(m(r,e,t,i,a,g,o[u],r.o&&(_&&l||!_&&(d||(g&h)==v))),m(r,e,t,i,f,g,o[u],r.o&&(!_&&l||_&&(d||(g&h)==v))),g+=2),g>8&&(m(r,e,t,i,a,w,s[u]),m(r,e,t,i,f,w,s[u]),w+=2);E(i)}function y(r,i,a,c,h,_){U(r,i,a,c,e,f,h,_,0,0,1,0,8),U(r,i,a,c,o,v,h,_,1,0,1,0,8),U(r,i,a,c,t,s,h,_,2,1,0,3,0),U(r,i,a,c,u,g,h,_,0,0,0,3,2),U(r,i,a,c,n,l,h,_,1,0,0,3,2),U(r,i,a,c,d,w,h,_,2,1,0,3,0)}function A(r,t,n,i,a,o){var s=o.length,u=r.n;a+1==r.v&&(u=r.h-a*r.n);for(var l=6*r.h*i+a*r.n,d=0;d<6;d++){for(var c=0;c<u;c++){var h,g=o[d%s][c%s];h=0==g?e+(d>>>1):2==g?v+(d>>>1):f+d;var w=r.o?(2*c/3&2147483646|c%3&1)+(c%3>>>1):c>>>1;t[l+c]=n[h][w+1]}l+=r.h}}r._decompressRAF=function(f,o){var s=function(e){var t=r._binBE.readUshort,n={m:t(e,0),f:e[2],r:e[3],a:e[4],d:t(e,5),t:t(e,7),h:t(e,9),n:t(e,11),v:e[13],p:t(e,14)};if(18771!=n.m||n.f>1||n.d<6||n.d%6||n.h<768||n.h%24||768!=n.n||n.t<n.n||n.t%n.n||n.t-n.h>=n.n||n.v>16||n.v!=n.t/n.n||n.v!=Math.ceil(n.h/n.n)||n.p!=n.d/6||12!=n.a&&14!=n.a&&16!=n.a||16!=n.r&&0!=n.r)throw"Invalid data";if(0==n.f)throw"Not implemented. We need this file!";return n.o=16==n.r,n.c=0|(n.o?2*n.n/3:n.n>>>1),n.g=n.c+2,n.q=64,n.j=(1<<n.a)-1,n.w=4*n.a,n}(f),u=function(e,t){for(var n=new Array(t.v),i=16+4*t.v,a=0,f=16;a<t.v;f+=4){var o=r._binBE.readUint(e,f);n[a]=e.slice(i,i+o),n[a].l=0,n[a].s=0,i+=o,a++}if(i!=e.length)throw"Invalid data";return n}(f,s),v=_(s),b=new Int16Array(s.h*s.d);null==o&&(o=s.o?[[1,1,0,1,1,2],[1,1,2,1,1,0],[2,0,1,0,2,1],[1,1,2,1,1,0],[1,1,0,1,1,2],[0,2,1,2,0,1]]:[[0,1],[3,2]]);for(var m=[[0,t],[1,n],[i,l],[a,d],[c,g],[h,w]],I=[],U=0;U<18;U++)I[U]=new Uint16Array(s.g);for(var D=0;D<s.v;D++){var M=p(v),B=p(v);for(U=0;U<18;U++)for(var k=0;k<s.g;k++)I[U][k]=0;for(var F=0;F<s.p;F++){y(s,v,u[D],I,M,B);for(U=0;U<6;U++)for(k=0;k<s.g;k++)I[m[U][0]][k]=I[m[U][1]][k];A(s,b,I,F,D,o);for(U=e;U<18;U++)if(-1==[i,a,c,h].indexOf(U))for(k=0;k<s.g;k++)I[U][k]=0;E(I)}}return b}}()}(r,"function"==typeof require?require("pako"):self.pako)}();