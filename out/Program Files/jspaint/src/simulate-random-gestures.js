(e=>{let t=4;const o=(e=1,o=0)=>{t=(9301*t+49297)%233280;return o+t/233280*(e-o)};let n,a;e.stopSimulatingGestures&&e.stopSimulatingGestures(),e.simulatingGestures=!1;let s=e=>e[~~(o()*e.length)],i=()=>$(".menu-button.active").length>0,r=new Image;r.src="images/cursors/default.png";const l=$(r).addClass("user-cursor");l.css({position:"absolute",left:0,top:0,opacity:0,zIndex:5,pointerEvents:"none",transition:"opacity 0.5s"}),e.simulateRandomGesture=(e,{shift:t,shiftToggleChance:a=.01,secondary:s,secondaryToggleChance:r,target:c=main_canvas})=>{let u=c.getBoundingClientRect(),d=$canvas_area[0].getBoundingClientRect(),g=Math.max(u.left,d.left),h=Math.min(u.right,d.right),m=Math.max(u.top,d.top),p=Math.min(u.bottom,d.bottom),y=g+o()*(h-g),f=m+o()*(p-m);l.appendTo($app);let w=(e,o)=>{if(i())return;const n=o.x,a=o.y,r=document.elementFromPoint(n,a),u=!(e.match(/move/)||r&&r.closest(".canvas-area"));if(l.css({display:"block",position:"absolute",left:n,top:a,opacity:u?.5:1}),u)return;let d=new $.Event(e,{view:window,bubbles:!0,cancelable:!0,clientX:n,clientY:a,screenX:n,screenY:a,offsetX:o.x,offsetY:o.y,button:s?2:0,buttons:s?2:1,shiftKey:t});$(c).trigger(d)},v=0,b=[];for(let e=0;e<5;e+=1)b.push({rx:o()*Math.min(d.width,d.height)/2/5,ry:o()*Math.min(d.width,d.height)/2/5,angularFactor:5*o()-o(),angularOffset:5*o()-o()});let x=e=>{let t={x:0,y:0};for(let o=0;o<b.length;o+=1){let{rx:n,ry:a,angularFactor:s,angularOffset:i}=b[o];t.x+=Math.sin(2*Math.PI*(e/2*s+i))*n,t.y+=Math.cos(2*Math.PI*(e/2*s+i))*a}return t},T=e=>{let t=x(e),o=x(0);return t.x-=o.x,t.y-=o.y,t.x+=y,t.y+=f,t};w("pointerenter",T(v)),w("pointerdown",T(v));let G=()=>{v+=.02,o()<a&&(t=!t),o()<r&&(s=!s),v>1?(w("pointerup",T(v)),l.remove(),e&&e()):(w("pointermove",T(v)),n=setTimeout(G,10))};w("pointerleave",T(v)),G()},e.simulateRandomGesturesPeriodically=()=>{e.simulatingGestures=!0,t=null!=window.drawRandomlySeed?window.drawRandomlySeed:~~(5e6*Math.random()),window.console&&console.log("Using seed:",t),window.console&&console.log("Note: Seeds are not guaranteed to work with different versions of the app, but within the same version it should produce the same results given the same starting document & other state & NO interference... except for airbrush randomness"),window.console&&console.log(`To use this seed:\n\n\t\t\twindow.drawRandomlySeed = ${t};\n\t\t\tdocument.body.style.width = "${getComputedStyle(document.body).width}";\n\t\t\tdocument.body.style.height = "${getComputedStyle(document.body).height}";\n\t\t\tsimulateRandomGesturesPeriodically();\n\t\t\tdelete window.drawRandomlySeed;\n\n\t\t`);let n=!1,r=!1;$canvas_area.scrollTop($canvas_area.width()*o()),$canvas_area.scrollLeft($canvas_area.height()*o());let l=t=>{e.simulateRandomGesture(t,{shift:n,shiftToggleChance:.001,secondary:r,secondaryToggleChance:.001})},c=()=>{if($status_text.text("Press Esc to stop drawing randomly."),i())a=setTimeout(c,50);else{if(o()<.1&&(n=!n),o()<.1&&(r=!r),o()<.5){let e=o()<.8;$(s($(".tool, tool-button"))).trigger($.Event("click",{shiftKey:e}))}if(o()<.8&&$(s($(".tool-options *"))).trigger("click"),o()<.5){let e=o()<.5;const t=s($(".swatch, .color-button"));$(t).trigger($.Event("pointerdown",{button:e?2:0})).trigger($.Event("click",{button:e?2:0})).trigger($.Event("pointerup",{button:e?2:0}))}if(o()<.2){let e=700*(2*o()-1);o()<.5?$canvas_area.scrollTop($canvas_area.scrollTop()+e):$canvas_area.scrollLeft($canvas_area.scrollLeft()+e)}a=setTimeout((()=>{l((()=>{selection&&o()<.8?e.simulateRandomGesture(c,{shift:n,shiftToggleChance:.001,secondary:r,secondaryToggleChance:.001,target:selection.canvas}):c()}))}),500)}};l(c)},e.stopSimulatingGestures=()=>{e.simulatingGestures&&(clearTimeout(n),clearTimeout(a),e.simulatingGestures=!1,$status_text.default(),l.remove(),cancel()),document.body.style.width="",document.body.style.height=""}})(window);