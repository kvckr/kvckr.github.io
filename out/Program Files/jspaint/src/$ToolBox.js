(e=>{let t;let o=!1;try{o="true"===localStorage.dev_theme_tool_icons}catch(e){}if(o){let e=0;$G.on("session-update",(()=>{e+=1;const o=e;main_canvas.toBlob((s=>{o===e&&(URL.revokeObjectURL(t),t=URL.createObjectURL(s),$G.triggerHandler("theme-load"))}))}))}e.$ToolBox=function(e,o){const s=$(E("div")).addClass("tools"),l=$(E("div")).addClass("tool-options");let n=!1;s.on("pointerleave",(()=>{n=!1,$status_text.default()}));const a=$($.map(e,((e,o)=>{const l=$(E("div")).addClass("tool");l.appendTo(s),e.$button=l,l.attr("title",e.name);const a=$(E("span")).addClass("tool-icon");a.appendTo(l);const c=()=>{const e=!t&&(window.devicePixelRatio>=3||window.devicePixelRatio%1!=0||$("body").hasClass("eye-gaze-mode"));a.css({display:"block",position:"absolute",left:4,top:4,width:16,height:16,backgroundImage:t?`url(${t})`:"","--icon-index":o}),a.toggleClass("use-svg",e)};return c(),$G.on("theme-load resize",c),l.on("click",(t=>{t.shiftKey||t.ctrlKey?select_tool(e,!0):selected_tool===e&&e.deselect?select_tools(return_to_tools):select_tool(e)})),l.on("pointerenter",(()=>{const t=()=>{n=!0,$status_text.text(e.description)};if(n)t();else{const e=setTimeout(t,300);l.on("pointerleave",(()=>{clearTimeout(e)}))}})),l[0]}))),c=$Component(o?"Extra Tools":localize("Tools"),o?"tools-component extra-tools-component":"tools-component","tall",s.add(l));return c.appendTo("rtl"===get_direction()?$right:$left),c.update_selected_tool=()=>{a.removeClass("selected"),selected_tools.forEach((e=>{e.$button.addClass("selected")})),l.children().detach(),l.append(selected_tool.$options),l.children().trigger("update"),$canvas.css({cursor:make_css_cursor(...selected_tool.cursor)})},c.update_selected_tool(),o&&c.height(80),c}})(window);